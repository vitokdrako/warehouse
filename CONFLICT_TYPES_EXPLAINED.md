# üìã –¢–∏–ø–∏ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ —Ç–æ–≤–∞—Ä—ñ–≤

## –û–≥–ª—è–¥

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∞—î 4 —Ç–∏–ø–∏ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤ –ø—Ä–∏ –ø–µ—Ä–µ–≤—ñ—Ä—Ü—ñ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ —Ç–æ–≤–∞—Ä—ñ–≤ –¥–ª—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.

---

## üî¥ 1. –ù–µ–º–∞—î –Ω–∞ —Å–∫–ª–∞–¥—ñ (Out of Stock)

**–£–º–æ–≤–∞:** `total_quantity = 0`

**–†—ñ–≤–µ–Ω—å:** ‚ùå ERROR

**–û–ø–∏—Å:** –¢–æ–≤–∞—Ä –≤–∑–∞–≥–∞–ª—ñ –≤—ñ–¥—Å—É—Ç–Ω—ñ–π –Ω–∞ —Å–∫–ª–∞–¥—ñ. –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å = 0.

**–ü—Ä–∏–∫–ª–∞–¥:**
```
–¢–æ–≤–∞—Ä: –°—Ç—ñ–ª–µ—Ü—å ME0002
–í—Å—å–æ–≥–æ: 0
–ó–∞–ø–∏—Ç–∞–Ω–æ: 3
‚Üí –ö–æ–Ω—Ñ–ª—ñ–∫—Ç: "–ù–µ–º–∞—î –Ω–∞ —Å–∫–ª–∞–¥—ñ"
```

**–©–æ —Ä–æ–±–∏—Ç–∏:**
- –ó–∞–º–æ–≤–∏—Ç–∏ —Ç–æ–≤–∞—Ä —É –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞
- –í–∏–≥–æ—Ç–æ–≤–∏—Ç–∏/–∫—É–ø–∏—Ç–∏ –Ω–æ–≤—ñ –æ–¥–∏–Ω–∏—Ü—ñ
- –ê–±–æ –∑–Ω—è—Ç–∏ —Ç–æ–≤–∞—Ä –∑ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è

---

## ‚ùå 2. –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ (Insufficient / Date Conflict)

**–£–º–æ–≤–∞:** `available_quantity < requested_quantity`

**–†—ñ–≤–µ–Ω—å:** ‚ùå ERROR

**–û–ø–∏—Å:** –¢–æ–≤–∞—Ä —î –Ω–∞ —Å–∫–ª–∞–¥—ñ, –∞–ª–µ –Ω–∞ –∑–∞–ø–∏—Ç—É–≤–∞–Ω—ñ –¥–∞—Ç–∏ –≤–∂–µ –∑–∞—Ä–µ–∑–µ—Ä–≤–æ–≤–∞–Ω–∏–π —ñ–Ω—à–∏–º–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è–º–∏. –î–∞—Ç–∏ –ø–µ—Ä–µ—Ç–∏–Ω–∞—é—Ç—å—Å—è.

**–ü—Ä–∏–∫–ª–∞–¥:**
```
–¢–æ–≤–∞—Ä: –ü—ñ–¥–≤—ñ—Å D8602
–í—Å—å–æ–≥–æ: 2
–ó–∞—Ä–µ–∑–µ—Ä–≤–æ–≤–∞–Ω–æ: 2 (–∑–∞–º–æ–≤–ª–µ–Ω–Ω—è OC-6995, –¥–∞—Ç–∏ 23.11-25.11)
–î–æ—Å—Ç—É–ø–Ω–æ: 0
–ó–∞–ø–∏—Ç–∞–Ω–æ: 1
–î–∞—Ç–∏ –∑–∞–ø–∏—Ç—É: 24.11-26.11 (–ü–ï–†–ï–¢–ò–ù–ê–Æ–¢–¨–°–Ø!)
‚Üí –ö–æ–Ω—Ñ–ª—ñ–∫—Ç: "–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ"
```

**–©–æ —Ä–æ–±–∏—Ç–∏:**
- –ó–º—ñ–Ω–∏—Ç–∏ –¥–∞—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- –ó–º–µ–Ω—à–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å
- –ß–µ–∫–∞—Ç–∏ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –∑ —ñ–Ω—à–∏—Ö –∑–∞–º–æ–≤–ª–µ–Ω—å
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å–ø–∏—Å–æ–∫ –∑–∞–º–æ–≤–ª–µ–Ω—å —â–æ –±–ª–æ–∫—É—é—Ç—å —Ç–æ–≤–∞—Ä

---

## ‚ö†Ô∏è 3. –©—ñ–ª—å–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫ (Tight Schedule)

**–£–º–æ–≤–∞:** `is_available = true` AND `has_tight_schedule = true`

**–†—ñ–≤–µ–Ω—å:** ‚ö†Ô∏è WARNING

**–û–ø–∏—Å:** –¢–æ–≤–∞—Ä –¥–æ—Å—Ç—É–ø–Ω–∏–π –ø–æ –¥–∞—Ç–∞—Ö, –∞–ª–µ —î –†–ò–ó–ò–ö –∑–∞—Ç—Ä–∏–º–∫–∏. –°–∏—Ç—É–∞—Ü—ñ—ó:
- –ú—ñ–∂ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è–º –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è —ñ –≤–∏–¥–∞—á–µ—é –Ω–æ–≤–æ–≥–æ **0-1 –¥–µ–Ω—å**
- –Ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –∑—ñ —Å—Ç–∞—Ç—É—Å–æ–º `issued` –∞–±–æ `on_rent` –ø–æ–±–ª–∏–∑—É (–º–æ–∂–µ –Ω–µ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –≤—á–∞—Å–Ω–æ)

**–ü—Ä–∏–∫–ª–∞–¥:**
```
–¢–æ–≤–∞—Ä: –ü—ñ–¥–≤—ñ—Å D8602
–í—Å—å–æ–≥–æ: 2
–ó–∞—Ä–µ–∑–µ—Ä–≤–æ–≤–∞–Ω–æ: 1 (–∑–∞–º–æ–≤–ª–µ–Ω–Ω—è OC-6996, –¥–∞—Ç–∏ 23.11, status: issued)
–î–æ—Å—Ç—É–ø–Ω–æ: 1
–ó–∞–ø–∏—Ç–∞–Ω–æ: 1
–î–∞—Ç–∏ –∑–∞–ø–∏—Ç—É: 24.11-25.11

Gap: 1 –¥–µ–Ω—å –º—ñ–∂ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è–º (23.11) —ñ –≤–∏–¥–∞—á–µ—é (24.11)
‚Üí –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è: "–©—ñ–ª—å–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫"
‚Üí –†–∏–∑–∏–∫: –ö–ª—ñ—î–Ω—Ç –º–æ–∂–µ –Ω–µ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –≤—á–∞—Å–Ω–æ, —Ç–æ–≤–∞—Ä –º–æ–∂–µ –ø–æ—Ç—Ä–µ–±—É–≤–∞—Ç–∏ —Ä–µ—Å—Ç–∞–≤—Ä–∞—Ü—ñ—ó
```

**–©–æ —Ä–æ–±–∏—Ç–∏:**
- **–ü—Ä–∏–π–Ω—è—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è**, –∞–ª–µ –±—É—Ç–∏ –≥–æ—Ç–æ–≤–∏–º –¥–æ —Ä–∏–∑–∏–∫—É
- –ó–≤'—è–∑–∞—Ç–∏—Å—è –∑ –∫–ª—ñ—î–Ω—Ç–æ–º –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –¥–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è
- –ú–∞—Ç–∏ –∑–∞–ø–∞—Å–Ω–∏–π –ø–ª–∞–Ω
- –î–æ–¥–∞—Ç–∏ 1-2 –¥–Ω—ñ –±—É—Ñ–µ—Ä –º—ñ–∂ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è–º–∏

---

## üì¶ 4. –ú–∞–ª–∏–π –∑–∞–ø–∞—Å (Low Stock)

**–£–º–æ–≤–∞:** `available_quantity < total_quantity * 0.2` (–º–µ–Ω—à–µ 20%)

**–†—ñ–≤–µ–Ω—å:** ‚ö†Ô∏è WARNING

**–û–ø–∏—Å:** –¢–æ–≤–∞—Ä –¥–æ—Å—Ç—É–ø–Ω–∏–π, –∞–ª–µ –∑–∞–ª–∏—à–æ–∫ –∫—Ä–∏—Ç–∏—á–Ω–æ –º–∞–ª–∏–π (< 20% –≤—ñ–¥ –∑–∞–≥–∞–ª—å–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ). –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –¥–ª—è –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è.

**–ü—Ä–∏–∫–ª–∞–¥:**
```
–¢–æ–≤–∞—Ä: –°—Ç—ñ–ª–µ—Ü—å ME0002
–í—Å—å–æ–≥–æ: 10
–ó–∞—Ä–µ–∑–µ—Ä–≤–æ–≤–∞–Ω–æ: 8
–î–æ—Å—Ç—É–ø–Ω–æ: 2 (—Ü–µ < 20% –≤—ñ–¥ 10)
–ó–∞–ø–∏—Ç–∞–Ω–æ: 1
‚Üí –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è: "–ú–∞–ª–∏–π –∑–∞–ø–∞—Å"
```

**–©–æ —Ä–æ–±–∏—Ç–∏:**
- –ü—Ä–∏–π–Ω—è—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è (—Ç–æ–≤–∞—Ä –¥–æ—Å—Ç—É–ø–Ω–∏–π)
- –ê–ª–µ –∑–∞–ø–ª–∞–Ω—É–≤–∞—Ç–∏ –ø–æ–ø–æ–≤–Ω–µ–Ω–Ω—è –∑–∞–ø–∞—Å—ñ–≤
- –û–±–º–µ–∂–∏—Ç–∏ –Ω–æ–≤—ñ –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è –¥–æ –ø–æ–ø–æ–≤–Ω–µ–Ω–Ω—è

---

## üìä –ü–æ—Ä—ñ–≤–Ω—è–ª—å–Ω–∞ —Ç–∞–±–ª–∏—Ü—è

| –¢–∏–ø | –Ü–∫–æ–Ω–∫–∞ | –†—ñ–≤–µ–Ω—å | –ß–∏ –¥–æ—Å—Ç—É–ø–Ω–∏–π? | –î—ñ—è |
|-----|--------|--------|---------------|-----|
| **–ù–µ–º–∞—î –Ω–∞ —Å–∫–ª–∞–¥—ñ** | üî¥ | ERROR | ‚ùå –ù—ñ | –ü–æ–ø–æ–≤–Ω–∏—Ç–∏ —Å–∫–ª–∞–¥ |
| **–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ** | ‚ùå | ERROR | ‚ùå –ù—ñ | –ó–º—ñ–Ω–∏—Ç–∏ –¥–∞—Ç–∏/–∫—ñ–ª—å–∫—ñ—Å—Ç—å |
| **–©—ñ–ª—å–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫** | ‚ö†Ô∏è | WARNING | ‚úÖ –¢–∞–∫ | –ü—Ä–∏–π–Ω—è—Ç–∏ –∑ –æ–±–µ—Ä–µ–∂–Ω—ñ—Å—Ç—é |
| **–ú–∞–ª–∏–π –∑–∞–ø–∞—Å** | üì¶ | WARNING | ‚úÖ –¢–∞–∫ | –ü—Ä–∏–π–Ω—è—Ç–∏ + –∑–∞–ø–ª–∞–Ω—É–≤–∞—Ç–∏ –ø–æ–ø–æ–≤–Ω–µ–Ω–Ω—è |

---

## üîç –Ø–∫ —Å–∏—Å—Ç–µ–º–∞ –≤–∏–∑–Ω–∞—á–∞—î –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∏?

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:

1. **–°–ø–æ—á–∞—Ç–∫—É:** –ü–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è –∑–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å
   - –Ø–∫—â–æ `total_quantity = 0` ‚Üí üî¥ –ù–µ–º–∞—î –Ω–∞ —Å–∫–ª–∞–¥—ñ

2. **–ü–æ—Ç—ñ–º:** –ü–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å—Å—è –¥–∞—Ç–∏ (–≥–æ–ª–æ–≤–Ω–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç!)
   - –Ø–∫—â–æ `available_quantity < requested_quantity` ‚Üí ‚ùå –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ

3. **–î–∞–ª—ñ:** –ü–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å—Å—è –±–ª–∏–∑—å–∫—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
   - –Ø–∫—â–æ —î `issued`/`on_rent` –ø–æ—Ä—É—á –∞–±–æ gap ‚â§ 1 –¥–µ–Ω—å ‚Üí ‚ö†Ô∏è –©—ñ–ª—å–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫

4. **–ù–∞—Ä–µ—à—Ç—ñ:** –ü–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è –∑–∞–≥–∞–ª—å–Ω–∏–π –∑–∞–ø–∞—Å
   - –Ø–∫—â–æ `available_quantity < 20%` ‚Üí üì¶ –ú–∞–ª–∏–π –∑–∞–ø–∞—Å

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º

### ‚ùå ERROR –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∏ (—á–µ—Ä–≤–æ–Ω—ñ):
- **–ù–ï –º–æ–∂–Ω–∞** –ø—Ä–æ—Å—Ç–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏
- –ü–æ—Ç—Ä—ñ–±–Ω–∞ –î–Ü–Ø: –∑–º—ñ–Ω–∏—Ç–∏ –¥–∞—Ç–∏, –∫—ñ–ª—å–∫—ñ—Å—Ç—å, –∞–±–æ –ø–æ–ø–æ–≤–Ω–∏—Ç–∏ —Å–∫–ª–∞–¥

### ‚ö†Ô∏è WARNING –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∏ (–∂–æ–≤—Ç—ñ):
- **–ú–û–ñ–ù–ê** –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- –ê–ª–µ —Ç—Ä–µ–±–∞ —Ä–æ–∑—É–º—ñ—Ç–∏ –†–ò–ó–ò–ö–ò
- –ú–∞—Ç–∏ –∑–∞–ø–∞—Å–Ω–∏–π –ø–ª–∞–Ω

### üéØ Best Practices:

1. **–©—ñ–ª—å–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫:**
   - –ó–∞–≤–∂–¥–∏ –¥–∑–≤–æ–Ω—ñ—Ç—å –∫–ª—ñ—î–Ω—Ç—É –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
   - –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂—É–π—Ç–µ –¥–∞—Ç—É –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è
   - –ü–ª–∞–Ω—É–π—Ç–µ —á–∞—Å –Ω–∞ —Ä–µ—Å—Ç–∞–≤—Ä–∞—Ü—ñ—é (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)

2. **–ú–∞–ª–∏–π –∑–∞–ø–∞—Å:**
   - –í–µ–¥—ñ—Ç—å –æ–±–ª—ñ–∫ –ø–æ–ø—É–ª—è—Ä–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤
   - –ó–∞–º–æ–≤–ª—è–π—Ç–µ –∑–∞–∑–¥–∞–ª–µ–≥—ñ–¥—å
   - –ù–µ –ø—Ä–∏–π–º–∞–π—Ç–µ –Ω–æ–≤—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è —è–∫—â–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –º–∞–ª–æ

3. **–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ:**
   - –ü—Ä–æ–ø–æ–Ω—É–π—Ç–µ –∫–ª—ñ—î–Ω—Ç—É –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ñ –¥–∞—Ç–∏
   - –ê–±–æ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ñ —Ç–æ–≤–∞—Ä–∏
   - –ü–æ–∫–∞–∑—É–π—Ç–µ –∫–æ–ª–∏ —Ç–æ–≤–∞—Ä —Å—Ç–∞–Ω–µ –≤—ñ–ª—å–Ω–∏–º

---

## üîß –¢–µ—Ö–Ω—ñ—á–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

**–§–∞–π–ª–∏:**
- Backend –ª–æ–≥—ñ–∫–∞: `/app/backend/utils/availability_checker.py`
- Frontend –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è: `/app/frontend/src/pages/NewOrderView.jsx`
- API endpoint: `POST /api/orders/check-availability`

**–ü–æ–ª—è –≤ API –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ:**
```json
{
  "product_id": 123,
  "sku": "D8602",
  "product_name": "–ü—ñ–¥–≤—ñ—Å 46 —Å–º",
  "total_quantity": 2,
  "reserved_quantity": 1,
  "in_rent": 1,
  "available_quantity": 1,
  "requested_quantity": 1,
  "is_available": true,
  "has_tight_schedule": true,
  "nearby_orders": [...]
}
```

---

**–ê–≤—Ç–æ—Ä:** E1 Agent  
**–î–∞—Ç–∞:** 24.11.2025  
**–í–µ—Ä—Å—ñ—è:** 2.0 (–∑ —Ä–æ–∑—É–º–Ω–∏–º–∏ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è–º–∏)
