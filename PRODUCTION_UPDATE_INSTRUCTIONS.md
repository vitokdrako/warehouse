# üöÄ –Ü–ù–°–¢–†–£–ö–¶–Ü–Ø –ü–û –û–ù–û–í–õ–ï–ù–ù–Æ –ü–†–û–î–ê–ö–®–ù –í–ï–†–°–Ü–á

## –ü—Ä–æ–±–ª–µ–º–∏ —è–∫—ñ –±—É–ª–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ:

### 1. ‚ùå CORS –ø–æ–º–∏–ª–∫–∞
**–ü–æ–º–∏–ª–∫–∞:** `Access-Control-Allow-Origin header is not present`
**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:** –î–æ–¥–∞–Ω–æ CORS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### 2. ‚ùå 500 Error –ø—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
**–ü–æ–º–∏–ª–∫–∞:** `AttributeError: 'int' object has no attribute 'isoformat'`
**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:** –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–∞—Ä—Å–∏–Ω–≥ –∑–∞–º–æ–≤–ª–µ–Ω—å –∑ –Ω–æ–≤–æ—é —Å—Ö–µ–º–æ—é –ë–î

### 3. ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑–∞–º–æ–≤–ª–µ–Ω—å –ø—Ä–∞—Ü—é—î
10 –Ω–æ–≤–∏—Ö –∑–∞–º–æ–≤–ª–µ–Ω—å —É—Å–ø—ñ—à–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–æ –∑ OpenCart!

---

## üì¶ –§–∞–π–ª–∏ —è–∫—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏ –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥—É:

### 1. Backend —Ñ–∞–π–ª–∏:

**`/home/farforre/farforrent.com.ua/rentalhub/backend/.env`**
–î–æ–¥–∞–π—Ç–µ –≤ –∫—ñ–Ω–µ—Ü—å —Ñ–∞–π–ª—É:
```bash
CORS_ORIGINS=https://rentalhub.farforrent.com.ua,https://www.rentalhub.farforrent.com.ua
```

**`/home/farforre/farforrent.com.ua/rentalhub/backend/routes/orders.py`**
–ó–∞–º—ñ–Ω—ñ—Ç—å —Ü–µ–π —Ñ–∞–π–ª –Ω–∞ –æ–Ω–æ–≤–ª–µ–Ω—É –≤–µ—Ä—Å—ñ—é –∑ `/app/backend/routes/orders.py`

**`/home/farforre/farforrent.com.ua/backrentalhub/sync_all.py`**
–ó–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞ –æ–Ω–æ–≤–ª–µ–Ω—É –≤–µ—Ä—Å—ñ—é –∑ `/app/backend/sync_all_production.py`

### 2. Frontend build:

**`/home/farforre/farforrent.com.ua/rentalhub/frontend/build/`**
–ó–∞–º—ñ–Ω—ñ—Ç—å –≤—Å—é –ø–∞–ø–∫—É build –Ω–∞ –Ω–æ–≤—É –≤–µ—Ä—Å—ñ—é –∑ `/app/frontend/build/`

---

## üîß –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ FTP/File Manager
1. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Ñ–∞–π–ª–∏ —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å —Ö–æ—Å—Ç–∏–Ω–≥—É
2. –ó–∞–º—ñ–Ω—ñ—Ç—å —Å—Ç–∞—Ä—ñ —Ñ–∞–π–ª–∏ –Ω–∞ –Ω–æ–≤—ñ
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å FastAPI —Å–µ—Ä–≤–µ—Ä

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ SSH (—è–∫—â–æ —î –¥–æ—Å—Ç—É–ø)

```bash
# 1. –ó–∞–π–¥—ñ—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh farforre@farforrent.com.ua

# 2. –ó—Ä–æ–±—ñ—Ç—å backup
cd /home/farforre/farforrent.com.ua/rentalhub
cp -r backend/routes/orders.py backend/routes/orders.py.backup
cp backend/.env backend/.env.backup

# 3. –î–æ–¥–∞–π—Ç–µ CORS –≤ .env
echo "CORS_ORIGINS=https://rentalhub.farforrent.com.ua,https://www.rentalhub.farforrent.com.ua" >> backend/.env

# 4. –û–Ω–æ–≤—ñ—Ç—å orders.py (–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –Ω–æ–≤–∏–π —Ñ–∞–π–ª —á–µ—Ä–µ–∑ FTP –ø–µ—Ä–µ–¥ —Ü–∏–º)
# –∞–±–æ —Å–∫–æ–ø—ñ—é–π—Ç–µ –≤–º—ñ—Å—Ç –∑ /app/backend/routes/orders.py

# 5. –û–Ω–æ–≤—ñ—Ç—å sync —Å–∫—Ä–∏–ø—Ç
cp /—à–ª—è—Ö/–¥–æ/–Ω–æ–≤–æ–≥–æ/sync_all_production.py backrentalhub/sync_all.py

# 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å FastAPI
ps aux | grep uvicorn
kill -9 <PID>
# –∞–±–æ
sudo supervisorctl restart rentalhub-backend
```

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤—ñ—Å—ñ–≤:

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ FastAPI backend
sudo supervisorctl restart rentalhub-backend

# –ê–±–æ —è–∫—â–æ —á–µ—Ä–µ–∑ systemd:
sudo systemctl restart rentalhub-backend

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
sudo supervisorctl status
```

---

## ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:

### 1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ CORS:
–í—ñ–¥–∫—Ä–∏–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä ‚Üí F12 ‚Üí Console:
```javascript
fetch('https://backrentalhub.farforrent.com.ua/api/decor-orders/7045')
  .then(r => r.json())
  .then(d => console.log('‚úÖ CORS –ø—Ä–∞—Ü—é—î!', d))
  .catch(e => console.log('‚ùå –ü–æ–º–∏–ª–∫–∞:', e))
```

### 2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:
- –ó–∞–π–¥—ñ—Ç—å –Ω–∞ https://rentalhub.farforrent.com.ua
- –í—ñ–¥–∫—Ä–∏–π—Ç–µ –±—É–¥—å-—è–∫–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- –Ø–∫—â–æ –≤–æ–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –±–µ–∑ –ø–æ–º–∏–ª–æ–∫ ‚Üí ‚úÖ –ü—Ä–∞—Ü—é—î!

### 3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—é:
–ü–æ–¥–∏–≤—ñ—Ç—å—Å—è –ª–æ–≥–∏ cron:
```bash
tail -f /home/farforre/sync.log
```

–ú–∞—î –±—É—Ç–∏:
```
‚úÖ Synced 154 categories
‚úÖ Updated 3792 products
‚úÖ Successfully synced X new orders
```

---

## üÜò –Ø–∫—â–æ —â–æ—Å—å –Ω–µ –ø—Ä–∞—Ü—é—î:

### CORS –≤—Å–µ —â–µ –Ω–µ –ø—Ä–∞—Ü—é—î?
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ .env —Ñ–∞–π–ª –æ–Ω–æ–≤–ª–µ–Ω–æ: `cat backend/.env | grep CORS`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ FastAPI –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–æ: `ps aux | grep uvicorn`
3. –ü–æ–¥–∏–≤—ñ—Ç—å—Å—è –ª–æ–≥–∏: `tail -f /var/log/rentalhub/error.log`

### –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–µ –≤—ñ–¥–∫—Ä–∏–≤–∞—é—Ç—å—Å—è?
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ orders.py –æ–Ω–æ–≤–ª–µ–Ω–æ
2. –ü–æ–¥–∏–≤—ñ—Ç—å—Å—è –ª–æ–≥–∏ FastAPI
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä —â–µ —Ä–∞–∑

### –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –Ω–µ –ø—Ä–∞—Ü—é—î?
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ sync_all.py –æ–Ω–æ–≤–ª–µ–Ω–æ
2. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –≤—Ä—É—á–Ω—É: `python3.11 backrentalhub/sync_all.py`
3. –ü–æ–¥–∏–≤—ñ—Ç—å—Å—è –Ω–∞ –ø–æ–º–∏–ª–∫–∏ –≤ output

---

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º–∏, –∑–±–µ—Ä–µ–∂—ñ—Ç—å:
1. –õ–æ–≥–∏ FastAPI: `/var/log/rentalhub/*.log`
2. Output cron: `/home/farforre/sync.log`
3. Browser console errors (F12)

–Ü –Ω–∞–¥—ñ—à–ª—ñ—Ç—å –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.
