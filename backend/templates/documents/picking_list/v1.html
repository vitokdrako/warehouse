{% extends '_base.html' %}
{% block title %}–õ–∏—Å—Ç –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü—ñ—ó {{ issue_card.order_number }}{% endblock %}
{% block extra_styles %}
<style>
    .location-badge { background: #e3f2fd; padding: 2px 8px; border-radius: 4px; font-weight: bold; }
    .qty-box { background: #fff3e0; padding: 4px 12px; font-size: 14pt; font-weight: bold; }
</style>
{% endblock %}
{% block content %}
<div class="header">
    <div>
        <div class="logo">FarforRent</div>
        <div class="logo-sub">–°–ö–õ–ê–î</div>
    </div>
    <div class="doc-info">
        <div class="doc-number">{{ doc_number }}</div>
        <div class="doc-date">{{ generated_at }}</div>
    </div>
</div>

<h1>üì¶ –õ–ò–°–¢ –ö–û–ú–ü–õ–ï–ö–¢–ê–¶–Ü–á</h1>

<table class="mb-4">
    <tr>
        <td style="width:50%"><strong>–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è:</strong> {{ issue_card.order_number }}</td>
        <td><strong>–ö–ª—ñ—î–Ω—Ç:</strong> {{ issue_card.customer_name }}</td>
    </tr>
    <tr>
        <td><strong>–í–∏–¥–∞—á–∞:</strong> {{ issue_card.rental_start_date }}</td>
        <td><strong>–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è:</strong> {{ issue_card.rental_end_date }}</td>
    </tr>
</table>

<table>
    <thead>
        <tr>
            <th style="width:80px">–õ–û–ö–ê–¶–Ü–Ø</th>
            <th>–¢–û–í–ê–†</th>
            <th style="width:70px">SKU</th>
            <th style="width:60px">–ö-–°–¢–¨</th>
            <th style="width:50px">‚úì</th>
        </tr>
    </thead>
    <tbody>
        {% for item in items %}
        <tr>
            <td><span class="location-badge">{{ item.get('location', 'N/A') }}</span></td>
            <td>{{ item.get('name', '') }}</td>
            <td>{{ item.get('sku') or item.get('article', '') }}</td>
            <td class="text-center"><span class="qty-box">{{ item.get('quantity') or item.get('qty', 1) }}</span></td>
            <td class="text-center"><div class="checkbox" style="width:20px;height:20px;"></div></td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div class="mt-4" style="display:flex; justify-content:space-between;">
    <div><strong>–í—Å—å–æ–≥–æ –ø–æ–∑–∏—Ü—ñ–π:</strong> {{ items|length }}</div>
    <div><strong>–í—Å—å–æ–≥–æ –æ–¥–∏–Ω–∏—Ü—å:</strong> {% set total = namespace(value=0) %}{% for item in items %}{% set total.value = total.value + (item.get('quantity') or item.get('qty', 1)) %}{% endfor %}{{ total.value }}</div>
</div>

<div class="signatures">
    <div class="signature-block">
        <p>–ó—ñ–±—Ä–∞–≤: _______________</p>
        <p class="text-sm">–ß–∞—Å: _______________</p>
    </div>
    <div class="signature-block">
        <p>–ü–µ—Ä–µ–≤—ñ—Ä–∏–≤: _______________</p>
        <p class="text-sm">–ß–∞—Å: _______________</p>
    </div>
</div>
{% endblock %}