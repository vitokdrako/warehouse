/*! For license information please see main.93c8dde8.js.LICENSE.txt */
(()=>{var e={43:(e,t,r)=>{"use strict";e.exports=r(202)},72:function(e,t,r){!function(e){"use strict";function t(e){return null===e||void 0===e}var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};function s(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function a(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function i(e,t){void 0===t&&(t=e.constructor);var r=Error.captureStackTrace;r&&r(e,t)}var o,l=function(e){function t(t){var r=this.constructor,n=e.call(this,t)||this;return Object.defineProperty(n,"name",{value:r.name,enumerable:!1}),a(n,r.prototype),i(n),n}return s(t,e),t}(Error);class c extends l{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;super(e),this.message=e}getKind(){return this.constructor.kind}}c.kind="Exception";class d extends c{}d.kind="ArgumentException";class u extends c{}u.kind="IllegalArgumentException";class h{constructor(e){if(this.binarizer=e,null===e)throw new u("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,r,n){const s=this.binarizer.getLuminanceSource().crop(e,t,r,n);return new h(this.binarizer.createBinarizer(s))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new h(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new h(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch(e){return""}}}class m extends c{static getChecksumInstance(){return new m}}m.kind="ChecksumException";class p{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class f{static arraycopy(e,t,r,n,s){for(;s--;)r[n++]=e[t++]}static currentTimeMillis(){return Date.now()}}class x extends c{}x.kind="IndexOutOfBoundsException";class g extends x{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;super(t),this.index=e,this.message=t}}g.kind="ArrayIndexOutOfBoundsException";class b{static fill(e,t){for(let r=0,n=e.length;r<n;r++)e[r]=t}static fillWithin(e,t,r,n){b.rangeCheck(e.length,t,r);for(let s=t;s<r;s++)e[s]=n}static rangeCheck(e,t,r){if(t>r)throw new u("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new g(t);if(r>e)throw new g(r)}static asList(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t}static create(e,t,r){return Array.from({length:e}).map(e=>Array.from({length:t}).fill(r))}static createInt32Array(e,t,r){return Array.from({length:e}).map(e=>Int32Array.from({length:t}).fill(r))}static equals(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}static hashCode(e){if(null===e)return 0;let t=1;for(const r of e)t=31*t+r;return t}static fillUint8Array(e,t){for(let r=0;r!==e.length;r++)e[r]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)}static copyOfRange(e,t,r){const n=r-t,s=new Int32Array(n);return f.arraycopy(e,t,s,0,n),s}static binarySearch(e,t,r){void 0===r&&(r=b.numberComparator);let n=0,s=e.length-1;for(;n<=s;){const a=s+n>>1,i=r(t,e[a]);if(i>0)n=a+1;else{if(!(i<0))return a;s=a-1}}return-n-1}static numberComparator(e,t){return e-t}}class y{static numberOfTrailingZeros(e){let t;if(0===e)return 32;let r=31;return t=e<<16,0!==t&&(r-=16,e=t),t=e<<8,0!==t&&(r-=8,e=t),t=e<<4,0!==t&&(r-=4,e=t),t=e<<2,0!==t&&(r-=2,e=t),r-(e<<1>>>31)}static numberOfLeadingZeros(e){if(0===e)return 32;let t=1;return e>>>16===0&&(t+=16,e<<=16),e>>>24===0&&(t+=8,e<<=8),e>>>28===0&&(t+=4,e<<=4),e>>>30===0&&(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}y.MIN_VALUE_32_BITS=-2147483648,y.MAX_VALUE=Number.MAX_SAFE_INTEGER;class v{constructor(e,t){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=void 0===t||null===t?v.makeArray(e):t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>32*this.bits.length){const t=v.makeArray(e);f.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return 0!==(this.bits[Math.floor(e/32)]&1<<(31&e))}set(e){this.bits[Math.floor(e/32)]|=1<<(31&e)}flip(e){this.bits[Math.floor(e/32)]^=1<<(31&e)}getNextSet(e){const t=this.size;if(e>=t)return t;const r=this.bits;let n=Math.floor(e/32),s=r[n];s&=~((1<<(31&e))-1);const a=r.length;for(;0===s;){if(++n===a)return t;s=r[n]}const i=32*n+y.numberOfTrailingZeros(s);return i>t?t:i}getNextUnset(e){const t=this.size;if(e>=t)return t;const r=this.bits;let n=Math.floor(e/32),s=~r[n];s&=~((1<<(31&e))-1);const a=r.length;for(;0===s;){if(++n===a)return t;s=~r[n]}const i=32*n+y.numberOfTrailingZeros(s);return i>t?t:i}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new u;if(t===e)return;t--;const r=Math.floor(e/32),n=Math.floor(t/32),s=this.bits;for(let a=r;a<=n;a++){const i=(2<<(a<n?31:31&t))-(1<<(a>r?0:31&e));s[a]|=i}}clear(){const e=this.bits.length,t=this.bits;for(let r=0;r<e;r++)t[r]=0}isRange(e,t,r){if(t<e||e<0||t>this.size)throw new u;if(t===e)return!0;t--;const n=Math.floor(e/32),s=Math.floor(t/32),a=this.bits;for(let i=n;i<=s;i++){const o=(2<<(i<s?31:31&t))-(1<<(i>n?0:31&e))&4294967295;if((a[i]&o)!==(r?o:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(e,t){if(t<0||t>32)throw new u("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let r=t;r>0;r--)this.appendBit(1===(e>>r-1&1))}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let r=0;r<t;r++)this.appendBit(e.get(r))}xor(e){if(this.size!==e.size)throw new u("Sizes don't match");const t=this.bits;for(let r=0,n=t.length;r<n;r++)t[r]^=e.bits[r]}toBytes(e,t,r,n){for(let s=0;s<n;s++){let n=0;for(let t=0;t<8;t++)this.get(e)&&(n|=1<<7-t),e++;t[r+s]=n}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,n=this.bits;for(let s=0;s<r;s++){let r=n[s];r=r>>1&1431655765|(1431655765&r)<<1,r=r>>2&858993459|(858993459&r)<<2,r=r>>4&252645135|(252645135&r)<<4,r=r>>8&16711935|(16711935&r)<<8,r=r>>16&65535|(65535&r)<<16,e[t-s]=r}if(this.size!==32*r){const t=32*r-this.size;let n=e[0]>>>t;for(let s=1;s<r;s++){const r=e[s];n|=r<<32-t,e[s-1]=n,n=r>>>t}e[r-1]=n}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof v))return!1;const t=e;return this.size===t.size&&b.equals(this.bits,t.bits)}hashCode(){return 31*this.size+b.hashCode(this.bits)}toString(){let e="";for(let t=0,r=this.size;t<r;t++)0===(7&t)&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new v(this.size,this.bits.slice())}}!function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ASSUME_GS1=7]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(o||(o={}));var w,N=o;class j extends c{static getFormatInstance(){return new j}}j.kind="FormatException",function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"}(w||(w={}));class _{constructor(e,t,r){this.valueIdentifier=e,this.name=r,this.values="number"===typeof t?Int32Array.from([t]):t;for(var n=arguments.length,s=new Array(n>3?n-3:0),a=3;a<n;a++)s[a-3]=arguments[a];this.otherEncodingNames=s,_.VALUE_IDENTIFIER_TO_ECI.set(e,this),_.NAME_TO_ECI.set(r,this);const i=this.values;for(let o=0,l=i.length;o!==l;o++){const e=i[o];_.VALUES_TO_ECI.set(e,this)}for(const o of s)_.NAME_TO_ECI.set(o,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new j("incorect value");const t=_.VALUES_TO_ECI.get(e);if(void 0===t)throw new j("incorect value");return t}static getCharacterSetECIByName(e){const t=_.NAME_TO_ECI.get(e);if(void 0===t)throw new j("incorect value");return t}equals(e){if(!(e instanceof _))return!1;const t=e;return this.getName()===t.getName()}}_.VALUE_IDENTIFIER_TO_ECI=new Map,_.VALUES_TO_ECI=new Map,_.NAME_TO_ECI=new Map,_.Cp437=new _(w.Cp437,Int32Array.from([0,2]),"Cp437"),_.ISO8859_1=new _(w.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),_.ISO8859_2=new _(w.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),_.ISO8859_3=new _(w.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),_.ISO8859_4=new _(w.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),_.ISO8859_5=new _(w.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),_.ISO8859_6=new _(w.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),_.ISO8859_7=new _(w.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),_.ISO8859_8=new _(w.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),_.ISO8859_9=new _(w.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),_.ISO8859_10=new _(w.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),_.ISO8859_11=new _(w.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),_.ISO8859_13=new _(w.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),_.ISO8859_14=new _(w.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),_.ISO8859_15=new _(w.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),_.ISO8859_16=new _(w.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),_.SJIS=new _(w.SJIS,20,"SJIS","Shift_JIS"),_.Cp1250=new _(w.Cp1250,21,"Cp1250","windows-1250"),_.Cp1251=new _(w.Cp1251,22,"Cp1251","windows-1251"),_.Cp1252=new _(w.Cp1252,23,"Cp1252","windows-1252"),_.Cp1256=new _(w.Cp1256,24,"Cp1256","windows-1256"),_.UnicodeBigUnmarked=new _(w.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),_.UTF8=new _(w.UTF8,26,"UTF8","UTF-8"),_.ASCII=new _(w.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),_.Big5=new _(w.Big5,28,"Big5"),_.GB18030=new _(w.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),_.EUC_KR=new _(w.EUC_KR,30,"EUC_KR","EUC-KR");class C extends c{}C.kind="UnsupportedOperationException";class S{static decode(e,t){const r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):"undefined"===typeof TextDecoder||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)}static shouldDecodeOnFallback(e){return!S.isBrowser()&&"ISO-8859-1"===e}static encode(e,t){const r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):"undefined"===typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)}static isBrowser(){return"undefined"!==typeof window&&"[object Window]"==={}.toString.call(window)}static encodingName(e){return"string"===typeof e?e:e.getName()}static encodingCharacterSet(e){return e instanceof _?e:_.getCharacterSetECIByName(e)}static decodeFallback(e,t){const r=this.encodingCharacterSet(t);if(S.isDecodeFallbackSupported(r)){let t="";for(let r=0,n=e.length;r<n;r++){let n=e[r].toString(16);n.length<2&&(n="0"+n),t+="%"+n}return decodeURIComponent(t)}if(r.equals(_.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new C("Encoding ".concat(this.encodingName(t)," not supported by fallback."))}static isDecodeFallbackSupported(e){return e.equals(_.UTF8)||e.equals(_.ISO8859_1)||e.equals(_.ASCII)}static encodeFallback(e){const t=btoa(unescape(encodeURIComponent(e))).split(""),r=[];for(let n=0;n<t.length;n++)r.push(t[n].charCodeAt(0));return new Uint8Array(r)}}class E{static castAsNonUtf8Char(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=t?t.getName():this.ISO88591;return S.decode(new Uint8Array([e]),r)}static guessEncoding(e,t){if(null!==t&&void 0!==t&&void 0!==t.get(N.CHARACTER_SET))return t.get(N.CHARACTER_SET).toString();const r=e.length;let n=!0,s=!0,a=!0,i=0,o=0,l=0,c=0,d=0,u=0,h=0,m=0,p=0,f=0,x=0;const g=e.length>3&&239===e[0]&&187===e[1]&&191===e[2];for(let b=0;b<r&&(n||s||a);b++){const t=255&e[b];a&&(i>0?0===(128&t)?a=!1:i--:0!==(128&t)&&(0===(64&t)?a=!1:(i++,0===(32&t)?o++:(i++,0===(16&t)?l++:(i++,0===(8&t)?c++:a=!1))))),n&&(t>127&&t<160?n=!1:t>159&&(t<192||215===t||247===t)&&x++),s&&(d>0?t<64||127===t||t>252?s=!1:d--:128===t||160===t||t>239?s=!1:t>160&&t<224?(u++,m=0,h++,h>p&&(p=h)):t>127?(d++,h=0,m++,m>f&&(f=m)):(h=0,m=0))}return a&&i>0&&(a=!1),s&&d>0&&(s=!1),a&&(g||o+l+c>0)?E.UTF8:s&&(E.ASSUME_SHIFT_JIS||p>=3||f>=3)?E.SHIFT_JIS:n&&s?2===p&&2===u||10*x>=r?E.SHIFT_JIS:E.ISO88591:n?E.ISO88591:s?E.SHIFT_JIS:a?E.UTF8:E.PLATFORM_DEFAULT_ENCODING}static format(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let s=-1;function a(e,t,n,a,i,o){if("%%"===e)return"%";if(void 0===r[++s])return;e=a?parseInt(a.substr(1)):void 0;let l,c=i?parseInt(i.substr(1)):void 0;switch(o){case"s":l=r[s];break;case"c":l=r[s][0];break;case"f":l=parseFloat(r[s]).toFixed(e);break;case"p":l=parseFloat(r[s]).toPrecision(e);break;case"e":l=parseFloat(r[s]).toExponential(e);break;case"x":l=parseInt(r[s]).toString(c||16);break;case"d":l=parseFloat(parseInt(r[s],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let d=parseInt(n),u=n&&n[0]+""==="0"?"0":" ";for(;l.length<d;)l=void 0!==t?l+u:u+l;return l}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,a)}static getBytes(e,t){return S.encode(e,t)}static getCharCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}E.SHIFT_JIS=_.SJIS.getName(),E.GB2312="GB2312",E.ISO88591=_.ISO8859_1.getName(),E.EUC_JP="EUC_JP",E.UTF8=_.UTF8.getName(),E.PLATFORM_DEFAULT_ENCODING=E.UTF8,E.ASSUME_SHIFT_JIS=!1;class A{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return"string"===typeof e?this.value+=e.toString():this.encoding?this.value+=E.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,r){for(let n=t;t<t+r;n++)this.append(e[n]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class I{constructor(e,t,r,n){if(this.width=e,this.height=t,this.rowSize=r,this.bits=n,void 0!==t&&null!==t||(t=e),this.height=t,e<1||t<1)throw new u("Both dimensions must be greater than 0");void 0!==r&&null!==r||(r=Math.floor((e+31)/32)),this.rowSize=r,void 0!==n&&null!==n||(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,r=e[0].length,n=new I(r,t);for(let s=0;s<t;s++){const t=e[s];for(let e=0;e<r;e++)t[e]&&n.set(e,s)}return n}static parseFromString(e,t,r){if(null===e)throw new u("stringRepresentation cannot be null");const n=new Array(e.length);let s=0,a=0,i=-1,o=0,l=0;for(;l<e.length;)if("\n"===e.charAt(l)||"\r"===e.charAt(l)){if(s>a){if(-1===i)i=s-a;else if(s-a!==i)throw new u("row lengths do not match");a=s,o++}l++}else if(e.substring(l,l+t.length)===t)l+=t.length,n[s]=!0,s++;else{if(e.substring(l,l+r.length)!==r)throw new u("illegal character encountered: "+e.substring(l));l+=r.length,n[s]=!1,s++}if(s>a){if(-1===i)i=s-a;else if(s-a!==i)throw new u("row lengths do not match");o++}const c=new I(i,o);for(let d=0;d<s;d++)n[d]&&c.set(Math.floor(d%i),Math.floor(d/i));return c}get(e,t){const r=t*this.rowSize+Math.floor(e/32);return 0!==(this.bits[r]>>>(31&e)&1)}set(e,t){const r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(31&e)&4294967295}unset(e,t){const r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(31&e)&4294967295)}flip(e,t){const r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(31&e)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new u("input matrix dimensions do not match");const t=new v(Math.floor(this.width/32)+1),r=this.rowSize,n=this.bits;for(let s=0,a=this.height;s<a;s++){const a=s*r,i=e.getRow(s,t).getBitArray();for(let e=0;e<r;e++)n[a+e]^=i[e]}}clear(){const e=this.bits,t=e.length;for(let r=0;r<t;r++)e[r]=0}setRegion(e,t,r,n){if(t<0||e<0)throw new u("Left and top must be nonnegative");if(n<1||r<1)throw new u("Height and width must be at least 1");const s=e+r,a=t+n;if(a>this.height||s>this.width)throw new u("The region must fit inside the matrix");const i=this.rowSize,o=this.bits;for(let l=t;l<a;l++){const t=l*i;for(let r=e;r<s;r++)o[t+Math.floor(r/32)]|=1<<(31&r)&4294967295}}getRow(e,t){null===t||void 0===t||t.getSize()<this.width?t=new v(this.width):t.clear();const r=this.rowSize,n=this.bits,s=e*r;for(let a=0;a<r;a++)t.setBulk(32*a,n[s+a]);return t}setRow(e,t){f.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let r=new v(e),n=new v(e);for(let s=0,a=Math.floor((t+1)/2);s<a;s++)r=this.getRow(s,r),n=this.getRow(t-1-s,n),r.reverse(),n.reverse(),this.setRow(s,n),this.setRow(t-1-s,r)}getEnclosingRectangle(){const e=this.width,t=this.height,r=this.rowSize,n=this.bits;let s=e,a=t,i=-1,o=-1;for(let l=0;l<t;l++)for(let e=0;e<r;e++){const t=n[l*r+e];if(0!==t){if(l<a&&(a=l),l>o&&(o=l),32*e<s){let r=0;for(;0===(t<<31-r&4294967295);)r++;32*e+r<s&&(s=32*e+r)}if(32*e+31>i){let r=31;for(;t>>>r===0;)r--;32*e+r>i&&(i=32*e+r)}}}return i<s||o<a?null:Int32Array.from([s,a,i-s+1,o-a+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let r=0;for(;r<t.length&&0===t[r];)r++;if(r===t.length)return null;const n=r/e;let s=r%e*32;const a=t[r];let i=0;for(;0===(a<<31-i&4294967295);)i++;return s+=i,Int32Array.from([s,n])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let r=t.length-1;for(;r>=0&&0===t[r];)r--;if(r<0)return null;const n=Math.floor(r/e);let s=32*Math.floor(r%e);const a=t[r];let i=31;for(;a>>>i===0;)i--;return s+=i,Int32Array.from([s,n])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof I))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&b.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+b.hashCode(this.bits),e}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"X ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"  ",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";return this.buildToString(e,t,r)}buildToString(e,t,r){let n=new A;for(let s=0,a=this.height;s<a;s++){for(let r=0,a=this.width;r<a;r++)n.append(this.get(r,s)?e:t);n.append(r)}return n.toString()}clone(){return new I(this.width,this.height,this.rowSize,this.bits.slice())}}class k extends c{static getNotFoundInstance(){return new k}}k.kind="NotFoundException";class T extends p{constructor(e){super(e),this.luminances=T.EMPTY,this.buckets=new Int32Array(T.LUMINANCE_BUCKETS)}getBlackRow(e,t){const r=this.getLuminanceSource(),n=r.getWidth();void 0===t||null===t||t.getSize()<n?t=new v(n):t.clear(),this.initArrays(n);const s=r.getRow(e,this.luminances),a=this.buckets;for(let o=0;o<n;o++)a[(255&s[o])>>T.LUMINANCE_SHIFT]++;const i=T.estimateBlackPoint(a);if(n<3)for(let o=0;o<n;o++)(255&s[o])<i&&t.set(o);else{let e=255&s[0],r=255&s[1];for(let a=1;a<n-1;a++){const n=255&s[a+1];(4*r-e-n)/2<i&&t.set(a),e=r,r=n}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),r=e.getHeight(),n=new I(t,r);this.initArrays(t);const s=this.buckets;for(let o=1;o<5;o++){const n=Math.floor(r*o/5),a=e.getRow(n,this.luminances),i=Math.floor(4*t/5);for(let e=Math.floor(t/5);e<i;e++)s[(255&a[e])>>T.LUMINANCE_SHIFT]++}const a=T.estimateBlackPoint(s),i=e.getMatrix();for(let o=0;o<r;o++){const e=o*t;for(let r=0;r<t;r++)(255&i[e+r])<a&&n.set(r,o)}return n}createBinarizer(e){return new T(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let r=0;r<T.LUMINANCE_BUCKETS;r++)t[r]=0}static estimateBlackPoint(e){const t=e.length;let r=0,n=0,s=0;for(let c=0;c<t;c++)e[c]>s&&(n=c,s=e[c]),e[c]>r&&(r=e[c]);let a=0,i=0;for(let c=0;c<t;c++){const t=c-n,r=e[c]*t*t;r>i&&(a=c,i=r)}if(n>a){const e=n;n=a,a=e}if(a-n<=t/16)throw new k;let o=a-1,l=-1;for(let c=a-1;c>n;c--){const t=c-n,s=t*t*(a-c)*(r-e[c]);s>l&&(o=c,l=s)}return o<<T.LUMINANCE_SHIFT}}T.LUMINANCE_BITS=5,T.LUMINANCE_SHIFT=8-T.LUMINANCE_BITS,T.LUMINANCE_BUCKETS=1<<T.LUMINANCE_BITS,T.EMPTY=Uint8ClampedArray.from([0]);class D extends T{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),r=e.getHeight();if(t>=D.MINIMUM_DIMENSION&&r>=D.MINIMUM_DIMENSION){const n=e.getMatrix();let s=t>>D.BLOCK_SIZE_POWER;0!==(t&D.BLOCK_SIZE_MASK)&&s++;let a=r>>D.BLOCK_SIZE_POWER;0!==(r&D.BLOCK_SIZE_MASK)&&a++;const i=D.calculateBlackPoints(n,s,a,t,r),o=new I(t,r);D.calculateThresholdForBlock(n,s,a,t,r,i,o),this.matrix=o}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new D(e)}static calculateThresholdForBlock(e,t,r,n,s,a,i){const o=s-D.BLOCK_SIZE,l=n-D.BLOCK_SIZE;for(let c=0;c<r;c++){let s=c<<D.BLOCK_SIZE_POWER;s>o&&(s=o);const d=D.cap(c,2,r-3);for(let r=0;r<t;r++){let o=r<<D.BLOCK_SIZE_POWER;o>l&&(o=l);const c=D.cap(r,2,t-3);let u=0;for(let e=-2;e<=2;e++){const t=a[d+e];u+=t[c-2]+t[c-1]+t[c]+t[c+1]+t[c+2]}const h=u/25;D.thresholdBlock(e,o,s,h,n,i)}}}static cap(e,t,r){return e<t?t:e>r?r:e}static thresholdBlock(e,t,r,n,s,a){for(let i=0,o=r*s+t;i<D.BLOCK_SIZE;i++,o+=s)for(let s=0;s<D.BLOCK_SIZE;s++)(255&e[o+s])<=n&&a.set(t+s,r+i)}static calculateBlackPoints(e,t,r,n,s){const a=s-D.BLOCK_SIZE,i=n-D.BLOCK_SIZE,o=new Array(r);for(let l=0;l<r;l++){o[l]=new Int32Array(t);let r=l<<D.BLOCK_SIZE_POWER;r>a&&(r=a);for(let s=0;s<t;s++){let t=s<<D.BLOCK_SIZE_POWER;t>i&&(t=i);let a=0,c=255,d=0;for(let s=0,i=r*n+t;s<D.BLOCK_SIZE;s++,i+=n){for(let t=0;t<D.BLOCK_SIZE;t++){const r=255&e[i+t];a+=r,r<c&&(c=r),r>d&&(d=r)}if(d-c>D.MIN_DYNAMIC_RANGE)for(s++,i+=n;s<D.BLOCK_SIZE;s++,i+=n)for(let t=0;t<D.BLOCK_SIZE;t++)a+=255&e[i+t]}let u=a>>2*D.BLOCK_SIZE_POWER;if(d-c<=D.MIN_DYNAMIC_RANGE&&(u=c/2,l>0&&s>0)){const e=(o[l-1][s]+2*o[l][s-1]+o[l-1][s-1])/4;c<e&&(u=e)}o[l][s]=u}}return o}}D.BLOCK_SIZE_POWER=3,D.BLOCK_SIZE=1<<D.BLOCK_SIZE_POWER,D.BLOCK_SIZE_MASK=D.BLOCK_SIZE-1,D.MINIMUM_DIMENSION=5*D.BLOCK_SIZE,D.MIN_DYNAMIC_RANGE=24;class R{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,r,n){throw new C("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new C("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new C("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new A;for(let r=0;r<this.height;r++){const n=this.getRow(r,e);for(let e=0;e<this.width;e++){const r=255&n[e];let s;s=r<64?"#":r<128?"+":r<192?".":" ",t.append(s)}t.append("\n")}return t.toString()}}class O extends R{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const r=this.delegate.getRow(e,t),n=this.getWidth();for(let s=0;s<n;s++)r[s]=255-(255&r[s]);return r}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),r=new Uint8ClampedArray(t);for(let n=0;n<t;n++)r[n]=255-(255&e[n]);return r}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,r,n){return new O(this.delegate.crop(e,t,r,n))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new O(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new O(this.delegate.rotateCounterClockwise45())}}class M extends R{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=M.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return M.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,r){const n=new Uint8ClampedArray(t*r);for(let s=0,a=0,i=e.length;s<i;s+=4,a++){let t;t=0===e[s+3]?255:306*e[s]+601*e[s+1]+117*e[s+2]+512>>10,n[a]=t}return n}getRow(e,t){if(e<0||e>=this.getHeight())throw new u("Requested row is outside the image: "+e);const r=this.getWidth(),n=e*r;return null===t?t=this.buffer.slice(n,n+r):(t.length<r&&(t=new Uint8ClampedArray(r)),t.set(this.buffer.slice(n,n+r))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,r,n){return super.crop(e,t,r,n),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),r=t.getContext("2d"),n=e*M.DEGREE_TO_RADIANS,s=this.canvas.width,a=this.canvas.height,i=Math.ceil(Math.abs(Math.cos(n))*s+Math.abs(Math.sin(n))*a),o=Math.ceil(Math.abs(Math.sin(n))*s+Math.abs(Math.cos(n))*a);return t.width=i,t.height=o,r.translate(i/2,o/2),r.rotate(n),r.drawImage(this.canvas,s/-2,a/-2),this.buffer=M.makeBufferFromCanvasImageData(t),this}invert(){return new O(this)}}M.DEGREE_TO_RADIANS=Math.PI/180;class P{constructor(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var L,B=(globalThis||r.g||self||window?(globalThis||r.g||self||window||void 0).__awaiter:void 0)||function(e,t,r,n){function s(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function o(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){e.done?r(e.value):s(e.value).then(i,o)}l((n=n.apply(e,t||[])).next())})};class F{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,r=arguments.length>2?arguments[2]:void 0;this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!==typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return B(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const r of e){const e="video"===r.kind?"videoinput":r.kind;if("videoinput"!==e)continue;const n={deviceId:r.deviceId||r.id,label:r.label||"Video device ".concat(t.length+1),kind:e,groupId:r.groupId};t.push(n)}return t})}getVideoInputDevices(){return B(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(e=>new P(e.deviceId,e.label))})}findDeviceById(e){return B(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(t=>t.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return B(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return B(this,void 0,void 0,function*(){let r;this.reset(),r=e?{deviceId:{exact:e}}:{facingMode:"environment"};const n={video:r};return yield this.decodeOnceFromConstraints(n,t)})}decodeOnceFromConstraints(e,t){return B(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(r,t)})}decodeOnceFromStream(e,t){return B(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(r)})}decodeFromInputVideoDeviceContinuously(e,t,r){return B(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,r)})}decodeFromVideoDevice(e,t,r){return B(this,void 0,void 0,function*(){let n;n=e?{deviceId:{exact:e}}:{facingMode:"environment"};const s={video:n};return yield this.decodeFromConstraints(s,t,r)})}decodeFromConstraints(e,t,r){return B(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(n,t,r)})}decodeFromStream(e,t,r){return B(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(n,r)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return B(this,void 0,void 0,function*(){const r=this.prepareVideoElement(t);return this.addVideoSource(r,e),this.videoElement=r,this.stream=e,yield this.playVideoOnLoadAsync(r),r})}playVideoOnLoadAsync(e){return new Promise((t,r)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return B(this,void 0,void 0,function*(){if(this.isVideoPlaying(e))console.warn("Trying to play video that is already playing.");else try{yield e.play()}catch(t){console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const r=document.getElementById(e);if(!r)throw new d("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new d("element with id '".concat(e,"' must be an ").concat(t," element"));return r}decodeFromImage(e,t){if(!e&&!t)throw new d("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new d("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,r){if(void 0===e&&void 0===t)throw new d("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)}decodeFromImageElement(e){if(!e)throw new d("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);let r;return this.imageElement=t,r=this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t),r}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)}_decodeFromVideoElementSetup(e){if(!e)throw new d("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new d("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const r=this._decodeOnLoadImage(t);return t.src=e,r}decodeFromVideoUrl(e){if(!e)throw new d("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r}decodeFromVideoUrlContinuously(e,t){if(!e)throw new d("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),n=this.decodeFromVideoElementContinuously(r,t);return r.src=e,n}_decodeOnLoadImage(e){return new Promise((t,r)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,r),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return B(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return B(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!!e.complete&&0!==e.naturalWidth}prepareImageElement(e){let t;return"undefined"===typeof e&&(t=document.createElement("img"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return e||"undefined"===typeof document||(t=document.createElement("video"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._stopAsyncDecode=!1;const n=(s,a)=>{if(this._stopAsyncDecode)return a(new k("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{s(this.decode(e))}catch(i){if(t&&i instanceof k||(i instanceof m||i instanceof j)&&r)return setTimeout(n,this._timeBetweenDecodingAttempts,s,a);a(i)}};return new Promise((e,t)=>n(e,t))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const r=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const n=this.decode(e);t(n,null),setTimeout(r,this.timeBetweenScansMillis)}catch(n){t(null,n),(n instanceof m||n instanceof j||n instanceof k)&&setTimeout(r,this._timeBetweenDecodingAttempts)}};r()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return 0!==e.videoWidth}drawFrameOnCanvas(e,t,r){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r||(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.captureCanvasContext;t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r||(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),r=new M(t),n=new D(r);return new h(n)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const t=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=t}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if("undefined"===typeof document)return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let r,n;return"undefined"!==typeof e&&(e instanceof HTMLVideoElement?(r=e.videoWidth,n=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,n=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=n+"px",t.width=r,t.height=n,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&("undefined"!==typeof this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),"undefined"!==typeof this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),"undefined"!==typeof this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch(r){e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")}}class U{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?0:8*t.length,n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:f.currentTimeMillis();this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=n,this.format=s,this.timestamp=a,this.text=e,this.rawBytes=t,this.numBits=void 0===r||null===r?null===t||void 0===t?0:8*t.length:r,this.resultPoints=n,this.format=s,this.resultMetadata=null,this.timestamp=void 0===a||null===a?f.currentTimeMillis():a}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){const r=new Array(t.length+e.length);f.arraycopy(t,0,r,0,t.length),f.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}}getTimestamp(){return this.timestamp}toString(){return this.text}}!function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(L||(L={}));var z,H=L;!function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(z||(z={}));var V,W,q,G,Y,X,Q=z;class K{constructor(e,t,r,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=n,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=a,this.numBits=void 0===e||null===e?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Z{exp(e){return this.expTable[e]}log(e){if(0===e)throw new u;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class J{constructor(e,t){if(0===t.length)throw new u;this.field=e;const r=t.length;if(r>1&&0===t[0]){let e=1;for(;e<r&&0===t[e];)e++;e===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-e),f.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);const t=this.coefficients;let r;if(1===e){r=0;for(let e=0,n=t.length;e!==n;e++){const n=t[e];r=Z.addOrSubtract(r,n)}return r}r=t[0];const n=t.length,s=this.field;for(let a=1;a<n;a++)r=Z.addOrSubtract(s.multiply(e,r),t[a]);return r}addOrSubtract(e){if(!this.field.equals(e.field))throw new u("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,r=e.coefficients;if(t.length>r.length){const e=t;t=r,r=e}let n=new Int32Array(r.length);const s=r.length-t.length;f.arraycopy(r,0,n,0,s);for(let a=s;a<r.length;a++)n[a]=Z.addOrSubtract(t[a-s],r[a]);return new J(this.field,n)}multiply(e){if(!this.field.equals(e.field))throw new u("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,r=t.length,n=e.coefficients,s=n.length,a=new Int32Array(r+s-1),i=this.field;for(let o=0;o<r;o++){const e=t[o];for(let t=0;t<s;t++)a[o+t]=Z.addOrSubtract(a[o+t],i.multiply(e,n[t]))}return new J(i,a)}multiplyScalar(e){if(0===e)return this.field.getZero();if(1===e)return this;const t=this.coefficients.length,r=this.field,n=new Int32Array(t),s=this.coefficients;for(let a=0;a<t;a++)n[a]=r.multiply(s[a],e);return new J(r,n)}multiplyByMonomial(e,t){if(e<0)throw new u;if(0===t)return this.field.getZero();const r=this.coefficients,n=r.length,s=new Int32Array(n+e),a=this.field;for(let i=0;i<n;i++)s[i]=a.multiply(r[i],t);return new J(a,s)}divide(e){if(!this.field.equals(e.field))throw new u("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new u("Divide by 0");const t=this.field;let r=t.getZero(),n=this;const s=e.getCoefficient(e.getDegree()),a=t.inverse(s);for(;n.getDegree()>=e.getDegree()&&!n.isZero();){const s=n.getDegree()-e.getDegree(),i=t.multiply(n.getCoefficient(n.getDegree()),a),o=e.multiplyByMonomial(s,i),l=t.buildMonomial(s,i);r=r.addOrSubtract(l),n=n.addOrSubtract(o)}return[r,n]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let r=this.getCoefficient(t);if(0!==r){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),0===t||1!==r){const t=this.field.log(r);0===t?e+="1":1===t?e+="a":(e+="a^",e+=t)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e}}class $ extends c{}$.kind="ArithmeticException";class ee extends Z{constructor(e,t,r){super(),this.primitive=e,this.size=t,this.generatorBase=r;const n=new Int32Array(t);let s=1;for(let i=0;i<t;i++)n[i]=s,s*=2,s>=t&&(s^=e,s&=t-1);this.expTable=n;const a=new Int32Array(t);for(let i=0;i<t-1;i++)a[n[i]]=i;this.logTable=a,this.zero=new J(this,Int32Array.from([0])),this.one=new J(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new u;if(0===t)return this.zero;const r=new Int32Array(e+1);return r[0]=t,new J(this,r)}inverse(e){if(0===e)throw new $;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+y.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}ee.AZTEC_DATA_12=new ee(4201,4096,1),ee.AZTEC_DATA_10=new ee(1033,1024,1),ee.AZTEC_DATA_6=new ee(67,64,1),ee.AZTEC_PARAM=new ee(19,16,1),ee.QR_CODE_FIELD_256=new ee(285,256,0),ee.DATA_MATRIX_FIELD_256=new ee(301,256,1),ee.AZTEC_DATA_8=ee.DATA_MATRIX_FIELD_256,ee.MAXICODE_FIELD_64=ee.AZTEC_DATA_6;class te extends c{}te.kind="ReedSolomonException";class re extends c{}re.kind="IllegalStateException";class ne{constructor(e){this.field=e}decode(e,t){const r=this.field,n=new J(r,e),s=new Int32Array(t);let a=!0;for(let h=0;h<t;h++){const e=n.evaluateAt(r.exp(h+r.getGeneratorBase()));s[s.length-1-h]=e,0!==e&&(a=!1)}if(a)return;const i=new J(r,s),o=this.runEuclideanAlgorithm(r.buildMonomial(t,1),i,t),l=o[0],c=o[1],d=this.findErrorLocations(l),u=this.findErrorMagnitudes(c,d);for(let h=0;h<d.length;h++){const t=e.length-1-r.log(d[h]);if(t<0)throw new te("Bad error location");e[t]=ee.addOrSubtract(e[t],u[h])}}runEuclideanAlgorithm(e,t,r){if(e.getDegree()<t.getDegree()){const r=e;e=t,t=r}const n=this.field;let s=e,a=t,i=n.getZero(),o=n.getOne();for(;a.getDegree()>=(r/2|0);){let e=s,t=i;if(s=a,i=o,s.isZero())throw new te("r_{i-1} was zero");a=e;let r=n.getZero();const l=s.getCoefficient(s.getDegree()),c=n.inverse(l);for(;a.getDegree()>=s.getDegree()&&!a.isZero();){const e=a.getDegree()-s.getDegree(),t=n.multiply(a.getCoefficient(a.getDegree()),c);r=r.addOrSubtract(n.buildMonomial(e,t)),a=a.addOrSubtract(s.multiplyByMonomial(e,t))}if(o=r.multiply(i).addOrSubtract(t),a.getDegree()>=s.getDegree())throw new re("Division algorithm failed to reduce polynomial?")}const l=o.getCoefficient(0);if(0===l)throw new te("sigmaTilde(0) was zero");const c=n.inverse(l);return[o.multiplyScalar(c),a.multiplyScalar(c)]}findErrorLocations(e){const t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);const r=new Int32Array(t);let n=0;const s=this.field;for(let a=1;a<s.getSize()&&n<t;a++)0===e.evaluateAt(a)&&(r[n]=s.inverse(a),n++);if(n!==t)throw new te("Error locator degree does not match number of roots");return r}findErrorMagnitudes(e,t){const r=t.length,n=new Int32Array(r),s=this.field;for(let a=0;a<r;a++){const i=s.inverse(t[a]);let o=1;for(let e=0;e<r;e++)if(a!==e){const r=s.multiply(t[e],i),n=0===(1&r)?1|r:-2&r;o=s.multiply(o,n)}n[a]=s.multiply(e.evaluateAt(i),s.inverse(o)),0!==s.getGeneratorBase()&&(n[a]=s.multiply(n[a],i))}return n}}!function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"}(V||(V={}));class se{decode(e){this.ddata=e;let t=e.getBits(),r=this.extractBits(t),n=this.correctBits(r),s=se.convertBoolArrayToByteArray(n),a=se.getEncodedData(n),i=new K(s,a,null,null);return i.setNumBits(n.length),i}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,r=V.UPPER,n=V.UPPER,s="",a=0;for(;a<t;)if(n===V.BINARY){if(t-a<5)break;let i=se.readCode(e,a,5);if(a+=5,0===i){if(t-a<11)break;i=se.readCode(e,a,11)+31,a+=11}for(let r=0;r<i;r++){if(t-a<8){a=t;break}const r=se.readCode(e,a,8);s+=E.castAsNonUtf8Char(r),a+=8}n=r}else{let i=n===V.DIGIT?4:5;if(t-a<i)break;let o=se.readCode(e,a,i);a+=i;let l=se.getCharacter(n,o);l.startsWith("CTRL_")?(r=n,n=se.getTable(l.charAt(5)),"L"===l.charAt(6)&&(r=n)):(s+=l,n=r)}return s}static getTable(e){switch(e){case"L":return V.LOWER;case"P":return V.PUNCT;case"M":return V.MIXED;case"D":return V.DIGIT;case"B":return V.BINARY;default:return V.UPPER}}static getCharacter(e,t){switch(e){case V.UPPER:return se.UPPER_TABLE[t];case V.LOWER:return se.LOWER_TABLE[t];case V.MIXED:return se.MIXED_TABLE[t];case V.PUNCT:return se.PUNCT_TABLE[t];case V.DIGIT:return se.DIGIT_TABLE[t];default:throw new re("Bad table")}}correctBits(e){let t,r;this.ddata.getNbLayers()<=2?(r=6,t=ee.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=ee.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=ee.AZTEC_DATA_10):(r=12,t=ee.AZTEC_DATA_12);let n=this.ddata.getNbDatablocks(),s=e.length/r;if(s<n)throw new j;let a=e.length%r,i=new Int32Array(s);for(let h=0;h<s;h++,a+=r)i[h]=se.readCode(e,a,r);try{new ne(t).decode(i,s-n)}catch(u){throw new j(u)}let o=(1<<r)-1,l=0;for(let h=0;h<n;h++){let e=i[h];if(0===e||e===o)throw new j;1!==e&&e!==o-1||l++}let c=new Array(n*r-l),d=0;for(let h=0;h<n;h++){let e=i[h];if(1===e||e===o-1)c.fill(e>1,d,d+r-1),d+=r-1;else for(let t=r-1;t>=0;--t)c[d++]=0!==(e&1<<t)}return c}extractBits(e){let t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),n=(t?11:14)+4*r,s=new Int32Array(n),a=new Array(this.totalBitsInLayer(r,t));if(t)for(let i=0;i<s.length;i++)s[i]=i;else{let e=n+1+2*y.truncDivision(y.truncDivision(n,2)-1,15),t=n/2,r=y.truncDivision(e,2);for(let n=0;n<t;n++){let e=n+y.truncDivision(n,15);s[t-n-1]=r-e-1,s[t+n]=r+e+1}}for(let i=0,o=0;i<r;i++){let l=4*(r-i)+(t?9:12),c=2*i,d=n-1-c;for(let t=0;t<l;t++){let r=2*t;for(let n=0;n<2;n++)a[o+r+n]=e.get(s[c+n],s[c+t]),a[o+2*l+r+n]=e.get(s[c+t],s[d-n]),a[o+4*l+r+n]=e.get(s[d-n],s[d-t]),a[o+6*l+r+n]=e.get(s[d-t],s[c+n])}o+=8*l}return a}static readCode(e,t,r){let n=0;for(let s=t;s<t+r;s++)n<<=1,e[s]&&(n|=1);return n}static readByte(e,t){let r=e.length-t;return r>=8?se.readCode(e,t,8):se.readCode(e,t,r)<<8-r}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let r=0;r<t.length;r++)t[r]=se.readByte(e,8*r);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}se.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],se.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],se.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],se.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],se.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ae{constructor(){}static round(e){return NaN===e?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,r,n){const s=e-r,a=t-n;return Math.sqrt(s*s+a*a)}static sum(e){let t=0;for(let r=0,n=e.length;r!==n;r++)t+=e[r];return t}}class ie{static floatToIntBits(e){return e}}ie.MAX_VALUE=Number.MAX_SAFE_INTEGER;class oe{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof oe){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*ie.floatToIntBits(this.x)+ie.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),n=this.distance(e[0],e[2]);let s,a,i;if(r>=t&&r>=n?(a=e[0],s=e[1],i=e[2]):n>=r&&n>=t?(a=e[1],s=e[0],i=e[2]):(a=e[2],s=e[0],i=e[1]),this.crossProductZ(s,a,i)<0){const e=s;s=i,i=e}e[0]=s,e[1]=a,e[2]=i}static distance(e,t){return ae.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,r){const n=t.x,s=t.y;return(r.x-n)*(e.y-s)-(r.y-s)*(e.x-n)}}class le{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class ce extends le{constructor(e,t,r,n,s){super(e,t),this.compact=r,this.nbDatablocks=n,this.nbLayers=s}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class de{constructor(e,t,r,n){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),void 0!==t&&null!==t||(t=de.INIT_SIZE),void 0!==r&&null!==r||(r=e.getWidth()/2|0),void 0!==n&&null!==n||(n=e.getHeight()/2|0);const s=t/2|0;if(this.leftInit=r-s,this.rightInit=r+s,this.upInit=n-s,this.downInit=n+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new k}detect(){let e=this.leftInit,t=this.rightInit,r=this.upInit,n=this.downInit,s=!1,a=!0,i=!1,o=!1,l=!1,c=!1,d=!1;const u=this.width,h=this.height;for(;a;){a=!1;let m=!0;for(;(m||!o)&&t<u;)m=this.containsBlackPoint(r,n,t,!1),m?(t++,a=!0,o=!0):o||t++;if(t>=u){s=!0;break}let p=!0;for(;(p||!l)&&n<h;)p=this.containsBlackPoint(e,t,n,!0),p?(n++,a=!0,l=!0):l||n++;if(n>=h){s=!0;break}let f=!0;for(;(f||!c)&&e>=0;)f=this.containsBlackPoint(r,n,e,!1),f?(e--,a=!0,c=!0):c||e--;if(e<0){s=!0;break}let x=!0;for(;(x||!d)&&r>=0;)x=this.containsBlackPoint(e,t,r,!0),x?(r--,a=!0,d=!0):d||r--;if(r<0){s=!0;break}a&&(i=!0)}if(!s&&i){const s=t-e;let a=null;for(let t=1;null===a&&t<s;t++)a=this.getBlackPointOnSegment(e,n-t,e+t,n);if(null==a)throw new k;let i=null;for(let t=1;null===i&&t<s;t++)i=this.getBlackPointOnSegment(e,r+t,e+t,r);if(null==i)throw new k;let o=null;for(let e=1;null===o&&e<s;e++)o=this.getBlackPointOnSegment(t,r+e,t-e,r);if(null==o)throw new k;let l=null;for(let e=1;null===l&&e<s;e++)l=this.getBlackPointOnSegment(t,n-e,t-e,n);if(null==l)throw new k;return this.centerEdges(l,a,o,i)}throw new k}getBlackPointOnSegment(e,t,r,n){const s=ae.round(ae.distance(e,t,r,n)),a=(r-e)/s,i=(n-t)/s,o=this.image;for(let l=0;l<s;l++){const r=ae.round(e+l*a),n=ae.round(t+l*i);if(o.get(r,n))return new oe(r,n)}return null}centerEdges(e,t,r,n){const s=e.getX(),a=e.getY(),i=t.getX(),o=t.getY(),l=r.getX(),c=r.getY(),d=n.getX(),u=n.getY(),h=de.CORR;return s<this.width/2?[new oe(d-h,u+h),new oe(i+h,o+h),new oe(l-h,c-h),new oe(s+h,a-h)]:[new oe(d+h,u+h),new oe(i+h,o-h),new oe(l-h,c+h),new oe(s-h,a-h)]}containsBlackPoint(e,t,r,n){const s=this.image;if(n){for(let a=e;a<=t;a++)if(s.get(a,r))return!0}else for(let a=e;a<=t;a++)if(s.get(r,a))return!0;return!1}}de.INIT_SIZE=10,de.CORR=1;class ue{static checkAndNudgePoints(e,t){const r=e.getWidth(),n=e.getHeight();let s=!0;for(let a=0;a<t.length&&s;a+=2){const e=Math.floor(t[a]),i=Math.floor(t[a+1]);if(e<-1||e>r||i<-1||i>n)throw new k;s=!1,-1===e?(t[a]=0,s=!0):e===r&&(t[a]=r-1,s=!0),-1===i?(t[a+1]=0,s=!0):i===n&&(t[a+1]=n-1,s=!0)}s=!0;for(let a=t.length-2;a>=0&&s;a-=2){const e=Math.floor(t[a]),i=Math.floor(t[a+1]);if(e<-1||e>r||i<-1||i>n)throw new k;s=!1,-1===e?(t[a]=0,s=!0):e===r&&(t[a]=r-1,s=!0),-1===i?(t[a+1]=0,s=!0):i===n&&(t[a+1]=n-1,s=!0)}}}class he{constructor(e,t,r,n,s,a,i,o,l){this.a11=e,this.a21=t,this.a31=r,this.a12=n,this.a22=s,this.a32=a,this.a13=i,this.a23=o,this.a33=l}static quadrilateralToQuadrilateral(e,t,r,n,s,a,i,o,l,c,d,u,h,m,p,f){const x=he.quadrilateralToSquare(e,t,r,n,s,a,i,o);return he.squareToQuadrilateral(l,c,d,u,h,m,p,f).times(x)}transformPoints(e){const t=e.length,r=this.a11,n=this.a12,s=this.a13,a=this.a21,i=this.a22,o=this.a23,l=this.a31,c=this.a32,d=this.a33;for(let u=0;u<t;u+=2){const t=e[u],h=e[u+1],m=s*t+o*h+d;e[u]=(r*t+a*h+l)/m,e[u+1]=(n*t+i*h+c)/m}}transformPointsWithValues(e,t){const r=this.a11,n=this.a12,s=this.a13,a=this.a21,i=this.a22,o=this.a23,l=this.a31,c=this.a32,d=this.a33,u=e.length;for(let h=0;h<u;h++){const u=e[h],m=t[h],p=s*u+o*m+d;e[h]=(r*u+a*m+l)/p,t[h]=(n*u+i*m+c)/p}}static squareToQuadrilateral(e,t,r,n,s,a,i,o){const l=e-r+s-i,c=t-n+a-o;if(0===l&&0===c)return new he(r-e,s-r,e,n-t,a-n,t,0,0,1);{const d=r-s,u=i-s,h=n-a,m=o-a,p=d*m-u*h,f=(l*m-u*c)/p,x=(d*c-l*h)/p;return new he(r-e+f*r,i-e+x*i,e,n-t+f*n,o-t+x*o,t,f,x,1)}}static quadrilateralToSquare(e,t,r,n,s,a,i,o){return he.squareToQuadrilateral(e,t,r,n,s,a,i,o).buildAdjoint()}buildAdjoint(){return new he(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new he(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class me extends ue{sampleGrid(e,t,r,n,s,a,i,o,l,c,d,u,h,m,p,f,x,g,b){const y=he.quadrilateralToQuadrilateral(n,s,a,i,o,l,c,d,u,h,m,p,f,x,g,b);return this.sampleGridWithTransform(e,t,r,y)}sampleGridWithTransform(e,t,r,n){if(t<=0||r<=0)throw new k;const s=new I(t,r),a=new Float32Array(2*t);for(let o=0;o<r;o++){const t=a.length,r=o+.5;for(let e=0;e<t;e+=2)a[e]=e/2+.5,a[e+1]=r;n.transformPoints(a),ue.checkAndNudgePoints(e,a);try{for(let r=0;r<t;r+=2)e.get(Math.floor(a[r]),Math.floor(a[r+1]))&&s.set(r/2,o)}catch(i){throw new k}}return s}}class pe{static setGridSampler(e){pe.gridSampler=e}static getInstance(){return pe.gridSampler}}pe.gridSampler=new me;class fe{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new oe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class xe{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){let e=r[0];r[0]=r[2],r[2]=e}this.extractParameters(r);let n=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new ce(n,s,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new k;let t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);let n=0;for(let a=0;a<4;a++){let e=r[(this.shift+a)%4];this.compact?(n<<=7,n+=e>>1&127):(n<<=10,n+=(e>>2&992)+(e>>1&31))}let s=this.getCorrectedParameterData(n,this.compact);this.compact?(this.nbLayers=1+(s>>6),this.nbDataBlocks=1+(63&s)):(this.nbLayers=1+(s>>11),this.nbDataBlocks=1+(2047&s))}getRotation(e,t){let r=0;e.forEach((e,n,s)=>{r=(e>>t-2<<1)+(1&e)+(r<<3)}),r=((1&r)<<11)+(r>>1);for(let n=0;n<4;n++)if(y.bitCount(r^this.EXPECTED_CORNER_BITS[n])<=2)return n;throw new k}getCorrectedParameterData(e,t){let r,n;t?(r=7,n=2):(r=10,n=4);let s=r-n,a=new Int32Array(r);for(let l=r-1;l>=0;--l)a[l]=15&e,e>>=4;try{new ne(ee.AZTEC_PARAM).decode(a,s)}catch(o){throw new k}let i=0;for(let l=0;l<n;l++)i=(i<<4)+a[l];return i}getBullsEyeCorners(e){let t=e,r=e,n=e,s=e,a=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let e=this.getFirstDifferent(t,a,1,-1),i=this.getFirstDifferent(r,a,1,1),o=this.getFirstDifferent(n,a,-1,1),l=this.getFirstDifferent(s,a,-1,-1);if(this.nbCenterLayers>2){let r=this.distancePoint(l,e)*this.nbCenterLayers/(this.distancePoint(s,t)*(this.nbCenterLayers+2));if(r<.75||r>1.25||!this.isWhiteOrBlackRectangle(e,i,o,l))break}t=e,r=i,n=o,s=l,a=!a}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new k;this.compact=5===this.nbCenterLayers;let i=new oe(t.getX()+.5,t.getY()-.5),o=new oe(r.getX()+.5,r.getY()+.5),l=new oe(n.getX()-.5,n.getY()+.5),c=new oe(s.getX()-.5,s.getY()-.5);return this.expandSquare([i,o,l,c],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,r,n;try{let s=new de(this.image).detect();e=s[0],t=s[1],r=s[2],n=s[3]}catch(i){let s=this.image.getWidth()/2,a=this.image.getHeight()/2;e=this.getFirstDifferent(new fe(s+7,a-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new fe(s+7,a+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new fe(s-7,a+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new fe(s-7,a-7),!1,-1,-1).toResultPoint()}let s=ae.round((e.getX()+n.getX()+t.getX()+r.getX())/4),a=ae.round((e.getY()+n.getY()+t.getY()+r.getY())/4);try{let i=new de(this.image,15,s,a).detect();e=i[0],t=i[1],r=i[2],n=i[3]}catch(i){e=this.getFirstDifferent(new fe(s+7,a-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new fe(s+7,a+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new fe(s-7,a+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new fe(s-7,a-7),!1,-1,-1).toResultPoint()}return s=ae.round((e.getX()+n.getX()+t.getX()+r.getX())/4),a=ae.round((e.getY()+n.getY()+t.getY()+r.getY())/4),new fe(s,a)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,r,n,s){let a=pe.getInstance(),i=this.getDimension(),o=i/2-this.nbCenterLayers,l=i/2+this.nbCenterLayers;return a.sampleGrid(e,i,i,o,o,l,o,l,l,o,l,t.getX(),t.getY(),r.getX(),r.getY(),n.getX(),n.getY(),s.getX(),s.getY())}sampleLine(e,t,r){let n=0,s=this.distanceResultPoint(e,t),a=s/r,i=e.getX(),o=e.getY(),l=a*(t.getX()-e.getX())/s,c=a*(t.getY()-e.getY())/s;for(let d=0;d<r;d++)this.image.get(ae.round(i+d*l),ae.round(o+d*c))&&(n|=1<<r-d-1);return n}isWhiteOrBlackRectangle(e,t,r,n){let s=3;e=new fe(e.getX()-s,e.getY()+s),t=new fe(t.getX()-s,t.getY()-s),r=new fe(r.getX()+s,r.getY()-s),n=new fe(n.getX()+s,n.getY()+s);let a=this.getColor(n,e);if(0===a)return!1;let i=this.getColor(e,t);return i===a&&(i=this.getColor(t,r),i===a&&(i=this.getColor(r,n),i===a))}getColor(e,t){let r=this.distancePoint(e,t),n=(t.getX()-e.getX())/r,s=(t.getY()-e.getY())/r,a=0,i=e.getX(),o=e.getY(),l=this.image.get(e.getX(),e.getY()),c=Math.ceil(r);for(let u=0;u<c;u++)i+=n,o+=s,this.image.get(ae.round(i),ae.round(o))!==l&&a++;let d=a/r;return d>.1&&d<.9?0:d<=.1===l?1:-1}getFirstDifferent(e,t,r,n){let s=e.getX()+r,a=e.getY()+n;for(;this.isValid(s,a)&&this.image.get(s,a)===t;)s+=r,a+=n;for(s-=r,a-=n;this.isValid(s,a)&&this.image.get(s,a)===t;)s+=r;for(s-=r;this.isValid(s,a)&&this.image.get(s,a)===t;)a+=n;return a-=n,new fe(s,a)}expandSquare(e,t,r){let n=r/(2*t),s=e[0].getX()-e[2].getX(),a=e[0].getY()-e[2].getY(),i=(e[0].getX()+e[2].getX())/2,o=(e[0].getY()+e[2].getY())/2,l=new oe(i+n*s,o+n*a),c=new oe(i-n*s,o-n*a);return s=e[1].getX()-e[3].getX(),a=e[1].getY()-e[3].getY(),i=(e[1].getX()+e[3].getX())/2,o=(e[1].getY()+e[3].getY())/2,[l,new oe(i+n*s,o+n*a),c,new oe(i-n*s,o-n*a)]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=ae.round(e.getX()),r=ae.round(e.getY());return this.isValid(t,r)}distancePoint(e,t){return ae.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return ae.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(y.truncDivision(this.nbLayers-4,8)+1)+15}}class ge{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=null,n=new xe(e.getBlackMatrix()),s=null,a=null;try{let e=n.detectMirror(!1);s=e.getPoints(),this.reportFoundResultPoints(t,s),a=(new se).decode(e)}catch(c){r=c}if(null==a)try{let e=n.detectMirror(!0);s=e.getPoints(),this.reportFoundResultPoints(t,s),a=(new se).decode(e)}catch(c){if(null!=r)throw r;throw c}let i=new U(a.getText(),a.getRawBytes(),a.getNumBits(),s,H.AZTEC,f.currentTimeMillis()),o=a.getByteSegments();null!=o&&i.putMetadata(Q.BYTE_SEGMENTS,o);let l=a.getECLevel();return null!=l&&i.putMetadata(Q.ERROR_CORRECTION_LEVEL,l),i}reportFoundResultPoints(e,t){if(null!=e){let r=e.get(N.NEED_RESULT_POINT_CALLBACK);null!=r&&t.forEach((e,t,n)=>{r.foundPossibleResultPoint(e)})}}reset(){}}class be extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new ge,e)}}class ye{decode(e,t){try{return this.doDecode(e,t)}catch(r){if(t&&!0===t.get(N.TRY_HARDER)&&e.isRotateSupported()){const r=e.rotateCounterClockwise(),n=this.doDecode(r,t),s=n.getResultMetadata();let a=270;null!==s&&!0===s.get(Q.ORIENTATION)&&(a+=s.get(Q.ORIENTATION)%360),n.putMetadata(Q.ORIENTATION,a);const i=n.getResultPoints();if(null!==i){const e=r.getHeight();for(let t=0;t<i.length;t++)i[t]=new oe(e-i[t].getY()-1,i[t].getX())}return n}throw new k}}reset(){}doDecode(e,t){const r=e.getWidth(),n=e.getHeight();let s=new v(r);const a=t&&!0===t.get(N.TRY_HARDER),i=Math.max(1,n>>(a?8:5));let o;o=a?n:15;const l=Math.trunc(n/2);for(let u=0;u<o;u++){const a=Math.trunc((u+1)/2),o=l+i*(0===(1&u)?a:-a);if(o<0||o>=n)break;try{s=e.getBlackRow(o,s)}catch(c){continue}for(let e=0;e<2;e++){if(1===e&&(s.reverse(),t&&!0===t.get(N.NEED_RESULT_POINT_CALLBACK))){const e=new Map;t.forEach((t,r)=>e.set(r,t)),e.delete(N.NEED_RESULT_POINT_CALLBACK),t=e}try{const n=this.decodeRow(o,s,t);if(1===e){n.putMetadata(Q.ORIENTATION,180);const e=n.getResultPoints();null!==e&&(e[0]=new oe(r-e[0].getX()-1,e[0].getY()),e[1]=new oe(r-e[1].getX()-1,e[1].getY()))}return n}catch(d){}}}throw new k}static recordPattern(e,t,r){const n=r.length;for(let l=0;l<n;l++)r[l]=0;const s=e.getSize();if(t>=s)throw new k;let a=!e.get(t),i=0,o=t;for(;o<s;){if(e.get(o)!==a)r[i]++;else{if(++i===n)break;r[i]=1,a=!a}o++}if(i!==n&&(i!==n-1||o!==s))throw new k}static recordPatternInReverse(e,t,r){let n=r.length,s=e.get(t);for(;t>0&&n>=0;)e.get(--t)!==s&&(n--,s=!s);if(n>=0)throw new k;ye.recordPattern(e,t+1,r)}static patternMatchVariance(e,t,r){const n=e.length;let s=0,a=0;for(let l=0;l<n;l++)s+=e[l],a+=t[l];if(s<a)return Number.POSITIVE_INFINITY;const i=s/a;r*=i;let o=0;for(let l=0;l<n;l++){const n=e[l],s=t[l]*i,a=n>s?n-s:s-n;if(a>r)return Number.POSITIVE_INFINITY;o+=a}return o/s}}class ve extends ye{static findStartPattern(e){const t=e.getSize(),r=e.getNextSet(0);let n=0,s=Int32Array.from([0,0,0,0,0,0]),a=r,i=!1;const o=6;for(let l=r;l<t;l++)if(e.get(l)!==i)s[n]++;else{if(n===o-1){let t=ve.MAX_AVG_VARIANCE,r=-1;for(let e=ve.CODE_START_A;e<=ve.CODE_START_C;e++){const n=ye.patternMatchVariance(s,ve.CODE_PATTERNS[e],ve.MAX_INDIVIDUAL_VARIANCE);n<t&&(t=n,r=e)}if(r>=0&&e.isRange(Math.max(0,a-(l-a)/2),a,!1))return Int32Array.from([a,l,r]);a+=s[0]+s[1],s=s.slice(2,s.length-1),s[n-1]=0,s[n]=0,n--}else n++;s[n]=1,i=!i}throw new k}static decodeCode(e,t,r){ye.recordPattern(e,r,t);let n=ve.MAX_AVG_VARIANCE,s=-1;for(let a=0;a<ve.CODE_PATTERNS.length;a++){const e=ve.CODE_PATTERNS[a],r=this.patternMatchVariance(t,e,ve.MAX_INDIVIDUAL_VARIANCE);r<n&&(n=r,s=a)}if(s>=0)return s;throw new k}decodeRow(e,t,r){const n=r&&!0===r.get(N.ASSUME_GS1),s=ve.findStartPattern(t),a=s[2];let i=0;const o=new Uint8Array(20);let l;switch(o[i++]=a,a){case ve.CODE_START_A:l=ve.CODE_CODE_A;break;case ve.CODE_START_B:l=ve.CODE_CODE_B;break;case ve.CODE_START_C:l=ve.CODE_CODE_C;break;default:throw new j}let c=!1,d=!1,u="",h=s[0],p=s[1];const f=Int32Array.from([0,0,0,0,0,0]);let x=0,g=0,b=a,y=0,v=!0,w=!1,_=!1;for(;!c;){const e=d;switch(d=!1,x=g,g=ve.decodeCode(t,f,p),o[i++]=g,g!==ve.CODE_STOP&&(v=!0),g!==ve.CODE_STOP&&(y++,b+=y*g),h=p,p+=f.reduce((e,t)=>e+t,0),g){case ve.CODE_START_A:case ve.CODE_START_B:case ve.CODE_START_C:throw new j}switch(l){case ve.CODE_CODE_A:if(g<64)u+=_===w?String.fromCharCode(" ".charCodeAt(0)+g):String.fromCharCode(" ".charCodeAt(0)+g+128),_=!1;else if(g<96)u+=_===w?String.fromCharCode(g-64):String.fromCharCode(g+64),_=!1;else switch(g!==ve.CODE_STOP&&(v=!1),g){case ve.CODE_FNC_1:n&&(0===u.length?u+="]C1":u+=String.fromCharCode(29));break;case ve.CODE_FNC_2:case ve.CODE_FNC_3:break;case ve.CODE_FNC_4_A:!w&&_?(w=!0,_=!1):w&&_?(w=!1,_=!1):_=!0;break;case ve.CODE_SHIFT:d=!0,l=ve.CODE_CODE_B;break;case ve.CODE_CODE_B:l=ve.CODE_CODE_B;break;case ve.CODE_CODE_C:l=ve.CODE_CODE_C;break;case ve.CODE_STOP:c=!0}break;case ve.CODE_CODE_B:if(g<96)u+=_===w?String.fromCharCode(" ".charCodeAt(0)+g):String.fromCharCode(" ".charCodeAt(0)+g+128),_=!1;else switch(g!==ve.CODE_STOP&&(v=!1),g){case ve.CODE_FNC_1:n&&(0===u.length?u+="]C1":u+=String.fromCharCode(29));break;case ve.CODE_FNC_2:case ve.CODE_FNC_3:break;case ve.CODE_FNC_4_B:!w&&_?(w=!0,_=!1):w&&_?(w=!1,_=!1):_=!0;break;case ve.CODE_SHIFT:d=!0,l=ve.CODE_CODE_A;break;case ve.CODE_CODE_A:l=ve.CODE_CODE_A;break;case ve.CODE_CODE_C:l=ve.CODE_CODE_C;break;case ve.CODE_STOP:c=!0}break;case ve.CODE_CODE_C:if(g<100)g<10&&(u+="0"),u+=g;else switch(g!==ve.CODE_STOP&&(v=!1),g){case ve.CODE_FNC_1:n&&(0===u.length?u+="]C1":u+=String.fromCharCode(29));break;case ve.CODE_CODE_A:l=ve.CODE_CODE_A;break;case ve.CODE_CODE_B:l=ve.CODE_CODE_B;break;case ve.CODE_STOP:c=!0}}e&&(l=l===ve.CODE_CODE_A?ve.CODE_CODE_B:ve.CODE_CODE_A)}const C=p-h;if(p=t.getNextUnset(p),!t.isRange(p,Math.min(t.getSize(),p+(p-h)/2),!1))throw new k;if(b-=y*x,b%103!==x)throw new m;const S=u.length;if(0===S)throw new k;S>0&&v&&(u=l===ve.CODE_CODE_C?u.substring(0,S-2):u.substring(0,S-1));const E=(s[1]+s[0])/2,A=h+C/2,I=o.length,T=new Uint8Array(I);for(let m=0;m<I;m++)T[m]=o[m];const D=[new oe(E,e),new oe(A,e)];return new U(u,T,0,D,H.CODE_128,(new Date).getTime())}}ve.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ve.MAX_AVG_VARIANCE=.25,ve.MAX_INDIVIDUAL_VARIANCE=.7,ve.CODE_SHIFT=98,ve.CODE_CODE_C=99,ve.CODE_CODE_B=100,ve.CODE_CODE_A=101,ve.CODE_FNC_1=102,ve.CODE_FNC_2=97,ve.CODE_FNC_3=96,ve.CODE_FNC_4_A=101,ve.CODE_FNC_4_B=100,ve.CODE_START_A=103,ve.CODE_START_B=104,ve.CODE_START_C=105,ve.CODE_STOP=106;class we extends ye{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,r){let n=this.counters;n.fill(0),this.decodeRowResult="";let s,a,i=we.findAsteriskPattern(t,n),o=t.getNextSet(i[1]),l=t.getSize();do{we.recordPattern(t,o,n);let e=we.toNarrowWidePattern(n);if(e<0)throw new k;s=we.patternToChar(e),this.decodeRowResult+=s,a=o;for(let t of n)o+=t;o=t.getNextSet(o)}while("*"!==s);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let c,d=0;for(let m of n)d+=m;if(o!==l&&2*(o-a-d)<d)throw new k;if(this.usingCheckDigit){let e=this.decodeRowResult.length-1,t=0;for(let r=0;r<e;r++)t+=we.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(r));if(this.decodeRowResult.charAt(e)!==we.ALPHABET_STRING.charAt(t%43))throw new m;this.decodeRowResult=this.decodeRowResult.substring(0,e)}if(0===this.decodeRowResult.length)throw new k;c=this.extendedMode?we.decodeExtended(this.decodeRowResult):this.decodeRowResult;let u=(i[1]+i[0])/2,h=a+d/2;return new U(c,null,0,[new oe(u,e),new oe(h,e)],H.CODE_39,(new Date).getTime())}static findAsteriskPattern(e,t){let r=e.getSize(),n=e.getNextSet(0),s=0,a=n,i=!1,o=t.length;for(let l=n;l<r;l++)if(e.get(l)!==i)t[s]++;else{if(s===o-1){if(this.toNarrowWidePattern(t)===we.ASTERISK_ENCODING&&e.isRange(Math.max(0,a-Math.floor((l-a)/2)),a,!1))return[a,l];a+=t[0]+t[1],t.copyWithin(0,2,2+s-1),t[s-1]=0,t[s]=0,s--}else s++;t[s]=1,i=!i}throw new k}static toNarrowWidePattern(e){let t,r=e.length,n=0;do{let s=2147483647;for(let t of e)t<s&&t>n&&(s=t);n=s,t=0;let a=0,i=0;for(let o=0;o<r;o++){let s=e[o];s>n&&(i|=1<<r-1-o,t++,a+=s)}if(3===t){for(let s=0;s<r&&t>0;s++){let r=e[s];if(r>n&&(t--,2*r>=a))return-1}return i}}while(t>3);return-1}static patternToChar(e){for(let t=0;t<we.CHARACTER_ENCODINGS.length;t++)if(we.CHARACTER_ENCODINGS[t]===e)return we.ALPHABET_STRING.charAt(t);if(e===we.ASTERISK_ENCODING)return"*";throw new k}static decodeExtended(e){let t=e.length,r="";for(let n=0;n<t;n++){let t=e.charAt(n);if("+"===t||"$"===t||"%"===t||"/"===t){let s=e.charAt(n+1),a="\0";switch(t){case"+":if(!(s>="A"&&s<="Z"))throw new j;a=String.fromCharCode(s.charCodeAt(0)+32);break;case"$":if(!(s>="A"&&s<="Z"))throw new j;a=String.fromCharCode(s.charCodeAt(0)-64);break;case"%":if(s>="A"&&s<="E")a=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")a=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")a=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")a=String.fromCharCode(s.charCodeAt(0)+43);else if("U"===s)a="\0";else if("V"===s)a="@";else if("W"===s)a="`";else{if("X"!==s&&"Y"!==s&&"Z"!==s)throw new j;a="\x7f"}break;case"/":if(s>="A"&&s<="O")a=String.fromCharCode(s.charCodeAt(0)-32);else{if("Z"!==s)throw new j;a=":"}}r+=a,n++}else r+=t}return r}}we.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",we.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],we.ASTERISK_ENCODING=148;class Ne extends ye{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,r){let n=this.decodeStart(t),s=this.decodeEnd(t),a=new A;Ne.decodeMiddle(t,n[1],s[0],a);let i=a.toString(),o=null;null!=r&&(o=r.get(N.ALLOWED_LENGTHS)),null==o&&(o=Ne.DEFAULT_ALLOWED_LENGTHS);let l=i.length,c=!1,d=0;for(let h of o){if(l===h){c=!0;break}h>d&&(d=h)}if(!c&&l>d&&(c=!0),!c)throw new j;const u=[new oe(n[1],e),new oe(s[0],e)];return new U(i,null,0,u,H.ITF,(new Date).getTime())}static decodeMiddle(e,t,r,n){let s=new Int32Array(10),a=new Int32Array(5),i=new Int32Array(5);for(s.fill(0),a.fill(0),i.fill(0);t<r;){ye.recordPattern(e,t,s);for(let e=0;e<5;e++){let t=2*e;a[e]=s[t],i[e]=s[t+1]}let r=Ne.decodeDigit(a);n.append(r.toString()),r=this.decodeDigit(i),n.append(r.toString()),s.forEach(function(e){t+=e})}}decodeStart(e){let t=Ne.skipWhiteSpace(e),r=Ne.findGuardPattern(e,t,Ne.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(e,r[0]),r}validateQuietZone(e,t){let r=10*this.narrowLineWidth;r=r<t?r:t;for(let n=t-1;r>0&&n>=0&&!e.get(n);n--)r--;if(0!==r)throw new k}static skipWhiteSpace(e){const t=e.getSize(),r=e.getNextSet(0);if(r===t)throw new k;return r}decodeEnd(e){e.reverse();try{let r,n=Ne.skipWhiteSpace(e);try{r=Ne.findGuardPattern(e,n,Ne.END_PATTERN_REVERSED[0])}catch(t){t instanceof k&&(r=Ne.findGuardPattern(e,n,Ne.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,r[0]);let s=r[0];return r[0]=e.getSize()-r[1],r[1]=e.getSize()-s,r}finally{e.reverse()}}static findGuardPattern(e,t,r){let n=r.length,s=new Int32Array(n),a=e.getSize(),i=!1,o=0,l=t;s.fill(0);for(let c=t;c<a;c++)if(e.get(c)!==i)s[o]++;else{if(o===n-1){if(ye.patternMatchVariance(s,r,Ne.MAX_INDIVIDUAL_VARIANCE)<Ne.MAX_AVG_VARIANCE)return[l,c];l+=s[0]+s[1],f.arraycopy(s,2,s,0,o-1),s[o-1]=0,s[o]=0,o--}else o++;s[o]=1,i=!i}throw new k}static decodeDigit(e){let t=Ne.MAX_AVG_VARIANCE,r=-1,n=Ne.PATTERNS.length;for(let s=0;s<n;s++){let n=Ne.PATTERNS[s],a=ye.patternMatchVariance(e,n,Ne.MAX_INDIVIDUAL_VARIANCE);a<t?(t=a,r=s):a===t&&(r=-1)}if(r>=0)return r%10;throw new k}}Ne.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ne.MAX_AVG_VARIANCE=.38,Ne.MAX_INDIVIDUAL_VARIANCE=.5,Ne.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ne.START_PATTERN=Int32Array.from([1,1,1,1]),Ne.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class je extends ye{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t,r=!1,n=0,s=Int32Array.from([0,0,0]);for(;!r;){s=Int32Array.from([0,0,0]),t=je.findGuardPattern(e,n,!1,this.START_END_PATTERN,s);let a=t[0];n=t[1];let i=a-(n-a);i>=0&&(r=e.isRange(i,a,!1))}return t}static checkChecksum(e){return je.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let r=parseInt(e.charAt(t-1),10);return je.getStandardUPCEANChecksum(e.substring(0,t-1))===r}static getStandardUPCEANChecksum(e){let t=e.length,r=0;for(let n=t-1;n>=0;n-=2){let t=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new j;r+=t}r*=3;for(let n=t-2;n>=0;n-=2){let t=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new j;r+=t}return(1e3-r)%10}static decodeEnd(e,t){return je.findGuardPattern(e,t,!1,je.START_END_PATTERN,new Int32Array(je.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,r,n){return this.findGuardPattern(e,t,r,n,new Int32Array(n.length))}static findGuardPattern(e,t,r,n,s){let a=e.getSize(),i=0,o=t=r?e.getNextUnset(t):e.getNextSet(t),l=n.length,c=r;for(let d=t;d<a;d++)if(e.get(d)!==c)s[i]++;else{if(i===l-1){if(ye.patternMatchVariance(s,n,je.MAX_INDIVIDUAL_VARIANCE)<je.MAX_AVG_VARIANCE)return Int32Array.from([o,d]);o+=s[0]+s[1];let e=s.slice(2,s.length-1);for(let t=0;t<i-1;t++)s[t]=e[t];s[i-1]=0,s[i]=0,i--}else i++;s[i]=1,c=!c}throw new k}static decodeDigit(e,t,r,n){this.recordPattern(e,r,t);let s=this.MAX_AVG_VARIANCE,a=-1,i=n.length;for(let o=0;o<i;o++){let e=n[o],r=ye.patternMatchVariance(t,e,je.MAX_INDIVIDUAL_VARIANCE);r<s&&(s=r,a=o)}if(a>=0)return a;throw new k}}je.MAX_AVG_VARIANCE=.48,je.MAX_INDIVIDUAL_VARIANCE=.7,je.START_END_PATTERN=Int32Array.from([1,1,1]),je.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),je.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),je.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class _e{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,r){let n=this.decodeRowStringBuffer,s=this.decodeMiddle(t,r,n),a=n.toString(),i=_e.parseExtensionString(a),o=[new oe((r[0]+r[1])/2,e),new oe(s,e)],l=new U(a,null,0,o,H.UPC_EAN_EXTENSION,(new Date).getTime());return null!=i&&l.putAllMetadata(i),l}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let s=e.getSize(),a=t[1],i=0;for(let l=0;l<5&&a<s;l++){let t=je.decodeDigit(e,n,a,je.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of n)a+=e;t>=10&&(i|=1<<4-l),4!==l&&(a=e.getNextSet(a),a=e.getNextUnset(a))}if(5!==r.length)throw new k;let o=this.determineCheckDigit(i);if(_e.extensionChecksum(r.toString())!==o)throw new k;return a}static extensionChecksum(e){let t=e.length,r=0;for(let n=t-2;n>=0;n-=2)r+=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);r*=3;for(let n=t-1;n>=0;n-=2)r+=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);return r*=3,r%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new k}static parseExtensionString(e){if(5!==e.length)return null;let t=_e.parseExtension5String(e);return null==t?null:new Map([[Q.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}let r=parseInt(e.substring(1)),n=r%100;return t+(r/100).toString()+"."+(n<10?"0"+n:n.toString())}}class Ce{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,r){let n=this.decodeRowStringBuffer,s=this.decodeMiddle(t,r,n),a=n.toString(),i=Ce.parseExtensionString(a),o=[new oe((r[0]+r[1])/2,e),new oe(s,e)],l=new U(a,null,0,o,H.UPC_EAN_EXTENSION,(new Date).getTime());return null!=i&&l.putAllMetadata(i),l}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let s=e.getSize(),a=t[1],i=0;for(let o=0;o<2&&a<s;o++){let t=je.decodeDigit(e,n,a,je.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of n)a+=e;t>=10&&(i|=1<<1-o),1!==o&&(a=e.getNextSet(a),a=e.getNextUnset(a))}if(2!==r.length)throw new k;if(parseInt(r.toString())%4!==i)throw new k;return a}static parseExtensionString(e){return 2!==e.length?null:new Map([[Q.ISSUE_NUMBER,parseInt(e)]])}}class Se{static decodeRow(e,t,r){let n=je.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new _e).decodeRow(e,t,n)}catch(s){return(new Ce).decodeRow(e,t,n)}}}Se.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ee extends je{constructor(){super(),this.decodeRowStringBuffer="",Ee.L_AND_G_PATTERNS=Ee.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=Ee.L_PATTERNS[e-10],r=new Int32Array(t.length);for(let e=0;e<t.length;e++)r[e]=t[t.length-e-1];Ee.L_AND_G_PATTERNS[e]=r}}decodeRow(e,t,r){let n=Ee.findStartGuardPattern(t),s=null==r?null:r.get(N.NEED_RESULT_POINT_CALLBACK);if(null!=s){const t=new oe((n[0]+n[1])/2,e);s.foundPossibleResultPoint(t)}let a=this.decodeMiddle(t,n,this.decodeRowStringBuffer),i=a.rowOffset,o=a.resultString;if(null!=s){const t=new oe(i,e);s.foundPossibleResultPoint(t)}let l=this.decodeEnd(t,i);if(null!=s){const t=new oe((l[0]+l[1])/2,e);s.foundPossibleResultPoint(t)}let c=l[1],d=c+(c-l[0]);if(d>=t.getSize()||!t.isRange(c,d,!1))throw new k;let u=o.toString();if(u.length<8)throw new j;if(!Ee.checkChecksum(u))throw new m;let h=(n[1]+n[0])/2,p=(l[1]+l[0])/2,f=this.getBarcodeFormat(),x=[new oe(h,e),new oe(p,e)],g=new U(u,null,0,x,f,(new Date).getTime()),b=0;try{let r=Se.decodeRow(e,t,l[1]);g.putMetadata(Q.UPC_EAN_EXTENSION,r.getText()),g.putAllMetadata(r.getResultMetadata()),g.addResultPoints(r.getResultPoints()),b=r.getText().length}catch(v){}let y=null==r?null:r.get(N.ALLOWED_EAN_EXTENSIONS);if(null!=y){let e=!1;for(let t in y)if(b.toString()===t){e=!0;break}if(!e)throw new k}return g}decodeEnd(e,t){return Ee.findGuardPattern(e,t,!1,Ee.START_END_PATTERN,new Int32Array(Ee.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Ee.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let r=parseInt(e.charAt(t-1),10);return Ee.getStandardUPCEANChecksum(e.substring(0,t-1))===r}static getStandardUPCEANChecksum(e){let t=e.length,r=0;for(let n=t-1;n>=0;n-=2){let t=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new j;r+=t}r*=3;for(let n=t-2;n>=0;n-=2){let t=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new j;r+=t}return(1e3-r)%10}}class Ae extends Ee{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let s=e.getSize(),a=t[1],i=0;for(let o=0;o<6&&a<s;o++){let t=Ee.decodeDigit(e,n,a,Ee.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of n)a+=e;t>=10&&(i|=1<<5-o)}r=Ae.determineFirstDigit(r,i),a=Ee.findGuardPattern(e,a,!0,Ee.MIDDLE_PATTERN,new Int32Array(Ee.MIDDLE_PATTERN.length).fill(0))[1];for(let o=0;o<6&&a<s;o++){let t=Ee.decodeDigit(e,n,a,Ee.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of n)a+=e}return{rowOffset:a,resultString:r}}getBarcodeFormat(){return H.EAN_13}static determineFirstDigit(e,t){for(let r=0;r<10;r++)if(t===this.FIRST_DIGIT_ENCODINGS[r])return e=String.fromCharCode("0".charCodeAt(0)+r)+e;throw new k}}Ae.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ie extends Ee{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,r){const n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let s=e.getSize(),a=t[1];for(let i=0;i<4&&a<s;i++){let t=Ee.decodeDigit(e,n,a,Ee.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of n)a+=e}a=Ee.findGuardPattern(e,a,!0,Ee.MIDDLE_PATTERN,new Int32Array(Ee.MIDDLE_PATTERN.length).fill(0))[1];for(let i=0;i<4&&a<s;i++){let t=Ee.decodeDigit(e,n,a,Ee.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of n)a+=e}return{rowOffset:a,resultString:r}}getBarcodeFormat(){return H.EAN_8}}class ke extends Ee{constructor(){super(...arguments),this.ean13Reader=new Ae}getBarcodeFormat(){return H.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,r){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,r))}decodeMiddle(e,t,r){return this.ean13Reader.decodeMiddle(e,t,r)}maybeReturnResult(e){let t=e.getText();if("0"===t.charAt(0)){let r=new U(t.substring(1),null,null,e.getResultPoints(),H.UPC_A);return null!=e.getResultMetadata()&&r.putAllMetadata(e.getResultMetadata()),r}throw new k}reset(){this.ean13Reader.reset()}}class Te extends Ee{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,r){const n=this.decodeMiddleCounters.map(e=>e);n[0]=0,n[1]=0,n[2]=0,n[3]=0;const s=e.getSize();let a=t[1],i=0;for(let o=0;o<6&&a<s;o++){const t=Te.decodeDigit(e,n,a,Te.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of n)a+=e;t>=10&&(i|=1<<5-o)}return{rowOffset:a,resultString:Te.determineNumSysAndCheckDigit(r,i)}}decodeEnd(e,t){return Te.findGuardPatternWithoutCounters(e,t,!0,Te.MIDDLE_END_PATTERN)}checkChecksum(e){return Ee.checkChecksum(Te.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let r=0;r<=1;r++)for(let n=0;n<10;n++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[r][n])return String.fromCharCode("0".charCodeAt(0)+r)+e+String.fromCharCode("0".charCodeAt(0)+n);throw k.getNotFoundInstance()}getBarcodeFormat(){return H.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(e=>e.charCodeAt(0)),r=new A;r.append(e.charAt(0));let n=t[5];switch(n){case 0:case 1:case 2:r.appendChars(t,0,2),r.append(n),r.append("0000"),r.appendChars(t,2,3);break;case 3:r.appendChars(t,0,3),r.append("00000"),r.appendChars(t,3,2);break;case 4:r.appendChars(t,0,4),r.append("00000"),r.append(t[4]);break;default:r.appendChars(t,0,5),r.append("0000"),r.append(n)}return e.length>=8&&r.append(e.charAt(7)),r.toString()}}Te.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Te.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class De extends ye{constructor(e){super();let r=null==e?null:e.get(N.POSSIBLE_FORMATS),n=[];t(r)?(n.push(new Ae),n.push(new ke),n.push(new Ie),n.push(new Te)):(r.indexOf(H.EAN_13)>-1&&n.push(new Ae),r.indexOf(H.UPC_A)>-1&&n.push(new ke),r.indexOf(H.EAN_8)>-1&&n.push(new Ie),r.indexOf(H.UPC_E)>-1&&n.push(new Te)),this.readers=n}decodeRow(e,t,r){for(let s of this.readers)try{const n=s.decodeRow(e,t,r),a=n.getBarcodeFormat()===H.EAN_13&&"0"===n.getText().charAt(0),i=null==r?null:r.get(N.POSSIBLE_FORMATS),o=null==i||i.includes(H.UPC_A);if(a&&o){const e=n.getRawBytes(),t=new U(n.getText().substring(1),e,e?e.length:null,n.getResultPoints(),H.UPC_A);return t.putAllMetadata(n.getResultMetadata()),t}return n}catch(n){}throw new k}reset(){for(let e of this.readers)e.reset()}}class Re extends ye{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let r=0;r<t.length;r++)if(ye.patternMatchVariance(e,t[r],Re.MAX_INDIVIDUAL_VARIANCE)<Re.MAX_AVG_VARIANCE)return r;throw new k}static count(e){return ae.sum(new Int32Array(e))}static increment(e,t){let r=0,n=t[0];for(let s=1;s<e.length;s++)t[s]>n&&(n=t[s],r=s);e[r]++}static decrement(e,t){let r=0,n=t[0];for(let s=1;s<e.length;s++)t[s]<n&&(n=t[s],r=s);e[r]--}static isFinderPattern(e){let t=e[0]+e[1],r=t/(t+e[2]+e[3]);if(r>=Re.MIN_FINDER_PATTERN_RATIO&&r<=Re.MAX_FINDER_PATTERN_RATIO){let t=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;for(let n of e)n>r&&(r=n),n<t&&(t=n);return r<10*t}return!1}}Re.MAX_AVG_VARIANCE=.2,Re.MAX_INDIVIDUAL_VARIANCE=.45,Re.MIN_FINDER_PATTERN_RATIO=9.5/12,Re.MAX_FINDER_PATTERN_RATIO=12.5/14;class Oe{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Oe))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Me{constructor(e,t,r,n,s){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new oe(r,s)),this.resultPoints.push(new oe(n,s))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Me))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class Pe{constructor(){}static getRSSvalue(e,t,r){let n=0;for(let o of e)n+=o;let s=0,a=0,i=e.length;for(let o=0;o<i-1;o++){let l;for(l=1,a|=1<<o;l<e[o];l++,a&=~(1<<o)){let e=Pe.combins(n-l-1,i-o-2);if(r&&0===a&&n-l-(i-o-1)>=i-o-1&&(e-=Pe.combins(n-l-(i-o),i-o-2)),i-o-1>1){let r=0;for(let e=n-l-(i-o-2);e>t;e--)r+=Pe.combins(n-l-e-1,i-o-3);e-=r*(i-1-o)}else n-l>t&&e--;s+=e}n-=l}return s}static combins(e,t){let r,n;e-t>t?(n=t,r=e-t):(n=e-t,r=t);let s=1,a=1;for(let i=e;i>r;i--)s*=i,a<=n&&(s/=a,a++);for(;a<=n;)s/=a,a++;return s}}class Le{static buildBitArray(e){let t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);let r=new v(12*t),n=0,s=e[0].getRightChar().getValue();for(let a=11;a>=0;--a)0!=(s&1<<a)&&r.set(n),n++;for(let a=1;a<e.length;++a){let t=e[a],s=t.getLeftChar().getValue();for(let e=11;e>=0;--e)0!=(s&1<<e)&&r.set(n),n++;if(null!=t.getRightChar()){let e=t.getRightChar().getValue();for(let t=11;t>=0;--t)0!=(e&1<<t)&&r.set(n),n++}}return r}}class Be{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Fe{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class Ue extends Fe{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===Ue.FNC1}}Ue.FNC1="$";class ze extends Fe{constructor(e,t,r){super(e),r?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class He extends Fe{constructor(e,t,r){if(super(e),t<0||t>10||r<0||r>10)throw new j;this.firstDigit=t,this.secondDigit=r}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===He.FNC1}isSecondDigitFNC1(){return this.secondDigit===He.FNC1}isAnyFNC1(){return this.firstDigit===He.FNC1||this.secondDigit===He.FNC1}}He.FNC1=10;class Ve{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new k;let t=e.substring(0,2);for(let s of Ve.TWO_DIGIT_DATA_LENGTH)if(s[0]===t)return s[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(2,s[2],e):Ve.processFixedAI(2,s[1],e);if(e.length<3)throw new k;let r=e.substring(0,3);for(let s of Ve.THREE_DIGIT_DATA_LENGTH)if(s[0]===r)return s[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(3,s[2],e):Ve.processFixedAI(3,s[1],e);for(let s of Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(s[0]===r)return s[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,s[2],e):Ve.processFixedAI(4,s[1],e);if(e.length<4)throw new k;let n=e.substring(0,4);for(let s of Ve.FOUR_DIGIT_DATA_LENGTH)if(s[0]===n)return s[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,s[2],e):Ve.processFixedAI(4,s[1],e);throw new k}static processFixedAI(e,t,r){if(r.length<e)throw new k;let n=r.substring(0,e);if(r.length<e+t)throw new k;let s=r.substring(e,e+t),a=r.substring(e+t),i="("+n+")"+s,o=Ve.parseFieldsInGeneralPurpose(a);return null==o?i:i+o}static processVariableAI(e,t,r){let n,s=r.substring(0,e);n=r.length<e+t?r.length:e+t;let a=r.substring(e,n),i=r.substring(n),o="("+s+")"+a,l=Ve.parseFieldsInGeneralPurpose(i);return null==l?o:o+l}}Ve.VARIABLE_LENGTH=[],Ve.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ve.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ve.VARIABLE_LENGTH,20],["22",Ve.VARIABLE_LENGTH,29],["30",Ve.VARIABLE_LENGTH,8],["37",Ve.VARIABLE_LENGTH,8],["90",Ve.VARIABLE_LENGTH,30],["91",Ve.VARIABLE_LENGTH,30],["92",Ve.VARIABLE_LENGTH,30],["93",Ve.VARIABLE_LENGTH,30],["94",Ve.VARIABLE_LENGTH,30],["95",Ve.VARIABLE_LENGTH,30],["96",Ve.VARIABLE_LENGTH,30],["97",Ve.VARIABLE_LENGTH,3],["98",Ve.VARIABLE_LENGTH,30],["99",Ve.VARIABLE_LENGTH,30]],Ve.THREE_DIGIT_DATA_LENGTH=[["240",Ve.VARIABLE_LENGTH,30],["241",Ve.VARIABLE_LENGTH,30],["242",Ve.VARIABLE_LENGTH,6],["250",Ve.VARIABLE_LENGTH,30],["251",Ve.VARIABLE_LENGTH,30],["253",Ve.VARIABLE_LENGTH,17],["254",Ve.VARIABLE_LENGTH,20],["400",Ve.VARIABLE_LENGTH,30],["401",Ve.VARIABLE_LENGTH,30],["402",17],["403",Ve.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ve.VARIABLE_LENGTH,20],["421",Ve.VARIABLE_LENGTH,15],["422",3],["423",Ve.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ve.VARIABLE_LENGTH,15],["391",Ve.VARIABLE_LENGTH,18],["392",Ve.VARIABLE_LENGTH,15],["393",Ve.VARIABLE_LENGTH,18],["703",Ve.VARIABLE_LENGTH,30]],Ve.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ve.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ve.VARIABLE_LENGTH,20],["8003",Ve.VARIABLE_LENGTH,30],["8004",Ve.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ve.VARIABLE_LENGTH,30],["8008",Ve.VARIABLE_LENGTH,12],["8018",18],["8020",Ve.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ve.VARIABLE_LENGTH,70],["8200",Ve.VARIABLE_LENGTH,70]];class We{constructor(e){this.buffer=new A,this.information=e}decodeAllCodes(e,t){let r=t,n=null;for(;;){let t=this.decodeGeneralPurposeField(r,n),s=Ve.parseFieldsInGeneralPurpose(t.getNewString());if(null!=s&&e.append(s),n=t.isRemaining()?""+t.getRemainingValue():null,r===t.getNewPosition())break;r=t.getNewPosition()}return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let t=this.extractNumericValueFromBitArray(e,4);return new He(this.information.getSize(),0===t?He.FNC1:t-1,He.FNC1)}let t=this.extractNumericValueFromBitArray(e,7);return new He(e+7,(t-8)/11,(t-8)%11)}extractNumericValueFromBitArray(e,t){return We.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,r){let n=0;for(let s=0;s<r;++s)e.get(t+s)&&(n|=1<<r-s-1);return n}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);let r=this.parseBlocks();return null!=r&&r.isRemaining()?new ze(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new ze(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let r=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),r===this.current.getPosition()&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return t=e.isSecondDigitFNC1()?new ze(this.current.getPosition(),this.buffer.toString()):new ze(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Be(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let e=new ze(this.current.getPosition(),this.buffer.toString());return new Be(!0,e)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Be(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new ze(this.current.getPosition(),this.buffer.toString());return new Be(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Be(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new ze(this.current.getPosition(),this.buffer.toString());return new Be(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Be(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,8);return n>=232&&n<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new Ue(e+5,Ue.FNC1);if(t>=5&&t<15)return new Ue(e+5,"0"+(t-5));let r,n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new Ue(e+7,""+(n+1));if(n>=90&&n<116)return new Ue(e+7,""+(n+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:r="!";break;case 233:r='"';break;case 234:r="%";break;case 235:r="&";break;case 236:r="'";break;case 237:r="(";break;case 238:r=")";break;case 239:r="*";break;case 240:r="+";break;case 241:r=",";break;case 242:r="-";break;case 243:r=".";break;case 244:r="/";break;case 245:r=":";break;case 246:r=";";break;case 247:r="<";break;case 248:r="=";break;case 249:r=">";break;case 250:r="?";break;case 251:r="_";break;case 252:r=" ";break;default:throw new j}return new Ue(e+8,r)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new Ue(e+5,Ue.FNC1);if(t>=5&&t<15)return new Ue(e+5,"0"+(t-5));let r,n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new Ue(e+6,""+(n+33));switch(n){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new re("Decoding invalid alphanumeric value: "+n)}return new Ue(e+6,r)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class qe{constructor(e){this.information=e,this.generalDecoder=new We(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ge extends qe{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let r=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,r)}encodeCompressedGtinWithoutAI(e,t,r){for(let n=0;n<4;++n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*n,10);r/100===0&&e.append("0"),r/10===0&&e.append("0"),e.append(r)}Ge.appendCheckDigit(e,r)}static appendCheckDigit(e,t){let r=0;for(let n=0;n<13;n++){let s=e.charAt(n+t).charCodeAt(0)-"0".charCodeAt(0);r+=0===(1&n)?3*s:s}r=10-r%10,10===r&&(r=0),e.append(r)}}Ge.GTIN_SIZE=40;class Ye extends Ge{constructor(e){super(e)}parseInformation(){let e=new A;e.append("(01)");let t=e.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(Ye.HEADER_SIZE,4);return e.append(r),this.encodeCompressedGtinWithoutAI(e,Ye.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,Ye.HEADER_SIZE+44)}}Ye.HEADER_SIZE=4;class Xe extends qe{constructor(e){super(e)}parseInformation(){let e=new A;return this.getGeneralDecoder().decodeAllCodes(e,Xe.HEADER_SIZE)}}Xe.HEADER_SIZE=5;class Qe extends Ge{constructor(e){super(e)}encodeCompressedWeight(e,t,r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,r);this.addWeightCode(e,n);let s=this.checkWeight(n),a=1e5;for(let i=0;i<5;++i)s/a===0&&e.append("0"),a/=10;e.append(s)}}class Ke extends Qe{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Ke.HEADER_SIZE+Qe.GTIN_SIZE+Ke.WEIGHT_SIZE)throw new k;let e=new A;return this.encodeCompressedGtin(e,Ke.HEADER_SIZE),this.encodeCompressedWeight(e,Ke.HEADER_SIZE+Qe.GTIN_SIZE,Ke.WEIGHT_SIZE),e.toString()}}Ke.HEADER_SIZE=5,Ke.WEIGHT_SIZE=15;class Ze extends Ke{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class Je extends Ke{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class $e extends Ge{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<$e.HEADER_SIZE+Ge.GTIN_SIZE)throw new k;let e=new A;this.encodeCompressedGtin(e,$e.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray($e.HEADER_SIZE+Ge.GTIN_SIZE,$e.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let r=this.getGeneralDecoder().decodeGeneralPurposeField($e.HEADER_SIZE+Ge.GTIN_SIZE+$e.LAST_DIGIT_SIZE,null);return e.append(r.getNewString()),e.toString()}}$e.HEADER_SIZE=8,$e.LAST_DIGIT_SIZE=2;class et extends Ge{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<et.HEADER_SIZE+Ge.GTIN_SIZE)throw new k;let e=new A;this.encodeCompressedGtin(e,et.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ge.GTIN_SIZE,et.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let r=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ge.GTIN_SIZE+et.LAST_DIGIT_SIZE,et.FIRST_THREE_DIGITS_SIZE);r/100==0&&e.append("0"),r/10==0&&e.append("0"),e.append(r);let n=this.getGeneralDecoder().decodeGeneralPurposeField(et.HEADER_SIZE+Ge.GTIN_SIZE+et.LAST_DIGIT_SIZE+et.FIRST_THREE_DIGITS_SIZE,null);return e.append(n.getNewString()),e.toString()}}et.HEADER_SIZE=8,et.LAST_DIGIT_SIZE=2,et.FIRST_THREE_DIGITS_SIZE=10;class tt extends Qe{constructor(e,t,r){super(e),this.dateCode=r,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE+tt.DATE_SIZE)throw new k;let e=new A;return this.encodeCompressedGtin(e,tt.HEADER_SIZE),this.encodeCompressedWeight(e,tt.HEADER_SIZE+tt.GTIN_SIZE,tt.WEIGHT_SIZE),this.encodeCompressedDate(e,tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,tt.DATE_SIZE);if(38400==r)return;e.append("("),e.append(this.dateCode),e.append(")");let n=r%32;r/=32;let s=r%12+1;r/=12;let a=r;a/10==0&&e.append("0"),e.append(a),s/10==0&&e.append("0"),e.append(s),n/10==0&&e.append("0"),e.append(n)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}function rt(e){try{if(e.get(1))return new Ye(e);if(!e.get(2))return new Xe(e);switch(We.extractNumericValueFromBitArray(e,1,4)){case 4:return new Ze(e);case 5:return new Je(e)}switch(We.extractNumericValueFromBitArray(e,1,5)){case 12:return new $e(e);case 13:return new et(e)}switch(We.extractNumericValueFromBitArray(e,1,7)){case 56:return new tt(e,"310","11");case 57:return new tt(e,"320","11");case 58:return new tt(e,"310","13");case 59:return new tt(e,"320","13");case 60:return new tt(e,"310","15");case 61:return new tt(e,"320","15");case 62:return new tt(e,"310","17");case 63:return new tt(e,"320","17")}}catch(t){throw console.log(t),new re("unknown decoder: "+e)}}tt.HEADER_SIZE=8,tt.WEIGHT_SIZE=20,tt.DATE_SIZE=16;class nt{constructor(e,t,r,n){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=n}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof nt&&nt.equalsOrNull(e.leftchar,t.leftchar)&&nt.equalsOrNull(e.rightchar,t.rightchar)&&nt.equalsOrNull(e.finderpattern,t.finderpattern)}static equalsOrNull(e,t){return null===e?null===t:nt.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class st{constructor(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof st&&this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed}checkEqualitity(e,t){if(!e||!t)return;let r;return e.forEach((e,n)=>{t.forEach(t=>{e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(r=!0)})}),r}}class at extends Re{constructor(e){super(...arguments),this.pairs=new Array(at.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===e}decodeRow(e,t,r){this.pairs.length=0,this.startFromEven=!1;try{return at.constructResult(this.decodeRow2pairs(e,t))}catch(n){this.verbose&&console.log(n)}return this.pairs.length=0,this.startFromEven=!0,at.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let r,n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(s){if(s instanceof k){if(!this.pairs.length)throw new k;n=!0}}if(this.checkChecksum())return this.pairs;if(r=!!this.rows.length,this.storeRow(e,!1),r){let e=this.checkRowsBoolean(!1);if(null!=e)return e;if(e=this.checkRowsBoolean(!0),null!=e)return e}throw new k}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(r){this.verbose&&console.log(r)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let n=t;n<this.rows.length;n++){let t=this.rows[n];this.pairs.length=0;for(let r of e)this.pairs.push(r.getPairs());if(this.pairs.push(t.getPairs()),!at.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let s=new Array(e);s.push(t);try{return this.checkRows(s,n+1)}catch(r){this.verbose&&console.log(r)}}throw new k}static isValidSequence(e){for(let t of at.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let r=!0;for(let n=0;n<e.length;n++)if(e[n].getFinderPattern().getValue()!=t[n]){r=!1;break}if(r)return!0}return!1}storeRow(e,t){let r=0,n=!1,s=!1;for(;r<this.rows.length;){let t=this.rows[r];if(t.getRowNumber()>e){s=t.isEquivalent(this.pairs);break}n=t.isEquivalent(this.pairs),r++}s||n||at.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new st(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let r of t)if(r.getPairs().length!==e.length)for(let t of r.getPairs())for(let r of e)if(nt.equals(t,r))break}static isPartialRow(e,t){for(let r of t){let t=!0;for(let n of e){let e=!1;for(let t of r.getPairs())if(n.equals(t)){e=!0;break}if(!e){t=!1;break}}if(t)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=rt(Le.buildBitArray(e)).parseInformation(),r=e[0].getFinderPattern().getResultPoints(),n=e[e.length-1].getFinderPattern().getResultPoints(),s=[r[0],r[1],n[0],n[1]];return new U(t,null,null,s,H.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),r=e.getRightChar();if(null==r)return!1;let n=r.getChecksumPortion(),s=2;for(let a=1;a<this.pairs.size();++a){let e=this.pairs.get(a);n+=e.getLeftChar().getChecksumPortion(),s++;let t=e.getRightChar();null!=t&&(n+=t.getChecksumPortion(),s++)}return n%=211,211*(s-4)+n==t.getValue()}static getNextSecondBar(e,t){let r;return e.get(t)?(r=e.getNextUnset(t),r=e.getNextSet(r)):(r=e.getNextSet(t),r=e.getNextUnset(r)),r}retrieveNextPair(e,t,r){let n,s=t.length%2==0;this.startFromEven&&(s=!s);let a=!0,i=-1;do{this.findNextPair(e,t,i),n=this.parseFoundFinderPattern(e,r,s),null==n?i=at.getNextSecondBar(e,this.startEnd[0]):a=!1}while(a);let o,l=this.decodeDataCharacter(e,n,s,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new k;try{o=this.decodeDataCharacter(e,n,s,!1)}catch(c){o=null,this.verbose&&console.log(c)}return new nt(l,o,n,!0)}isEmptyPair(e){return 0===e.length}findNextPair(e,t,r){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let s,a=e.getSize();s=r>=0?r:this.isEmptyPair(t)?0:t[t.length-1].getFinderPattern().getStartEnd()[1];let i=t.length%2!=0;this.startFromEven&&(i=!i);let o=!1;for(;s<a&&(o=!e.get(s),o);)s++;let l=0,c=s;for(let d=s;d<a;d++)if(e.get(d)!=o)n[l]++;else{if(3==l){if(i&&at.reverseCounters(n),at.isFinderPattern(n))return this.startEnd[0]=c,void(this.startEnd[1]=d);i&&at.reverseCounters(n),c+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,l--}else l++;n[l]=1,o=!o}throw new k}static reverseCounters(e){let t=e.length;for(let r=0;r<t/2;++r){let n=e[r];e[r]=e[t-r-1],e[t-r-1]=n}}parseFoundFinderPattern(e,t,r){let n,s,a;if(r){let t=this.startEnd[0]-1;for(;t>=0&&!e.get(t);)t--;t++,n=this.startEnd[0]-t,s=t,a=this.startEnd[1]}else s=this.startEnd[0],a=e.getNextUnset(this.startEnd[1]+1),n=a-this.startEnd[1];let i,o=this.getDecodeFinderCounters();f.arraycopy(o,0,o,1,o.length-1),o[0]=n;try{i=this.parseFinderValue(o,at.FINDER_PATTERNS)}catch(l){return null}return new Me(i,[s,a],s,a,t)}decodeDataCharacter(e,t,r,n){let s=this.getDataCharacterCounters();for(let _=0;_<s.length;_++)s[_]=0;if(n)at.recordPatternInReverse(e,t.getStartEnd()[0],s);else{at.recordPattern(e,t.getStartEnd()[1],s);for(let e=0,t=s.length-1;e<t;e++,t--){let r=s[e];s[e]=s[t],s[t]=r}}let a=17,i=ae.sum(new Int32Array(s))/a,o=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(i-o)/o>.3)throw new k;let l=this.getOddCounts(),c=this.getEvenCounts(),d=this.getOddRoundingErrors(),u=this.getEvenRoundingErrors();for(let _=0;_<s.length;_++){let e=1*s[_]/i,t=e+.5;if(t<1){if(e<.3)throw new k;t=1}else if(t>8){if(e>8.7)throw new k;t=8}let r=_/2;0==(1&_)?(l[r]=t,d[r]=e-t):(c[r]=t,u[r]=e-t)}this.adjustOddEvenCounts(a);let h=4*t.getValue()+(r?0:2)+(n?0:1)-1,m=0,p=0;for(let _=l.length-1;_>=0;_--){if(at.isNotA1left(t,r,n)){let e=at.WEIGHTS[h][2*_];p+=l[_]*e}m+=l[_]}let f=0;for(let _=c.length-1;_>=0;_--)if(at.isNotA1left(t,r,n)){let e=at.WEIGHTS[h][2*_+1];f+=c[_]*e}let x=p+f;if(0!=(1&m)||m>13||m<4)throw new k;let g=(13-m)/2,b=at.SYMBOL_WIDEST[g],y=9-b,v=Pe.getRSSvalue(l,b,!0),w=Pe.getRSSvalue(c,y,!1),N=at.EVEN_TOTAL_SUBSET[g],j=at.GSUM[g];return new Oe(v*N+w+j,x)}static isNotA1left(e,t,r){return!(0==e.getValue()&&t&&r)}adjustOddEvenCounts(e){let t=ae.sum(new Int32Array(this.getOddCounts())),r=ae.sum(new Int32Array(this.getEvenCounts())),n=!1,s=!1;t>13?s=!0:t<4&&(n=!0);let a=!1,i=!1;r>13?i=!0:r<4&&(a=!0);let o=t+r-e,l=1==(1&t),c=0==(1&r);if(1==o)if(l){if(c)throw new k;s=!0}else{if(!c)throw new k;i=!0}else if(-1==o)if(l){if(c)throw new k;n=!0}else{if(!c)throw new k;a=!0}else{if(0!=o)throw new k;if(l){if(!c)throw new k;t<r?(n=!0,i=!0):(s=!0,a=!0)}else if(c)throw new k}if(n){if(s)throw new k;at.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&at.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(i)throw new k;at.increment(this.getEvenCounts(),this.getOddRoundingErrors())}i&&at.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}at.SYMBOL_WIDEST=[7,5,4,3,1],at.EVEN_TOTAL_SUBSET=[4,20,52,104,204],at.GSUM=[0,348,1388,2948,3988],at.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],at.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],at.FINDER_PAT_A=0,at.FINDER_PAT_B=1,at.FINDER_PAT_C=2,at.FINDER_PAT_D=3,at.FINDER_PAT_E=4,at.FINDER_PAT_F=5,at.FINDER_PATTERN_SEQUENCES=[[at.FINDER_PAT_A,at.FINDER_PAT_A],[at.FINDER_PAT_A,at.FINDER_PAT_B,at.FINDER_PAT_B],[at.FINDER_PAT_A,at.FINDER_PAT_C,at.FINDER_PAT_B,at.FINDER_PAT_D],[at.FINDER_PAT_A,at.FINDER_PAT_E,at.FINDER_PAT_B,at.FINDER_PAT_D,at.FINDER_PAT_C],[at.FINDER_PAT_A,at.FINDER_PAT_E,at.FINDER_PAT_B,at.FINDER_PAT_D,at.FINDER_PAT_D,at.FINDER_PAT_F],[at.FINDER_PAT_A,at.FINDER_PAT_E,at.FINDER_PAT_B,at.FINDER_PAT_D,at.FINDER_PAT_E,at.FINDER_PAT_F,at.FINDER_PAT_F],[at.FINDER_PAT_A,at.FINDER_PAT_A,at.FINDER_PAT_B,at.FINDER_PAT_B,at.FINDER_PAT_C,at.FINDER_PAT_C,at.FINDER_PAT_D,at.FINDER_PAT_D],[at.FINDER_PAT_A,at.FINDER_PAT_A,at.FINDER_PAT_B,at.FINDER_PAT_B,at.FINDER_PAT_C,at.FINDER_PAT_C,at.FINDER_PAT_D,at.FINDER_PAT_E,at.FINDER_PAT_E],[at.FINDER_PAT_A,at.FINDER_PAT_A,at.FINDER_PAT_B,at.FINDER_PAT_B,at.FINDER_PAT_C,at.FINDER_PAT_C,at.FINDER_PAT_D,at.FINDER_PAT_E,at.FINDER_PAT_F,at.FINDER_PAT_F],[at.FINDER_PAT_A,at.FINDER_PAT_A,at.FINDER_PAT_B,at.FINDER_PAT_B,at.FINDER_PAT_C,at.FINDER_PAT_D,at.FINDER_PAT_D,at.FINDER_PAT_E,at.FINDER_PAT_E,at.FINDER_PAT_F,at.FINDER_PAT_F]],at.MAX_PAIRS=11;class it extends Oe{constructor(e,t,r){super(e,t),this.count=0,this.finderPattern=r}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class ot extends Re{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,r){const n=this.decodePair(t,!1,e,r);ot.addOrTally(this.possibleLeftPairs,n),t.reverse();let s=this.decodePair(t,!0,e,r);ot.addOrTally(this.possibleRightPairs,s),t.reverse();for(let a of this.possibleLeftPairs)if(a.getCount()>1)for(let e of this.possibleRightPairs)if(e.getCount()>1&&ot.checkChecksum(a,e))return ot.constructResult(a,e);throw new k}static addOrTally(e,t){if(null==t)return;let r=!1;for(let n of e)if(n.getValue()===t.getValue()){n.incrementCount(),r=!0;break}r||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let r=4537077*e.getValue()+t.getValue(),n=new String(r).toString(),s=new A;for(let l=13-n.length;l>0;l--)s.append("0");s.append(n);let a=0;for(let l=0;l<13;l++){let e=s.charAt(l).charCodeAt(0)-"0".charCodeAt(0);a+=0===(1&l)?3*e:e}a=10-a%10,10===a&&(a=0),s.append(a.toString());let i=e.getFinderPattern().getResultPoints(),o=t.getFinderPattern().getResultPoints();return new U(s.toString(),null,0,[i[0],i[1],o[0],o[1]],H.RSS_14,(new Date).getTime())}static checkChecksum(e,t){let r=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,n=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return n>72&&n--,n>8&&n--,r===n}decodePair(e,t,r,n){try{let s=this.findFinderPattern(e,t),a=this.parseFoundFinderPattern(e,r,t,s),i=null==n?null:n.get(N.NEED_RESULT_POINT_CALLBACK);if(null!=i){let n=(s[0]+s[1])/2;t&&(n=e.getSize()-1-n),i.foundPossibleResultPoint(new oe(n,r))}let o=this.decodeDataCharacter(e,a,!0),l=this.decodeDataCharacter(e,a,!1);return new it(1597*o.getValue()+l.getValue(),o.getChecksumPortion()+4*l.getChecksumPortion(),a)}catch(s){return null}}decodeDataCharacter(e,t,r){let n=this.getDataCharacterCounters();for(let f=0;f<n.length;f++)n[f]=0;if(r)ye.recordPatternInReverse(e,t.getStartEnd()[0],n);else{ye.recordPattern(e,t.getStartEnd()[1]+1,n);for(let e=0,t=n.length-1;e<t;e++,t--){let r=n[e];n[e]=n[t],n[t]=r}}let s=r?16:15,a=ae.sum(new Int32Array(n))/s,i=this.getOddCounts(),o=this.getEvenCounts(),l=this.getOddRoundingErrors(),c=this.getEvenRoundingErrors();for(let f=0;f<n.length;f++){let e=n[f]/a,t=Math.floor(e+.5);t<1?t=1:t>8&&(t=8);let r=Math.floor(f/2);0===(1&f)?(i[r]=t,l[r]=e-t):(o[r]=t,c[r]=e-t)}this.adjustOddEvenCounts(r,s);let d=0,u=0;for(let f=i.length-1;f>=0;f--)u*=9,u+=i[f],d+=i[f];let h=0,m=0;for(let f=o.length-1;f>=0;f--)h*=9,h+=o[f],m+=o[f];let p=u+3*h;if(r){if(0!==(1&d)||d>12||d<4)throw new k;let e=(12-d)/2,t=ot.OUTSIDE_ODD_WIDEST[e],r=9-t,n=Pe.getRSSvalue(i,t,!1),s=Pe.getRSSvalue(o,r,!0),a=ot.OUTSIDE_EVEN_TOTAL_SUBSET[e],l=ot.OUTSIDE_GSUM[e];return new Oe(n*a+s+l,p)}{if(0!==(1&m)||m>10||m<4)throw new k;let e=(10-m)/2,t=ot.INSIDE_ODD_WIDEST[e],r=9-t,n=Pe.getRSSvalue(i,t,!0),s=Pe.getRSSvalue(o,r,!1),a=ot.INSIDE_ODD_TOTAL_SUBSET[e],l=ot.INSIDE_GSUM[e];return new Oe(s*a+n+l,p)}}findFinderPattern(e,t){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let n=e.getSize(),s=!1,a=0;for(;a<n&&(s=!e.get(a),t!==s);)a++;let i=0,o=a;for(let l=a;l<n;l++)if(e.get(l)!==s)r[i]++;else{if(3===i){if(Re.isFinderPattern(r))return[o,l];o+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,i--}else i++;r[i]=1,s=!s}throw new k}parseFoundFinderPattern(e,t,r,n){let s=e.get(n[0]),a=n[0]-1;for(;a>=0&&s!==e.get(a);)a--;a++;const i=n[0]-a,o=this.getDecodeFinderCounters(),l=new Int32Array(o.length);f.arraycopy(o,0,l,1,o.length-1),l[0]=i;const c=this.parseFinderValue(l,ot.FINDER_PATTERNS);let d=a,u=n[1];return r&&(d=e.getSize()-1-d,u=e.getSize()-1-u),new Me(c,[a,n[1]],d,u,t)}adjustOddEvenCounts(e,t){let r=ae.sum(new Int32Array(this.getOddCounts())),n=ae.sum(new Int32Array(this.getEvenCounts())),s=!1,a=!1,i=!1,o=!1;e?(r>12?a=!0:r<4&&(s=!0),n>12?o=!0:n<4&&(i=!0)):(r>11?a=!0:r<5&&(s=!0),n>10?o=!0:n<4&&(i=!0));let l=r+n-t,c=(1&r)===(e?1:0),d=1===(1&n);if(1===l)if(c){if(d)throw new k;a=!0}else{if(!d)throw new k;o=!0}else if(-1===l)if(c){if(d)throw new k;s=!0}else{if(!d)throw new k;i=!0}else{if(0!==l)throw new k;if(c){if(!d)throw new k;r<n?(s=!0,o=!0):(a=!0,i=!0)}else if(d)throw new k}if(s){if(a)throw new k;Re.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&Re.decrement(this.getOddCounts(),this.getOddRoundingErrors()),i){if(o)throw new k;Re.increment(this.getEvenCounts(),this.getOddRoundingErrors())}o&&Re.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ot.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],ot.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],ot.OUTSIDE_GSUM=[0,161,961,2015,2715],ot.INSIDE_GSUM=[0,336,1036,1516],ot.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],ot.INSIDE_ODD_WIDEST=[2,4,6,8],ot.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class lt extends ye{constructor(e,t){super(),this.readers=[],this.verbose=!0===t;const r=e?e.get(N.POSSIBLE_FORMATS):null,n=e&&void 0!==e.get(N.ASSUME_CODE_39_CHECK_DIGIT);r?((r.includes(H.EAN_13)||r.includes(H.UPC_A)||r.includes(H.EAN_8)||r.includes(H.UPC_E))&&this.readers.push(new De(e)),r.includes(H.CODE_39)&&this.readers.push(new we(n)),r.includes(H.CODE_128)&&this.readers.push(new ve),r.includes(H.ITF)&&this.readers.push(new Ne),r.includes(H.RSS_14)&&this.readers.push(new ot),r.includes(H.RSS_EXPANDED)&&this.readers.push(new at(this.verbose))):(this.readers.push(new De(e)),this.readers.push(new we),this.readers.push(new De(e)),this.readers.push(new ve),this.readers.push(new Ne),this.readers.push(new ot),this.readers.push(new at(this.verbose)))}decodeRow(e,t,r){for(let s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(e,t,r)}catch(n){}throw new k}reset(){this.readers.forEach(e=>e.reset())}}class ct extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=arguments.length>1?arguments[1]:void 0;super(new lt(t),e,t)}}class dt{constructor(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ut{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ht{constructor(e,t,r,n,s,a){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=n,this.dataRegionSizeColumns=s,this.ecBlocks=a;let i=0;const o=a.getECCodewords(),l=a.getECBlocks();for(let c of l)i+=c.getCount()*(c.getDataCodewords()+o);this.totalCodewords=i}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(0!==(1&e)||0!==(1&t))throw new j;for(let r of ht.VERSIONS)if(r.symbolSizeRows===e&&r.symbolSizeColumns===t)return r;throw new j}toString(){return""+this.versionNumber}static buildVersions(){return[new ht(1,10,10,8,8,new dt(5,new ut(1,3))),new ht(2,12,12,10,10,new dt(7,new ut(1,5))),new ht(3,14,14,12,12,new dt(10,new ut(1,8))),new ht(4,16,16,14,14,new dt(12,new ut(1,12))),new ht(5,18,18,16,16,new dt(14,new ut(1,18))),new ht(6,20,20,18,18,new dt(18,new ut(1,22))),new ht(7,22,22,20,20,new dt(20,new ut(1,30))),new ht(8,24,24,22,22,new dt(24,new ut(1,36))),new ht(9,26,26,24,24,new dt(28,new ut(1,44))),new ht(10,32,32,14,14,new dt(36,new ut(1,62))),new ht(11,36,36,16,16,new dt(42,new ut(1,86))),new ht(12,40,40,18,18,new dt(48,new ut(1,114))),new ht(13,44,44,20,20,new dt(56,new ut(1,144))),new ht(14,48,48,22,22,new dt(68,new ut(1,174))),new ht(15,52,52,24,24,new dt(42,new ut(2,102))),new ht(16,64,64,14,14,new dt(56,new ut(2,140))),new ht(17,72,72,16,16,new dt(36,new ut(4,92))),new ht(18,80,80,18,18,new dt(48,new ut(4,114))),new ht(19,88,88,20,20,new dt(56,new ut(4,144))),new ht(20,96,96,22,22,new dt(68,new ut(4,174))),new ht(21,104,104,24,24,new dt(56,new ut(6,136))),new ht(22,120,120,18,18,new dt(68,new ut(6,175))),new ht(23,132,132,20,20,new dt(62,new ut(8,163))),new ht(24,144,144,22,22,new dt(62,new ut(8,156),new ut(2,155))),new ht(25,8,18,6,16,new dt(7,new ut(1,5))),new ht(26,8,32,6,14,new dt(11,new ut(1,10))),new ht(27,12,26,10,24,new dt(14,new ut(1,16))),new ht(28,12,36,10,16,new dt(18,new ut(1,22))),new ht(29,16,36,14,16,new dt(24,new ut(1,32))),new ht(30,16,48,14,22,new dt(28,new ut(1,49)))]}}ht.VERSIONS=ht.buildVersions();class mt{constructor(e){const t=e.getHeight();if(t<8||t>144||0!==(1&t))throw new j;this.version=mt.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new I(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),r=e.getWidth();return ht.getVersionForDimensions(t,r)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,r=4,n=0;const s=this.mappingBitMatrix.getHeight(),a=this.mappingBitMatrix.getWidth();let i=!1,o=!1,l=!1,c=!1;do{if(r!==s||0!==n||i)if(r!==s-2||0!==n||0===(3&a)||o)if(r!==s+4||2!==n||0!==(7&a)||l)if(r!==s-2||0!==n||4!==(7&a)||c){do{r<s&&n>=0&&!this.readMappingMatrix.get(n,r)&&(e[t++]=255&this.readUtah(r,n,s,a)),r-=2,n+=2}while(r>=0&&n<a);r+=1,n+=3;do{r>=0&&n<a&&!this.readMappingMatrix.get(n,r)&&(e[t++]=255&this.readUtah(r,n,s,a)),r+=2,n-=2}while(r<s&&n>=0);r+=3,n+=1}else e[t++]=255&this.readCorner4(s,a),r-=2,n+=2,c=!0;else e[t++]=255&this.readCorner3(s,a),r-=2,n+=2,l=!0;else e[t++]=255&this.readCorner2(s,a),r-=2,n+=2,o=!0;else e[t++]=255&this.readCorner1(s,a),r-=2,n+=2,i=!0}while(r<s||n<a);if(t!==this.version.getTotalCodewords())throw new j;return e}readModule(e,t,r,n){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=n,e+=4-(n+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,r,n){let s=0;return this.readModule(e-2,t-2,r,n)&&(s|=1),s<<=1,this.readModule(e-2,t-1,r,n)&&(s|=1),s<<=1,this.readModule(e-1,t-2,r,n)&&(s|=1),s<<=1,this.readModule(e-1,t-1,r,n)&&(s|=1),s<<=1,this.readModule(e-1,t,r,n)&&(s|=1),s<<=1,this.readModule(e,t-2,r,n)&&(s|=1),s<<=1,this.readModule(e,t-1,r,n)&&(s|=1),s<<=1,this.readModule(e,t,r,n)&&(s|=1),s}readCorner1(e,t){let r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r}readCorner2(e,t){let r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r}readCorner3(e,t){let r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r}readCorner4(e,t){let r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new u("Dimension of bitMatrix must match the version size");const n=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),a=t/n|0,i=r/s|0,o=new I(i*s,a*n);for(let l=0;l<a;++l){const t=l*n;for(let r=0;r<i;++r){const a=r*s;for(let i=0;i<n;++i){const c=l*(n+2)+1+i,d=t+i;for(let t=0;t<s;++t){const n=r*(s+2)+1+t;if(e.get(n,c)){const e=a+t;o.set(e,d)}}}}}return o}}class pt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const r=t.getECBlocks();let n=0;const s=r.getECBlocks();for(let u of s)n+=u.getCount();const a=new Array(n);let i=0;for(let u of s)for(let e=0;e<u.getCount();e++){const e=u.getDataCodewords(),t=r.getECCodewords()+e;a[i++]=new pt(e,new Uint8Array(t))}const o=a[0].codewords.length-r.getECCodewords(),l=o-1;let c=0;for(let u=0;u<l;u++)for(let t=0;t<i;t++)a[t].codewords[u]=e[c++];const d=24===t.getVersionNumber(),h=d?8:i;for(let u=0;u<h;u++)a[u].codewords[o-1]=e[c++];const m=a[0].codewords.length;for(let u=o;u<m;u++)for(let t=0;t<i;t++){const r=d?(t+8)%i:t,n=d&&r>7?u-1:u;a[r].codewords[n]=e[c++]}if(c!==e.length)throw new u;return a}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ft{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new u(""+e);let t=0,r=this.bitOffset,n=this.byteOffset;const s=this.bytes;if(r>0){const a=8-r,i=e<a?e:a,o=a-i,l=255>>8-i<<o;t=(s[n]&l)>>o,e-=i,r+=i,8===r&&(r=0,n++)}if(e>0){for(;e>=8;)t=t<<8|255&s[n],n++,e-=8;if(e>0){const a=8-e,i=255>>a<<a;t=t<<e|(s[n]&i)>>a,r+=e}}return this.bitOffset=r,this.byteOffset=n,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(W||(W={}));class xt{static decode(e){const t=new ft(e),r=new A,n=new A,s=new Array;let a=W.ASCII_ENCODE;do{if(a===W.ASCII_ENCODE)a=this.decodeAsciiSegment(t,r,n);else{switch(a){case W.C40_ENCODE:this.decodeC40Segment(t,r);break;case W.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case W.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case W.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case W.BASE256_ENCODE:this.decodeBase256Segment(t,r,s);break;default:throw new j}a=W.ASCII_ENCODE}}while(a!==W.PAD_ENCODE&&t.available()>0);return n.length()>0&&r.append(n.toString()),new K(e,r.toString(),0===s.length?null:s,null)}static decodeAsciiSegment(e,t,r){let n=!1;do{let s=e.readBits(8);if(0===s)throw new j;if(s<=128)return n&&(s+=128),t.append(String.fromCharCode(s-1)),W.ASCII_ENCODE;if(129===s)return W.PAD_ENCODE;if(s<=229){const e=s-130;e<10&&t.append("0"),t.append(""+e)}else switch(s){case 230:return W.C40_ENCODE;case 231:return W.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:n=!0;break;case 236:t.append("[)>\x1e05\x1d"),r.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),r.insert(0,"\x1e\x04");break;case 238:return W.ANSIX12_ENCODE;case 239:return W.TEXT_ENCODE;case 240:return W.EDIFACT_ENCODE;default:if(254!==s||0!==e.available())throw new j}}while(e.available()>0);return W.ASCII_ENCODE}static decodeC40Segment(e,t){let r=!1;const n=[];let s=0;do{if(8===e.available())return;const a=e.readBits(8);if(254===a)return;this.parseTwoBytes(a,e.readBits(8),n);for(let e=0;e<3;e++){const a=n[e];switch(s){case 0:if(a<3)s=a+1;else{if(!(a<this.C40_BASIC_SET_CHARS.length))throw new j;{const e=this.C40_BASIC_SET_CHARS[a];r?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),r=!1):t.append(e)}}break;case 1:r?(t.append(String.fromCharCode(a+128)),r=!1):t.append(String.fromCharCode(a)),s=0;break;case 2:if(a<this.C40_SHIFT2_SET_CHARS.length){const e=this.C40_SHIFT2_SET_CHARS[a];r?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),r=!1):t.append(e)}else switch(a){case 27:t.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new j}s=0;break;case 3:r?(t.append(String.fromCharCode(a+224)),r=!1):t.append(String.fromCharCode(a+96)),s=0;break;default:throw new j}}}while(e.available()>0)}static decodeTextSegment(e,t){let r=!1,n=[],s=0;do{if(8===e.available())return;const a=e.readBits(8);if(254===a)return;this.parseTwoBytes(a,e.readBits(8),n);for(let e=0;e<3;e++){const a=n[e];switch(s){case 0:if(a<3)s=a+1;else{if(!(a<this.TEXT_BASIC_SET_CHARS.length))throw new j;{const e=this.TEXT_BASIC_SET_CHARS[a];r?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),r=!1):t.append(e)}}break;case 1:r?(t.append(String.fromCharCode(a+128)),r=!1):t.append(String.fromCharCode(a)),s=0;break;case 2:if(a<this.TEXT_SHIFT2_SET_CHARS.length){const e=this.TEXT_SHIFT2_SET_CHARS[a];r?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),r=!1):t.append(e)}else switch(a){case 27:t.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new j}s=0;break;case 3:if(!(a<this.TEXT_SHIFT3_SET_CHARS.length))throw new j;{const e=this.TEXT_SHIFT3_SET_CHARS[a];r?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),r=!1):t.append(e),s=0}break;default:throw new j}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const r=[];do{if(8===e.available())return;const n=e.readBits(8);if(254===n)return;this.parseTwoBytes(n,e.readBits(8),r);for(let e=0;e<3;e++){const n=r[e];switch(n){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(n<14)t.append(String.fromCharCode(n+44));else{if(!(n<40))throw new j;t.append(String.fromCharCode(n+51))}}}}while(e.available()>0)}static parseTwoBytes(e,t,r){let n=(e<<8)+t-1,s=Math.floor(n/1600);r[0]=s,n-=1600*s,s=Math.floor(n/40),r[1]=s,r[2]=n-40*s}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let r=0;r<4;r++){let r=e.readBits(6);if(31===r){const t=8-e.getBitOffset();return void(8!==t&&e.readBits(t))}0===(32&r)&&(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)}static decodeBase256Segment(e,t,r){let n=1+e.getByteOffset();const s=this.unrandomize255State(e.readBits(8),n++);let a;if(a=0===s?e.available()/8|0:s<250?s:250*(s-249)+this.unrandomize255State(e.readBits(8),n++),a<0)throw new j;const i=new Uint8Array(a);for(let l=0;l<a;l++){if(e.available()<8)throw new j;i[l]=this.unrandomize255State(e.readBits(8),n++)}r.push(i);try{t.append(S.decode(i,E.ISO88591))}catch(o){throw new re("Platform does not support required encoding: "+o.message)}}static unrandomize255State(e,t){const r=e-(149*t%255+1);return r>=0?r:r+256}}xt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],xt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],xt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],xt.TEXT_SHIFT2_SET_CHARS=xt.C40_SHIFT2_SET_CHARS,xt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class gt{constructor(){this.rsDecoder=new ne(ee.DATA_MATRIX_FIELD_256)}decode(e){const t=new mt(e),r=t.getVersion(),n=t.readCodewords(),s=pt.getDataBlocks(n,r);let a=0;for(let l of s)a+=l.getNumDataCodewords();const i=new Uint8Array(a),o=s.length;for(let l=0;l<o;l++){const e=s[l],t=e.getCodewords(),r=e.getNumDataCodewords();this.correctErrors(t,r);for(let n=0;n<r;n++)i[n*o+l]=t[n]}return xt.decode(i)}correctErrors(e,t){const r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch(n){throw new m}for(let s=0;s<t;s++)e[s]=r[s]}}class bt{constructor(e){this.image=e,this.rectangleDetector=new de(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new k;t=this.shiftToModuleCenter(t);const r=t[0],n=t[1],s=t[2],a=t[3];let i=this.transitionsBetween(r,a)+1,o=this.transitionsBetween(s,a)+1;1===(1&i)&&(i+=1),1===(1&o)&&(o+=1),4*i<7*o&&4*o<7*i&&(i=o=Math.max(i,o));let l=bt.sampleGrid(this.image,r,n,s,a,i,o);return new le(l,[r,n,s,a])}static shiftPoint(e,t,r){let n=(t.getX()-e.getX())/(r+1),s=(t.getY()-e.getY())/(r+1);return new oe(e.getX()+n,e.getY()+s)}static moveAway(e,t,r){let n=e.getX(),s=e.getY();return n<t?n-=1:n+=1,s<r?s-=1:s+=1,new oe(n,s)}detectSolid1(e){let t=e[0],r=e[1],n=e[3],s=e[2],a=this.transitionsBetween(t,r),i=this.transitionsBetween(r,n),o=this.transitionsBetween(n,s),l=this.transitionsBetween(s,t),c=a,d=[s,t,r,n];return c>i&&(c=i,d[0]=t,d[1]=r,d[2]=n,d[3]=s),c>o&&(c=o,d[0]=r,d[1]=n,d[2]=s,d[3]=t),c>l&&(d[0]=n,d[1]=s,d[2]=t,d[3]=r),d}detectSolid2(e){let t=e[0],r=e[1],n=e[2],s=e[3],a=this.transitionsBetween(t,s),i=bt.shiftPoint(r,n,4*(a+1)),o=bt.shiftPoint(n,r,4*(a+1));return this.transitionsBetween(i,t)<this.transitionsBetween(o,s)?(e[0]=t,e[1]=r,e[2]=n,e[3]=s):(e[0]=r,e[1]=n,e[2]=s,e[3]=t),e}correctTopRight(e){let t=e[0],r=e[1],n=e[2],s=e[3],a=this.transitionsBetween(t,s),i=this.transitionsBetween(r,s),o=bt.shiftPoint(t,r,4*(i+1)),l=bt.shiftPoint(n,r,4*(a+1));a=this.transitionsBetween(o,s),i=this.transitionsBetween(l,s);let c=new oe(s.getX()+(n.getX()-r.getX())/(a+1),s.getY()+(n.getY()-r.getY())/(a+1)),d=new oe(s.getX()+(t.getX()-r.getX())/(i+1),s.getY()+(t.getY()-r.getY())/(i+1));return this.isValid(c)?this.isValid(d)?this.transitionsBetween(o,c)+this.transitionsBetween(l,c)>this.transitionsBetween(o,d)+this.transitionsBetween(l,d)?c:d:c:this.isValid(d)?d:null}shiftToModuleCenter(e){let t=e[0],r=e[1],n=e[2],s=e[3],a=this.transitionsBetween(t,s)+1,i=this.transitionsBetween(n,s)+1,o=bt.shiftPoint(t,r,4*i),l=bt.shiftPoint(n,r,4*a);a=this.transitionsBetween(o,s)+1,i=this.transitionsBetween(l,s)+1,1===(1&a)&&(a+=1),1===(1&i)&&(i+=1);let c,d,u=(t.getX()+r.getX()+n.getX()+s.getX())/4,h=(t.getY()+r.getY()+n.getY()+s.getY())/4;return t=bt.moveAway(t,u,h),r=bt.moveAway(r,u,h),n=bt.moveAway(n,u,h),s=bt.moveAway(s,u,h),o=bt.shiftPoint(t,r,4*i),o=bt.shiftPoint(o,s,4*a),c=bt.shiftPoint(r,t,4*i),c=bt.shiftPoint(c,n,4*a),l=bt.shiftPoint(n,s,4*i),l=bt.shiftPoint(l,r,4*a),d=bt.shiftPoint(s,n,4*i),d=bt.shiftPoint(d,t,4*a),[o,c,l,d]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,r,n,s,a,i){return pe.getInstance().sampleGrid(e,a,i,.5,.5,a-.5,.5,a-.5,i-.5,.5,i-.5,t.getX(),t.getY(),s.getX(),s.getY(),n.getX(),n.getY(),r.getX(),r.getY())}transitionsBetween(e,t){let r=Math.trunc(e.getX()),n=Math.trunc(e.getY()),s=Math.trunc(t.getX()),a=Math.trunc(t.getY()),i=Math.abs(a-n)>Math.abs(s-r);if(i){let e=r;r=n,n=e,e=s,s=a,a=e}let o=Math.abs(s-r),l=Math.abs(a-n),c=-o/2,d=n<a?1:-1,u=r<s?1:-1,h=0,m=this.image.get(i?n:r,i?r:n);for(let p=r,f=n;p!==s;p+=u){let e=this.image.get(i?f:p,i?p:f);if(e!==m&&(h++,m=e),c+=l,c>0){if(f===a)break;f+=d,c-=o}}return h}}class yt{constructor(){this.decoder=new gt}decode(e){let t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=n&&n.has(N.PURE_BARCODE)){const n=yt.extractPureBits(e.getBlackMatrix());t=this.decoder.decode(n),r=yt.NO_POINTS}else{const n=new bt(e.getBlackMatrix()).detect();t=this.decoder.decode(n.getBits()),r=n.getPoints()}const s=t.getRawBytes(),a=new U(t.getText(),s,8*s.length,r,H.DATA_MATRIX,f.currentTimeMillis()),i=t.getByteSegments();null!=i&&a.putMetadata(Q.BYTE_SEGMENTS,i);const o=t.getECLevel();return null!=o&&a.putMetadata(Q.ERROR_CORRECTION_LEVEL,o),a}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(null==t||null==r)throw new k;const n=this.moduleSize(t,e);let s=t[1];const a=r[1];let i=t[0];const o=(r[0]-i+1)/n,l=(a-s+1)/n;if(o<=0||l<=0)throw new k;const c=n/2;s+=c,i+=c;const d=new I(o,l);for(let u=0;u<l;u++){const t=s+u*n;for(let r=0;r<o;r++)e.get(i+r*n,t)&&d.set(r,u)}return d}static moduleSize(e,t){const r=t.getWidth();let n=e[0];const s=e[1];for(;n<r&&t.get(n,s);)n++;if(n===r)throw new k;const a=n-e[0];if(0===a)throw new k;return a}}yt.NO_POINTS=[];class vt extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new yt,e)}}!function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"}(q||(q={}));class wt{constructor(e,t,r){this.value=e,this.stringValue=t,this.bits=r,wt.FOR_BITS.set(r,this),wt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return wt.L;case"M":return wt.M;case"Q":return wt.Q;case"H":return wt.H;default:throw new d(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof wt))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=wt.FOR_BITS.size)throw new u;return wt.FOR_BITS.get(e)}}wt.FOR_BITS=new Map,wt.FOR_VALUE=new Map,wt.L=new wt(q.L,"L",1),wt.M=new wt(q.M,"M",0),wt.Q=new wt(q.Q,"Q",3),wt.H=new wt(q.H,"H",2);class Nt{constructor(e){this.errorCorrectionLevel=wt.forBits(e>>3&3),this.dataMask=7&e}static numBitsDiffering(e,t){return y.bitCount(e^t)}static decodeFormatInformation(e,t){const r=Nt.doDecodeFormatInformation(e,t);return null!==r?r:Nt.doDecodeFormatInformation(e^Nt.FORMAT_INFO_MASK_QR,t^Nt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let r=Number.MAX_SAFE_INTEGER,n=0;for(const s of Nt.FORMAT_INFO_DECODE_LOOKUP){const a=s[0];if(a===e||a===t)return new Nt(s[1]);let i=Nt.numBitsDiffering(e,a);i<r&&(n=s[1],r=i),e!==t&&(i=Nt.numBitsDiffering(t,a),i<r&&(n=s[1],r=i))}return r<=3?new Nt(n):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof Nt))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}Nt.FORMAT_INFO_MASK_QR=21522,Nt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class jt{constructor(e){this.ecCodewordsPerBlock=e;for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const r of t)e+=r.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class _t{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ct{constructor(e,t){this.versionNumber=e,this.alignmentPatternCenters=t;for(var r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s];this.ecBlocks=n;let a=0;const i=n[0].getECCodewordsPerBlock(),o=n[0].getECBlocks();for(const l of o)a+=l.getCount()*(l.getDataCodewords()+i);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new j;try{return this.getVersionForNumber((e-17)/4)}catch(t){throw new j}}static getVersionForNumber(e){if(e<1||e>40)throw new u;return Ct.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,r=0;for(let n=0;n<Ct.VERSION_DECODE_INFO.length;n++){const s=Ct.VERSION_DECODE_INFO[n];if(s===e)return Ct.getVersionForNumber(n+7);const a=Nt.numBitsDiffering(e,s);a<t&&(r=n+7,t=a)}return t<=3?Ct.getVersionForNumber(r):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new I(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const r=this.alignmentPatternCenters.length;for(let n=0;n<r;n++){const e=this.alignmentPatternCenters[n]-2;for(let s=0;s<r;s++)0===n&&(0===s||s===r-1)||n===r-1&&0===s||t.setRegion(this.alignmentPatternCenters[s]-2,e,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}Ct.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ct.VERSIONS=[new Ct(1,new Int32Array(0),new jt(7,new _t(1,19)),new jt(10,new _t(1,16)),new jt(13,new _t(1,13)),new jt(17,new _t(1,9))),new Ct(2,Int32Array.from([6,18]),new jt(10,new _t(1,34)),new jt(16,new _t(1,28)),new jt(22,new _t(1,22)),new jt(28,new _t(1,16))),new Ct(3,Int32Array.from([6,22]),new jt(15,new _t(1,55)),new jt(26,new _t(1,44)),new jt(18,new _t(2,17)),new jt(22,new _t(2,13))),new Ct(4,Int32Array.from([6,26]),new jt(20,new _t(1,80)),new jt(18,new _t(2,32)),new jt(26,new _t(2,24)),new jt(16,new _t(4,9))),new Ct(5,Int32Array.from([6,30]),new jt(26,new _t(1,108)),new jt(24,new _t(2,43)),new jt(18,new _t(2,15),new _t(2,16)),new jt(22,new _t(2,11),new _t(2,12))),new Ct(6,Int32Array.from([6,34]),new jt(18,new _t(2,68)),new jt(16,new _t(4,27)),new jt(24,new _t(4,19)),new jt(28,new _t(4,15))),new Ct(7,Int32Array.from([6,22,38]),new jt(20,new _t(2,78)),new jt(18,new _t(4,31)),new jt(18,new _t(2,14),new _t(4,15)),new jt(26,new _t(4,13),new _t(1,14))),new Ct(8,Int32Array.from([6,24,42]),new jt(24,new _t(2,97)),new jt(22,new _t(2,38),new _t(2,39)),new jt(22,new _t(4,18),new _t(2,19)),new jt(26,new _t(4,14),new _t(2,15))),new Ct(9,Int32Array.from([6,26,46]),new jt(30,new _t(2,116)),new jt(22,new _t(3,36),new _t(2,37)),new jt(20,new _t(4,16),new _t(4,17)),new jt(24,new _t(4,12),new _t(4,13))),new Ct(10,Int32Array.from([6,28,50]),new jt(18,new _t(2,68),new _t(2,69)),new jt(26,new _t(4,43),new _t(1,44)),new jt(24,new _t(6,19),new _t(2,20)),new jt(28,new _t(6,15),new _t(2,16))),new Ct(11,Int32Array.from([6,30,54]),new jt(20,new _t(4,81)),new jt(30,new _t(1,50),new _t(4,51)),new jt(28,new _t(4,22),new _t(4,23)),new jt(24,new _t(3,12),new _t(8,13))),new Ct(12,Int32Array.from([6,32,58]),new jt(24,new _t(2,92),new _t(2,93)),new jt(22,new _t(6,36),new _t(2,37)),new jt(26,new _t(4,20),new _t(6,21)),new jt(28,new _t(7,14),new _t(4,15))),new Ct(13,Int32Array.from([6,34,62]),new jt(26,new _t(4,107)),new jt(22,new _t(8,37),new _t(1,38)),new jt(24,new _t(8,20),new _t(4,21)),new jt(22,new _t(12,11),new _t(4,12))),new Ct(14,Int32Array.from([6,26,46,66]),new jt(30,new _t(3,115),new _t(1,116)),new jt(24,new _t(4,40),new _t(5,41)),new jt(20,new _t(11,16),new _t(5,17)),new jt(24,new _t(11,12),new _t(5,13))),new Ct(15,Int32Array.from([6,26,48,70]),new jt(22,new _t(5,87),new _t(1,88)),new jt(24,new _t(5,41),new _t(5,42)),new jt(30,new _t(5,24),new _t(7,25)),new jt(24,new _t(11,12),new _t(7,13))),new Ct(16,Int32Array.from([6,26,50,74]),new jt(24,new _t(5,98),new _t(1,99)),new jt(28,new _t(7,45),new _t(3,46)),new jt(24,new _t(15,19),new _t(2,20)),new jt(30,new _t(3,15),new _t(13,16))),new Ct(17,Int32Array.from([6,30,54,78]),new jt(28,new _t(1,107),new _t(5,108)),new jt(28,new _t(10,46),new _t(1,47)),new jt(28,new _t(1,22),new _t(15,23)),new jt(28,new _t(2,14),new _t(17,15))),new Ct(18,Int32Array.from([6,30,56,82]),new jt(30,new _t(5,120),new _t(1,121)),new jt(26,new _t(9,43),new _t(4,44)),new jt(28,new _t(17,22),new _t(1,23)),new jt(28,new _t(2,14),new _t(19,15))),new Ct(19,Int32Array.from([6,30,58,86]),new jt(28,new _t(3,113),new _t(4,114)),new jt(26,new _t(3,44),new _t(11,45)),new jt(26,new _t(17,21),new _t(4,22)),new jt(26,new _t(9,13),new _t(16,14))),new Ct(20,Int32Array.from([6,34,62,90]),new jt(28,new _t(3,107),new _t(5,108)),new jt(26,new _t(3,41),new _t(13,42)),new jt(30,new _t(15,24),new _t(5,25)),new jt(28,new _t(15,15),new _t(10,16))),new Ct(21,Int32Array.from([6,28,50,72,94]),new jt(28,new _t(4,116),new _t(4,117)),new jt(26,new _t(17,42)),new jt(28,new _t(17,22),new _t(6,23)),new jt(30,new _t(19,16),new _t(6,17))),new Ct(22,Int32Array.from([6,26,50,74,98]),new jt(28,new _t(2,111),new _t(7,112)),new jt(28,new _t(17,46)),new jt(30,new _t(7,24),new _t(16,25)),new jt(24,new _t(34,13))),new Ct(23,Int32Array.from([6,30,54,78,102]),new jt(30,new _t(4,121),new _t(5,122)),new jt(28,new _t(4,47),new _t(14,48)),new jt(30,new _t(11,24),new _t(14,25)),new jt(30,new _t(16,15),new _t(14,16))),new Ct(24,Int32Array.from([6,28,54,80,106]),new jt(30,new _t(6,117),new _t(4,118)),new jt(28,new _t(6,45),new _t(14,46)),new jt(30,new _t(11,24),new _t(16,25)),new jt(30,new _t(30,16),new _t(2,17))),new Ct(25,Int32Array.from([6,32,58,84,110]),new jt(26,new _t(8,106),new _t(4,107)),new jt(28,new _t(8,47),new _t(13,48)),new jt(30,new _t(7,24),new _t(22,25)),new jt(30,new _t(22,15),new _t(13,16))),new Ct(26,Int32Array.from([6,30,58,86,114]),new jt(28,new _t(10,114),new _t(2,115)),new jt(28,new _t(19,46),new _t(4,47)),new jt(28,new _t(28,22),new _t(6,23)),new jt(30,new _t(33,16),new _t(4,17))),new Ct(27,Int32Array.from([6,34,62,90,118]),new jt(30,new _t(8,122),new _t(4,123)),new jt(28,new _t(22,45),new _t(3,46)),new jt(30,new _t(8,23),new _t(26,24)),new jt(30,new _t(12,15),new _t(28,16))),new Ct(28,Int32Array.from([6,26,50,74,98,122]),new jt(30,new _t(3,117),new _t(10,118)),new jt(28,new _t(3,45),new _t(23,46)),new jt(30,new _t(4,24),new _t(31,25)),new jt(30,new _t(11,15),new _t(31,16))),new Ct(29,Int32Array.from([6,30,54,78,102,126]),new jt(30,new _t(7,116),new _t(7,117)),new jt(28,new _t(21,45),new _t(7,46)),new jt(30,new _t(1,23),new _t(37,24)),new jt(30,new _t(19,15),new _t(26,16))),new Ct(30,Int32Array.from([6,26,52,78,104,130]),new jt(30,new _t(5,115),new _t(10,116)),new jt(28,new _t(19,47),new _t(10,48)),new jt(30,new _t(15,24),new _t(25,25)),new jt(30,new _t(23,15),new _t(25,16))),new Ct(31,Int32Array.from([6,30,56,82,108,134]),new jt(30,new _t(13,115),new _t(3,116)),new jt(28,new _t(2,46),new _t(29,47)),new jt(30,new _t(42,24),new _t(1,25)),new jt(30,new _t(23,15),new _t(28,16))),new Ct(32,Int32Array.from([6,34,60,86,112,138]),new jt(30,new _t(17,115)),new jt(28,new _t(10,46),new _t(23,47)),new jt(30,new _t(10,24),new _t(35,25)),new jt(30,new _t(19,15),new _t(35,16))),new Ct(33,Int32Array.from([6,30,58,86,114,142]),new jt(30,new _t(17,115),new _t(1,116)),new jt(28,new _t(14,46),new _t(21,47)),new jt(30,new _t(29,24),new _t(19,25)),new jt(30,new _t(11,15),new _t(46,16))),new Ct(34,Int32Array.from([6,34,62,90,118,146]),new jt(30,new _t(13,115),new _t(6,116)),new jt(28,new _t(14,46),new _t(23,47)),new jt(30,new _t(44,24),new _t(7,25)),new jt(30,new _t(59,16),new _t(1,17))),new Ct(35,Int32Array.from([6,30,54,78,102,126,150]),new jt(30,new _t(12,121),new _t(7,122)),new jt(28,new _t(12,47),new _t(26,48)),new jt(30,new _t(39,24),new _t(14,25)),new jt(30,new _t(22,15),new _t(41,16))),new Ct(36,Int32Array.from([6,24,50,76,102,128,154]),new jt(30,new _t(6,121),new _t(14,122)),new jt(28,new _t(6,47),new _t(34,48)),new jt(30,new _t(46,24),new _t(10,25)),new jt(30,new _t(2,15),new _t(64,16))),new Ct(37,Int32Array.from([6,28,54,80,106,132,158]),new jt(30,new _t(17,122),new _t(4,123)),new jt(28,new _t(29,46),new _t(14,47)),new jt(30,new _t(49,24),new _t(10,25)),new jt(30,new _t(24,15),new _t(46,16))),new Ct(38,Int32Array.from([6,32,58,84,110,136,162]),new jt(30,new _t(4,122),new _t(18,123)),new jt(28,new _t(13,46),new _t(32,47)),new jt(30,new _t(48,24),new _t(14,25)),new jt(30,new _t(42,15),new _t(32,16))),new Ct(39,Int32Array.from([6,26,54,82,110,138,166]),new jt(30,new _t(20,117),new _t(4,118)),new jt(28,new _t(40,47),new _t(7,48)),new jt(30,new _t(43,24),new _t(22,25)),new jt(30,new _t(10,15),new _t(67,16))),new Ct(40,Int32Array.from([6,30,58,86,114,142,170]),new jt(30,new _t(19,118),new _t(6,119)),new jt(28,new _t(18,47),new _t(31,48)),new jt(30,new _t(34,24),new _t(34,25)),new jt(30,new _t(20,15),new _t(61,16)))],function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"}(G||(G={}));class St{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let r=0;r<t;r++)for(let n=0;n<t;n++)this.isMasked(r,n)&&e.flip(n,r)}}St.values=new Map([[G.DATA_MASK_000,new St(G.DATA_MASK_000,(e,t)=>0===(e+t&1))],[G.DATA_MASK_001,new St(G.DATA_MASK_001,(e,t)=>0===(1&e))],[G.DATA_MASK_010,new St(G.DATA_MASK_010,(e,t)=>t%3===0)],[G.DATA_MASK_011,new St(G.DATA_MASK_011,(e,t)=>(e+t)%3===0)],[G.DATA_MASK_100,new St(G.DATA_MASK_100,(e,t)=>0===(Math.floor(e/2)+Math.floor(t/3)&1))],[G.DATA_MASK_101,new St(G.DATA_MASK_101,(e,t)=>e*t%6===0)],[G.DATA_MASK_110,new St(G.DATA_MASK_110,(e,t)=>e*t%6<3)],[G.DATA_MASK_111,new St(G.DATA_MASK_111,(e,t)=>0===(e+t+e*t%3&1))]]);class Et{constructor(e){const t=e.getHeight();if(t<21||1!==(3&t))throw new j;this.bitMatrix=e}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let e=0;for(let s=0;s<6;s++)e=this.copyBit(s,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let s=5;s>=0;s--)e=this.copyBit(8,s,e);const t=this.bitMatrix.getHeight();let r=0;const n=t-7;for(let s=t-1;s>=n;s--)r=this.copyBit(8,s,r);for(let s=t-8;s<t;s++)r=this.copyBit(s,8,r);if(this.parsedFormatInfo=Nt.decodeFormatInformation(e,r),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new j}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Ct.getVersionForNumber(t);let r=0;const n=e-11;for(let a=5;a>=0;a--)for(let t=e-9;t>=n;t--)r=this.copyBit(t,a,r);let s=Ct.decodeVersionInformation(r);if(null!==s&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;r=0;for(let a=5;a>=0;a--)for(let t=e-9;t>=n;t--)r=this.copyBit(a,t,r);if(s=Ct.decodeVersionInformation(r),null!==s&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new j}copyBit(e,t,r){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?r<<1|1:r<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),r=St.values.get(e.getDataMask()),n=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,n);const s=t.buildFunctionPattern();let a=!0;const i=new Uint8Array(t.getTotalCodewords());let o=0,l=0,c=0;for(let d=n-1;d>0;d-=2){6===d&&d--;for(let e=0;e<n;e++){const t=a?n-1-e:e;for(let e=0;e<2;e++)s.get(d-e,t)||(c++,l<<=1,this.bitMatrix.get(d-e,t)&&(l|=1),8===c&&(i[o++]=l,c=0,l=0))}a=!a}if(o!==t.getTotalCodewords())throw new j;return i}remask(){if(null===this.parsedFormatInfo)return;const e=St.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,r=e.getWidth();t<r;t++)for(let n=t+1,s=e.getHeight();n<s;n++)e.get(t,n)!==e.get(n,t)&&(e.flip(n,t),e.flip(t,n))}}class At{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,r){if(e.length!==t.getTotalCodewords())throw new u;const n=t.getECBlocksForLevel(r);let s=0;const a=n.getECBlocks();for(const u of a)s+=u.getCount();const i=new Array(s);let o=0;for(const u of a)for(let e=0;e<u.getCount();e++){const e=u.getDataCodewords(),t=n.getECCodewordsPerBlock()+e;i[o++]=new At(e,new Uint8Array(t))}const l=i[0].codewords.length;let c=i.length-1;for(;c>=0&&i[c].codewords.length!==l;)c--;c++;const d=l-n.getECCodewordsPerBlock();let h=0;for(let u=0;u<d;u++)for(let t=0;t<o;t++)i[t].codewords[u]=e[h++];for(let u=c;u<o;u++)i[u].codewords[d]=e[h++];const m=i[0].codewords.length;for(let u=d;u<m;u++)for(let t=0;t<o;t++){const r=t<c?u:u+1;i[t].codewords[r]=e[h++]}return i}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}!function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"}(Y||(Y={}));class It{constructor(e,t,r,n){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=n,It.FOR_BITS.set(n,this),It.FOR_VALUE.set(e,this)}static forBits(e){const t=It.FOR_BITS.get(e);if(void 0===t)throw new u;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let r;return r=t<=9?0:t<=26?1:2,this.characterCountBitsForVersions[r]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof It))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}It.FOR_BITS=new Map,It.FOR_VALUE=new Map,It.TERMINATOR=new It(Y.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),It.NUMERIC=new It(Y.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),It.ALPHANUMERIC=new It(Y.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),It.STRUCTURED_APPEND=new It(Y.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),It.BYTE=new It(Y.BYTE,"BYTE",Int32Array.from([8,16,16]),4),It.ECI=new It(Y.ECI,"ECI",Int32Array.from([0,0,0]),7),It.KANJI=new It(Y.KANJI,"KANJI",Int32Array.from([8,10,12]),8),It.FNC1_FIRST_POSITION=new It(Y.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),It.FNC1_SECOND_POSITION=new It(Y.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),It.HANZI=new It(Y.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class kt{static decode(e,t,r,n){const s=new ft(e);let a=new A;const i=new Array;let o=-1,l=-1;try{let e,r=null,c=!1;do{if(s.available()<4)e=It.TERMINATOR;else{const t=s.readBits(4);e=It.forBits(t)}switch(e){case It.TERMINATOR:break;case It.FNC1_FIRST_POSITION:case It.FNC1_SECOND_POSITION:c=!0;break;case It.STRUCTURED_APPEND:if(s.available()<16)throw new j;o=s.readBits(8),l=s.readBits(8);break;case It.ECI:const d=kt.parseECIValue(s);if(r=_.getCharacterSetECIByValue(d),null===r)throw new j;break;case It.HANZI:const u=s.readBits(4),h=s.readBits(e.getCharacterCountBits(t));u===kt.GB2312_SUBSET&&kt.decodeHanziSegment(s,a,h);break;default:const m=s.readBits(e.getCharacterCountBits(t));switch(e){case It.NUMERIC:kt.decodeNumericSegment(s,a,m);break;case It.ALPHANUMERIC:kt.decodeAlphanumericSegment(s,a,m,c);break;case It.BYTE:kt.decodeByteSegment(s,a,m,r,i,n);break;case It.KANJI:kt.decodeKanjiSegment(s,a,m);break;default:throw new j}}}while(e!==It.TERMINATOR)}catch(c){throw new j}return new K(e,a.toString(),0===i.length?null:i,null===r?null:r.toString(),o,l)}static decodeHanziSegment(e,t,r){if(13*r>e.available())throw new j;const n=new Uint8Array(2*r);let s=0;for(;r>0;){const t=e.readBits(13);let a=t/96<<8&4294967295|t%96;a+=a<959?41377:42657,n[s]=a>>8&255,n[s+1]=255&a,s+=2,r--}try{t.append(S.decode(n,E.GB2312))}catch(a){throw new j(a)}}static decodeKanjiSegment(e,t,r){if(13*r>e.available())throw new j;const n=new Uint8Array(2*r);let s=0;for(;r>0;){const t=e.readBits(13);let a=t/192<<8&4294967295|t%192;a+=a<7936?33088:49472,n[s]=a>>8,n[s+1]=a,s+=2,r--}try{t.append(S.decode(n,E.SHIFT_JIS))}catch(a){throw new j(a)}}static decodeByteSegment(e,t,r,n,s,a){if(8*r>e.available())throw new j;const i=new Uint8Array(r);for(let c=0;c<r;c++)i[c]=e.readBits(8);let o;o=null===n?E.guessEncoding(i,a):n.getName();try{t.append(S.decode(i,o))}catch(l){throw new j(l)}s.push(i)}static toAlphaNumericChar(e){if(e>=kt.ALPHANUMERIC_CHARS.length)throw new j;return kt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,r,n){const s=t.length();for(;r>1;){if(e.available()<11)throw new j;const n=e.readBits(11);t.append(kt.toAlphaNumericChar(Math.floor(n/45))),t.append(kt.toAlphaNumericChar(n%45)),r-=2}if(1===r){if(e.available()<6)throw new j;t.append(kt.toAlphaNumericChar(e.readBits(6)))}if(n)for(let a=s;a<t.length();a++)"%"===t.charAt(a)&&(a<t.length()-1&&"%"===t.charAt(a+1)?t.deleteCharAt(a+1):t.setCharAt(a,String.fromCharCode(29)))}static decodeNumericSegment(e,t,r){for(;r>=3;){if(e.available()<10)throw new j;const n=e.readBits(10);if(n>=1e3)throw new j;t.append(kt.toAlphaNumericChar(Math.floor(n/100))),t.append(kt.toAlphaNumericChar(Math.floor(n/10)%10)),t.append(kt.toAlphaNumericChar(n%10)),r-=3}if(2===r){if(e.available()<7)throw new j;const r=e.readBits(7);if(r>=100)throw new j;t.append(kt.toAlphaNumericChar(Math.floor(r/10))),t.append(kt.toAlphaNumericChar(r%10))}else if(1===r){if(e.available()<4)throw new j;const r=e.readBits(4);if(r>=10)throw new j;t.append(kt.toAlphaNumericChar(r))}}static parseECIValue(e){const t=e.readBits(8);if(0===(128&t))return 127&t;if(128===(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192===(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new j}}kt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",kt.GB2312_SUBSET=1;class Tt{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||null===e||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Dt{constructor(){this.rsDecoder=new ne(ee.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(I.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const r=new Et(e);let n=null;try{return this.decodeBitMatrixParser(r,t)}catch(s){n=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();const e=this.decodeBitMatrixParser(r,t);return e.setOther(new Tt(!0)),e}catch(s){if(null!==n)throw n;throw s}}decodeBitMatrixParser(e,t){const r=e.readVersion(),n=e.readFormatInformation().getErrorCorrectionLevel(),s=e.readCodewords(),a=At.getDataBlocks(s,r,n);let i=0;for(const c of a)i+=c.getNumDataCodewords();const o=new Uint8Array(i);let l=0;for(const c of a){const e=c.getCodewords(),t=c.getNumDataCodewords();this.correctErrors(e,t);for(let r=0;r<t;r++)o[l++]=e[r]}return kt.decode(o,r,n,t)}correctErrors(e,t){const r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch(n){throw new m}for(let s=0;s<t;s++)e[s]=r[s]}}class Rt extends oe{constructor(e,t,r){super(e,t),this.estimatedModuleSize=r}aboutEquals(e,t,r){if(Math.abs(t-this.getY())<=e&&Math.abs(r-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,r){const n=(this.getX()+t)/2,s=(this.getY()+e)/2,a=(this.estimatedModuleSize+r)/2;return new Rt(n,s,a)}}class Ot{constructor(e,t,r,n,s,a,i){this.image=e,this.startX=t,this.startY=r,this.width=n,this.height=s,this.moduleSize=a,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,r=e+this.width,n=this.startY+t/2,s=new Int32Array(3),a=this.image;for(let i=0;i<t;i++){const t=n+(0===(1&i)?Math.floor((i+1)/2):-Math.floor((i+1)/2));s[0]=0,s[1]=0,s[2]=0;let o=e;for(;o<r&&!a.get(o,t);)o++;let l=0;for(;o<r;){if(a.get(o,t))if(1===l)s[1]++;else if(2===l){if(this.foundPatternCross(s)){const e=this.handlePossibleCenter(s,t,o);if(null!==e)return e}s[0]=s[2],s[1]=1,s[2]=0,l=1}else s[++l]++;else 1===l&&l++,s[l]++;o++}if(this.foundPatternCross(s)){const e=this.handlePossibleCenter(s,t,r);if(null!==e)return e}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new k}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,r=t/2;for(let n=0;n<3;n++)if(Math.abs(t-e[n])>=r)return!1;return!0}crossCheckVertical(e,t,r,n){const s=this.image,a=s.getHeight(),i=this.crossCheckStateCount;i[0]=0,i[1]=0,i[2]=0;let o=e;for(;o>=0&&s.get(t,o)&&i[1]<=r;)i[1]++,o--;if(o<0||i[1]>r)return NaN;for(;o>=0&&!s.get(t,o)&&i[0]<=r;)i[0]++,o--;if(i[0]>r)return NaN;for(o=e+1;o<a&&s.get(t,o)&&i[1]<=r;)i[1]++,o++;if(o===a||i[1]>r)return NaN;for(;o<a&&!s.get(t,o)&&i[2]<=r;)i[2]++,o++;if(i[2]>r)return NaN;const l=i[0]+i[1]+i[2];return 5*Math.abs(l-n)>=2*n?NaN:this.foundPatternCross(i)?Ot.centerFromEnd(i,o):NaN}handlePossibleCenter(e,t,r){const n=e[0]+e[1]+e[2],s=Ot.centerFromEnd(e,r),a=this.crossCheckVertical(t,s,2*e[1],n);if(!isNaN(a)){const t=(e[0]+e[1]+e[2])/3;for(const e of this.possibleCenters)if(e.aboutEquals(t,a,s))return e.combineEstimate(a,s,t);const r=new Rt(s,a,t);this.possibleCenters.push(r),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(r)}return null}}class Mt extends oe{constructor(e,t,r,n){super(e,t),this.estimatedModuleSize=r,this.count=n,void 0===n&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,r){if(Math.abs(t-this.getY())<=e&&Math.abs(r-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,r){const n=this.count+1,s=(this.count*this.getX()+t)/n,a=(this.count*this.getY()+e)/n,i=(this.count*this.estimatedModuleSize+r)/n;return new Mt(s,a,i,n)}}class Pt{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Lt{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=null!==e&&void 0!==e&&void 0!==e.get(N.TRY_HARDER),r=null!==e&&void 0!==e&&void 0!==e.get(N.PURE_BARCODE),n=this.image,s=n.getHeight(),a=n.getWidth();let i=Math.floor(3*s/(4*Lt.MAX_MODULES));(i<Lt.MIN_SKIP||t)&&(i=Lt.MIN_SKIP);let o=!1;const l=new Int32Array(5);for(let d=i-1;d<s&&!o;d+=i){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;let e=0;for(let t=0;t<a;t++)if(n.get(t,d))1===(1&e)&&e++,l[e]++;else if(0===(1&e))if(4===e)if(Lt.foundPatternCross(l)){if(!0!==this.handlePossibleCenter(l,d,t,r)){l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;continue}if(i=2,!0===this.hasSkipped)o=this.haveMultiplyConfirmedCenters();else{const e=this.findRowSkip();e>l[2]&&(d+=e-l[2]-i,t=a-1)}e=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;else l[++e]++;else l[e]++;Lt.foundPatternCross(l)&&!0===this.handlePossibleCenter(l,d,a,r)&&(i=l[0],this.hasSkipped&&(o=this.haveMultiplyConfirmedCenters()))}const c=this.selectBestPatterns();return oe.orderBestPatterns(c),new Pt(c)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let s=0;s<5;s++){const r=e[s];if(0===r)return!1;t+=r}if(t<7)return!1;const r=t/7,n=r/2;return Math.abs(r-e[0])<n&&Math.abs(r-e[1])<n&&Math.abs(3*r-e[2])<3*n&&Math.abs(r-e[3])<n&&Math.abs(r-e[4])<n}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,r,n){const s=this.getCrossCheckStateCount();let a=0;const i=this.image;for(;e>=a&&t>=a&&i.get(t-a,e-a);)s[2]++,a++;if(e<a||t<a)return!1;for(;e>=a&&t>=a&&!i.get(t-a,e-a)&&s[1]<=r;)s[1]++,a++;if(e<a||t<a||s[1]>r)return!1;for(;e>=a&&t>=a&&i.get(t-a,e-a)&&s[0]<=r;)s[0]++,a++;if(s[0]>r)return!1;const o=i.getHeight(),l=i.getWidth();for(a=1;e+a<o&&t+a<l&&i.get(t+a,e+a);)s[2]++,a++;if(e+a>=o||t+a>=l)return!1;for(;e+a<o&&t+a<l&&!i.get(t+a,e+a)&&s[3]<r;)s[3]++,a++;if(e+a>=o||t+a>=l||s[3]>=r)return!1;for(;e+a<o&&t+a<l&&i.get(t+a,e+a)&&s[4]<r;)s[4]++,a++;if(s[4]>=r)return!1;const c=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(c-n)<2*n&&Lt.foundPatternCross(s)}crossCheckVertical(e,t,r,n){const s=this.image,a=s.getHeight(),i=this.getCrossCheckStateCount();let o=e;for(;o>=0&&s.get(t,o);)i[2]++,o--;if(o<0)return NaN;for(;o>=0&&!s.get(t,o)&&i[1]<=r;)i[1]++,o--;if(o<0||i[1]>r)return NaN;for(;o>=0&&s.get(t,o)&&i[0]<=r;)i[0]++,o--;if(i[0]>r)return NaN;for(o=e+1;o<a&&s.get(t,o);)i[2]++,o++;if(o===a)return NaN;for(;o<a&&!s.get(t,o)&&i[3]<r;)i[3]++,o++;if(o===a||i[3]>=r)return NaN;for(;o<a&&s.get(t,o)&&i[4]<r;)i[4]++,o++;if(i[4]>=r)return NaN;const l=i[0]+i[1]+i[2]+i[3]+i[4];return 5*Math.abs(l-n)>=2*n?NaN:Lt.foundPatternCross(i)?Lt.centerFromEnd(i,o):NaN}crossCheckHorizontal(e,t,r,n){const s=this.image,a=s.getWidth(),i=this.getCrossCheckStateCount();let o=e;for(;o>=0&&s.get(o,t);)i[2]++,o--;if(o<0)return NaN;for(;o>=0&&!s.get(o,t)&&i[1]<=r;)i[1]++,o--;if(o<0||i[1]>r)return NaN;for(;o>=0&&s.get(o,t)&&i[0]<=r;)i[0]++,o--;if(i[0]>r)return NaN;for(o=e+1;o<a&&s.get(o,t);)i[2]++,o++;if(o===a)return NaN;for(;o<a&&!s.get(o,t)&&i[3]<r;)i[3]++,o++;if(o===a||i[3]>=r)return NaN;for(;o<a&&s.get(o,t)&&i[4]<r;)i[4]++,o++;if(i[4]>=r)return NaN;const l=i[0]+i[1]+i[2]+i[3]+i[4];return 5*Math.abs(l-n)>=n?NaN:Lt.foundPatternCross(i)?Lt.centerFromEnd(i,o):NaN}handlePossibleCenter(e,t,r,n){const s=e[0]+e[1]+e[2]+e[3]+e[4];let a=Lt.centerFromEnd(e,r),i=this.crossCheckVertical(t,Math.floor(a),e[2],s);if(!isNaN(i)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(i),e[2],s),!isNaN(a)&&(!n||this.crossCheckDiagonal(Math.floor(i),Math.floor(a),e[2],s)))){const e=s/7;let t=!1;const r=this.possibleCenters;for(let n=0,s=r.length;n<s;n++){const s=r[n];if(s.aboutEquals(e,i,a)){r[n]=s.combineEstimate(i,a,e),t=!0;break}}if(!t){const t=new Mt(a,i,e);r.push(t),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(t)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let e=null;for(const t of this.possibleCenters)if(t.getCount()>=Lt.CENTER_QUORUM){if(null!=e)return this.hasSkipped=!0,Math.floor((Math.abs(e.getX()-t.getX())-Math.abs(e.getY()-t.getY()))/2);e=t}return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const r=this.possibleCenters.length;for(const a of this.possibleCenters)a.getCount()>=Lt.CENTER_QUORUM&&(e++,t+=a.getEstimatedModuleSize());if(e<3)return!1;const n=t/r;let s=0;for(const a of this.possibleCenters)s+=Math.abs(a.getEstimatedModuleSize()-n);return s<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new k;const t=this.possibleCenters;let r;if(e>3){let n=0,s=0;for(const e of this.possibleCenters){const t=e.getEstimatedModuleSize();n+=t,s+=t*t}r=n/e;let a=Math.sqrt(s/e-r*r);t.sort((e,t)=>{const n=Math.abs(t.getEstimatedModuleSize()-r),s=Math.abs(e.getEstimatedModuleSize()-r);return n<s?-1:n>s?1:0});const i=Math.max(.2*r,a);for(let e=0;e<t.length&&t.length>3;e++){const n=t[e];Math.abs(n.getEstimatedModuleSize()-r)>i&&(t.splice(e,1),e--)}}if(t.length>3){let e=0;for(const r of t)e+=r.getEstimatedModuleSize();r=e/t.length,t.sort((e,t)=>{if(t.getCount()===e.getCount()){const n=Math.abs(t.getEstimatedModuleSize()-r),s=Math.abs(e.getEstimatedModuleSize()-r);return n<s?1:n>s?-1:0}return t.getCount()-e.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}Lt.CENTER_QUORUM=2,Lt.MIN_SKIP=3,Lt.MAX_MODULES=57;class Bt{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=null===e||void 0===e?null:e.get(N.NEED_RESULT_POINT_CALLBACK);const t=new Lt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)}processFinderPatternInfo(e){const t=e.getTopLeft(),r=e.getTopRight(),n=e.getBottomLeft(),s=this.calculateModuleSize(t,r,n);if(s<1)throw new k("No pattern found in proccess finder.");const a=Bt.computeDimension(t,r,n,s),i=Ct.getProvisionalVersionForDimension(a),o=i.getDimensionForVersion()-7;let l=null;if(i.getAlignmentPatternCenters().length>0){const e=r.getX()-t.getX()+n.getX(),a=r.getY()-t.getY()+n.getY(),i=1-3/o,c=Math.floor(t.getX()+i*(e-t.getX())),d=Math.floor(t.getY()+i*(a-t.getY()));for(let t=4;t<=16;t<<=1)try{l=this.findAlignmentInRegion(s,c,d,t);break}catch(h){if(!(h instanceof k))throw h}}const c=Bt.createTransform(t,r,n,l,a),d=Bt.sampleGrid(this.image,c,a);let u;return u=null===l?[n,t,r]:[n,t,r,l],new le(d,u)}static createTransform(e,t,r,n,s){const a=s-3.5;let i,o,l,c;return null!==n?(i=n.getX(),o=n.getY(),l=a-3,c=l):(i=t.getX()-e.getX()+r.getX(),o=t.getY()-e.getY()+r.getY(),l=a,c=a),he.quadrilateralToQuadrilateral(3.5,3.5,a,3.5,l,c,3.5,a,e.getX(),e.getY(),t.getX(),t.getY(),i,o,r.getX(),r.getY())}static sampleGrid(e,t,r){return pe.getInstance().sampleGridWithTransform(e,r,r,t)}static computeDimension(e,t,r,n){const s=ae.round(oe.distance(e,t)/n),a=ae.round(oe.distance(e,r)/n);let i=Math.floor((s+a)/2)+7;switch(3&i){case 0:i++;break;case 2:i--;break;case 3:throw new k("Dimensions could be not found.")}return i}calculateModuleSize(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2}calculateModuleSizeOneWay(e,t){const r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?n/7:isNaN(n)?r/7:(r+n)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,r,n){let s=this.sizeOfBlackWhiteBlackRun(e,t,r,n),a=1,i=e-(r-e);i<0?(a=e/(e-i),i=0):i>=this.image.getWidth()&&(a=(this.image.getWidth()-1-e)/(i-e),i=this.image.getWidth()-1);let o=Math.floor(t-(n-t)*a);return a=1,o<0?(a=t/(t-o),o=0):o>=this.image.getHeight()&&(a=(this.image.getHeight()-1-t)/(o-t),o=this.image.getHeight()-1),i=Math.floor(e+(i-e)*a),s+=this.sizeOfBlackWhiteBlackRun(e,t,i,o),s-1}sizeOfBlackWhiteBlackRun(e,t,r,n){const s=Math.abs(n-t)>Math.abs(r-e);if(s){let s=e;e=t,t=s,s=r,r=n,n=s}const a=Math.abs(r-e),i=Math.abs(n-t);let o=-a/2;const l=e<r?1:-1,c=t<n?1:-1;let d=0;const u=r+l;for(let h=e,m=t;h!==u;h+=l){const r=s?m:h,l=s?h:m;if(1===d===this.image.get(r,l)){if(2===d)return ae.distance(h,m,e,t);d++}if(o+=i,o>0){if(m===n)break;m+=c,o-=a}}return 2===d?ae.distance(r+l,n,e,t):NaN}findAlignmentInRegion(e,t,r,n){const s=Math.floor(n*e),a=Math.max(0,t-s),i=Math.min(this.image.getWidth()-1,t+s);if(i-a<3*e)throw new k("Alignment top exceeds estimated module size.");const o=Math.max(0,r-s),l=Math.min(this.image.getHeight()-1,r+s);if(l-o<3*e)throw new k("Alignment bottom exceeds estimated module size.");return new Ot(this.image,a,o,i-a,l-o,e,this.resultPointCallback).find()}}class Ft{constructor(){this.decoder=new Dt}getDecoder(){return this.decoder}decode(e,t){let r,n;if(void 0!==t&&null!==t&&void 0!==t.get(N.PURE_BARCODE)){const s=Ft.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(s,t),n=Ft.NO_POINTS}else{const s=new Bt(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(s.getBits(),t),n=s.getPoints()}r.getOther()instanceof Tt&&r.getOther().applyMirroredCorrection(n);const s=new U(r.getText(),r.getRawBytes(),void 0,n,H.QR_CODE,void 0),a=r.getByteSegments();null!==a&&s.putMetadata(Q.BYTE_SEGMENTS,a);const i=r.getECLevel();return null!==i&&s.putMetadata(Q.ERROR_CORRECTION_LEVEL,i),r.hasStructuredAppend()&&(s.putMetadata(Q.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),s.putMetadata(Q.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),s}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(null===t||null===r)throw new k;const n=this.moduleSize(t,e);let s=t[1],a=r[1],i=t[0],o=r[0];if(i>=o||s>=a)throw new k;if(a-s!==o-i&&(o=i+(a-s),o>=e.getWidth()))throw new k;const l=Math.round((o-i+1)/n),c=Math.round((a-s+1)/n);if(l<=0||c<=0)throw new k;if(c!==l)throw new k;const d=Math.floor(n/2);s+=d,i+=d;const u=i+Math.floor((l-1)*n)-o;if(u>0){if(u>d)throw new k;i-=u}const h=s+Math.floor((c-1)*n)-a;if(h>0){if(h>d)throw new k;s-=h}const m=new I(l,c);for(let p=0;p<c;p++){const t=s+Math.floor(p*n);for(let r=0;r<l;r++)e.get(i+Math.floor(r*n),t)&&m.set(r,p)}return m}static moduleSize(e,t){const r=t.getHeight(),n=t.getWidth();let s=e[0],a=e[1],i=!0,o=0;for(;s<n&&a<r;){if(i!==t.get(s,a)){if(5===++o)break;i=!i}s++,a++}if(s===n||a===r)throw new k;return(s-e[0])/7}}Ft.NO_POINTS=new Array;class Ut{PDF417Common(){}static getBitCountSum(e){return ae.sum(e)}static toIntArray(e){if(null==e||!e.length)return Ut.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let r=0;for(const n of e)t[r++]=n;return t}static getCodeword(e){const t=b.binarySearch(Ut.SYMBOL_TABLE,262143&e);return t<0?-1:(Ut.CODEWORD_TABLE[t]-1)%Ut.NUMBER_OF_CODEWORDS}}Ut.NUMBER_OF_CODEWORDS=929,Ut.MAX_CODEWORDS_IN_BARCODE=Ut.NUMBER_OF_CODEWORDS-1,Ut.MIN_ROWS_IN_BARCODE=3,Ut.MAX_ROWS_IN_BARCODE=90,Ut.MODULES_IN_CODEWORD=17,Ut.MODULES_IN_STOP_PATTERN=18,Ut.BARS_IN_MODULE=8,Ut.EMPTY_INT_ARRAY=new Int32Array([]),Ut.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ut.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class zt{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Ht{static detectMultiple(e,t,r){let n=e.getBlackMatrix(),s=Ht.detect(r,n);return s.length||(n=n.clone(),n.rotate180(),s=Ht.detect(r,n)),new zt(n,s)}static detect(e,t){const r=new Array;let n=0,s=0,a=!1;for(;n<t.getHeight();){const i=Ht.findVertices(t,n,s);if(null!=i[0]||null!=i[3]){if(a=!0,r.push(i),!e)break;null!=i[2]?(s=Math.trunc(i[2].getX()),n=Math.trunc(i[2].getY())):(s=Math.trunc(i[4].getX()),n=Math.trunc(i[4].getY()))}else{if(!a)break;a=!1,s=0;for(const e of r)null!=e[1]&&(n=Math.trunc(Math.max(n,e[1].getY()))),null!=e[3]&&(n=Math.max(n,Math.trunc(e[3].getY())));n+=Ht.ROW_STEP}}return r}static findVertices(e,t,r){const n=e.getHeight(),s=e.getWidth(),a=new Array(8);return Ht.copyToResult(a,Ht.findRowsWithPattern(e,n,s,t,r,Ht.START_PATTERN),Ht.INDEXES_START_PATTERN),null!=a[4]&&(r=Math.trunc(a[4].getX()),t=Math.trunc(a[4].getY())),Ht.copyToResult(a,Ht.findRowsWithPattern(e,n,s,t,r,Ht.STOP_PATTERN),Ht.INDEXES_STOP_PATTERN),a}static copyToResult(e,t,r){for(let n=0;n<r.length;n++)e[r[n]]=t[n]}static findRowsWithPattern(e,t,r,n,s,a){const i=new Array(4);let o=!1;const l=new Int32Array(a.length);for(;n<t;n+=Ht.ROW_STEP){let t=Ht.findGuardPattern(e,s,n,r,!1,a,l);if(null!=t){for(;n>0;){const i=Ht.findGuardPattern(e,s,--n,r,!1,a,l);if(null==i){n++;break}t=i}i[0]=new oe(t[0],n),i[1]=new oe(t[1],n),o=!0;break}}let c=n+1;if(o){let n=0,s=Int32Array.from([Math.trunc(i[0].getX()),Math.trunc(i[1].getX())]);for(;c<t;c++){const t=Ht.findGuardPattern(e,s[0],c,r,!1,a,l);if(null!=t&&Math.abs(s[0]-t[0])<Ht.MAX_PATTERN_DRIFT&&Math.abs(s[1]-t[1])<Ht.MAX_PATTERN_DRIFT)s=t,n=0;else{if(n>Ht.SKIPPED_ROW_COUNT_MAX)break;n++}}c-=n+1,i[2]=new oe(s[0],c),i[3]=new oe(s[1],c)}return c-n<Ht.BARCODE_MIN_HEIGHT&&b.fill(i,null),i}static findGuardPattern(e,t,r,n,s,a,i){b.fillWithin(i,0,i.length,0);let o=t,l=0;for(;e.get(o,r)&&o>0&&l++<Ht.MAX_PIXEL_DRIFT;)o--;let c=o,d=0,u=a.length;for(let h=s;c<n;c++)if(e.get(c,r)!==h)i[d]++;else{if(d===u-1){if(Ht.patternMatchVariance(i,a,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE)return new Int32Array([o,c]);o+=i[0]+i[1],f.arraycopy(i,2,i,0,d-1),i[d-1]=0,i[d]=0,d--}else d++;i[d]=1,h=!h}return d===u-1&&Ht.patternMatchVariance(i,a,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE?new Int32Array([o,c-1]):null}static patternMatchVariance(e,t,r){let n=e.length,s=0,a=0;for(let l=0;l<n;l++)s+=e[l],a+=t[l];if(s<a)return 1/0;let i=s/a;r*=i;let o=0;for(let l=0;l<n;l++){let n=e[l],s=t[l]*i,a=n>s?n-s:s-n;if(a>r)return 1/0;o+=a}return o/s}}Ht.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ht.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ht.MAX_AVG_VARIANCE=.42,Ht.MAX_INDIVIDUAL_VARIANCE=.8,Ht.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ht.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ht.MAX_PIXEL_DRIFT=3,Ht.MAX_PATTERN_DRIFT=5,Ht.SKIPPED_ROW_COUNT_MAX=25,Ht.ROW_STEP=5,Ht.BARCODE_MIN_HEIGHT=10;class Vt{constructor(e,t){if(0===t.length)throw new u;this.field=e;let r=t.length;if(r>1&&0===t[0]){let e=1;for(;e<r&&0===t[e];)e++;e===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-e),f.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);if(1===e){let e=0;for(let t of this.coefficients)e=this.field.add(e,t);return e}let t=this.coefficients[0],r=this.coefficients.length;for(let n=1;n<r;n++)t=this.field.add(this.field.multiply(e,t),this.coefficients[n]);return t}add(e){if(!this.field.equals(e.field))throw new u("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,r=e.coefficients;if(t.length>r.length){let e=t;t=r,r=e}let n=new Int32Array(r.length),s=r.length-t.length;f.arraycopy(r,0,n,0,s);for(let a=s;a<r.length;a++)n[a]=this.field.add(t[a-s],r[a]);return new Vt(this.field,n)}subtract(e){if(!this.field.equals(e.field))throw new u("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Vt?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new u("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Vt(this.field,new Int32Array([0]));let t=this.coefficients,r=t.length,n=e.coefficients,s=n.length,a=new Int32Array(r+s-1);for(let i=0;i<r;i++){let e=t[i];for(let t=0;t<s;t++)a[i+t]=this.field.add(a[i+t],this.field.multiply(e,n[t]))}return new Vt(this.field,a)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new Vt(this.field,t)}multiplyScalar(e){if(0===e)return new Vt(this.field,new Int32Array([0]));if(1===e)return this;let t=this.coefficients.length,r=new Int32Array(t);for(let n=0;n<t;n++)r[n]=this.field.multiply(this.coefficients[n],e);return new Vt(this.field,r)}multiplyByMonomial(e,t){if(e<0)throw new u;if(0===t)return new Vt(this.field,new Int32Array([0]));let r=this.coefficients.length,n=new Int32Array(r+e);for(let s=0;s<r;s++)n[s]=this.field.multiply(this.coefficients[s],t);return new Vt(this.field,n)}toString(){let e=new A;for(let t=this.getDegree();t>=0;t--){let r=this.getCoefficient(t);0!==r&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),0!==t&&1===r||e.append(r),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class Wt{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(0===e)throw new u;return this.logTable[e]}inverse(e){if(0===e)throw new $;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class qt extends Wt{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let r=1;for(let n=0;n<e;n++)this.expTable[n]=r,r=r*t%e;for(let n=0;n<e-1;n++)this.logTable[this.expTable[n]]=n;this.zero=new Vt(this,new Int32Array([0])),this.one=new Vt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new u;if(0===t)return this.zero;let r=new Int32Array(e+1);return r[0]=t,new Vt(this,r)}}qt.PDF417_GF=new qt(Ut.NUMBER_OF_CODEWORDS,3);class Gt{constructor(){this.field=qt.PDF417_GF}decode(e,t,r){let n=new Vt(this.field,e),s=new Int32Array(t),a=!1;for(let m=t;m>0;m--){let e=n.evaluateAt(this.field.exp(m));s[t-m]=e,0!==e&&(a=!0)}if(!a)return 0;let i=this.field.getOne();if(null!=r)for(const m of r){let t=this.field.exp(e.length-1-m),r=new Vt(this.field,new Int32Array([this.field.subtract(0,t),1]));i=i.multiply(r)}let o=new Vt(this.field,s),l=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),o,t),c=l[0],d=l[1],u=this.findErrorLocations(c),h=this.findErrorMagnitudes(d,c,u);for(let p=0;p<u.length;p++){let t=e.length-1-this.field.log(u[p]);if(t<0)throw m.getChecksumInstance();e[t]=this.field.subtract(e[t],h[p])}return u.length}runEuclideanAlgorithm(e,t,r){if(e.getDegree()<t.getDegree()){let r=e;e=t,t=r}let n=e,s=t,a=this.field.getZero(),i=this.field.getOne();for(;s.getDegree()>=Math.round(r/2);){let e=n,t=a;if(n=s,a=i,n.isZero())throw m.getChecksumInstance();s=e;let r=this.field.getZero(),o=n.getCoefficient(n.getDegree()),l=this.field.inverse(o);for(;s.getDegree()>=n.getDegree()&&!s.isZero();){let e=s.getDegree()-n.getDegree(),t=this.field.multiply(s.getCoefficient(s.getDegree()),l);r=r.add(this.field.buildMonomial(e,t)),s=s.subtract(n.multiplyByMonomial(e,t))}i=r.multiply(a).subtract(t).negative()}let o=i.getCoefficient(0);if(0===o)throw m.getChecksumInstance();let l=this.field.inverse(o);return[i.multiply(l),s.multiply(l)]}findErrorLocations(e){let t=e.getDegree(),r=new Int32Array(t),n=0;for(let s=1;s<this.field.getSize()&&n<t;s++)0===e.evaluateAt(s)&&(r[n]=this.field.inverse(s),n++);if(n!==t)throw m.getChecksumInstance();return r}findErrorMagnitudes(e,t,r){let n=t.getDegree(),s=new Int32Array(n);for(let l=1;l<=n;l++)s[n-l]=this.field.multiply(l,t.getCoefficient(l));let a=new Vt(this.field,s),i=r.length,o=new Int32Array(i);for(let l=0;l<i;l++){let t=this.field.inverse(r[l]),n=this.field.subtract(0,e.evaluateAt(t)),s=this.field.inverse(a.evaluateAt(t));o[l]=this.field.multiply(n,s)}return o}}class Yt{constructor(e,t,r,n,s){e instanceof Yt?this.constructor_2(e):this.constructor_1(e,t,r,n,s)}constructor_1(e,t,r,n,s){const a=null==t||null==r,i=null==n||null==s;if(a&&i)throw new k;a?(t=new oe(0,n.getY()),r=new oe(0,s.getY())):i&&(n=new oe(e.getWidth()-1,t.getY()),s=new oe(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=n,this.bottomRight=s,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(n.getX(),s.getX())),this.minY=Math.trunc(Math.min(t.getY(),n.getY())),this.maxY=Math.trunc(Math.max(r.getY(),s.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return null==e?t:null==t?e:new Yt(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,r){let n=this.topLeft,s=this.bottomLeft,a=this.topRight,i=this.bottomRight;if(e>0){let t=r?this.topLeft:this.topRight,s=Math.trunc(t.getY()-e);s<0&&(s=0);let i=new oe(t.getX(),s);r?n=i:a=i}if(t>0){let e=r?this.bottomLeft:this.bottomRight,n=Math.trunc(e.getY()+t);n>=this.image.getHeight()&&(n=this.image.getHeight()-1);let a=new oe(e.getX(),n);r?s=a:i=a}return new Yt(this.image,n,s,a,i)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Xt{constructor(e,t,r,n){this.columnCount=e,this.errorCorrectionLevel=n,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Qt{constructor(){this.buffer=""}static form(e,t){let r=-1;function n(e,n,s,a,i,o){if("%%"===e)return"%";if(void 0===t[++r])return;e=a?parseInt(a.substr(1)):void 0;let l,c=i?parseInt(i.substr(1)):void 0;switch(o){case"s":l=t[r];break;case"c":l=t[r][0];break;case"f":l=parseFloat(t[r]).toFixed(e);break;case"p":l=parseFloat(t[r]).toPrecision(e);break;case"e":l=parseFloat(t[r]).toExponential(e);break;case"x":l=parseInt(t[r]).toString(c||16);break;case"d":l=parseFloat(parseInt(t[r],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let d=parseInt(s),u=s&&s[0]+""==="0"?"0":" ";for(;l.length<d;)l=void 0!==n?l+u:u+l;return l}let s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,n)}format(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.buffer+=Qt.form(e,r)}toString(){return this.buffer}}class Kt{constructor(e){this.boundingBox=new Yt(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(null!=t)return t;for(let r=1;r<Kt.MAX_NEARBY_DISTANCE;r++){let n=this.imageRowToCodewordIndex(e)-r;if(n>=0&&(t=this.codewords[n],null!=t))return t;if(n=this.imageRowToCodewordIndex(e)+r,n<this.codewords.length&&(t=this.codewords[n],null!=t))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Qt;let t=0;for(const r of this.codewords)null!=r?e.format("%3d: %3d|%3d%n",t++,r.getRowNumber(),r.getValue()):e.format("%3d:    |   %n",t++);return e.toString()}}Kt.MAX_NEARBY_DISTANCE=5;class Zt{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[r,n]of this.values.entries()){const s={getKey:()=>r,getValue:()=>n};s.getValue()>e?(e=s.getValue(),t=[],t.push(s.getKey())):s.getValue()===e&&t.push(s.getKey())}return Ut.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class Jt extends Kt{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())null!=e&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let r=this.getBoundingBox(),n=this._isLeft?r.getTopLeft():r.getTopRight(),s=this._isLeft?r.getBottomLeft():r.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(n.getY())),i=this.imageRowToCodewordIndex(Math.trunc(s.getY())),o=-1,l=1,c=0;for(let d=a;d<i;d++){if(null==t[d])continue;let r=t[d],n=r.getRowNumber()-o;if(0===n)c++;else if(1===n)l=Math.max(l,c),c=1,o=r.getRowNumber();else if(n<0||r.getRowNumber()>=e.getRowCount()||n>d)t[d]=null;else{let e;e=l>2?(l-2)*n:n;let s=e>=d;for(let r=1;r<=e&&!s;r++)s=null!=t[d-r];s?t[d]=null:(o=r.getRowNumber(),c=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(null==e)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let r of this.getCodewords())if(null!=r){let e=r.getRowNumber();if(e>=t.length)continue;t[e]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),r=this._isLeft?t.getTopLeft():t.getTopRight(),n=this._isLeft?t.getBottomLeft():t.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=this.imageRowToCodewordIndex(Math.trunc(n.getY())),i=this.getCodewords(),o=-1;for(let l=s;l<a;l++){if(null==i[l])continue;let t=i[l];t.setRowNumberAsRowIndicatorColumn();let r=t.getRowNumber()-o;0===r||(1===r?o=t.getRowNumber():t.getRowNumber()>=e.getRowCount()?i[l]=null:o=t.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new Zt,r=new Zt,n=new Zt,s=new Zt;for(let i of e){if(null==i)continue;i.setRowNumberAsRowIndicatorColumn();let e=i.getValue()%30,a=i.getRowNumber();switch(this._isLeft||(a+=2),a%3){case 0:r.setValue(3*e+1);break;case 1:s.setValue(e/3),n.setValue(e%3);break;case 2:t.setValue(e+1)}}if(0===t.getValue().length||0===r.getValue().length||0===n.getValue().length||0===s.getValue().length||t.getValue()[0]<1||r.getValue()[0]+n.getValue()[0]<Ut.MIN_ROWS_IN_BARCODE||r.getValue()[0]+n.getValue()[0]>Ut.MAX_ROWS_IN_BARCODE)return null;let a=new Xt(t.getValue()[0],r.getValue()[0],n.getValue()[0],s.getValue()[0]);return this.removeIncorrectCodewords(e,a),a}removeIncorrectCodewords(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(null==e[r])continue;let s=n.getValue()%30,a=n.getRowNumber();if(a>t.getRowCount())e[r]=null;else switch(this._isLeft||(a+=2),a%3){case 0:3*s+1!==t.getRowCountUpperPart()&&(e[r]=null);break;case 1:Math.trunc(s/3)===t.getErrorCorrectionLevel()&&s%3===t.getRowCountLowerPart()||(e[r]=null);break;case 2:s+1!==t.getColumnCount()&&(e[r]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class $t{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e,t=Ut.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(0===e)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let e=this.detectionResultColumns[t].getCodewords();for(let r=0;r<e.length;r++)null!=e[r]&&(e[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,e))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<e.length;r++)if(null!=e[r]&&null!=t[r]&&e[r].getRowNumber()===t[r].getRowNumber())for(let t=1;t<=this.barcodeColumnCount;t++){let n=this.detectionResultColumns[t].getCodewords()[r];null!=n&&(n.setRowNumber(e[r].getRowNumber()),n.hasValidRowNumber()||(this.detectionResultColumns[t].getCodewords()[r]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<t.length;r++){if(null==t[r])continue;let n=t[r].getRowNumber(),s=0;for(let t=this.barcodeColumnCount+1;t>0&&s<this.ADJUST_ROW_NUMBER_SKIP;t--){let a=this.detectionResultColumns[t].getCodewords()[r];null!=a&&(s=$t.adjustRowNumberIfValid(n,s,a),a.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let r=0;r<t.length;r++){if(null==t[r])continue;let n=t[r].getRowNumber(),s=0;for(let t=1;t<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;t++){let a=this.detectionResultColumns[t].getCodewords()[r];null!=a&&(s=$t.adjustRowNumberIfValid(n,s,a),a.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,r){return null==r||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,r){if(!this.detectionResultColumns[e-1])return;let n=r[t],s=this.detectionResultColumns[e-1].getCodewords(),a=s;null!=this.detectionResultColumns[e+1]&&(a=this.detectionResultColumns[e+1].getCodewords());let i=new Array(14);i[2]=s[t],i[3]=a[t],t>0&&(i[0]=r[t-1],i[4]=s[t-1],i[5]=a[t-1]),t>1&&(i[8]=r[t-2],i[10]=s[t-2],i[11]=a[t-2]),t<r.length-1&&(i[1]=r[t+1],i[6]=s[t+1],i[7]=a[t+1]),t<r.length-2&&(i[9]=r[t+2],i[12]=s[t+2],i[13]=a[t+2]);for(let o of i)if($t.adjustRowNumber(n,o))return}static adjustRowNumber(e,t){return null!=t&&!(!t.hasValidRowNumber()||t.getBucket()!==e.getBucket())&&(e.setRowNumber(t.getRowNumber()),!0)}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new Qt;for(let r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(let e=0;e<this.barcodeColumnCount+2;e++){if(null==this.detectionResultColumns[e]){t.format("    |   ");continue}let n=this.detectionResultColumns[e].getCodewords()[r];null!=n?t.format(" %3d|%3d",n.getRowNumber(),n.getValue()):t.format("    |   ")}t.format("%n")}return t.toString()}}class er{constructor(e,t,r,n){this.rowNumber=er.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(n)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==er.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}er.BARCODE_ROW_UNKNOWN=-1;class tr{static initialize(){for(let e=0;e<Ut.SYMBOL_TABLE.length;e++){let t=Ut.SYMBOL_TABLE[e],r=1&t;for(let n=0;n<Ut.BARS_IN_MODULE;n++){let s=0;for(;(1&t)===r;)s+=1,t>>=1;r=1&t,tr.RATIOS_TABLE[e]||(tr.RATIOS_TABLE[e]=new Array(Ut.BARS_IN_MODULE)),tr.RATIOS_TABLE[e][Ut.BARS_IN_MODULE-n-1]=Math.fround(s/Ut.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=tr.getDecodedCodewordValue(tr.sampleBitCounts(e));return-1!==t?t:tr.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=ae.sum(e),r=new Int32Array(Ut.BARS_IN_MODULE),n=0,s=0;for(let a=0;a<Ut.MODULES_IN_CODEWORD;a++){let i=t/(2*Ut.MODULES_IN_CODEWORD)+a*t/Ut.MODULES_IN_CODEWORD;s+e[n]<=i&&(s+=e[n],n++),r[n]++}return r}static getDecodedCodewordValue(e){let t=tr.getBitValue(e);return-1===Ut.getCodeword(t)?-1:t}static getBitValue(e){let t=0;for(let r=0;r<e.length;r++)for(let n=0;n<e[r];n++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=ae.sum(e),r=new Array(Ut.BARS_IN_MODULE);if(t>1)for(let a=0;a<r.length;a++)r[a]=Math.fround(e[a]/t);let n=ie.MAX_VALUE,s=-1;this.bSymbolTableReady||tr.initialize();for(let a=0;a<tr.RATIOS_TABLE.length;a++){let e=0,t=tr.RATIOS_TABLE[a];for(let s=0;s<Ut.BARS_IN_MODULE;s++){let a=Math.fround(t[s]-r[s]);if(e+=Math.fround(a*a),e>=n)break}e<n&&(n=e,s=Ut.SYMBOL_TABLE[a])}return s}}tr.bSymbolTableReady=!1,tr.RATIOS_TABLE=new Array(Ut.SYMBOL_TABLE.length).map(e=>new Array(Ut.BARS_IN_MODULE));class rr{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class nr{static parseLong(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}class sr extends c{}sr.kind="NullPointerException";class ar{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,r){if(null==e)throw new sr;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new x;if(0!==r)for(let n=0;n<r;n++)this.write(e[t+n])}flush(){}close(){}}class ir extends c{}class or extends ar{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(super(),this.count=0,e<0)throw new u("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new ir;t=y.MAX_VALUE}this.buf=b.copyOfUint8Array(this.buf,t)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,r){if(t<0||t>e.length||r<0||t+r-e.length>0)throw new x;this.ensureCapacity(this.count+r),f.arraycopy(e,t,this.buf,this.count,r),this.count+=r}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return b.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?"string"===typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}function lr(){if("undefined"!==typeof window)return window.BigInt||null;if("undefined"!==typeof r.g)return r.g.BigInt||null;if("undefined"!==typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let cr;function dr(e){if("undefined"===typeof cr&&(cr=lr()),null===cr)throw new Error("BigInt is not supported!");return cr(e)}function ur(){let e=[];e[0]=dr(1);let t=dr(900);e[1]=t;for(let r=2;r<16;r++)e[r]=e[r-1]*t;return e}!function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(X||(X={}));class hr{static decode(e,t){let r=new A(""),n=_.ISO8859_1;r.enableDecoding(n);let s=1,a=e[s++],i=new rr;for(;s<e[0];){switch(a){case hr.TEXT_COMPACTION_MODE_LATCH:s=hr.textCompaction(e,s,r);break;case hr.BYTE_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH_6:s=hr.byteCompaction(a,e,n,s,r);break;case hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[s++]);break;case hr.NUMERIC_COMPACTION_MODE_LATCH:s=hr.numericCompaction(e,s,r);break;case hr.ECI_CHARSET:_.getCharacterSetECIByValue(e[s++]);break;case hr.ECI_GENERAL_PURPOSE:s+=2;break;case hr.ECI_USER_DEFINED:s++;break;case hr.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=hr.decodeMacroBlock(e,s,i);break;case hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case hr.MACRO_PDF417_TERMINATOR:throw new j;default:s--,s=hr.textCompaction(e,s,r)}if(!(s<e.length))throw j.getFormatInstance();a=e[s++]}if(0===r.length())throw j.getFormatInstance();let o=new K(null,r.toString(),null,t);return o.setOther(i),o}static decodeMacroBlock(e,t,r){if(t+hr.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw j.getFormatInstance();let n=new Int32Array(hr.NUMBER_OF_SEQUENCE_CODEWORDS);for(let i=0;i<hr.NUMBER_OF_SEQUENCE_CODEWORDS;i++,t++)n[i]=e[t];r.setSegmentIndex(y.parseInt(hr.decodeBase900toBase10(n,hr.NUMBER_OF_SEQUENCE_CODEWORDS)));let s=new A;t=hr.textCompaction(e,t,s),r.setFileId(s.toString());let a=-1;for(e[t]===hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(a=t+1);t<e[0];)switch(e[t]){case hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++t]){case hr.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let n=new A;t=hr.textCompaction(e,t+1,n),r.setFileName(n.toString());break;case hr.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let s=new A;t=hr.textCompaction(e,t+1,s),r.setSender(s.toString());break;case hr.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let a=new A;t=hr.textCompaction(e,t+1,a),r.setAddressee(a.toString());break;case hr.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let i=new A;t=hr.numericCompaction(e,t+1,i),r.setSegmentCount(y.parseInt(i.toString()));break;case hr.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let o=new A;t=hr.numericCompaction(e,t+1,o),r.setTimestamp(nr.parseLong(o.toString()));break;case hr.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let l=new A;t=hr.numericCompaction(e,t+1,l),r.setChecksum(y.parseInt(l.toString()));break;case hr.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let c=new A;t=hr.numericCompaction(e,t+1,c),r.setFileSize(nr.parseLong(c.toString()));break;default:throw j.getFormatInstance()}break;case hr.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw j.getFormatInstance()}if(-1!==a){let n=t-a;r.isLastSegment()&&n--,r.setOptionalData(b.copyOfRange(e,a,a+n))}return t}static textCompaction(e,t,r){let n=new Int32Array(2*(e[0]-t)),s=new Int32Array(2*(e[0]-t)),a=0,i=!1;for(;t<e[0]&&!i;){let r=e[t++];if(r<hr.TEXT_COMPACTION_MODE_LATCH)n[a]=r/30,n[a+1]=r%30,a+=2;else switch(r){case hr.TEXT_COMPACTION_MODE_LATCH:n[a++]=hr.TEXT_COMPACTION_MODE_LATCH;break;case hr.BYTE_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH_6:case hr.NUMERIC_COMPACTION_MODE_LATCH:case hr.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case hr.MACRO_PDF417_TERMINATOR:t--,i=!0;break;case hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n[a]=hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,r=e[t++],s[a]=r,a++}}return hr.decodeTextCompaction(n,s,a,r),t}static decodeTextCompaction(e,t,r,n){let s=X.ALPHA,a=X.ALPHA,i=0;for(;i<r;){let r=e[i],o="";switch(s){case X.ALPHA:if(r<26)o=String.fromCharCode(65+r);else switch(r){case 26:o=" ";break;case hr.LL:s=X.LOWER;break;case hr.ML:s=X.MIXED;break;case hr.PS:a=s,s=X.PUNCT_SHIFT;break;case hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[i]);break;case hr.TEXT_COMPACTION_MODE_LATCH:s=X.ALPHA}break;case X.LOWER:if(r<26)o=String.fromCharCode(97+r);else switch(r){case 26:o=" ";break;case hr.AS:a=s,s=X.ALPHA_SHIFT;break;case hr.ML:s=X.MIXED;break;case hr.PS:a=s,s=X.PUNCT_SHIFT;break;case hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[i]);break;case hr.TEXT_COMPACTION_MODE_LATCH:s=X.ALPHA}break;case X.MIXED:if(r<hr.PL)o=hr.MIXED_CHARS[r];else switch(r){case hr.PL:s=X.PUNCT;break;case 26:o=" ";break;case hr.LL:s=X.LOWER;break;case hr.AL:s=X.ALPHA;break;case hr.PS:a=s,s=X.PUNCT_SHIFT;break;case hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[i]);break;case hr.TEXT_COMPACTION_MODE_LATCH:s=X.ALPHA}break;case X.PUNCT:if(r<hr.PAL)o=hr.PUNCT_CHARS[r];else switch(r){case hr.PAL:s=X.ALPHA;break;case hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[i]);break;case hr.TEXT_COMPACTION_MODE_LATCH:s=X.ALPHA}break;case X.ALPHA_SHIFT:if(s=a,r<26)o=String.fromCharCode(65+r);else switch(r){case 26:o=" ";break;case hr.TEXT_COMPACTION_MODE_LATCH:s=X.ALPHA}break;case X.PUNCT_SHIFT:if(s=a,r<hr.PAL)o=hr.PUNCT_CHARS[r];else switch(r){case hr.PAL:s=X.ALPHA;break;case hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[i]);break;case hr.TEXT_COMPACTION_MODE_LATCH:s=X.ALPHA}}""!==o&&n.append(o),i++}}static byteCompaction(e,t,r,n,s){let a=new or,i=0,o=0,l=!1;switch(e){case hr.BYTE_COMPACTION_MODE_LATCH:let e=new Int32Array(6),r=t[n++];for(;n<t[0]&&!l;)switch(e[i++]=r,o=900*o+r,r=t[n++],r){case hr.TEXT_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH:case hr.NUMERIC_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH_6:case hr.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case hr.MACRO_PDF417_TERMINATOR:n--,l=!0;break;default:if(i%5===0&&i>0){for(let e=0;e<6;++e)a.write(Number(dr(o)>>dr(8*(5-e))));o=0,i=0}}n===t[0]&&r<hr.TEXT_COMPACTION_MODE_LATCH&&(e[i++]=r);for(let t=0;t<i;t++)a.write(e[t]);break;case hr.BYTE_COMPACTION_MODE_LATCH_6:for(;n<t[0]&&!l;){let e=t[n++];if(e<hr.TEXT_COMPACTION_MODE_LATCH)i++,o=900*o+e;else switch(e){case hr.TEXT_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH:case hr.NUMERIC_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH_6:case hr.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case hr.MACRO_PDF417_TERMINATOR:n--,l=!0}if(i%5===0&&i>0){for(let e=0;e<6;++e)a.write(Number(dr(o)>>dr(8*(5-e))));o=0,i=0}}}return s.append(S.decode(a.toByteArray(),r)),n}static numericCompaction(e,t,r){let n=0,s=!1,a=new Int32Array(hr.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!s;){let i=e[t++];if(t===e[0]&&(s=!0),i<hr.TEXT_COMPACTION_MODE_LATCH)a[n]=i,n++;else switch(i){case hr.TEXT_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH_6:case hr.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case hr.MACRO_PDF417_TERMINATOR:t--,s=!0}(n%hr.MAX_NUMERIC_CODEWORDS===0||i===hr.NUMERIC_COMPACTION_MODE_LATCH||s)&&n>0&&(r.append(hr.decodeBase900toBase10(a,n)),n=0)}return t}static decodeBase900toBase10(e,t){let r=dr(0);for(let s=0;s<t;s++)r+=hr.EXP900[t-s-1]*dr(e[s]);let n=r.toString();if("1"!==n.charAt(0))throw new j;return n.substring(1)}}hr.TEXT_COMPACTION_MODE_LATCH=900,hr.BYTE_COMPACTION_MODE_LATCH=901,hr.NUMERIC_COMPACTION_MODE_LATCH=902,hr.BYTE_COMPACTION_MODE_LATCH_6=924,hr.ECI_USER_DEFINED=925,hr.ECI_GENERAL_PURPOSE=926,hr.ECI_CHARSET=927,hr.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,hr.MACRO_PDF417_TERMINATOR=922,hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,hr.MAX_NUMERIC_CODEWORDS=15,hr.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,hr.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,hr.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,hr.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,hr.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,hr.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,hr.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,hr.PL=25,hr.LL=27,hr.AS=27,hr.ML=28,hr.AL=28,hr.PS=29,hr.PAL=29,hr.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",hr.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",hr.EXP900=lr()?ur():[],hr.NUMBER_OF_SEQUENCE_CODEWORDS=2;class mr{constructor(){}static decode(e,t,r,n,s,a,i){let o,l=new Yt(e,t,r,n,s),c=null,d=null;for(let m=!0;;m=!1){if(null!=t&&(c=mr.getRowIndicatorColumn(e,l,t,!0,a,i)),null!=n&&(d=mr.getRowIndicatorColumn(e,l,n,!1,a,i)),o=mr.merge(c,d),null==o)throw k.getNotFoundInstance();let r=o.getBoundingBox();if(!m||null==r||!(r.getMinY()<l.getMinY()||r.getMaxY()>l.getMaxY()))break;l=r}o.setBoundingBox(l);let u=o.getBarcodeColumnCount()+1;o.setDetectionResultColumn(0,c),o.setDetectionResultColumn(u,d);let h=null!=c;for(let m=1;m<=u;m++){let t,r=h?m:u-m;if(void 0!==o.getDetectionResultColumn(r))continue;t=0===r||r===u?new Jt(l,0===r):new Kt(l),o.setDetectionResultColumn(r,t);let n=-1,s=n;for(let c=l.getMinY();c<=l.getMaxY();c++){if(n=mr.getStartColumn(o,r,c,h),n<0||n>l.getMaxX()){if(-1===s)continue;n=s}let d=mr.detectCodeword(e,l.getMinX(),l.getMaxX(),h,n,c,a,i);null!=d&&(t.setCodeword(c,d),s=n,a=Math.min(a,d.getWidth()),i=Math.max(i,d.getWidth()))}}return mr.createDecoderResult(o)}static merge(e,t){if(null==e&&null==t)return null;let r=mr.getBarcodeMetadata(e,t);if(null==r)return null;let n=Yt.merge(mr.adjustBoundingBox(e),mr.adjustBoundingBox(t));return new $t(r,n)}static adjustBoundingBox(e){if(null==e)return null;let t=e.getRowHeights();if(null==t)return null;let r=mr.getMax(t),n=0;for(let i of t)if(n+=r-i,i>0)break;let s=e.getCodewords();for(let i=0;n>0&&null==s[i];i++)n--;let a=0;for(let i=t.length-1;i>=0&&(a+=r-t[i],!(t[i]>0));i--);for(let i=s.length-1;a>0&&null==s[i];i--)a--;return e.getBoundingBox().addMissingRows(n,a,e.isLeft())}static getMax(e){let t=-1;for(let r of e)t=Math.max(t,r);return t}static getBarcodeMetadata(e,t){let r,n;return null==e||null==(r=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(n=t.getBarcodeMetadata())?r:r.getColumnCount()!==n.getColumnCount()&&r.getErrorCorrectionLevel()!==n.getErrorCorrectionLevel()&&r.getRowCount()!==n.getRowCount()?null:r}static getRowIndicatorColumn(e,t,r,n,s,a){let i=new Jt(t,n);for(let o=0;o<2;o++){let l=0===o?1:-1,c=Math.trunc(Math.trunc(r.getX()));for(let o=Math.trunc(Math.trunc(r.getY()));o<=t.getMaxY()&&o>=t.getMinY();o+=l){let t=mr.detectCodeword(e,0,e.getWidth(),n,c,o,s,a);null!=t&&(i.setCodeword(o,t),c=n?t.getStartX():t.getEndX())}}return i}static adjustCodewordCount(e,t){let r=t[0][1],n=r.getValue(),s=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-mr.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===n.length){if(s<1||s>Ut.MAX_CODEWORDS_IN_BARCODE)throw k.getNotFoundInstance();r.setValue(s)}else n[0]!==s&&r.setValue(s)}static createDecoderResult(e){let t=mr.createBarcodeMatrix(e);mr.adjustCodewordCount(e,t);let r=new Array,n=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),s=[],a=new Array;for(let o=0;o<e.getBarcodeRowCount();o++)for(let i=0;i<e.getBarcodeColumnCount();i++){let l=t[o][i+1].getValue(),c=o*e.getBarcodeColumnCount()+i;0===l.length?r.push(c):1===l.length?n[c]=l[0]:(a.push(c),s.push(l))}let i=new Array(s.length);for(let o=0;o<i.length;o++)i[o]=s[o];return mr.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),n,Ut.toIntArray(r),Ut.toIntArray(a),i)}static createDecoderResultFromAmbiguousValues(e,t,r,n,s){let a=new Int32Array(n.length),i=100;for(;i-- >0;){for(let e=0;e<a.length;e++)t[n[e]]=s[e][a[e]];try{return mr.decodeCodewords(t,e,r)}catch(o){if(!(o instanceof m))throw o}if(0===a.length)throw m.getChecksumInstance();for(let e=0;e<a.length;e++){if(a[e]<s[e].length-1){a[e]++;break}if(a[e]=0,e===a.length-1)throw m.getChecksumInstance()}}throw m.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let n=0;n<t.length;n++)for(let e=0;e<t[n].length;e++)t[n][e]=new Zt;let r=0;for(let n of e.getDetectionResultColumns()){if(null!=n)for(let e of n.getCodewords())if(null!=e){let n=e.getRowNumber();if(n>=0){if(n>=t.length)continue;t[n][r].setValue(e.getValue())}}r++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,r,n){let s=n?1:-1,a=null;if(mr.isValidBarcodeColumn(e,t-s)&&(a=e.getDetectionResultColumn(t-s).getCodeword(r)),null!=a)return n?a.getEndX():a.getStartX();if(a=e.getDetectionResultColumn(t).getCodewordNearby(r),null!=a)return n?a.getStartX():a.getEndX();if(mr.isValidBarcodeColumn(e,t-s)&&(a=e.getDetectionResultColumn(t-s).getCodewordNearby(r)),null!=a)return n?a.getEndX():a.getStartX();let i=0;for(;mr.isValidBarcodeColumn(e,t-s);){t-=s;for(let r of e.getDetectionResultColumn(t).getCodewords())if(null!=r)return(n?r.getEndX():r.getStartX())+s*i*(r.getEndX()-r.getStartX());i++}return n?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,r,n,s,a,i,o){s=mr.adjustCodewordStartColumn(e,t,r,n,s,a);let l,c=mr.getModuleBitCount(e,t,r,n,s,a);if(null==c)return null;let d=ae.sum(c);if(n)l=s+d;else{for(let e=0;e<c.length/2;e++){let t=c[e];c[e]=c[c.length-1-e],c[c.length-1-e]=t}l=s,s=l-d}if(!mr.checkCodewordSkew(d,i,o))return null;let u=tr.getDecodedValue(c),h=Ut.getCodeword(u);return-1===h?null:new er(s,l,mr.getCodewordBucketNumber(u),h)}static getModuleBitCount(e,t,r,n,s,a){let i=s,o=new Int32Array(8),l=0,c=n?1:-1,d=n;for(;(n?i<r:i>=t)&&l<o.length;)e.get(i,a)===d?(o[l]++,i+=c):(l++,d=!d);return l===o.length||i===(n?r:t)&&l===o.length-1?o:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,r,n,s,a){let i=s,o=n?-1:1;for(let l=0;l<2;l++){for(;(n?i>=t:i<r)&&n===e.get(i,a);){if(Math.abs(s-i)>mr.CODEWORD_SKEW_SIZE)return s;i+=o}o=-o,n=!n}return i}static checkCodewordSkew(e,t,r){return t-mr.CODEWORD_SKEW_SIZE<=e&&e<=r+mr.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,r){if(0===e.length)throw j.getFormatInstance();let n=1<<t+1,s=mr.correctErrors(e,r,n);mr.verifyCodewordCount(e,n);let a=hr.decode(e,""+t);return a.setErrorsCorrected(s),a.setErasures(r.length),a}static correctErrors(e,t,r){if(null!=t&&t.length>r/2+mr.MAX_ERRORS||r<0||r>mr.MAX_EC_CODEWORDS)throw m.getChecksumInstance();return mr.errorCorrection.decode(e,r,t)}static verifyCodewordCount(e,t){if(e.length<4)throw j.getFormatInstance();let r=e[0];if(r>e.length)throw j.getFormatInstance();if(0===r){if(!(t<e.length))throw j.getFormatInstance();e[0]=e.length-t}}static getBitCountForCodeword(e){let t=new Int32Array(8),r=0,n=t.length-1;for(;!((1&e)!==r&&(r=1&e,n--,n<0));)t[n]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return mr.getCodewordBucketNumber(mr.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new Qt;for(let r=0;r<e.length;r++){t.format("Row %2d: ",r);for(let n=0;n<e[r].length;n++){let s=e[r][n];0===s.getValue().length?t.format("        ",null):t.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}t.format("%n")}return t.toString()}}mr.CODEWORD_SKEW_SIZE=2,mr.MAX_ERRORS=3,mr.MAX_EC_CODEWORDS=512,mr.errorCorrection=new Gt;class pr{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=pr.decode(e,t,!1);if(null==r||0===r.length||null==r[0])throw k.getNotFoundInstance();return r[0]}decodeMultiple(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return pr.decode(e,t,!0)}catch(r){if(r instanceof j||r instanceof m)throw k.getNotFoundInstance();throw r}}static decode(e,t,r){const n=new Array,s=Ht.detectMultiple(e,t,r);for(const a of s.getPoints()){const e=mr.decode(s.getBits(),a[4],a[5],a[6],a[7],pr.getMinCodewordWidth(a),pr.getMaxCodewordWidth(a)),t=new U(e.getText(),e.getRawBytes(),void 0,a,H.PDF_417);t.putMetadata(Q.ERROR_CORRECTION_LEVEL,e.getECLevel());const r=e.getOther();null!=r&&t.putMetadata(Q.PDF417_EXTRA_METADATA,r),n.push(t)}return n.map(e=>e)}static getMaxWidth(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return null==e||null==t?y.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(pr.getMaxWidth(e[0],e[4]),pr.getMaxWidth(e[6],e[2])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN),Math.max(pr.getMaxWidth(e[1],e[5]),pr.getMaxWidth(e[7],e[3])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(pr.getMinWidth(e[0],e[4]),pr.getMinWidth(e[6],e[2])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN),Math.min(pr.getMinWidth(e[1],e[5]),pr.getMinWidth(e[7],e[3])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN)))}reset(){}}class fr extends c{}fr.kind="ReaderException";class xr{constructor(e,t){this.verbose=!0===e,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const r=!t(e)&&!0===e.get(N.TRY_HARDER),n=t(e)?null:e.get(N.POSSIBLE_FORMATS),s=new Array;if(!t(n)){const t=n.some(e=>e===H.UPC_A||e===H.UPC_E||e===H.EAN_13||e===H.EAN_8||e===H.CODABAR||e===H.CODE_39||e===H.CODE_93||e===H.CODE_128||e===H.ITF||e===H.RSS_14||e===H.RSS_EXPANDED);t&&!r&&s.push(new lt(e,this.verbose)),n.includes(H.QR_CODE)&&s.push(new Ft),n.includes(H.DATA_MATRIX)&&s.push(new yt),n.includes(H.AZTEC)&&s.push(new ge),n.includes(H.PDF_417)&&s.push(new pr),t&&r&&s.push(new lt(e,this.verbose))}0===s.length&&(r||s.push(new lt(e,this.verbose)),s.push(new Ft),s.push(new yt),s.push(new ge),s.push(new pr),r&&s.push(new lt(e,this.verbose))),this.readers=s}reset(){if(null!==this.readers)for(const e of this.readers)e.reset()}decodeInternal(e){if(null===this.readers)throw new fr("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(e,this.hints)}catch(t){if(t instanceof fr)continue}throw new k("No MultiFormat Readers were able to detect the code.")}}class gr extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const r=new xr;r.setHints(e),super(r,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class br extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new pr,e)}}class yr extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new Ft,e)}}var vr;!function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.MIN_SIZE=3]="MIN_SIZE",e[e.MAX_SIZE=4]="MAX_SIZE",e[e.MARGIN=5]="MARGIN",e[e.PDF417_COMPACT=6]="PDF417_COMPACT",e[e.PDF417_COMPACTION=7]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=9]="AZTEC_LAYERS",e[e.QR_VERSION=10]="QR_VERSION"}(vr||(vr={}));var wr=vr;class Nr{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new J(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let r=t[t.length-1];const n=this.field;for(let s=t.length;s<=e;s++){const e=r.multiply(new J(n,Int32Array.from([1,n.exp(s-1+n.getGeneratorBase())])));t.push(e),r=e}}return t[e]}encode(e,t){if(0===t)throw new u("No error correction bytes");const r=e.length-t;if(r<=0)throw new u("No data bytes provided");const n=this.buildGenerator(t),s=new Int32Array(r);f.arraycopy(e,0,s,0,r);let a=new J(this.field,s);a=a.multiplyByMonomial(t,1);const i=a.divide(n)[1].getCoefficients(),o=t-i.length;for(let l=0;l<o;l++)e[r+l]=0;f.arraycopy(i,0,e,r+o,i.length)}}class jr{constructor(){}static applyMaskPenaltyRule1(e){return jr.applyMaskPenaltyRule1Internal(e,!0)+jr.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const r=e.getArray(),n=e.getWidth(),s=e.getHeight();for(let a=0;a<s-1;a++){const e=r[a];for(let s=0;s<n-1;s++){const n=e[s];n===e[s+1]&&n===r[a+1][s]&&n===r[a+1][s+1]&&t++}}return jr.N2*t}static applyMaskPenaltyRule3(e){let t=0;const r=e.getArray(),n=e.getWidth(),s=e.getHeight();for(let a=0;a<s;a++)for(let e=0;e<n;e++){const i=r[a];e+6<n&&1===i[e]&&0===i[e+1]&&1===i[e+2]&&1===i[e+3]&&1===i[e+4]&&0===i[e+5]&&1===i[e+6]&&(jr.isWhiteHorizontal(i,e-4,e)||jr.isWhiteHorizontal(i,e+7,e+11))&&t++,a+6<s&&1===r[a][e]&&0===r[a+1][e]&&1===r[a+2][e]&&1===r[a+3][e]&&1===r[a+4][e]&&0===r[a+5][e]&&1===r[a+6][e]&&(jr.isWhiteVertical(r,e,a-4,a)||jr.isWhiteVertical(r,e,a+7,a+11))&&t++}return t*jr.N3}static isWhiteHorizontal(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(let n=t;n<r;n++)if(1===e[n])return!1;return!0}static isWhiteVertical(e,t,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(let s=r;s<n;s++)if(1===e[s][t])return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const r=e.getArray(),n=e.getWidth(),s=e.getHeight();for(let i=0;i<s;i++){const e=r[i];for(let r=0;r<n;r++)1===e[r]&&t++}const a=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*t-a)/a)*jr.N4}static getDataMaskBit(e,t,r){let n,s;switch(e){case 0:n=r+t&1;break;case 1:n=1&r;break;case 2:n=t%3;break;case 3:n=(r+t)%3;break;case 4:n=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:s=r*t,n=(1&s)+s%3;break;case 6:s=r*t,n=(1&s)+s%3&1;break;case 7:s=r*t,n=s%3+(r+t&1)&1;break;default:throw new u("Invalid mask pattern: "+e)}return 0===n}static applyMaskPenaltyRule1Internal(e,t){let r=0;const n=t?e.getHeight():e.getWidth(),s=t?e.getWidth():e.getHeight(),a=e.getArray();for(let i=0;i<n;i++){let e=0,n=-1;for(let o=0;o<s;o++){const s=t?a[i][o]:a[o][i];s===n?e++:(e>=5&&(r+=jr.N1+(e-5)),e=1,n=s)}e>=5&&(r+=jr.N1+(e-5))}return r}}jr.N1=3,jr.N2=3,jr.N3=40,jr.N4=10;class _r{constructor(e,t){this.width=e,this.height=t;const r=new Array(t);for(let n=0;n!==t;n++)r[n]=new Uint8Array(e);this.bytes=r}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,r){this.bytes[t][e]=r}setBoolean(e,t,r){this.bytes[t][e]=r?1:0}clear(e){for(const t of this.bytes)b.fill(t,e)}equals(e){if(!(e instanceof _r))return!1;const t=e;if(this.width!==t.width)return!1;if(this.height!==t.height)return!1;for(let r=0,n=this.height;r<n;++r){const e=this.bytes[r],n=t.bytes[r];for(let t=0,r=this.width;t<r;++t)if(e[t]!==n[t])return!1}return!0}toString(){const e=new A;for(let t=0,r=this.height;t<r;++t){const r=this.bytes[t];for(let t=0,n=this.width;t<n;++t)switch(r[t]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()}}class Cr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new A;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Cr.NUM_MASK_PATTERNS}}Cr.NUM_MASK_PATTERNS=8;class Sr extends c{}Sr.kind="WriterException";class Er{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,r,n,s){Er.clearMatrix(s),Er.embedBasicPatterns(r,s),Er.embedTypeInfo(t,n,s),Er.maybeEmbedVersionInfo(r,s),Er.embedDataBits(e,n,s)}static embedBasicPatterns(e,t){Er.embedPositionDetectionPatternsAndSeparators(t),Er.embedDarkDotAtLeftBottomCorner(t),Er.maybeEmbedPositionAdjustmentPatterns(e,t),Er.embedTimingPatterns(t)}static embedTypeInfo(e,t,r){const n=new v;Er.makeTypeInfoBits(e,t,n);for(let s=0,a=n.getSize();s<a;++s){const e=n.get(n.getSize()-1-s),t=Er.TYPE_INFO_COORDINATES[s],a=t[0],i=t[1];if(r.setBoolean(a,i,e),s<8){const t=r.getWidth()-s-1,n=8;r.setBoolean(t,n,e)}else{const t=8,n=r.getHeight()-7+(s-8);r.setBoolean(t,n,e)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const r=new v;Er.makeVersionInfoBits(e,r);let n=17;for(let s=0;s<6;++s)for(let e=0;e<3;++e){const a=r.get(n);n--,t.setBoolean(s,t.getHeight()-11+e,a),t.setBoolean(t.getHeight()-11+e,s,a)}}static embedDataBits(e,t,r){let n=0,s=-1,a=r.getWidth()-1,i=r.getHeight()-1;for(;a>0;){for(6===a&&(a-=1);i>=0&&i<r.getHeight();){for(let s=0;s<2;++s){const o=a-s;if(!Er.isEmpty(r.get(o,i)))continue;let l;n<e.getSize()?(l=e.get(n),++n):l=!1,255!==t&&jr.getDataMaskBit(t,o,i)&&(l=!l),r.setBoolean(o,i,l)}i+=s}s=-s,i+=s,a-=2}if(n!==e.getSize())throw new Sr("Not all bits consumed: "+n+"/"+e.getSize())}static findMSBSet(e){return 32-y.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(0===t)throw new u("0 polynomial");const r=Er.findMSBSet(t);for(e<<=r-1;Er.findMSBSet(e)>=r;)e^=t<<Er.findMSBSet(e)-r;return e}static makeTypeInfoBits(e,t,r){if(!Cr.isValidMaskPattern(t))throw new Sr("Invalid mask pattern");const n=e.getBits()<<3|t;r.appendBits(n,5);const s=Er.calculateBCHCode(n,Er.TYPE_INFO_POLY);r.appendBits(s,10);const a=new v;if(a.appendBits(Er.TYPE_INFO_MASK_PATTERN,15),r.xor(a),15!==r.getSize())throw new Sr("should not happen but we got: "+r.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const r=Er.calculateBCHCode(e.getVersionNumber(),Er.VERSION_INFO_POLY);if(t.appendBits(r,12),18!==t.getSize())throw new Sr("should not happen but we got: "+t.getSize())}static isEmpty(e){return 255===e}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const r=(t+1)%2;Er.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),Er.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}}static embedDarkDotAtLeftBottomCorner(e){if(0===e.get(8,e.getHeight()-8))throw new Sr;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,r){for(let n=0;n<8;++n){if(!Er.isEmpty(r.get(e+n,t)))throw new Sr;r.setNumber(e+n,t,0)}}static embedVerticalSeparationPattern(e,t,r){for(let n=0;n<7;++n){if(!Er.isEmpty(r.get(e,t+n)))throw new Sr;r.setNumber(e,t+n,0)}}static embedPositionAdjustmentPattern(e,t,r){for(let n=0;n<5;++n){const s=Er.POSITION_ADJUSTMENT_PATTERN[n];for(let a=0;a<5;++a)r.setNumber(e+a,t+n,s[a])}}static embedPositionDetectionPattern(e,t,r){for(let n=0;n<7;++n){const s=Er.POSITION_DETECTION_PATTERN[n];for(let a=0;a<7;++a)r.setNumber(e+a,t+n,s[a])}}static embedPositionDetectionPatternsAndSeparators(e){const t=Er.POSITION_DETECTION_PATTERN[0].length;Er.embedPositionDetectionPattern(0,0,e),Er.embedPositionDetectionPattern(e.getWidth()-t,0,e),Er.embedPositionDetectionPattern(0,e.getWidth()-t,e);const r=8;Er.embedHorizontalSeparationPattern(0,r-1,e),Er.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),Er.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);const n=7;Er.embedVerticalSeparationPattern(n,0,e),Er.embedVerticalSeparationPattern(e.getHeight()-n-1,0,e),Er.embedVerticalSeparationPattern(n,e.getHeight()-n,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const r=e.getVersionNumber()-1,n=Er.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r];for(let s=0,a=n.length;s!==a;s++){const e=n[s];if(e>=0)for(let r=0;r!==a;r++){const s=n[r];s>=0&&Er.isEmpty(t.get(s,e))&&Er.embedPositionAdjustmentPattern(s-2,e-2,t)}}}}Er.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Er.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Er.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Er.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Er.VERSION_INFO_POLY=7973,Er.TYPE_INFO_POLY=1335,Er.TYPE_INFO_MASK_PATTERN=21522;class Ar{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ir{constructor(){}static calculateMaskPenalty(e){return jr.applyMaskPenaltyRule1(e)+jr.applyMaskPenaltyRule2(e)+jr.applyMaskPenaltyRule3(e)+jr.applyMaskPenaltyRule4(e)}static encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=Ir.DEFAULT_BYTE_MODE_ENCODING;const s=null!==r&&void 0!==r.get(wr.CHARACTER_SET);s&&(n=r.get(wr.CHARACTER_SET).toString());const a=this.chooseMode(e,n),i=new v;if(a===It.BYTE&&(s||Ir.DEFAULT_BYTE_MODE_ENCODING!==n)){const e=_.getCharacterSetECIByName(n);void 0!==e&&this.appendECI(e,i)}this.appendModeInfo(a,i);const o=new v;let l;if(this.appendBytes(e,a,o,n),null!==r&&void 0!==r.get(wr.QR_VERSION)){const e=Number.parseInt(r.get(wr.QR_VERSION).toString(),10);l=Ct.getVersionForNumber(e);const n=this.calculateBitsNeeded(a,i,o,l);if(!this.willFit(n,l,t))throw new Sr("Data too big for requested version")}else l=this.recommendVersion(t,a,i,o);const c=new v;c.appendBitArray(i);const d=a===It.BYTE?o.getSizeInBytes():e.length;this.appendLengthInfo(d,l,a,c),c.appendBitArray(o);const u=l.getECBlocksForLevel(t),h=l.getTotalCodewords()-u.getTotalECCodewords();this.terminateBits(h,c);const m=this.interleaveWithECBytes(c,l.getTotalCodewords(),h,u.getNumBlocks()),p=new Cr;p.setECLevel(t),p.setMode(a),p.setVersion(l);const f=l.getDimensionForVersion(),x=new _r(f,f),g=this.chooseMaskPattern(m,t,l,x);return p.setMaskPattern(g),Er.buildMatrix(m,t,l,g,x),p.setMatrix(x),p}static recommendVersion(e,t,r,n){const s=this.calculateBitsNeeded(t,r,n,Ct.getVersionForNumber(1)),a=this.chooseVersion(s,e),i=this.calculateBitsNeeded(t,r,n,a);return this.chooseVersion(i,e)}static calculateBitsNeeded(e,t,r,n){return t.getSize()+e.getCharacterCountBits(n)+r.getSize()}static getAlphanumericCode(e){return e<Ir.ALPHANUMERIC_TABLE.length?Ir.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(_.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return It.KANJI;let r=!1,n=!1;for(let s=0,a=e.length;s<a;++s){const t=e.charAt(s);if(Ir.isDigit(t))r=!0;else{if(-1===this.getAlphanumericCode(t.charCodeAt(0)))return It.BYTE;n=!0}}return n?It.ALPHANUMERIC:r?It.NUMERIC:It.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=S.encode(e,_.SJIS)}catch(n){return!1}const r=t.length;if(r%2!==0)return!1;for(let s=0;s<r;s+=2){const e=255&t[s];if((e<129||e>159)&&(e<224||e>235))return!1}return!0}static chooseMaskPattern(e,t,r,n){let s=Number.MAX_SAFE_INTEGER,a=-1;for(let i=0;i<Cr.NUM_MASK_PATTERNS;i++){Er.buildMatrix(e,t,r,i,n);let o=this.calculateMaskPenalty(n);o<s&&(s=o,a=i)}return a}static chooseVersion(e,t){for(let r=1;r<=40;r++){const n=Ct.getVersionForNumber(r);if(Ir.willFit(e,n,t))return n}throw new Sr("Data too big")}static willFit(e,t,r){return t.getTotalCodewords()-t.getECBlocksForLevel(r).getTotalECCodewords()>=(e+7)/8}static terminateBits(e,t){const r=8*e;if(t.getSize()>r)throw new Sr("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(let a=0;a<4&&t.getSize()<r;++a)t.appendBit(!1);const n=7&t.getSize();if(n>0)for(let a=n;a<8;a++)t.appendBit(!1);const s=e-t.getSizeInBytes();for(let a=0;a<s;++a)t.appendBits(0===(1&a)?236:17,8);if(t.getSize()!==r)throw new Sr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,r,n,s,a){if(n>=r)throw new Sr("Block ID too large");const i=e%r,o=r-i,l=Math.floor(e/r),c=l+1,d=Math.floor(t/r),u=d+1,h=l-d,m=c-u;if(h!==m)throw new Sr("EC bytes mismatch");if(r!==o+i)throw new Sr("RS blocks mismatch");if(e!==(d+h)*o+(u+m)*i)throw new Sr("Total bytes mismatch");n<o?(s[0]=d,a[0]=h):(s[0]=u,a[0]=m)}static interleaveWithECBytes(e,t,r,n){if(e.getSizeInBytes()!==r)throw new Sr("Number of bits and data bytes does not match");let s=0,a=0,i=0;const o=new Array;for(let c=0;c<n;++c){const l=new Int32Array(1),d=new Int32Array(1);Ir.getNumDataBytesAndNumECBytesForBlockID(t,r,n,c,l,d);const u=l[0],h=new Uint8Array(u);e.toBytes(8*s,h,0,u);const m=Ir.generateECBytes(h,d[0]);o.push(new Ar(h,m)),a=Math.max(a,u),i=Math.max(i,m.length),s+=l[0]}if(r!==s)throw new Sr("Data bytes does not match offset");const l=new v;for(let c=0;c<a;++c)for(const e of o){const t=e.getDataBytes();c<t.length&&l.appendBits(t[c],8)}for(let c=0;c<i;++c)for(const e of o){const t=e.getErrorCorrectionBytes();c<t.length&&l.appendBits(t[c],8)}if(t!==l.getSizeInBytes())throw new Sr("Interleaving error: "+t+" and "+l.getSizeInBytes()+" differ.");return l}static generateECBytes(e,t){const r=e.length,n=new Int32Array(r+t);for(let a=0;a<r;a++)n[a]=255&e[a];new Nr(ee.QR_CODE_FIELD_256).encode(n,t);const s=new Uint8Array(t);for(let a=0;a<t;a++)s[a]=n[r+a];return s}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,r,n){const s=r.getCharacterCountBits(t);if(e>=1<<s)throw new Sr(e+" is bigger than "+((1<<s)-1));n.appendBits(e,s)}static appendBytes(e,t,r,n){switch(t){case It.NUMERIC:Ir.appendNumericBytes(e,r);break;case It.ALPHANUMERIC:Ir.appendAlphanumericBytes(e,r);break;case It.BYTE:Ir.append8BitBytes(e,r,n);break;case It.KANJI:Ir.appendKanjiBytes(e,r);break;default:throw new Sr("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=Ir.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const r=e.length;let n=0;for(;n<r;){const s=Ir.getDigit(e.charAt(n));if(n+2<r){const r=Ir.getDigit(e.charAt(n+1)),a=Ir.getDigit(e.charAt(n+2));t.appendBits(100*s+10*r+a,10),n+=3}else if(n+1<r){const r=Ir.getDigit(e.charAt(n+1));t.appendBits(10*s+r,7),n+=2}else t.appendBits(s,4),n++}}static appendAlphanumericBytes(e,t){const r=e.length;let n=0;for(;n<r;){const s=Ir.getAlphanumericCode(e.charCodeAt(n));if(-1===s)throw new Sr;if(n+1<r){const r=Ir.getAlphanumericCode(e.charCodeAt(n+1));if(-1===r)throw new Sr;t.appendBits(45*s+r,11),n+=2}else t.appendBits(s,6),n++}}static append8BitBytes(e,t,r){let n;try{n=S.encode(e,r)}catch(s){throw new Sr(s)}for(let a=0,i=n.length;a!==i;a++){const e=n[a];t.appendBits(e,8)}}static appendKanjiBytes(e,t){let r;try{r=S.encode(e,_.SJIS)}catch(s){throw new Sr(s)}const n=r.length;for(let a=0;a<n;a+=2){const e=(255&r[a])<<8&4294967295|255&r[a+1];let n=-1;if(e>=33088&&e<=40956?n=e-33088:e>=57408&&e<=60351&&(n=e-49472),-1===n)throw new Sr("Invalid byte sequence");const s=192*(n>>8)+(255&n);t.appendBits(s,13)}}static appendECI(e,t){t.appendBits(It.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}Ir.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ir.DEFAULT_BYTE_MODE_ENCODING=_.UTF8.getName();class kr{write(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(0===e.length)throw new u("Found empty contents");if(t<0||r<0)throw new u("Requested dimensions are too small: "+t+"x"+r);let s=wt.L,a=kr.QUIET_ZONE_SIZE;null!==n&&(void 0!==n.get(wr.ERROR_CORRECTION)&&(s=wt.fromString(n.get(wr.ERROR_CORRECTION).toString())),void 0!==n.get(wr.MARGIN)&&(a=Number.parseInt(n.get(wr.MARGIN).toString(),10)));const i=Ir.encode(e,s,n);return this.renderResult(i,t,r,a)}writeToDom(e,t,r,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;"string"===typeof e&&(e=document.querySelector(e));const a=this.write(t,r,n,s);e&&e.appendChild(a)}renderResult(e,t,r,n){const s=e.getMatrix();if(null===s)throw new re;const a=s.getWidth(),i=s.getHeight(),o=a+2*n,l=i+2*n,c=Math.max(t,o),d=Math.max(r,l),u=Math.min(Math.floor(c/o),Math.floor(d/l)),h=Math.floor((c-a*u)/2),m=Math.floor((d-i*u)/2),p=this.createSVGElement(c,d);for(let f=0,x=m;f<i;f++,x+=u)for(let e=0,t=h;e<a;e++,t+=u)if(1===s.get(e,f)){const e=this.createSvgRectElement(t,x,u,u);p.appendChild(e)}return p}createSVGElement(e,t){const r=document.createElementNS(kr.SVG_NS,"svg");return r.setAttributeNS(null,"height",e.toString()),r.setAttributeNS(null,"width",t.toString()),r}createSvgRectElement(e,t,r,n){const s=document.createElementNS(kr.SVG_NS,"rect");return s.setAttributeNS(null,"x",e.toString()),s.setAttributeNS(null,"y",t.toString()),s.setAttributeNS(null,"height",r.toString()),s.setAttributeNS(null,"width",n.toString()),s.setAttributeNS(null,"fill","#000000"),s}}kr.QUIET_ZONE_SIZE=4,kr.SVG_NS="http://www.w3.org/2000/svg";class Tr{encode(e,t,r,n,s){if(0===e.length)throw new u("Found empty contents");if(t!==H.QR_CODE)throw new u("Can only encode QR_CODE, but got "+t);if(r<0||n<0)throw new u("Requested dimensions are too small: ".concat(r,"x").concat(n));let a=wt.L,i=Tr.QUIET_ZONE_SIZE;null!==s&&(void 0!==s.get(wr.ERROR_CORRECTION)&&(a=wt.fromString(s.get(wr.ERROR_CORRECTION).toString())),void 0!==s.get(wr.MARGIN)&&(i=Number.parseInt(s.get(wr.MARGIN).toString(),10)));const o=Ir.encode(e,a,s);return Tr.renderResult(o,r,n,i)}static renderResult(e,t,r,n){const s=e.getMatrix();if(null===s)throw new re;const a=s.getWidth(),i=s.getHeight(),o=a+2*n,l=i+2*n,c=Math.max(t,o),d=Math.max(r,l),u=Math.min(Math.floor(c/o),Math.floor(d/l)),h=Math.floor((c-a*u)/2),m=Math.floor((d-i*u)/2),p=new I(c,d);for(let f=0,x=m;f<i;f++,x+=u)for(let e=0,t=h;e<a;e++,t+=u)1===s.get(e,f)&&p.setRegion(t,x,u,u);return p}}Tr.QUIET_ZONE_SIZE=4;class Dr{encode(e,t,r,n,s){let a;if(t!==H.QR_CODE)throw new u("No encoder available for format "+t);return a=new Tr,a.encode(e,t,r,n,s)}}class Rr extends R{constructor(e,t,r,n,s,a,i,o){if(super(a,i),this.yuvData=e,this.dataWidth=t,this.dataHeight=r,this.left=n,this.top=s,n+a>t||s+i>r)throw new u("Crop rectangle does not fit within image data.");o&&this.reverseHorizontal(a,i)}getRow(e,t){if(e<0||e>=this.getHeight())throw new u("Requested row is outside the image: "+e);const r=this.getWidth();(null===t||void 0===t||t.length<r)&&(t=new Uint8ClampedArray(r));const n=(e+this.top)*this.dataWidth+this.left;return f.arraycopy(this.yuvData,n,t,0,r),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const r=e*t,n=new Uint8ClampedArray(r);let s=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return f.arraycopy(this.yuvData,s,n,0,r),n;for(let a=0;a<t;a++){const t=a*e;f.arraycopy(this.yuvData,s,n,t,e),s+=this.dataWidth}return n}isCropSupported(){return!0}crop(e,t,r,n){return new Rr(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,r,n,!1)}renderThumbnail(){const e=this.getWidth()/Rr.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/Rr.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(e*t),n=this.yuvData;let s=this.top*this.dataWidth+this.left;for(let a=0;a<t;a++){const t=a*e;for(let a=0;a<e;a++){const e=255&n[s+a*Rr.THUMBNAIL_SCALE_FACTOR];r[t+a]=4278190080|65793*e}s+=this.dataWidth*Rr.THUMBNAIL_SCALE_FACTOR}return r}getThumbnailWidth(){return this.getWidth()/Rr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Rr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const r=this.yuvData;for(let n=0,s=this.top*this.dataWidth+this.left;n<t;n++,s+=this.dataWidth){const t=s+e/2;for(let n=s,a=s+e-1;n<t;n++,a--){const e=r[n];r[n]=r[a],r[a]=e}}}invert(){return new O(this)}}Rr.THUMBNAIL_SCALE_FACTOR=2;class Or extends R{constructor(e,t,r,n,s,a,i){if(super(t,r),this.dataWidth=n,this.dataHeight=s,this.left=a,this.top=i,4===e.BYTES_PER_ELEMENT){const n=t*r,s=new Uint8ClampedArray(n);for(let t=0;t<n;t++){const r=e[t],n=r>>16&255,a=r>>7&510,i=255&r;s[t]=(n+a+i)/4&255}this.luminances=s}else this.luminances=e;if(void 0===n&&(this.dataWidth=t),void 0===s&&(this.dataHeight=r),void 0===a&&(this.left=0),void 0===i&&(this.top=0),this.left+t>this.dataWidth||this.top+r>this.dataHeight)throw new u("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new u("Requested row is outside the image: "+e);const r=this.getWidth();(null===t||void 0===t||t.length<r)&&(t=new Uint8ClampedArray(r));const n=(e+this.top)*this.dataWidth+this.left;return f.arraycopy(this.luminances,n,t,0,r),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const r=e*t,n=new Uint8ClampedArray(r);let s=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return f.arraycopy(this.luminances,s,n,0,r),n;for(let a=0;a<t;a++){const t=a*e;f.arraycopy(this.luminances,s,n,t,e),s+=this.dataWidth}return n}isCropSupported(){return!0}crop(e,t,r,n){return new Or(this.luminances,r,n,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new O(this)}}class Mr extends _{static forName(e){return this.getCharacterSetECIByName(e)}}class Pr{}Pr.ISO_8859_1=_.ISO8859_1;class Lr{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Br{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class Fr{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Ur extends Fr{constructor(e,t,r){super(e),this.value=t,this.bitCount=r}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new Ur(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ur(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+y.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class zr extends Ur{constructor(e,t,r){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=r}appendTo(e,t){for(let r=0;r<this.binaryShiftByteCount;r++)(0===r||31===r&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===r?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+r],8)}addBinaryShift(e,t){return new zr(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Hr(e,t,r){return new zr(e,t,r)}function Vr(e,t,r){return new Ur(e,t,r)}const Wr=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],qr=0,Gr=1,Yr=2,Xr=3,Qr=4,Kr=new Ur(null,0,0),Zr=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];function Jr(e){for(let t of e)b.fill(t,-1);return e[qr][Qr]=0,e[Gr][Qr]=0,e[Gr][qr]=28,e[Xr][Qr]=0,e[Yr][Qr]=0,e[Yr][qr]=15,e}const $r=Jr(b.createInt32Array(6,6));class en{constructor(e,t,r,n){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=n}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let r=this.bitCount,n=this.token;if(e!==this.mode){let t=Zr[this.mode][e];n=Vr(n,65535&t,t>>16),r+=t>>16}let s=e===Yr?4:5;return n=Vr(n,t,s),new en(n,e,0,r+s)}shiftAndAppend(e,t){let r=this.token,n=this.mode===Yr?4:5;return r=Vr(r,$r[this.mode][e],n),r=Vr(r,t,5),new en(r,this.mode,0,this.bitCount+n+5)}addBinaryShiftChar(e){let t=this.token,r=this.mode,n=this.bitCount;if(this.mode===Qr||this.mode===Yr){let e=Zr[r][qr];t=Vr(t,65535&e,e>>16),n+=e>>16,r=qr}let s=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,a=new en(t,r,this.binaryShiftByteCount+1,n+s);return 2078===a.binaryShiftByteCount&&(a=a.endBinaryShift(e+1)),a}endBinaryShift(e){if(0===this.binaryShiftByteCount)return this;let t=this.token;return t=Hr(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new en(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(Zr[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=en.calculateBinaryShiftCost(e)-en.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let n=this.endBinaryShift(e.length).token;null!==n;n=n.getPrevious())t.unshift(n);let r=new v;for(const n of t)n.appendTo(r,e);return r}toString(){return E.format("%s bits=%d bytes=%d",Wr[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}function tn(e){const t=E.getCharCode(" "),r=E.getCharCode("."),n=E.getCharCode(",");e[qr][t]=1;const s=E.getCharCode("Z"),a=E.getCharCode("A");for(let h=a;h<=s;h++)e[qr][h]=h-a+2;e[Gr][t]=1;const i=E.getCharCode("z"),o=E.getCharCode("a");for(let h=o;h<=i;h++)e[Gr][h]=h-o+2;e[Yr][t]=1;const l=E.getCharCode("9"),c=E.getCharCode("0");for(let h=c;h<=l;h++)e[Yr][h]=h-c+2;e[Yr][n]=12,e[Yr][r]=13;const d=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let h=0;h<d.length;h++)e[Xr][E.getCharCode(d[h])]=h;const u=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let h=0;h<u.length;h++)E.getCharCode(u[h])>0&&(e[Qr][E.getCharCode(u[h])]=h);return e}en.INITIAL_STATE=new en(Kr,qr,0,0);const rn=tn(b.createInt32Array(5,256));class nn{constructor(e){this.text=e}encode(){const e=E.getCharCode(" "),t=E.getCharCode("\n");let r=Br.singletonList(en.INITIAL_STATE);for(let n=0;n<this.text.length;n++){let s,a=n+1<this.text.length?this.text[n+1]:0;switch(this.text[n]){case E.getCharCode("\r"):s=a===t?2:0;break;case E.getCharCode("."):s=a===e?3:0;break;case E.getCharCode(","):s=a===e?4:0;break;case E.getCharCode(":"):s=a===e?5:0;break;default:s=0}s>0?(r=nn.updateStateListForPair(r,n,s),n++):r=this.updateStateListForChar(r,n)}return Br.min(r,(e,t)=>e.getBitCount()-t.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const r=[];for(let n of e)this.updateStateForChar(n,t,r);return nn.simplifyStates(r)}updateStateForChar(e,t,r){let n=255&this.text[t],s=rn[e.getMode()][n]>0,a=null;for(let i=0;i<=Qr;i++){let o=rn[i][n];if(o>0){if(null==a&&(a=e.endBinaryShift(t)),!s||i===e.getMode()||i===Yr){const e=a.latchAndAppend(i,o);r.push(e)}if(!s&&$r[e.getMode()][i]>=0){const e=a.shiftAndAppend(i,o);r.push(e)}}}if(e.getBinaryShiftByteCount()>0||0===rn[e.getMode()][n]){let n=e.addBinaryShiftChar(t);r.push(n)}}static updateStateListForPair(e,t,r){const n=[];for(let s of e)this.updateStateForPair(s,t,r,n);return this.simplifyStates(n)}static updateStateForPair(e,t,r,n){let s=e.endBinaryShift(t);if(n.push(s.latchAndAppend(Qr,r)),e.getMode()!==Qr&&n.push(s.shiftAndAppend(Qr,r)),3===r||4===r){let e=s.latchAndAppend(Yr,16-r).latchAndAppend(Yr,1);n.push(e)}if(e.getBinaryShiftByteCount()>0){let r=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);n.push(r)}}static simplifyStates(e){let t=[];for(const r of e){let e=!0;for(const n of t){if(n.isBetterThanOrEqualTo(r)){e=!1;break}r.isBetterThanOrEqualTo(n)&&(t=t.filter(e=>e!==n))}e&&t.push(r)}return t}}class sn{constructor(){}static encodeBytes(e){return sn.encode(e,sn.DEFAULT_EC_PERCENT,sn.DEFAULT_AZTEC_LAYERS)}static encode(e,t,r){let n,s,a,i,o,l=new nn(e).encode(),c=y.truncDivision(l.getSize()*t,100)+11,d=l.getSize()+c;if(r!==sn.DEFAULT_AZTEC_LAYERS){if(n=r<0,s=Math.abs(r),s>(n?sn.MAX_NB_BITS_COMPACT:sn.MAX_NB_BITS))throw new u(E.format("Illegal value %s for layers",r));a=sn.totalBitsInLayer(s,n),i=sn.WORD_SIZE[s];let e=a-a%i;if(o=sn.stuffBits(l,i),o.getSize()+c>e)throw new u("Data to large for user specified layer");if(n&&o.getSize()>64*i)throw new u("Data to large for user specified layer")}else{i=0,o=null;for(let e=0;;e++){if(e>sn.MAX_NB_BITS)throw new u("Data too large for an Aztec code");if(n=e<=3,s=n?e+1:e,a=sn.totalBitsInLayer(s,n),d>a)continue;null!=o&&i===sn.WORD_SIZE[s]||(i=sn.WORD_SIZE[s],o=sn.stuffBits(l,i));let t=a-a%i;if(!(n&&o.getSize()>64*i)&&o.getSize()+c<=t)break}}let h,m=sn.generateCheckWords(o,a,i),p=o.getSize()/i,f=sn.generateModeMessage(n,s,p),x=(n?11:14)+4*s,g=new Int32Array(x);if(n){h=x;for(let e=0;e<g.length;e++)g[e]=e}else{h=x+1+2*y.truncDivision(y.truncDivision(x,2)-1,15);let e=y.truncDivision(x,2),t=y.truncDivision(h,2);for(let r=0;r<e;r++){let n=r+y.truncDivision(r,15);g[e-r-1]=t-n-1,g[e+r]=t+n+1}}let b=new I(h);for(let u=0,y=0;u<s;u++){let e=4*(s-u)+(n?9:12);for(let t=0;t<e;t++){let r=2*t;for(let n=0;n<2;n++)m.get(y+r+n)&&b.set(g[2*u+n],g[2*u+t]),m.get(y+2*e+r+n)&&b.set(g[2*u+t],g[x-1-2*u-n]),m.get(y+4*e+r+n)&&b.set(g[x-1-2*u-n],g[x-1-2*u-t]),m.get(y+6*e+r+n)&&b.set(g[x-1-2*u-t],g[2*u+n])}y+=8*e}if(sn.drawModeMessage(b,n,h,f),n)sn.drawBullsEye(b,y.truncDivision(h,2),5);else{sn.drawBullsEye(b,y.truncDivision(h,2),7);for(let e=0,t=0;e<y.truncDivision(x,2)-1;e+=15,t+=16)for(let r=1&y.truncDivision(h,2);r<h;r+=2)b.set(y.truncDivision(h,2)-t,r),b.set(y.truncDivision(h,2)+t,r),b.set(r,y.truncDivision(h,2)-t),b.set(r,y.truncDivision(h,2)+t)}let v=new Lr;return v.setCompact(n),v.setSize(h),v.setLayers(s),v.setCodeWords(p),v.setMatrix(b),v}static drawBullsEye(e,t,r){for(let n=0;n<r;n+=2)for(let r=t-n;r<=t+n;r++)e.set(r,t-n),e.set(r,t+n),e.set(t-n,r),e.set(t+n,r);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)}static generateModeMessage(e,t,r){let n=new v;return e?(n.appendBits(t-1,2),n.appendBits(r-1,6),n=sn.generateCheckWords(n,28,4)):(n.appendBits(t-1,5),n.appendBits(r-1,11),n=sn.generateCheckWords(n,40,4)),n}static drawModeMessage(e,t,r,n){let s=y.truncDivision(r,2);if(t)for(let a=0;a<7;a++){let t=s-3+a;n.get(a)&&e.set(t,s-5),n.get(a+7)&&e.set(s+5,t),n.get(20-a)&&e.set(t,s+5),n.get(27-a)&&e.set(s-5,t)}else for(let a=0;a<10;a++){let t=s-5+a+y.truncDivision(a,5);n.get(a)&&e.set(t,s-7),n.get(a+10)&&e.set(s+7,t),n.get(29-a)&&e.set(t,s+7),n.get(39-a)&&e.set(s-7,t)}}static generateCheckWords(e,t,r){let n=e.getSize()/r,s=new Nr(sn.getGF(r)),a=y.truncDivision(t,r),i=sn.bitsToWords(e,r,a);s.encode(i,a-n);let o=t%r,l=new v;l.appendBits(0,o);for(const c of Array.from(i))l.appendBits(c,r);return l}static bitsToWords(e,t,r){let n,s,a=new Int32Array(r);for(n=0,s=e.getSize()/t;n<s;n++){let r=0;for(let s=0;s<t;s++)r|=e.get(n*t+s)?1<<t-s-1:0;a[n]=r}return a}static getGF(e){switch(e){case 4:return ee.AZTEC_PARAM;case 6:return ee.AZTEC_DATA_6;case 8:return ee.AZTEC_DATA_8;case 10:return ee.AZTEC_DATA_10;case 12:return ee.AZTEC_DATA_12;default:throw new u("Unsupported word size "+e)}}static stuffBits(e,t){let r=new v,n=e.getSize(),s=(1<<t)-2;for(let a=0;a<n;a+=t){let i=0;for(let r=0;r<t;r++)(a+r>=n||e.get(a+r))&&(i|=1<<t-1-r);(i&s)===s?(r.appendBits(i&s,t),a--):0===(i&s)?(r.appendBits(1|i,t),a--):r.appendBits(i,t)}return r}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}sn.DEFAULT_EC_PERCENT=33,sn.DEFAULT_AZTEC_LAYERS=0,sn.MAX_NB_BITS=32,sn.MAX_NB_BITS_COMPACT=4,sn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class an{encode(e,t,r,n){return this.encodeWithHints(e,t,r,n,null)}encodeWithHints(e,t,r,n,s){let a=Pr.ISO_8859_1,i=sn.DEFAULT_EC_PERCENT,o=sn.DEFAULT_AZTEC_LAYERS;return null!=s&&(s.has(wr.CHARACTER_SET)&&(a=Mr.forName(s.get(wr.CHARACTER_SET).toString())),s.has(wr.ERROR_CORRECTION)&&(i=y.parseInt(s.get(wr.ERROR_CORRECTION).toString())),s.has(wr.AZTEC_LAYERS)&&(o=y.parseInt(s.get(wr.AZTEC_LAYERS).toString()))),an.encodeLayers(e,t,r,n,a,i,o)}static encodeLayers(e,t,r,n,s,a,i){if(t!==H.AZTEC)throw new u("Can only encode AZTEC, but got "+t);let o=sn.encode(E.getBytes(e,s),a,i);return an.renderResult(o,r,n)}static renderResult(e,t,r){let n=e.getMatrix();if(null==n)throw new re;let s=n.getWidth(),a=n.getHeight(),i=Math.max(t,s),o=Math.max(r,a),l=Math.min(i/s,o/a),c=(i-s*l)/2,d=(o-a*l)/2,u=new I(i,o);for(let h=0,m=d;h<a;h++,m+=l)for(let e=0,t=c;e<s;e++,t+=l)n.get(e,h)&&u.setRegion(t,m,l,l);return u}}e.AbstractExpandedDecoder=qe,e.ArgumentException=d,e.ArithmeticException=$,e.AztecCode=Lr,e.AztecCodeReader=ge,e.AztecCodeWriter=an,e.AztecDecoder=se,e.AztecDetector=xe,e.AztecDetectorResult=ce,e.AztecEncoder=sn,e.AztecHighLevelEncoder=nn,e.AztecPoint=fe,e.BarcodeFormat=H,e.Binarizer=p,e.BinaryBitmap=h,e.BitArray=v,e.BitMatrix=I,e.BitSource=ft,e.BrowserAztecCodeReader=be,e.BrowserBarcodeReader=ct,e.BrowserCodeReader=F,e.BrowserDatamatrixCodeReader=vt,e.BrowserMultiFormatReader=gr,e.BrowserPDF417Reader=br,e.BrowserQRCodeReader=yr,e.BrowserQRCodeSvgWriter=kr,e.CharacterSetECI=_,e.ChecksumException=m,e.Code128Reader=ve,e.Code39Reader=we,e.DataMatrixDecodedBitStreamParser=xt,e.DataMatrixReader=yt,e.DecodeHintType=N,e.DecoderResult=K,e.DefaultGridSampler=me,e.DetectorResult=le,e.EAN13Reader=Ae,e.EncodeHintType=wr,e.Exception=c,e.FormatException=j,e.GenericGF=ee,e.GenericGFPoly=J,e.GlobalHistogramBinarizer=T,e.GridSampler=ue,e.GridSamplerInstance=pe,e.HTMLCanvasElementLuminanceSource=M,e.HybridBinarizer=D,e.ITFReader=Ne,e.IllegalArgumentException=u,e.IllegalStateException=re,e.InvertedLuminanceSource=O,e.LuminanceSource=R,e.MathUtils=ae,e.MultiFormatOneDReader=lt,e.MultiFormatReader=xr,e.MultiFormatWriter=Dr,e.NotFoundException=k,e.OneDReader=ye,e.PDF417DecodedBitStreamParser=hr,e.PDF417DecoderErrorCorrection=Gt,e.PDF417Reader=pr,e.PDF417ResultMetadata=rr,e.PerspectiveTransform=he,e.PlanarYUVLuminanceSource=Rr,e.QRCodeByteMatrix=_r,e.QRCodeDataMask=St,e.QRCodeDecodedBitStreamParser=kt,e.QRCodeDecoderErrorCorrectionLevel=wt,e.QRCodeDecoderFormatInformation=Nt,e.QRCodeEncoder=Ir,e.QRCodeEncoderQRCode=Cr,e.QRCodeMaskUtil=jr,e.QRCodeMatrixUtil=Er,e.QRCodeMode=It,e.QRCodeReader=Ft,e.QRCodeVersion=Ct,e.QRCodeWriter=Tr,e.RGBLuminanceSource=Or,e.RSS14Reader=ot,e.RSSExpandedReader=at,e.ReaderException=fr,e.ReedSolomonDecoder=ne,e.ReedSolomonEncoder=Nr,e.ReedSolomonException=te,e.Result=U,e.ResultMetadataType=Q,e.ResultPoint=oe,e.StringUtils=E,e.UnsupportedOperationException=C,e.VideoInputDevice=P,e.WhiteRectangleDetector=de,e.WriterException=Sr,e.ZXingArrays=b,e.ZXingCharset=Mr,e.ZXingInteger=y,e.ZXingStandardCharsets=Pr,e.ZXingStringBuilder=A,e.ZXingStringEncoding=S,e.ZXingSystem=f,e.createAbstractExpandedDecoder=rt,Object.defineProperty(e,"__esModule",{value:!0})}(t)},153:(e,t,r)=>{"use strict";var n=r(43),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,a={},c=null,d=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,n)&&!l.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:s,type:e,key:c,ref:d,props:a,_owner:o.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,x={};function g(e,t,r){this.props=e,this.context=t,this.refs=x,this.updater=r||p}function b(){}function y(e,t,r){this.props=e,this.context=t,this.refs=x,this.updater=r||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=g.prototype;var v=y.prototype=new b;v.constructor=y,f(v,g.prototype),v.isPureReactComponent=!0;var w=Array.isArray,N=Object.prototype.hasOwnProperty,j={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,n){var s,a={},i=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)N.call(t,s)&&!_.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===a[s]&&(a[s]=l[s]);return{$$typeof:r,type:e,key:i,ref:o,props:a,_owner:j.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var E=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,s,a,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return i=i(l=e),e=""===a?"."+A(l,0):a,w(i)?(s="",null!=e&&(s=e.replace(E,"$&/")+"/"),I(i,t,s,"",function(e){return e})):null!=i&&(S(i)&&(i=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,s+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(E,"$&/")+"/")+e)),t.push(i)),1;if(l=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var d=a+A(o=e[c],c);l+=I(o,t,s,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=I(o=o.value,t,s,d=a+A(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function k(e,t,r){if(null==e)return e;var n=[],s=0;return I(e,n,"","",function(e){return t.call(r,e,s++)}),n}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},R={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:R,ReactCurrentOwner:j};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:k,forEach:function(e,t,r){k(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return k(e,function(){t++}),t},toArray:function(e){return k(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=s,t.Profiler=i,t.PureComponent=y,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=M,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=f({},e.props),a=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=j.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N.call(t,c)&&!_.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:r,type:e.type,key:a,ref:i,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,r){return D.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,r){return D.current.useReducer(e,t,r)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return D.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,s=e[n];if(!(0<a(s,t)))break e;e[n]=t,e[r]=s,r=n}}function n(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,s=e.length,i=s>>>1;n<i;){var o=2*(n+1)-1,l=e[o],c=o+1,d=e[c];if(0>a(l,r))c<s&&0>a(d,l)?(e[n]=d,e[c]=r,n=c):(e[n]=l,e[o]=r,n=o);else{if(!(c<s&&0>a(d,r)))break e;e[n]=d,e[c]=r,n=c}}}return t}function a(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,f=!1,x=!1,g="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=n(d);null!==t;){if(null===t.callback)s(d);else{if(!(t.startTime<=e))break;s(d),t.sortIndex=t.expirationTime,r(c,t)}t=n(d)}}function w(e){if(x=!1,v(e),!f)if(null!==n(c))f=!0,R(N);else{var t=n(d);null!==t&&O(w,t.startTime-e)}}function N(e,r){f=!1,x&&(x=!1,b(S),S=-1),p=!0;var a=m;try{for(v(r),h=n(c);null!==h&&(!(h.expirationTime>r)||e&&!I());){var i=h.callback;if("function"===typeof i){h.callback=null,m=h.priorityLevel;var o=i(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof o?h.callback=o:h===n(c)&&s(c),v(r)}else s(c);h=n(c)}if(null!==h)var l=!0;else{var u=n(d);null!==u&&O(w,u.startTime-r),l=!1}return l}finally{h=null,m=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,_=!1,C=null,S=-1,E=5,A=-1;function I(){return!(t.unstable_now()-A<E)}function k(){if(null!==C){var e=t.unstable_now();A=e;var r=!0;try{r=C(!0,e)}finally{r?j():(_=!1,C=null)}}else _=!1}if("function"===typeof y)j=function(){y(k)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,D=T.port2;T.port1.onmessage=k,j=function(){D.postMessage(null)}}else j=function(){g(k,0)};function R(e){C=e,_||(_=!0,j())}function O(e,r){S=g(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,R(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var r=m;m=t;try{return e()}finally{m=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=m;m=e;try{return t()}finally{m=r}},t.unstable_scheduleCallback=function(e,s,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(e.sortIndex=a,r(d,e),null===n(c)&&e===n(d)&&(x?(b(S),S=-1):x=!0,O(w,a-i))):(e.sortIndex=o,r(c,e),f||p||(f=!0,R(N))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=m;return function(){var r=m;m=t;try{return e.apply(this,arguments)}finally{m=r}}}},391:(e,t,r)=>{"use strict";var n=r(950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},579:(e,t,r)=>{"use strict";e.exports=r(153)},730:(e,t,r)=>{"use strict";var n=r(43),s=r(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function f(e,t,r,n,s,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){x[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];x[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){x[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){x[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){x[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){x[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){x[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){x[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){x[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,r,n){var s=x.hasOwnProperty(t)?x[t]:null;(null!==s?0!==s.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,s,n)&&(r=null),n||null===s?function(e){return!!u.call(p,e)||!u.call(m,e)&&(h.test(e)?p[e]=!0:(m[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=null===r?3!==s.type&&"":r:(t=s.attributeName,n=s.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(s=s.type)||4===s&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,b);x[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,b);x[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,b);x[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){x[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),x.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){x[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var v=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),N=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),E=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var P,L=Object.assign;function B(e){if(void 0===P)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return"\n"+P+e}var F=!1;function U(e,t){if(!e||F)return"";F=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),a=n.stack.split("\n"),i=s.length-1,o=a.length-1;1<=i&&0<=o&&s[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(s[i]!==a[o]){if(1!==i||1!==o)do{if(i--,0>--o||s[i]!==a[o]){var l="\n"+s[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?B(e):""}function z(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case j:return"Fragment";case N:return"Portal";case C:return"Profiler";case _:return"StrictMode";case I:return"Suspense";case k:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return H(e(t))}catch(r){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=q(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var r=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function K(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=W(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function J(e,t){Z(e,t);var r=W(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&X(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+W(r),t=null,s=0;s<e.length;s++){if(e[s].value===r)return e[s].selected=!0,void(n&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(a(92));if(te(r)){if(1<r.length)throw Error(a(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:W(r)}}function ae(e,t){var r=W(t.value),n=W(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function xe(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),s=fe(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}Object.keys(me).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var ge=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,je=null,_e=null;function Ce(e){if(e=ys(e)){if("function"!==typeof Ne)throw Error(a(280));var t=e.stateNode;t&&(t=ws(t),Ne(e.stateNode,e.type,t))}}function Se(e){je?_e?_e.push(e):_e=[e]:je=e}function Ee(){if(je){var e=je,t=_e;if(_e=je=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ae(e,t){return e(t)}function Ie(){}var ke=!1;function Te(e,t,r){if(ke)return e(t,r);ke=!0;try{return Ae(e,t,r)}finally{ke=!1,(null!==je||null!==_e)&&(Ie(),Ee())}}function De(e,t){var r=e.stateNode;if(null===r)return null;var n=ws(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(a(231,t,typeof r));return r}var Re=!1;if(d)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(de){Re=!1}function Me(e,t,r,n,s,a,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var Pe=!1,Le=null,Be=!1,Fe=null,Ue={onError:function(e){Pe=!0,Le=e}};function ze(e,t,r,n,s,a,i,o,l){Pe=!1,Le=null,Me.apply(Ue,arguments)}function He(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(He(e)!==e)throw Error(a(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(a(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(n=s.return)){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return We(s),e;if(i===n)return We(s),t;i=i.sibling}throw Error(a(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(a(189))}}if(r.alternate!==n)throw Error(a(190))}if(3!==r.tag)throw Error(a(188));return r.stateNode.current===r?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ye=s.unstable_scheduleCallback,Xe=s.unstable_cancelCallback,Qe=s.unstable_shouldYield,Ke=s.unstable_requestPaint,Ze=s.unstable_now,Je=s.unstable_getCurrentPriorityLevel,$e=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,rt=s.unstable_LowPriority,nt=s.unstable_IdlePriority,st=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,i=268435455&r;if(0!==i){var o=i&~s;0!==o?n=ut(o):0!==(a&=i)&&(n=ut(a))}else 0!==(i=r&~s)?n=ut(i):0!==a&&(n=ut(a));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&s)&&((s=n&-n)>=(a=t&-t)||16===s&&0!==(4194240&a)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)s=1<<(r=31-it(t)),n|=e[r],t&=~s;return n}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function xt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=r}function bt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-it(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var yt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Nt,jt,_t,Ct,St=!1,Et=[],At=null,It=null,kt=null,Tt=new Map,Dt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Pt(e,t,r,n,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=ys(t))&&Nt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Lt(e){var t=bs(e.target);if(null!==t){var r=He(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Ve(r)))return e.blockedOn=t,void Ct(e.priority,function(){jt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=ys(r))&&Nt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);ve=n,r.target.dispatchEvent(n),ve=null,t.shift()}return!0}function Ft(e,t,r){Bt(e)&&r.delete(t)}function Ut(){St=!1,null!==At&&Bt(At)&&(At=null),null!==It&&Bt(It)&&(It=null),null!==kt&&Bt(kt)&&(kt=null),Tt.forEach(Ft),Dt.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ut)))}function Ht(e){function t(t){return zt(t,e)}if(0<Et.length){zt(Et[0],e);for(var r=1;r<Et.length;r++){var n=Et[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==At&&zt(At,e),null!==It&&zt(It,e),null!==kt&&zt(kt,e),Tt.forEach(t),Dt.forEach(t),r=0;r<Rt.length;r++)(n=Rt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Rt.length&&null===(r=Rt[0]).blockedOn;)Lt(r),null===r.blockedOn&&Rt.shift()}var Vt=v.ReactCurrentBatchConfig,Wt=!0;function qt(e,t,r,n){var s=yt,a=Vt.transition;Vt.transition=null;try{yt=1,Yt(e,t,r,n)}finally{yt=s,Vt.transition=a}}function Gt(e,t,r,n){var s=yt,a=Vt.transition;Vt.transition=null;try{yt=4,Yt(e,t,r,n)}finally{yt=s,Vt.transition=a}}function Yt(e,t,r,n){if(Wt){var s=Qt(e,t,r,n);if(null===s)Wn(e,t,n,Xt,r),Mt(e,n);else if(function(e,t,r,n,s){switch(t){case"focusin":return At=Pt(At,e,t,r,n,s),!0;case"dragenter":return It=Pt(It,e,t,r,n,s),!0;case"mouseover":return kt=Pt(kt,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return Tt.set(a,Pt(Tt.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Dt.set(a,Pt(Dt.get(a)||null,e,t,r,n,s)),!0}return!1}(s,e,t,r,n))n.stopPropagation();else if(Mt(e,n),4&t&&-1<Ot.indexOf(e)){for(;null!==s;){var a=ys(s);if(null!==a&&wt(a),null===(a=Qt(e,t,r,n))&&Wn(e,t,n,Xt,r),a===s)break;s=a}null!==s&&n.stopPropagation()}else Wn(e,t,n,null,r)}}var Xt=null;function Qt(e,t,r,n){if(Xt=null,null!==(e=bs(e=we(n))))if(null===(t=He(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case $e:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Zt=null,Jt=null,$t=null;function er(){if($t)return $t;var e,t,r=Jt,n=r.length,s="value"in Zt?Zt.value:Zt.textContent,a=s.length;for(e=0;e<n&&r[e]===s[e];e++);var i=n-e;for(t=1;t<=i&&r[n-t]===s[a-t];t++);return $t=s.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function sr(e){function t(t,r,n,s,a){for(var i in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ar,ir,or,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=sr(lr),dr=L({},lr,{view:0,detail:0}),ur=sr(dr),hr=L({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_r,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(ar=e.screenX-or.screenX,ir=e.screenY-or.screenY):ir=ar=0,or=e),ar)},movementY:function(e){return"movementY"in e?e.movementY:ir}}),mr=sr(hr),pr=sr(L({},hr,{dataTransfer:0})),fr=sr(L({},dr,{relatedTarget:0})),xr=sr(L({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),gr=L({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),br=sr(gr),yr=sr(L({},lr,{data:0})),vr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nr[e])&&!!t[e]}function _r(){return jr}var Cr=L({},dr,{key:function(e){if(e.key){var t=vr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_r,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sr=sr(Cr),Er=sr(L({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ar=sr(L({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_r})),Ir=sr(L({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),kr=L({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tr=sr(kr),Dr=[9,13,27,32],Rr=d&&"CompositionEvent"in window,Or=null;d&&"documentMode"in document&&(Or=document.documentMode);var Mr=d&&"TextEvent"in window&&!Or,Pr=d&&(!Rr||Or&&8<Or&&11>=Or),Lr=String.fromCharCode(32),Br=!1;function Fr(e,t){switch(e){case"keyup":return-1!==Dr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ur(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zr=!1;var Hr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hr[e.type]:"textarea"===t}function Wr(e,t,r,n){Se(n),0<(t=Gn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var qr=null,Gr=null;function Yr(e){Bn(e,0)}function Xr(e){if(Y(vs(e)))return e}function Qr(e,t){if("change"===e)return t}var Kr=!1;if(d){var Zr;if(d){var Jr="oninput"in document;if(!Jr){var $r=document.createElement("div");$r.setAttribute("oninput","return;"),Jr="function"===typeof $r.oninput}Zr=Jr}else Zr=!1;Kr=Zr&&(!document.documentMode||9<document.documentMode)}function en(){qr&&(qr.detachEvent("onpropertychange",tn),Gr=qr=null)}function tn(e){if("value"===e.propertyName&&Xr(Gr)){var t=[];Wr(t,Gr,e,we(e)),Te(Yr,t)}}function rn(e,t,r){"focusin"===e?(en(),Gr=r,(qr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xr(Gr)}function sn(e,t){if("click"===e)return Xr(t)}function an(e,t){if("input"===e||"change"===e)return Xr(t)}var on="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(on(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!u.call(t,s)||!on(e[s],t[s]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function un(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?un(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=X((e=t.contentWindow).document)}return t}function mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pn(e){var t=hn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&un(r.ownerDocument.documentElement,r)){if(null!==n&&mn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=void 0===n.end?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=dn(r,a);var i=dn(r,n);s&&i&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fn=d&&"documentMode"in document&&11>=document.documentMode,xn=null,gn=null,bn=null,yn=!1;function vn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;yn||null==xn||xn!==X(n)||("selectionStart"in(n=xn)&&mn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},bn&&ln(bn,n)||(bn=n,0<(n=Gn(gn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=xn)))}function wn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Nn={animationend:wn("Animation","AnimationEnd"),animationiteration:wn("Animation","AnimationIteration"),animationstart:wn("Animation","AnimationStart"),transitionend:wn("Transition","TransitionEnd")},jn={},_n={};function Cn(e){if(jn[e])return jn[e];if(!Nn[e])return e;var t,r=Nn[e];for(t in r)if(r.hasOwnProperty(t)&&t in _n)return jn[e]=r[t];return e}d&&(_n=document.createElement("div").style,"AnimationEvent"in window||(delete Nn.animationend.animation,delete Nn.animationiteration.animation,delete Nn.animationstart.animation),"TransitionEvent"in window||delete Nn.transitionend.transition);var Sn=Cn("animationend"),En=Cn("animationiteration"),An=Cn("animationstart"),In=Cn("transitionend"),kn=new Map,Tn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(e,t){kn.set(e,t),l(t,[e])}for(var Rn=0;Rn<Tn.length;Rn++){var On=Tn[Rn];Dn(On.toLowerCase(),"on"+(On[0].toUpperCase()+On.slice(1)))}Dn(Sn,"onAnimationEnd"),Dn(En,"onAnimationIteration"),Dn(An,"onAnimationStart"),Dn("dblclick","onDoubleClick"),Dn("focusin","onFocus"),Dn("focusout","onBlur"),Dn(In,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mn));function Ln(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,s,i,o,l,c){if(ze.apply(this,arguments),Pe){if(!Pe)throw Error(a(198));var d=Le;Pe=!1,Le=null,Be||(Be=!0,Fe=d)}}(n,t,void 0,e),e.currentTarget=null}function Bn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&s.isPropagationStopped())break e;Ln(s,o,c),a=l}else for(i=0;i<n.length;i++){if(l=(o=n[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&s.isPropagationStopped())break e;Ln(s,o,c),a=l}}}if(Be)throw e=Fe,Be=!1,Fe=null,e}function Fn(e,t){var r=t[fs];void 0===r&&(r=t[fs]=new Set);var n=e+"__bubble";r.has(n)||(Vn(t,e,2,!1),r.add(n))}function Un(e,t,r){var n=0;t&&(n|=4),Vn(r,e,n,t)}var zn="_reactListening"+Math.random().toString(36).slice(2);function Hn(e){if(!e[zn]){e[zn]=!0,i.forEach(function(t){"selectionchange"!==t&&(Pn.has(t)||Un(t,!1,e),Un(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zn]||(t[zn]=!0,Un("selectionchange",!1,t))}}function Vn(e,t,r,n){switch(Kt(t)){case 1:var s=qt;break;case 4:s=Gt;break;default:s=Yt}r=s.bind(null,t,r,e),s=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),n?void 0!==s?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):void 0!==s?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Wn(e,t,r,n,s){var a=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var i=n.tag;if(3===i||4===i){var o=n.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===i)for(i=n.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;i=i.return}for(;null!==o;){if(null===(i=bs(o)))return;if(5===(l=i.tag)||6===l){n=a=i;continue e}o=o.parentNode}}n=n.return}Te(function(){var n=a,s=we(r),i=[];e:{var o=kn.get(e);if(void 0!==o){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Sr;break;case"focusin":c="focus",l=fr;break;case"focusout":c="blur",l=fr;break;case"beforeblur":case"afterblur":l=fr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ar;break;case Sn:case En:case An:l=xr;break;case In:l=Ir;break;case"scroll":l=ur;break;case"wheel":l=Tr;break;case"copy":case"cut":case"paste":l=br;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Er}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=n;null!==p;){var f=(m=p).stateNode;if(5===m.tag&&null!==f&&(m=f,null!==h&&(null!=(f=De(p,h))&&d.push(qn(p,f,m)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,r,s),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===ve||!(c=r.relatedTarget||r.fromElement)||!bs(c)&&!c[ps])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?bs(c):null)&&(c!==(u=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(d=mr,f="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Er,f="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==l?o:vs(l),m=null==c?o:vs(c),(o=new d(f,p+"leave",l,r,s)).target=u,o.relatedTarget=m,f=null,bs(s)===n&&((d=new d(h,p+"enter",c,r,s)).target=m,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,p=0,m=d=l;m;m=Yn(m))p++;for(m=0,f=h;f;f=Yn(f))m++;for(;0<p-m;)d=Yn(d),p--;for(;0<m-p;)h=Yn(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Yn(d),h=Yn(h)}d=null}else d=null;null!==l&&Xn(i,o,l,d,!1),null!==c&&null!==u&&Xn(i,u,c,d,!0)}if("select"===(l=(o=n?vs(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var x=Qr;else if(Vr(o))if(Kr)x=an;else{x=nn;var g=rn}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(x=sn);switch(x&&(x=x(e,n))?Wr(i,x,r,s):(g&&g(e,o,n),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&ee(o,"number",o.value)),g=n?vs(n):window,e){case"focusin":(Vr(g)||"true"===g.contentEditable)&&(xn=g,gn=n,bn=null);break;case"focusout":bn=gn=xn=null;break;case"mousedown":yn=!0;break;case"contextmenu":case"mouseup":case"dragend":yn=!1,vn(i,r,s);break;case"selectionchange":if(fn)break;case"keydown":case"keyup":vn(i,r,s)}var b;if(Rr)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else zr?Fr(e,r)&&(y="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(y="onCompositionStart");y&&(Pr&&"ko"!==r.locale&&(zr||"onCompositionStart"!==y?"onCompositionEnd"===y&&zr&&(b=er()):(Jt="value"in(Zt=s)?Zt.value:Zt.textContent,zr=!0)),0<(g=Gn(n,y)).length&&(y=new yr(y,e,null,r,s),i.push({event:y,listeners:g}),b?y.data=b:null!==(b=Ur(r))&&(y.data=b))),(b=Mr?function(e,t){switch(e){case"compositionend":return Ur(t);case"keypress":return 32!==t.which?null:(Br=!0,Lr);case"textInput":return(e=t.data)===Lr&&Br?null:e;default:return null}}(e,r):function(e,t){if(zr)return"compositionend"===e||!Rr&&Fr(e,t)?(e=er(),$t=Jt=Zt=null,zr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Gn(n,"onBeforeInput")).length&&(s=new yr("onBeforeInput","beforeinput",null,r,s),i.push({event:s,listeners:n}),s.data=b))}Bn(i,t)})}function qn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Gn(e,t){for(var r=t+"Capture",n=[];null!==e;){var s=e,a=s.stateNode;5===s.tag&&null!==a&&(s=a,null!=(a=De(e,r))&&n.unshift(qn(e,a,s)),null!=(a=De(e,t))&&n.push(qn(e,a,s))),e=e.return}return n}function Yn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xn(e,t,r,n,s){for(var a=t._reactName,i=[];null!==r&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=De(r,a))&&i.unshift(qn(r,l,o)):s||null!=(l=De(r,a))&&i.push(qn(r,l,o))),r=r.return}0!==i.length&&e.push({event:t,listeners:i})}var Qn=/\r\n?/g,Kn=/\u0000|\uFFFD/g;function Zn(e){return("string"===typeof e?e:""+e).replace(Qn,"\n").replace(Kn,"")}function Jn(e,t,r){if(t=Zn(t),Zn(e)!==t&&r)throw Error(a(425))}function $n(){}var es=null,ts=null;function rs(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ns="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,as="function"===typeof Promise?Promise:void 0,is="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof as?function(e){return as.resolve(null).then(e).catch(os)}:ns;function os(e){setTimeout(function(){throw e})}function ls(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&8===s.nodeType)if("/$"===(r=s.data)){if(0===n)return e.removeChild(s),void Ht(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=s}while(r);Ht(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ds(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var us=Math.random().toString(36).slice(2),hs="__reactFiber$"+us,ms="__reactProps$"+us,ps="__reactContainer$"+us,fs="__reactEvents$"+us,xs="__reactListeners$"+us,gs="__reactHandles$"+us;function bs(e){var t=e[hs];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ps]||r[hs]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ds(e);null!==e;){if(r=e[hs])return r;e=ds(e)}return t}r=(e=r).parentNode}return null}function ys(e){return!(e=e[hs]||e[ps])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ws(e){return e[ms]||null}var Ns=[],js=-1;function _s(e){return{current:e}}function Cs(e){0>js||(e.current=Ns[js],Ns[js]=null,js--)}function Ss(e,t){js++,Ns[js]=e.current,e.current=t}var Es={},As=_s(Es),Is=_s(!1),ks=Es;function Ts(e,t){var r=e.type.contextTypes;if(!r)return Es;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s,a={};for(s in r)a[s]=t[s];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ds(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rs(){Cs(Is),Cs(As)}function Os(e,t,r){if(As.current!==Es)throw Error(a(168));Ss(As,t),Ss(Is,r)}function Ms(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var s in n=n.getChildContext())if(!(s in t))throw Error(a(108,V(e)||"Unknown",s));return L({},r,n)}function Ps(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Es,ks=As.current,Ss(As,e),Ss(Is,Is.current),!0}function Ls(e,t,r){var n=e.stateNode;if(!n)throw Error(a(169));r?(e=Ms(e,t,ks),n.__reactInternalMemoizedMergedChildContext=e,Cs(Is),Cs(As),Ss(As,e)):Cs(Is),Ss(Is,r)}var Bs=null,Fs=!1,Us=!1;function zs(e){null===Bs?Bs=[e]:Bs.push(e)}function Hs(){if(!Us&&null!==Bs){Us=!0;var e=0,t=yt;try{var r=Bs;for(yt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Bs=null,Fs=!1}catch(s){throw null!==Bs&&(Bs=Bs.slice(e+1)),Ye($e,Hs),s}finally{yt=t,Us=!1}}return null}var Vs=[],Ws=0,qs=null,Gs=0,Ys=[],Xs=0,Qs=null,Ks=1,Zs="";function Js(e,t){Vs[Ws++]=Gs,Vs[Ws++]=qs,qs=e,Gs=t}function $s(e,t,r){Ys[Xs++]=Ks,Ys[Xs++]=Zs,Ys[Xs++]=Qs,Qs=e;var n=Ks;e=Zs;var s=32-it(n)-1;n&=~(1<<s),r+=1;var a=32-it(t)+s;if(30<a){var i=s-s%5;a=(n&(1<<i)-1).toString(32),n>>=i,s-=i,Ks=1<<32-it(t)+s|r<<s|n,Zs=a+e}else Ks=1<<a|r<<s|n,Zs=e}function ea(e){null!==e.return&&(Js(e,1),$s(e,1,0))}function ta(e){for(;e===qs;)qs=Vs[--Ws],Vs[Ws]=null,Gs=Vs[--Ws],Vs[Ws]=null;for(;e===Qs;)Qs=Ys[--Xs],Ys[Xs]=null,Zs=Ys[--Xs],Ys[Xs]=null,Ks=Ys[--Xs],Ys[Xs]=null}var ra=null,na=null,sa=!1,aa=null;function ia(e,t){var r=Tc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function oa(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,na=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,na=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Qs?{id:Ks,overflow:Zs}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Tc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ra=e,na=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(sa){var t=na;if(t){var r=t;if(!oa(e,t)){if(la(e))throw Error(a(418));t=cs(r.nextSibling);var n=ra;t&&oa(e,t)?ia(n,r):(e.flags=-4097&e.flags|2,sa=!1,ra=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,sa=!1,ra=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function ua(e){if(e!==ra)return!1;if(!sa)return da(e),sa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!rs(e.type,e.memoizedProps)),t&&(t=na)){if(la(e))throw ha(),Error(a(418));for(;t;)ia(e,t),t=cs(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){na=cs(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}na=null}}else na=ra?cs(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=na;e;)e=cs(e.nextSibling)}function ma(){na=ra=null,sa=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var fa=v.ReactCurrentBatchConfig;function xa(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(a(309));var n=r.stateNode}if(!n)throw Error(a(147,e));var s=n,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=s.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!r._owner)throw Error(a(290,e))}return e}function ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ba(e){return(0,e._init)(e._payload)}function ya(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Lc(r,e.mode,n)).return=e,t):((t=s(t,r)).return=e,t)}function c(e,t,r,n){var a=r.type;return a===j?u(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&ba(a)===t.type)?((n=s(t,r.props)).ref=xa(e,t,r),n.return=e,n):((n=Oc(r.type,r.key,r.props,null,e.mode,n)).ref=xa(e,t,r),n.return=e,n)}function d(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Bc(r,e.mode,n)).return=e,t):((t=s(t,r.children||[])).return=e,t)}function u(e,t,r,n,a){return null===t||7!==t.tag?((t=Mc(r,e.mode,n,a)).return=e,t):((t=s(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(r=Oc(t.type,t.key,t.props,null,e.mode,r)).ref=xa(e,null,t),r.return=e,r;case N:return(t=Bc(t,e.mode,r)).return=e,t;case D:return h(e,(0,t._init)(t._payload),r)}if(te(t)||M(t))return(t=Mc(t,e.mode,r,null)).return=e,t;ga(e,t)}return null}function m(e,t,r,n){var s=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==s?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return r.key===s?c(e,t,r,n):null;case N:return r.key===s?d(e,t,r,n):null;case D:return m(e,t,(s=r._init)(r._payload),n)}if(te(r)||M(r))return null!==s?null:u(e,t,r,n,null);ga(e,r)}return null}function p(e,t,r,n,s){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(r)||null,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return c(t,e=e.get(null===n.key?r:n.key)||null,n,s);case N:return d(t,e=e.get(null===n.key?r:n.key)||null,n,s);case D:return p(e,t,r,(0,n._init)(n._payload),s)}if(te(n)||M(n))return u(t,e=e.get(r)||null,n,s,null);ga(t,n)}return null}function f(s,a,o,l){for(var c=null,d=null,u=a,f=a=0,x=null;null!==u&&f<o.length;f++){u.index>f?(x=u,u=null):x=u.sibling;var g=m(s,u,o[f],l);if(null===g){null===u&&(u=x);break}e&&u&&null===g.alternate&&t(s,u),a=i(g,a,f),null===d?c=g:d.sibling=g,d=g,u=x}if(f===o.length)return r(s,u),sa&&Js(s,f),c;if(null===u){for(;f<o.length;f++)null!==(u=h(s,o[f],l))&&(a=i(u,a,f),null===d?c=u:d.sibling=u,d=u);return sa&&Js(s,f),c}for(u=n(s,u);f<o.length;f++)null!==(x=p(u,s,f,o[f],l))&&(e&&null!==x.alternate&&u.delete(null===x.key?f:x.key),a=i(x,a,f),null===d?c=x:d.sibling=x,d=x);return e&&u.forEach(function(e){return t(s,e)}),sa&&Js(s,f),c}function x(s,o,l,c){var d=M(l);if("function"!==typeof d)throw Error(a(150));if(null==(l=d.call(l)))throw Error(a(151));for(var u=d=null,f=o,x=o=0,g=null,b=l.next();null!==f&&!b.done;x++,b=l.next()){f.index>x?(g=f,f=null):g=f.sibling;var y=m(s,f,b.value,c);if(null===y){null===f&&(f=g);break}e&&f&&null===y.alternate&&t(s,f),o=i(y,o,x),null===u?d=y:u.sibling=y,u=y,f=g}if(b.done)return r(s,f),sa&&Js(s,x),d;if(null===f){for(;!b.done;x++,b=l.next())null!==(b=h(s,b.value,c))&&(o=i(b,o,x),null===u?d=b:u.sibling=b,u=b);return sa&&Js(s,x),d}for(f=n(s,f);!b.done;x++,b=l.next())null!==(b=p(f,s,x,b.value,c))&&(e&&null!==b.alternate&&f.delete(null===b.key?x:b.key),o=i(b,o,x),null===u?d=b:u.sibling=b,u=b);return e&&f.forEach(function(e){return t(s,e)}),sa&&Js(s,x),d}return function e(n,a,i,l){if("object"===typeof i&&null!==i&&i.type===j&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,d=a;null!==d;){if(d.key===c){if((c=i.type)===j){if(7===d.tag){r(n,d.sibling),(a=s(d,i.props.children)).return=n,n=a;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&ba(c)===d.type){r(n,d.sibling),(a=s(d,i.props)).ref=xa(n,d,i),a.return=n,n=a;break e}r(n,d);break}t(n,d),d=d.sibling}i.type===j?((a=Mc(i.props.children,n.mode,l,i.key)).return=n,n=a):((l=Oc(i.type,i.key,i.props,null,n.mode,l)).ref=xa(n,a,i),l.return=n,n=l)}return o(n);case N:e:{for(d=i.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){r(n,a.sibling),(a=s(a,i.children||[])).return=n,n=a;break e}r(n,a);break}t(n,a),a=a.sibling}(a=Bc(i,n.mode,l)).return=n,n=a}return o(n);case D:return e(n,a,(d=i._init)(i._payload),l)}if(te(i))return f(n,a,i,l);if(M(i))return x(n,a,i,l);ga(n,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(r(n,a.sibling),(a=s(a,i)).return=n,n=a):(r(n,a),(a=Lc(i,n.mode,l)).return=n,n=a),o(n)):r(n,a)}}var va=ya(!0),wa=ya(!1),Na=_s(null),ja=null,_a=null,Ca=null;function Sa(){Ca=_a=ja=null}function Ea(e){var t=Na.current;Cs(Na),e._currentValue=t}function Aa(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ia(e,t){ja=e,Ca=_a=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yo=!0),e.firstContext=null)}function ka(e){var t=e._currentValue;if(Ca!==e)if(e={context:e,memoizedValue:t,next:null},null===_a){if(null===ja)throw Error(a(308));_a=e,ja.dependencies={lanes:0,firstContext:e}}else _a=_a.next=e;return t}var Ta=null;function Da(e){null===Ta?Ta=[e]:Ta.push(e)}function Ra(e,t,r,n){var s=t.interleaved;return null===s?(r.next=r,Da(t)):(r.next=s.next,s.next=r),t.interleaved=r,Oa(e,n)}function Oa(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Ma=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function La(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ba(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fa(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Al)){var s=n.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Oa(e,r)}return null===(s=n.interleaved)?(t.next=t,Da(n)):(t.next=s.next,s.next=t),n.interleaved=t,Oa(e,r)}function Ua(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,bt(e,r)}}function za(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var s=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===a?s=a=i:a=a.next=i,r=r.next}while(null!==r);null===a?s=a=t:a=a.next=t}else s=a=t;return r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ha(e,t,r,n){var s=e.updateQueue;Ma=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==a){var u=s.baseState;for(i=0,d=c=l=null,o=a;;){var h=o.lane,m=o.eventTime;if((n&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,f=o;switch(h=t,m=r,f.tag){case 1:if("function"===typeof(p=f.payload)){u=p.call(m,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=f.payload)?p.call(m,u,h):p)||void 0===h)break e;u=L({},u,h);break e;case 2:Ma=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,i|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===d&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null!==(t=s.shared.interleaved)){s=t;do{i|=s.lane,s=s.next}while(s!==t)}else null===a&&(s.shared.lanes=0);Pl|=i,e.lanes=i,e.memoizedState=u}}function Va(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(null!==s){if(n.callback=null,n=r,"function"!==typeof s)throw Error(a(191,s));s.call(n)}}}var Wa={},qa=_s(Wa),Ga=_s(Wa),Ya=_s(Wa);function Xa(e){if(e===Wa)throw Error(a(174));return e}function Qa(e,t){switch(Ss(Ya,t),Ss(Ga,e),Ss(qa,Wa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Cs(qa),Ss(qa,t)}function Ka(){Cs(qa),Cs(Ga),Cs(Ya)}function Za(e){Xa(Ya.current);var t=Xa(qa.current),r=le(t,e.type);t!==r&&(Ss(Ga,e),Ss(qa,r))}function Ja(e){Ga.current===e&&(Cs(qa),Cs(Ga))}var $a=_s(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ri(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ni=v.ReactCurrentDispatcher,si=v.ReactCurrentBatchConfig,ai=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,hi=0;function mi(){throw Error(a(321))}function pi(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!on(e[r],t[r]))return!1;return!0}function fi(e,t,r,n,s,i){if(ai=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ni.current=null===e||null===e.memoizedState?Ji:$i,e=r(n,s),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(a(301));i+=1,li=oi=null,t.updateQueue=null,ni.current=eo,e=r(n,s)}while(di)}if(ni.current=Zi,t=null!==oi&&null!==oi.next,ai=0,li=oi=ii=null,ci=!1,t)throw Error(a(300));return e}function xi(){var e=0!==ui;return ui=0,e}function gi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function bi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(a(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function yi(e,t){return"function"===typeof t?t(e):t}function vi(e){var t=bi(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var n=oi,s=n.baseQueue,i=r.pending;if(null!==i){if(null!==s){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(null!==s){i=s.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((ai&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=n):c=c.next=h,ii.lanes|=u,Pl|=u}d=d.next}while(null!==d&&d!==i);null===c?o=n:c.next=l,on(n,t.memoizedState)||(yo=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){s=e;do{i=s.lane,ii.lanes|=i,Pl|=i,s=s.next}while(s!==e)}else null===s&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function wi(e){var t=bi(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(null!==s){r.pending=null;var o=s=s.next;do{i=e(i,o.action),o=o.next}while(o!==s);on(i,t.memoizedState)||(yo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Ni(){}function ji(e,t){var r=ii,n=bi(),s=t(),i=!on(n.memoizedState,s);if(i&&(n.memoizedState=s,yo=!0),n=n.queue,Mi(Si.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(r.flags|=2048,ki(9,Ci.bind(null,r,n,s,t),void 0,null),null===Il)throw Error(a(349));0!==(30&ai)||_i(r,t,s)}return s}function _i(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Ci(e,t,r,n){t.value=r,t.getSnapshot=n,Ei(t)&&Ai(e)}function Si(e,t,r){return r(function(){Ei(t)&&Ai(e)})}function Ei(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!on(e,r)}catch(n){return!0}}function Ai(e){var t=Oa(e,1);null!==t&&rc(t,e,1,-1)}function Ii(e){var t=gi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:e},t.queue=e,e=e.dispatch=Yi.bind(null,ii,e),[t.memoizedState,e]}function ki(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Ti(){return bi().memoizedState}function Di(e,t,r,n){var s=gi();ii.flags|=e,s.memoizedState=ki(1|t,r,void 0,void 0===n?null:n)}function Ri(e,t,r,n){var s=bi();n=void 0===n?null:n;var a=void 0;if(null!==oi){var i=oi.memoizedState;if(a=i.destroy,null!==n&&pi(n,i.deps))return void(s.memoizedState=ki(t,r,a,n))}ii.flags|=e,s.memoizedState=ki(1|t,r,a,n)}function Oi(e,t){return Di(8390656,8,e,t)}function Mi(e,t){return Ri(2048,8,e,t)}function Pi(e,t){return Ri(4,2,e,t)}function Li(e,t){return Ri(4,4,e,t)}function Bi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fi(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ri(4,4,Bi.bind(null,t,e),r)}function Ui(){}function zi(e,t){var r=bi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&pi(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Hi(e,t){var r=bi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&pi(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Vi(e,t,r){return 0===(21&ai)?(e.baseState&&(e.baseState=!1,yo=!0),e.memoizedState=r):(on(r,t)||(r=ft(),ii.lanes|=r,Pl|=r,e.baseState=!0),t)}function Wi(e,t){var r=yt;yt=0!==r&&4>r?r:4,e(!0);var n=si.transition;si.transition={};try{e(!1),t()}finally{yt=r,si.transition=n}}function qi(){return bi().memoizedState}function Gi(e,t,r){var n=tc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Xi(e))Qi(t,r);else if(null!==(r=Ra(e,t,r,n))){rc(r,e,n,ec()),Ki(r,t,n)}}function Yi(e,t,r){var n=tc(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Xi(e))Qi(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,r);if(s.hasEagerState=!0,s.eagerState=o,on(o,i)){var l=t.interleaved;return null===l?(s.next=s,Da(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(r=Ra(e,t,s,n))&&(rc(r,e,n,s=ec()),Ki(r,t,n))}}function Xi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Qi(e,t){di=ci=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ki(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,bt(e,r)}}var Zi={readContext:ka,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Ji={readContext:ka,useCallback:function(e,t){return gi().memoizedState=[e,void 0===t?null:t],e},useContext:ka,useEffect:Oi,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Di(4194308,4,Bi.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Di(4194308,4,e,t)},useInsertionEffect:function(e,t){return Di(4,2,e,t)},useMemo:function(e,t){var r=gi();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=gi();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},gi().memoizedState=e},useState:Ii,useDebugValue:Ui,useDeferredValue:function(e){return gi().memoizedState=e},useTransition:function(){var e=Ii(!1),t=e[0];return e=Wi.bind(null,e[1]),gi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ii,s=gi();if(sa){if(void 0===r)throw Error(a(407));r=r()}else{if(r=t(),null===Il)throw Error(a(349));0!==(30&ai)||_i(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Oi(Si.bind(null,n,i,e),[e]),n.flags|=2048,ki(9,Ci.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=gi(),t=Il.identifierPrefix;if(sa){var r=Zs;t=":"+t+"R"+(r=(Ks&~(1<<32-it(Ks)-1)).toString(32)+r),0<(r=ui++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$i={readContext:ka,useCallback:zi,useContext:ka,useEffect:Mi,useImperativeHandle:Fi,useInsertionEffect:Pi,useLayoutEffect:Li,useMemo:Hi,useReducer:vi,useRef:Ti,useState:function(){return vi(yi)},useDebugValue:Ui,useDeferredValue:function(e){return Vi(bi(),oi.memoizedState,e)},useTransition:function(){return[vi(yi)[0],bi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:ji,useId:qi,unstable_isNewReconciler:!1},eo={readContext:ka,useCallback:zi,useContext:ka,useEffect:Mi,useImperativeHandle:Fi,useInsertionEffect:Pi,useLayoutEffect:Li,useMemo:Hi,useReducer:wi,useRef:Ti,useState:function(){return wi(yi)},useDebugValue:Ui,useDeferredValue:function(e){var t=bi();return null===oi?t.memoizedState=e:Vi(t,oi.memoizedState,e)},useTransition:function(){return[wi(yi)[0],bi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:ji,useId:qi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var r in t=L({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ro(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:L({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var no={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),s=tc(e),a=Ba(n,s);a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=Fa(e,a,s))&&(rc(t,e,s,n),Ua(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),s=tc(e),a=Ba(n,s);a.tag=1,a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=Fa(e,a,s))&&(rc(t,e,s,n),Ua(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),s=Ba(r,n);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Fa(e,s,n))&&(rc(t,e,n,r),Ua(t,e,n))}};function so(e,t,r,n,s,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!ln(r,n)||!ln(s,a))}function ao(e,t,r){var n=!1,s=Es,a=t.contextType;return"object"===typeof a&&null!==a?a=ka(a):(s=Ds(t)?ks:As.current,a=(n=null!==(n=t.contextTypes)&&void 0!==n)?Ts(e,s):Es),t=new t(r,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=no,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function io(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&no.enqueueReplaceState(t,t.state,null)}function oo(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?s.context=ka(a):(a=Ds(t)?ks:As.current,s.context=Ts(e,a)),s.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ro(e,t,a,r),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&no.enqueueReplaceState(s,s.state,null),Ha(e,r,s,n),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var r="",n=t;do{r+=z(n),n=n.return}while(n);var s=r}catch(a){s="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:s,digest:null}}function co(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ho="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,r){(r=Ba(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Wl||(Wl=!0,ql=n),uo(0,t)},r}function po(e,t,r){(r=Ba(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){uo(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(r.callback=function(){uo(0,t),"function"!==typeof n&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function fo(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new ho;var s=new Set;n.set(t,s)}else void 0===(s=n.get(t))&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Cc.bind(null,e,t,r),t.then(e,e))}function xo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function go(e,t,r,n,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Ba(-1,1)).tag=2,Fa(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var bo=v.ReactCurrentOwner,yo=!1;function vo(e,t,r,n){t.child=null===e?wa(t,null,r,n):va(t,e.child,r,n)}function wo(e,t,r,n,s){r=r.render;var a=t.ref;return Ia(t,s),n=fi(e,t,r,n,a,s),r=xi(),null===e||yo?(sa&&r&&ea(t),t.flags|=1,vo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wo(e,t,s))}function No(e,t,r,n,s){if(null===e){var a=r.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Oc(r.type,null,n,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,jo(e,t,a,n,s))}if(a=e.child,0===(e.lanes&s)){var i=a.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(i,n)&&e.ref===t.ref)return Wo(e,t,s)}return t.flags|=1,(e=Rc(a,n)).ref=t.ref,e.return=t,t.child=e}function jo(e,t,r,n,s){if(null!==e){var a=e.memoizedProps;if(ln(a,n)&&e.ref===t.ref){if(yo=!1,t.pendingProps=n=a,0===(e.lanes&s))return t.lanes=e.lanes,Wo(e,t,s);0!==(131072&e.flags)&&(yo=!0)}}return So(e,t,r,n,s)}function _o(e,t,r){var n=t.pendingProps,s=n.children,a=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ss(Rl,Dl),Dl|=r;else{if(0===(1073741824&r))return e=null!==a?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ss(Rl,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==a?a.baseLanes:r,Ss(Rl,Dl),Dl|=n}else null!==a?(n=a.baseLanes|r,t.memoizedState=null):n=r,Ss(Rl,Dl),Dl|=n;return vo(e,t,s,r),t.child}function Co(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,r,n,s){var a=Ds(r)?ks:As.current;return a=Ts(t,a),Ia(t,s),r=fi(e,t,r,n,a,s),n=xi(),null===e||yo?(sa&&n&&ea(t),t.flags|=1,vo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wo(e,t,s))}function Eo(e,t,r,n,s){if(Ds(r)){var a=!0;Ps(t)}else a=!1;if(Ia(t,s),null===t.stateNode)Vo(e,t),ao(t,r,n),oo(t,r,n,s),n=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=r.contextType;"object"===typeof c&&null!==c?c=ka(c):c=Ts(t,c=Ds(r)?ks:As.current);var d=r.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==n||l!==c)&&io(t,i,n,c),Ma=!1;var h=t.memoizedState;i.state=h,Ha(t,n,i,s),l=t.memoizedState,o!==n||h!==l||Is.current||Ma?("function"===typeof d&&(ro(t,r,d,n),l=t.memoizedState),(o=Ma||so(t,r,o,n,h,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),i.props=n,i.state=l,i.context=c,n=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,La(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(l=r.contextType)&&null!==l?l=ka(l):l=Ts(t,l=Ds(r)?ks:As.current);var m=r.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||h!==l)&&io(t,i,n,l),Ma=!1,h=t.memoizedState,i.state=h,Ha(t,n,i,s);var p=t.memoizedState;o!==u||h!==p||Is.current||Ma?("function"===typeof m&&(ro(t,r,m,n),p=t.memoizedState),(c=Ma||so(t,r,c,n,h,p,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(n,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),i.props=n,i.state=p,i.context=l,n=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Ao(e,t,r,n,a,s)}function Ao(e,t,r,n,s,a){Co(e,t);var i=0!==(128&t.flags);if(!n&&!i)return s&&Ls(t,r,!1),Wo(e,t,a);n=t.stateNode,bo.current=t;var o=i&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&i?(t.child=va(t,e.child,null,a),t.child=va(t,null,o,a)):vo(e,t,o,a),t.memoizedState=n.state,s&&Ls(t,r,!0),t.child}function Io(e){var t=e.stateNode;t.pendingContext?Os(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Os(0,t.context,!1),Qa(e,t.containerInfo)}function ko(e,t,r,n,s){return ma(),pa(s),t.flags|=256,vo(e,t,r,n),t.child}var To,Do,Ro,Oo,Mo={dehydrated:null,treeContext:null,retryLane:0};function Po(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lo(e,t,r){var n,s=t.pendingProps,i=$a.current,o=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&i)),n?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ss($a,1&i),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Pc(l,s,0,null),e=Mc(e,s,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Po(r),t.memoizedState=Mo,e):Bo(t,l));if(null!==(i=e.memoizedState)&&null!==(n=i.dehydrated))return function(e,t,r,n,s,i,o){if(r)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,n=co(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Pc({mode:"visible",children:n.children},s,0,null),(i=Mc(i,s,o,null)).flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,0!==(1&t.mode)&&va(t,e.child,null,o),t.child.memoizedState=Po(o),t.memoizedState=Mo,i);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===s.data){if(n=s.nextSibling&&s.nextSibling.dataset)var l=n.dgst;return n=l,Fo(e,t,o,n=co(i=Error(a(419)),n,void 0))}if(l=0!==(o&e.childLanes),yo||l){if(null!==(n=Il)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(n.suspendedLanes|o))?0:s)&&s!==i.retryLane&&(i.retryLane=s,Oa(e,s),rc(n,e,s,-1))}return fc(),Fo(e,t,o,n=co(Error(a(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,na=cs(s.nextSibling),ra=t,sa=!0,aa=null,null!==e&&(Ys[Xs++]=Ks,Ys[Xs++]=Zs,Ys[Xs++]=Qs,Ks=e.id,Zs=e.overflow,Qs=t),t=Bo(t,n.children),t.flags|=4096,t)}(e,t,l,s,n,i,r);if(o){o=s.fallback,l=t.mode,n=(i=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==i?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Rc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==n?o=Rc(n,o):(o=Mc(o,l,r,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Po(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=Mo,s}return e=(o=e.child).sibling,s=Rc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=r),s.return=t,s.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Bo(e,t){return(t=Pc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,r,n){return null!==n&&pa(n),va(t,e.child,null,r),(e=Bo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Aa(e.return,t,r)}function zo(e,t,r,n,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function Ho(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(vo(e,t,n.children,r),0!==(2&(n=$a.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,r,t);else if(19===e.tag)Uo(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ss($a,n),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;null!==r;)null!==(e=r.alternate)&&null===ei(e)&&(s=r),r=r.sibling;null===(r=s)?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),zo(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ei(e)){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}zo(t,!0,r,null,a);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Pl|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(r=Rc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Rc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function qo(e,t){if(!sa)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;null!==s;)r|=s.lanes|s.childLanes,n|=14680064&s.subtreeFlags,n|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Yo(e,t,r){var n=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return Ds(t.type)&&Rs(),Go(t),null;case 3:return n=t.stateNode,Ka(),Cs(Is),Cs(As),ri(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ua(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ic(aa),aa=null))),Do(e,t),Go(t),null;case 5:Ja(t);var s=Xa(Ya.current);if(r=t.type,null!==e&&null!=t.stateNode)Ro(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(a(166));return Go(t),null}if(e=Xa(qa.current),ua(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[hs]=t,n[ms]=i,e=0!==(1&t.mode),r){case"dialog":Fn("cancel",n),Fn("close",n);break;case"iframe":case"object":case"embed":Fn("load",n);break;case"video":case"audio":for(s=0;s<Mn.length;s++)Fn(Mn[s],n);break;case"source":Fn("error",n);break;case"img":case"image":case"link":Fn("error",n),Fn("load",n);break;case"details":Fn("toggle",n);break;case"input":K(n,i),Fn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Fn("invalid",n);break;case"textarea":se(n,i),Fn("invalid",n)}for(var l in be(r,i),s=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==i.suppressHydrationWarning&&Jn(n.textContent,c,e),s=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Jn(n.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fn("scroll",n)}switch(r){case"input":G(n),$(n,i,!0);break;case"textarea":G(n),ie(n);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(n.onclick=$n)}n=s,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[hs]=t,e[ms]=n,To(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(r,n),r){case"dialog":Fn("cancel",e),Fn("close",e),s=n;break;case"iframe":case"object":case"embed":Fn("load",e),s=n;break;case"video":case"audio":for(s=0;s<Mn.length;s++)Fn(Mn[s],e);s=n;break;case"source":Fn("error",e),s=n;break;case"img":case"image":case"link":Fn("error",e),Fn("load",e),s=n;break;case"details":Fn("toggle",e),s=n;break;case"input":K(e,n),s=Q(e,n),Fn("invalid",e);break;case"option":default:s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=L({},n,{value:void 0}),Fn("invalid",e);break;case"textarea":se(e,n),s=ne(e,n),Fn("invalid",e)}for(i in be(r,s),c=s)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?xe(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==r||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Fn("scroll",e):null!=d&&y(e,i,d,l))}switch(r){case"input":G(e),$(e,n,!1);break;case"textarea":G(e),ie(e);break;case"option":null!=n.value&&e.setAttribute("value",""+W(n.value));break;case"select":e.multiple=!!n.multiple,null!=(i=n.value)?re(e,!!n.multiple,i,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=$n)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Oo(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(a(166));if(r=Xa(Ya.current),Xa(qa.current),ua(t)){if(n=t.stateNode,r=t.memoizedProps,n[hs]=t,(i=n.nodeValue!==r)&&null!==(e=ra))switch(e.tag){case 3:Jn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jn(n.nodeValue,r,0!==(1&e.mode))}i&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[hs]=t,t.stateNode=n}return Go(t),null;case 13:if(Cs($a),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(sa&&null!==na&&0!==(1&t.mode)&&0===(128&t.flags))ha(),ma(),t.flags|=98560,i=!1;else if(i=ua(t),null!==n&&null!==n.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[hs]=t}else ma(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),i=!1}else null!==aa&&(ic(aa),aa=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&$a.current)?0===Ol&&(Ol=3):fc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Ka(),Do(e,t),null===e&&Hn(t.stateNode.containerInfo),Go(t),null;case 10:return Ea(t.type._context),Go(t),null;case 19:if(Cs($a),null===(i=t.memoizedState))return Go(t),null;if(n=0!==(128&t.flags),null===(l=i.rendering))if(n)qo(i,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,qo(i,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(i=r).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ss($a,1&$a.current|2),t.child}e=e.sibling}null!==i.tail&&Ze()>Hl&&(t.flags|=128,n=!0,qo(i,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ei(l))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),qo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!sa)return Go(t),null}else 2*Ze()-i.renderingStartTime>Hl&&1073741824!==r&&(t.flags|=128,n=!0,qo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=i.last)?r.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ze(),t.sibling=null,r=$a.current,Ss($a,n?1&r|2:1&r),t):(Go(t),null);case 22:case 23:return uc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Xo(e,t){switch(ta(t),t.tag){case 1:return Ds(t.type)&&Rs(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ka(),Cs(Is),Cs(As),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ja(t),null;case 13:if(Cs($a),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ma()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Cs($a),null;case 4:return Ka(),null;case 10:return Ea(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}To=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Do=function(){},Ro=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Xa(qa.current);var a,i=null;switch(r){case"input":s=Q(e,s),n=Q(e,n),i=[];break;case"select":s=L({},s,{value:void 0}),n=L({},n,{value:void 0}),i=[];break;case"textarea":s=ne(e,s),n=ne(e,n),i=[];break;default:"function"!==typeof s.onClick&&"function"===typeof n.onClick&&(e.onclick=$n)}for(d in be(r,n),r=null,s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&null!=s[d])if("style"===d){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=null!=s?s[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Fn("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Oo=function(e,t,r,n){r!==n&&(t.flags|=4)};var Qo=!1,Ko=!1,Zo="function"===typeof WeakSet?WeakSet:Set,Jo=null;function $o(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){_c(e,t,n)}else r.current=null}function el(e,t,r){try{r()}catch(n){_c(e,t,n)}}var tl=!1;function rl(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,void 0!==a&&el(t,r,a)}s=s.next}while(s!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function sl(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[ms],delete t[fs],delete t[xs],delete t[gs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=$n));else if(4!==n&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var dl=null,ul=!1;function hl(e,t,r){for(r=r.child;null!==r;)ml(e,t,r),r=r.sibling}function ml(e,t,r){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(st,r)}catch(o){}switch(r.tag){case 5:Ko||$o(r,t);case 6:var n=dl,s=ul;dl=null,hl(e,t,r),ul=s,null!==(dl=n)&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):dl.removeChild(r.stateNode));break;case 18:null!==dl&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?ls(e.parentNode,r):1===e.nodeType&&ls(e,r),Ht(e)):ls(dl,r.stateNode));break;case 4:n=dl,s=ul,dl=r.stateNode.containerInfo,ul=!0,hl(e,t,r),dl=n,ul=s;break;case 0:case 11:case 14:case 15:if(!Ko&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){s=n=n.next;do{var a=s,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&el(r,t,i),s=s.next}while(s!==n)}hl(e,t,r);break;case 1:if(!Ko&&($o(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){_c(r,t,o)}hl(e,t,r);break;case 21:hl(e,t,r);break;case 22:1&r.mode?(Ko=(n=Ko)||null!==r.memoizedState,hl(e,t,r),Ko=n):hl(e,t,r);break;default:hl(e,t,r)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Zo),t.forEach(function(t){var n=Ac.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function fl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(a(160));ml(i,o,s),dl=null,ul=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(d){_c(s,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)xl(t,e),t=t.sibling}function xl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),gl(e),4&n){try{rl(3,e,e.return),nl(3,e)}catch(x){_c(e,e.return,x)}try{rl(5,e,e.return)}catch(x){_c(e,e.return,x)}}break;case 1:fl(t,e),gl(e),512&n&&null!==r&&$o(r,r.return);break;case 5:if(fl(t,e),gl(e),512&n&&null!==r&&$o(r,r.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(x){_c(e,e.return,x)}}if(4&n&&null!=(s=e.stateNode)){var i=e.memoizedProps,o=null!==r?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Z(s,i),ye(l,o);var d=ye(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?xe(s,h):"dangerouslySetInnerHTML"===u?ue(s,h):"children"===u?he(s,h):y(s,u,h,d)}switch(l){case"input":J(s,i);break;case"textarea":ae(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?re(s,!!i.multiple,p,!1):m!==!!i.multiple&&(null!=i.defaultValue?re(s,!!i.multiple,i.defaultValue,!0):re(s,!!i.multiple,i.multiple?[]:"",!1))}s[ms]=i}catch(x){_c(e,e.return,x)}}break;case 6:if(fl(t,e),gl(e),4&n){if(null===e.stateNode)throw Error(a(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(x){_c(e,e.return,x)}}break;case 3:if(fl(t,e),gl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(x){_c(e,e.return,x)}break;case 4:default:fl(t,e),gl(e);break;case 13:fl(t,e),gl(e),8192&(s=e.child).flags&&(i=null!==s.memoizedState,s.stateNode.isHidden=i,!i||null!==s.alternate&&null!==s.alternate.memoizedState||(zl=Ze())),4&n&&pl(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(Ko=(d=Ko)||u,fl(t,e),Ko=d):fl(t,e),gl(e),8192&n){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Jo=e,u=e.child;null!==u;){for(h=Jo=u;null!==Jo;){switch(p=(m=Jo).child,m.tag){case 0:case 11:case 14:case 15:rl(4,m,m.return);break;case 1:$o(m,m.return);var f=m.stateNode;if("function"===typeof f.componentWillUnmount){n=m,r=m.return;try{t=n,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(x){_c(n,r,x)}}break;case 5:$o(m,m.return);break;case 22:if(null!==m.memoizedState){wl(h);continue}}null!==p?(p.return=m,Jo=p):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{s=h.stateNode,d?"function"===typeof(i=s.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(x){_c(e,e.return,x)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(x){_c(e,e.return,x)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),gl(e),4&n&&pl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(il(r)){var n=r;break e}r=r.return}throw Error(a(160))}switch(n.tag){case 5:var s=n.stateNode;32&n.flags&&(he(s,""),n.flags&=-33),cl(e,ol(e),s);break;case 3:case 4:var i=n.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(a(161))}}catch(o){_c(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,r){Jo=e,yl(e,t,r)}function yl(e,t,r){for(var n=0!==(1&e.mode);null!==Jo;){var s=Jo,a=s.child;if(22===s.tag&&n){var i=null!==s.memoizedState||Qo;if(!i){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Ko;o=Qo;var c=Ko;if(Qo=i,(Ko=l)&&!c)for(Jo=s;null!==Jo;)l=(i=Jo).child,22===i.tag&&null!==i.memoizedState?Nl(s):null!==l?(l.return=i,Jo=l):Nl(s);for(;null!==a;)Jo=a,yl(a,t,r),a=a.sibling;Jo=s,Qo=o,Ko=c}vl(e)}else 0!==(8772&s.subtreeFlags)&&null!==a?(a.return=s,Jo=a):vl(e)}}function vl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ko||nl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Ko)if(null===r)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:to(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Va(t,i,n);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Va(t,o,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Ht(h)}}}break;default:throw Error(a(163))}Ko||512&t.flags&&sl(t)}catch(m){_c(t,t.return,m)}}if(t===e){Jo=null;break}if(null!==(r=t.sibling)){r.return=t.return,Jo=r;break}Jo=t.return}}function wl(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Jo=r;break}Jo=t.return}}function Nl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nl(4,t)}catch(l){_c(t,r,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var s=t.return;try{n.componentDidMount()}catch(l){_c(t,s,l)}}var a=t.return;try{sl(t)}catch(l){_c(t,a,l)}break;case 5:var i=t.return;try{sl(t)}catch(l){_c(t,i,l)}}}catch(l){_c(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var jl,_l=Math.ceil,Cl=v.ReactCurrentDispatcher,Sl=v.ReactCurrentOwner,El=v.ReactCurrentBatchConfig,Al=0,Il=null,kl=null,Tl=0,Dl=0,Rl=_s(0),Ol=0,Ml=null,Pl=0,Ll=0,Bl=0,Fl=null,Ul=null,zl=0,Hl=1/0,Vl=null,Wl=!1,ql=null,Gl=null,Yl=!1,Xl=null,Ql=0,Kl=0,Zl=null,Jl=-1,$l=0;function ec(){return 0!==(6&Al)?Ze():-1!==Jl?Jl:Jl=Ze()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Tl?Tl&-Tl:null!==fa.transition?(0===$l&&($l=ft()),$l):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function rc(e,t,r,n){if(50<Kl)throw Kl=0,Zl=null,Error(a(185));gt(e,r,n),0!==(2&Al)&&e===Il||(e===Il&&(0===(2&Al)&&(Ll|=r),4===Ol&&oc(e,Tl)),nc(e,n),1===r&&0===Al&&0===(1&t.mode)&&(Hl=Ze()+500,Fs&&Hs()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),o=1<<i,l=s[i];-1===l?0!==(o&r)&&0===(o&n)||(s[i]=mt(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var n=ht(e,e===Il?Tl:0);if(0===n)null!==r&&Xe(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Xe(r),1===t)0===e.tag?function(e){Fs=!0,zs(e)}(lc.bind(null,e)):zs(lc.bind(null,e)),is(function(){0===(6&Al)&&Hs()}),r=null;else{switch(vt(n)){case 1:r=$e;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Ic(r,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function sc(e,t){if(Jl=-1,$l=0,0!==(6&Al))throw Error(a(327));var r=e.callbackNode;if(Nc()&&e.callbackNode!==r)return null;var n=ht(e,e===Il?Tl:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=xc(e,n);else{t=n;var s=Al;Al|=2;var i=pc();for(Il===e&&Tl===t||(Vl=null,Hl=Ze()+500,hc(e,t));;)try{bc();break}catch(l){mc(e,l)}Sa(),Cl.current=i,Al=s,null!==kl?t=0:(Il=null,Tl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(s=pt(e))&&(n=s,t=ac(e,s))),1===t)throw r=Ml,hc(e,0),oc(e,n),nc(e,Ze()),r;if(6===t)oc(e,n);else{if(s=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!on(a(),s))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=xc(e,n))&&(0!==(i=pt(e))&&(n=i,t=ac(e,i))),1===t))throw r=Ml,hc(e,0),oc(e,n),nc(e,Ze()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Ul,Vl);break;case 3:if(oc(e,n),(130023424&n)===n&&10<(t=zl+500-Ze())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ns(wc.bind(null,e,Ul,Vl),t);break}wc(e,Ul,Vl);break;case 4:if(oc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-it(n);i=1<<o,(o=t[o])>s&&(s=o),n&=~i}if(n=s,10<(n=(120>(n=Ze()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*_l(n/1960))-n)){e.timeoutHandle=ns(wc.bind(null,e,Ul,Vl),n);break}wc(e,Ul,Vl);break;default:throw Error(a(329))}}}return nc(e,Ze()),e.callbackNode===r?sc.bind(null,e):null}function ac(e,t){var r=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=xc(e,t))&&(t=Ul,Ul=r,null!==t&&ic(t)),e}function ic(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~Bl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-it(t),n=1<<r;e[r]=-1,t&=~n}}function lc(e){if(0!==(6&Al))throw Error(a(327));Nc();var t=ht(e,0);if(0===(1&t))return nc(e,Ze()),null;var r=xc(e,t);if(0!==e.tag&&2===r){var n=pt(e);0!==n&&(t=n,r=ac(e,n))}if(1===r)throw r=Ml,hc(e,0),oc(e,t),nc(e,Ze()),r;if(6===r)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ul,Vl),nc(e,Ze()),null}function cc(e,t){var r=Al;Al|=1;try{return e(t)}finally{0===(Al=r)&&(Hl=Ze()+500,Fs&&Hs())}}function dc(e){null!==Xl&&0===Xl.tag&&0===(6&Al)&&Nc();var t=Al;Al|=1;var r=El.transition,n=yt;try{if(El.transition=null,yt=1,e)return e()}finally{yt=n,El.transition=r,0===(6&(Al=t))&&Hs()}}function uc(){Dl=Rl.current,Cs(Rl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ss(r)),null!==kl)for(r=kl.return;null!==r;){var n=r;switch(ta(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Rs();break;case 3:Ka(),Cs(Is),Cs(As),ri();break;case 5:Ja(n);break;case 4:Ka();break;case 13:case 19:Cs($a);break;case 10:Ea(n.type._context);break;case 22:case 23:uc()}r=r.return}if(Il=e,kl=e=Rc(e.current,null),Tl=Dl=t,Ol=0,Ml=null,Bl=Ll=Pl=0,Ul=Fl=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(n=(r=Ta[t]).interleaved)){r.interleaved=null;var s=n.next,a=r.pending;if(null!==a){var i=a.next;a.next=s,n.next=i}r.pending=n}Ta=null}return e}function mc(e,t){for(;;){var r=kl;try{if(Sa(),ni.current=Zi,ci){for(var n=ii.memoizedState;null!==n;){var s=n.queue;null!==s&&(s.pending=null),n=n.next}ci=!1}if(ai=0,li=oi=ii=null,di=!1,ui=0,Sl.current=null,null===r||null===r.return){Ol=1,Ml=t,kl=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Tl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=xo(o);if(null!==p){p.flags&=-257,go(p,o,l,0,t),1&p.mode&&fo(i,d,t),c=d;var f=(t=p).updateQueue;if(null===f){var x=new Set;x.add(c),t.updateQueue=x}else f.add(c);break e}if(0===(1&t)){fo(i,d,t),fc();break e}c=Error(a(426))}else if(sa&&1&l.mode){var g=xo(o);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),go(g,o,l,0,t),pa(lo(c,l));break e}}i=c=lo(c,l),4!==Ol&&(Ol=2),null===Fl?Fl=[i]:Fl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,za(i,mo(0,c,t));break e;case 1:l=c;var b=i.type,y=i.stateNode;if(0===(128&i.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Gl||!Gl.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t,za(i,po(i,l,t));break e}}i=i.return}while(null!==i)}vc(r)}catch(v){t=v,kl===r&&null!==r&&(kl=r=r.return);continue}break}}function pc(){var e=Cl.current;return Cl.current=Zi,null===e?Zi:e}function fc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Il||0===(268435455&Pl)&&0===(268435455&Ll)||oc(Il,Tl)}function xc(e,t){var r=Al;Al|=2;var n=pc();for(Il===e&&Tl===t||(Vl=null,hc(e,t));;)try{gc();break}catch(s){mc(e,s)}if(Sa(),Al=r,Cl.current=n,null!==kl)throw Error(a(261));return Il=null,Tl=0,Ol}function gc(){for(;null!==kl;)yc(kl)}function bc(){for(;null!==kl&&!Qe();)yc(kl)}function yc(e){var t=jl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?vc(e):kl=t,Sl.current=null}function vc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Yo(r,t,Dl)))return void(kl=r)}else{if(null!==(r=Xo(r,t)))return r.flags&=32767,void(kl=r);if(null===e)return Ol=6,void(kl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(kl=t);kl=t=e}while(null!==t);0===Ol&&(Ol=5)}function wc(e,t,r){var n=yt,s=El.transition;try{El.transition=null,yt=1,function(e,t,r,n){do{Nc()}while(null!==Xl);if(0!==(6&Al))throw Error(a(327));r=e.finishedWork;var s=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-it(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}(e,i),e===Il&&(kl=Il=null,Tl=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Yl||(Yl=!0,Ic(tt,function(){return Nc(),null})),i=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||i){i=El.transition,El.transition=null;var o=yt;yt=1;var l=Al;Al|=4,Sl.current=null,function(e,t){if(es=Wt,mn(e=hn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch(w){r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==r||0!==s&&3!==h.nodeType||(l=o+s),h!==i||0!==n&&3!==h.nodeType||(c=o+n),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===r&&++d===s&&(l=o),m===i&&++u===n&&(c=o),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ts={focusedElem:e,selectionRange:r},Wt=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var x=f.memoizedProps,g=f.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?x:to(t.type,x),g);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(a(163))}}catch(w){_c(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}f=tl,tl=!1}(e,r),xl(r,e),pn(ts),Wt=!!es,ts=es=null,e.current=r,bl(r,e,s),Ke(),Al=l,yt=o,El.transition=i}else e.current=r;if(Yl&&(Yl=!1,Xl=e,Ql=s),i=e.pendingLanes,0===i&&(Gl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nc(e,Ze()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Wl)throw Wl=!1,e=ql,ql=null,e;0!==(1&Ql)&&0!==e.tag&&Nc(),i=e.pendingLanes,0!==(1&i)?e===Zl?Kl++:(Kl=0,Zl=e):Kl=0,Hs()}(e,t,r,n)}finally{El.transition=s,yt=n}return null}function Nc(){if(null!==Xl){var e=vt(Ql),t=El.transition,r=yt;try{if(El.transition=null,yt=16>e?16:e,null===Xl)var n=!1;else{if(e=Xl,Xl=null,Ql=0,0!==(6&Al))throw Error(a(331));var s=Al;for(Al|=4,Jo=e.current;null!==Jo;){var i=Jo,o=i.child;if(0!==(16&Jo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Jo=d;null!==Jo;){var u=Jo;switch(u.tag){case 0:case 11:case 15:rl(8,u,i)}var h=u.child;if(null!==h)h.return=u,Jo=h;else for(;null!==Jo;){var m=(u=Jo).sibling,p=u.return;if(al(u),u===d){Jo=null;break}if(null!==m){m.return=p,Jo=m;break}Jo=p}}}var f=i.alternate;if(null!==f){var x=f.child;if(null!==x){f.child=null;do{var g=x.sibling;x.sibling=null,x=g}while(null!==x)}}Jo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(i=Jo).flags))switch(i.tag){case 0:case 11:case 15:rl(9,i,i.return)}var b=i.sibling;if(null!==b){b.return=i.return,Jo=b;break e}Jo=i.return}}var y=e.current;for(Jo=y;null!==Jo;){var v=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==v)v.return=o,Jo=v;else e:for(o=y;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(N){_c(l,l.return,N)}if(l===o){Jo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Jo=w;break e}Jo=l.return}}if(Al=s,Hs(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(st,e)}catch(N){}n=!0}return n}finally{yt=r,El.transition=t}}return!1}function jc(e,t,r){e=Fa(e,t=mo(0,t=lo(r,t),1),1),t=ec(),null!==e&&(gt(e,1,t),nc(e,t))}function _c(e,t,r){if(3===e.tag)jc(e,e,r);else for(;null!==t;){if(3===t.tag){jc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Gl||!Gl.has(n))){t=Fa(t,e=po(t,e=lo(r,e),1),1),e=ec(),null!==t&&(gt(t,1,e),nc(t,e));break}}t=t.return}}function Cc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Il===e&&(Tl&r)===r&&(4===Ol||3===Ol&&(130023424&Tl)===Tl&&500>Ze()-zl?hc(e,0):Bl|=r),nc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var r=ec();null!==(e=Oa(e,t))&&(gt(e,t,r),nc(e,r))}function Ec(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Sc(e,r)}function Ac(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;null!==s&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(a(314))}null!==n&&n.delete(t),Sc(e,r)}function Ic(e,t){return Ye(e,t)}function kc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,r,n){return new kc(e,t,r,n)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var r=e.alternate;return null===r?((r=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Oc(e,t,r,n,s,i){var o=2;if(n=e,"function"===typeof e)Dc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case j:return Mc(r.children,s,i,t);case _:o=8,s|=8;break;case C:return(e=Tc(12,r,t,2|s)).elementType=C,e.lanes=i,e;case I:return(e=Tc(13,r,t,s)).elementType=I,e.lanes=i,e;case k:return(e=Tc(19,r,t,s)).elementType=k,e.lanes=i,e;case R:return Pc(r,s,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case E:o=9;break e;case A:o=11;break e;case T:o=14;break e;case D:o=16,n=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Tc(o,r,t,s)).elementType=e,t.type=n,t.lanes=i,t}function Mc(e,t,r,n){return(e=Tc(7,e,n,t)).lanes=r,e}function Pc(e,t,r,n){return(e=Tc(22,e,n,t)).elementType=R,e.lanes=r,e.stateNode={isHidden:!1},e}function Lc(e,t,r){return(e=Tc(6,e,null,t)).lanes=r,e}function Bc(e,t,r){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xt(0),this.expirationTimes=xt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xt(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uc(e,t,r,n,s,a,i,o,l){return e=new Fc(e,t,r,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Tc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function zc(e){if(!e)return Es;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ds(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var r=e.type;if(Ds(r))return Ms(e,r,t)}return t}function Hc(e,t,r,n,s,a,i,o,l){return(e=Uc(r,n,!0,e,0,a,0,o,l)).context=zc(null),r=e.current,(a=Ba(n=ec(),s=tc(r))).callback=void 0!==t&&null!==t?t:null,Fa(r,a,s),e.current.lanes=s,gt(e,s,n),nc(e,n),e}function Vc(e,t,r,n){var s=t.current,a=ec(),i=tc(s);return r=zc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Ba(a,i)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Fa(s,t,i))&&(rc(e,s,i,a),Ua(e,s,i)),i}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Gc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}jl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Is.current)yo=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return yo=!1,function(e,t,r){switch(t.tag){case 3:Io(t),ma();break;case 5:Za(t);break;case 1:Ds(t.type)&&Ps(t);break;case 4:Qa(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Ss(Na,n._currentValue),n._currentValue=s;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ss($a,1&$a.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Lo(e,t,r):(Ss($a,1&$a.current),null!==(e=Wo(e,t,r))?e.sibling:null);Ss($a,1&$a.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return Ho(e,t,r);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ss($a,$a.current),n)break;return null;case 22:case 23:return t.lanes=0,_o(e,t,r)}return Wo(e,t,r)}(e,t,r);yo=0!==(131072&e.flags)}else yo=!1,sa&&0!==(1048576&t.flags)&&$s(t,Gs,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Vo(e,t),e=t.pendingProps;var s=Ts(t,As.current);Ia(t,r),s=fi(null,t,n,e,s,r);var i=xi();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ds(n)?(i=!0,Ps(t)):i=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Pa(t),s.updater=no,t.stateNode=s,s._reactInternals=t,oo(t,n,e,r),t=Ao(null,t,n,!0,i,r)):(t.tag=0,sa&&i&&ea(t),vo(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Vo(e,t),e=t.pendingProps,n=(s=n._init)(n._payload),t.type=n,s=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===T)return 14}return 2}(n),e=to(n,e),s){case 0:t=So(null,t,n,e,r);break e;case 1:t=Eo(null,t,n,e,r);break e;case 11:t=wo(null,t,n,e,r);break e;case 14:t=No(null,t,n,to(n.type,e),r);break e}throw Error(a(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,So(e,t,n,s=t.elementType===n?s:to(n,s),r);case 1:return n=t.type,s=t.pendingProps,Eo(e,t,n,s=t.elementType===n?s:to(n,s),r);case 3:e:{if(Io(t),null===e)throw Error(a(387));n=t.pendingProps,s=(i=t.memoizedState).element,La(e,t),Ha(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated){if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=ko(e,t,n,r,s=lo(Error(a(423)),t));break e}if(n!==s){t=ko(e,t,n,r,s=lo(Error(a(424)),t));break e}for(na=cs(t.stateNode.containerInfo.firstChild),ra=t,sa=!0,aa=null,r=wa(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ma(),n===s){t=Wo(e,t,r);break e}vo(e,t,n,r)}t=t.child}return t;case 5:return Za(t),null===e&&ca(t),n=t.type,s=t.pendingProps,i=null!==e?e.memoizedProps:null,o=s.children,rs(n,s)?o=null:null!==i&&rs(n,i)&&(t.flags|=32),Co(e,t),vo(e,t,o,r),t.child;case 6:return null===e&&ca(t),null;case 13:return Lo(e,t,r);case 4:return Qa(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=va(t,null,n,r):vo(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,wo(e,t,n,s=t.elementType===n?s:to(n,s),r);case 7:return vo(e,t,t.pendingProps,r),t.child;case 8:case 12:return vo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Ss(Na,n._currentValue),n._currentValue=o,null!==i)if(on(i.value,o)){if(i.children===s.children&&!Is.current){t=Wo(e,t,r);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===i.tag){(c=Ba(-1,r&-r)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,null!==(c=i.alternate)&&(c.lanes|=r),Aa(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),Aa(o,r,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}vo(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Ia(t,r),n=n(s=ka(s)),t.flags|=1,vo(e,t,n,r),t.child;case 14:return s=to(n=t.type,t.pendingProps),No(e,t,n,s=to(n.type,s),r);case 15:return jo(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:to(n,s),Vo(e,t),t.tag=1,Ds(n)?(e=!0,Ps(t)):e=!1,Ia(t,r),ao(t,n,s),oo(t,n,s,r),Ao(null,t,n,!0,e,r);case 19:return Ho(e,t,r);case 22:return _o(e,t,r)}throw Error(a(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function $c(e,t,r,n,s){var a=r._reactRootContainer;if(a){var i=a;if("function"===typeof s){var o=s;s=function(){var e=Wc(i);o.call(e)}}Vc(t,i,e,s)}else i=function(e,t,r,n,s){if(s){if("function"===typeof n){var a=n;n=function(){var e=Wc(i);a.call(e)}}var i=Hc(t,n,e,0,null,!1,0,"",Jc);return e._reactRootContainer=i,e[ps]=i.current,Hn(8===e.nodeType?e.parentNode:e),dc(),i}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof n){var o=n;n=function(){var e=Wc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[ps]=l.current,Hn(8===e.nodeType?e.parentNode:e),dc(function(){Vc(t,l,r,n)}),l}(r,t,e,s,n);return Wc(i)}Qc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Vc(e,t,null,null)},Qc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Vc(null,e,null,null)}),t[ps]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Rt.length&&0!==t&&t<Rt[r].priority;r++);Rt.splice(r,0,e),0===r&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(bt(t,1|r),nc(t,Ze()),0===(6&Al)&&(Hl=Ze()+500,Hs()))}break;case 13:dc(function(){var t=Oa(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}}),Gc(e,1)}},Nt=function(e){if(13===e.tag){var t=Oa(e,134217728);if(null!==t)rc(t,e,134217728,ec());Gc(e,134217728)}},jt=function(e){if(13===e.tag){var t=tc(e),r=Oa(e,t);if(null!==r)rc(r,e,t,ec());Gc(e,t)}},_t=function(){return yt},Ct=function(e,t){var r=yt;try{return yt=e,t()}finally{yt=r}},Ne=function(e,t,r){switch(t){case"input":if(J(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=ws(n);if(!s)throw Error(a(90));Y(n),J(n,s)}}}break;case"textarea":ae(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ae=cc,Ie=dc;var ed={usingClientEntryPoint:!1,Events:[ys,vs,ws,Se,Ee,cc]},td={findFiberByHostInstance:bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{st=nd.inject(rd),at=nd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(t))throw Error(a(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Kc(e))throw Error(a(299));var r=!1,n="",s=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Uc(e,1,!1,null,0,r,0,n,s),e[ps]=t.current,Hn(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,r){if(!Zc(t))throw Error(a(200));return $c(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Kc(e))throw Error(a(405));var n=null!=r&&r.hydratedSources||null,s=!1,i="",o=Yc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(s=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=Hc(t,null,e,1,null!=r?r:null,s,0,i,o),e[ps]=t.current,Hn(e),n)for(e=0;e<n.length;e++)s=(s=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Qc(t)},t.render=function(e,t,r){if(!Zc(t))throw Error(a(200));return $c(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc(function(){$c(null,null,e,!1,function(){e._reactRootContainer=null,e[ps]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Zc(r))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return $c(e,t,r,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,r)=>{"use strict";e.exports=r(234)},950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};r.r(e),r.d(e,{hasBrowserEnv:()=>Hr,hasStandardBrowserEnv:()=>Wr,hasStandardBrowserWebWorkerEnv:()=>qr,navigator:()=>Vr,origin:()=>Gr});var t=r(43),n=r(391);function s(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function o(e,t,r){return(t=i(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const d=["sri"],u=["page"],h=["page","matches"],m=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],p=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],f=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var x="popstate";function g(){return _(function(e,t){let{pathname:r,search:n,hash:s}=e.location;return w("",{pathname:r,search:n,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:N(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function b(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function y(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function v(e,t){return{usr:e.state,key:e.key,idx:t}}function w(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;return c(c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?j(t):t),{},{state:r,key:t&&t.key||n||Math.random().toString(36).substring(2,10)})}function N(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function j(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function _(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:s=document.defaultView,v5Compat:a=!1}=n,i=s.history,o="POP",l=null,d=u();function u(){return(i.state||{idx:null}).idx}function h(){o="POP";let e=u(),t=null==e?null:e-d;d=e,l&&l({action:o,location:p.location,delta:t})}function m(e){return C(e)}null==d&&(d=0,i.replaceState(c(c({},i.state),{},{idx:d}),""));let p={get action(){return o},get location(){return e(s,i)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(x,h),l=e,()=>{s.removeEventListener(x,h),l=null}},createHref:e=>t(s,e),createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let n=w(p.location,e,t);r&&r(n,e),d=u()+1;let c=v(n,d),h=p.createHref(n);try{i.pushState(c,"",h)}catch(m){if(m instanceof DOMException&&"DataCloneError"===m.name)throw m;s.location.assign(h)}a&&l&&l({action:o,location:p.location,delta:1})},replace:function(e,t){o="REPLACE";let n=w(p.location,e,t);r&&r(n,e),d=u();let s=v(n,d),c=p.createHref(n);i.replaceState(s,"",c),a&&l&&l({action:o,location:p.location,delta:0})},go:e=>i.go(e)};return p}function C(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="http://localhost";"undefined"!==typeof window&&(r="null"!==window.location.origin?window.location.origin:window.location.href),b(r,"No window.location.(origin|href) available to create URL");let n="string"===typeof e?e:N(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}new WeakMap;function S(e,t){return E(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function E(e,t,r,n){let s=H(("string"===typeof t?j(t):t).pathname||"/",r);if(null==s)return null;let a=A(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let i=null;for(let o=0;null==i&&o<a.length;++o){let e=z(s);i=B(a[o],e,n)}return i}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=function(e,a){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,o=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(n)&&i)return;b(l.relativePath.startsWith(n),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(n,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(n.length)}let c=K([n,l.relativePath]),d=r.concat(l);e.children&&e.children.length>0&&(b(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),A(e.children,t,d,c,i)),(null!=e.path||e.index)&&t.push({path:c,score:L(c,e.index),routesMeta:d})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!==(r=e.path)&&void 0!==r&&r.includes("?"))for(let n of I(e.path))a(e,t,!0,n);else a(e,t)}),t}function I(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(0===n.length)return s?[a,""]:[a];let i=I(n.join("/")),o=[];return o.push(...i.map(e=>""===e?a:[a,e].join("/"))),s&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var k=/^:[\w-]+$/,T=3,D=2,R=1,O=10,M=-2,P=e=>"*"===e;function L(e,t){let r=e.split("/"),n=r.length;return r.some(P)&&(n+=M),t&&(n+=D),r.filter(e=>!P(e)).reduce((e,t)=>e+(k.test(t)?T:""===t?R:O),n)}function B(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:n}=e,s={},a="/",i=[];for(let o=0;o<n.length;++o){let e=n[o],l=o===n.length-1,c="/"===a?t:t.slice(a.length)||"/",d=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&r&&!n[n.length-1].route.index&&(d=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),i.push({params:s,pathname:K([a,d.pathname]),pathnameBase:Z(K([a,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(a=K([a,d.pathnameBase]))}return i}function F(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=U(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((e,t,r)=>{let{paramName:n,isOptional:s}=t;if("*"===n){let e=o[r]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[r];return e[n]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:i,pattern:e}}function U(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];y("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function z(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return y(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function H(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}var V=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,W=e=>V.test(e);function q(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}function G(e,t,r,n){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(n),"].  Please separate it out to the `to.").concat(r,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function Y(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function X(e){let t=Y(e);return t.map((e,r)=>r===t.length-1?e.pathname:e.pathnameBase)}function Q(e,t,r){let n,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?n=j(e):(n=c({},e),b(!n.pathname||!n.pathname.includes("?"),G("?","pathname","search",n)),b(!n.pathname||!n.pathname.includes("#"),G("#","pathname","hash",n)),b(!n.search||!n.search.includes("#"),G("#","search","hash",n)));let a,i=""===e||""===n.pathname,o=i?"/":n.pathname;if(null==o)a=r;else{let e=t.length-1;if(!s&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:s="",hash:a=""}="string"===typeof e?j(e):e;if(n)if(W(n))t=n;else{if(n.includes("//")){let e=n;n=n.replace(/\/\/+/g,"/"),y(!1,"Pathnames cannot have embedded double slashes - normalizing ".concat(e," -> ").concat(n))}t=n.startsWith("/")?q(n.substring(1),"/"):q(n,r)}else t=r;return{pathname:t,search:J(s),hash:$(a)}}(n,a),d=o&&"/"!==o&&o.endsWith("/"),u=(i||"."===o)&&r.endsWith("/");return l.pathname.endsWith("/")||!d&&!u||(l.pathname+="/"),l}var K=e=>e.join("/").replace(/\/\/+/g,"/"),Z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),J=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",$=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function ee(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var te=["POST","PUT","PATCH","DELETE"],re=(new Set(te),["GET",...te]);new Set(re),Symbol("ResetLoaderData");var ne=t.createContext(null);ne.displayName="DataRouter";var se=t.createContext(null);se.displayName="DataRouterState";var ae=t.createContext(!1);var ie=t.createContext({isTransitioning:!1});ie.displayName="ViewTransition";var oe=t.createContext(new Map);oe.displayName="Fetchers";var le=t.createContext(null);le.displayName="Await";var ce=t.createContext(null);ce.displayName="Navigation";var de=t.createContext(null);de.displayName="Location";var ue=t.createContext({outlet:null,matches:[],isDataRoute:!1});ue.displayName="Route";var he=t.createContext(null);he.displayName="RouteError";function me(){return null!=t.useContext(de)}function pe(){return b(me(),"useLocation() may be used only in the context of a <Router> component."),t.useContext(de).location}var fe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xe(e){t.useContext(ce).static||t.useLayoutEffect(e)}function ge(){let{isDataRoute:e}=t.useContext(ue);return e?function(){let{router:e}=Ee("useNavigate"),r=Ie("useNavigate"),n=t.useRef(!1);xe(()=>{n.current=!0});let s=t.useCallback(async function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(n.current,fe),n.current&&("number"===typeof t?e.navigate(t):await e.navigate(t,c({fromRouteId:r},s)))},[e,r]);return s}():function(){b(me(),"useNavigate() may be used only in the context of a <Router> component.");let e=t.useContext(ne),{basename:r,navigator:n}=t.useContext(ce),{matches:s}=t.useContext(ue),{pathname:a}=pe(),i=JSON.stringify(X(s)),o=t.useRef(!1);xe(()=>{o.current=!0});let l=t.useCallback(function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(y(o.current,fe),!o.current)return;if("number"===typeof t)return void n.go(t);let l=Q(t,JSON.parse(i),a,"path"===s.relative);null==e&&"/"!==r&&(l.pathname="/"===l.pathname?r:K([r,l.pathname])),(s.replace?n.replace:n.push)(l,s.state,s)},[r,n,i,a,e]);return l}()}t.createContext(null);function be(){let{matches:e}=t.useContext(ue),r=e[e.length-1];return r?r.params:{}}function ye(e){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=t.useContext(ue),{pathname:s}=pe(),a=JSON.stringify(X(n));return t.useMemo(()=>Q(e,JSON.parse(a),s,"path"===r),[e,a,s,r])}function ve(e,r,n,s,a){b(me(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=t.useContext(ce),{matches:o}=t.useContext(ue),l=o[o.length-1],d=l?l.params:{},u=l?l.pathname:"/",h=l?l.pathnameBase:"/",m=l&&l.route;{let e=m&&m.path||"";De(u,!m||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,f=pe();if(r){var x;let e="string"===typeof r?j(r):r;b("/"===h||(null===(x=e.pathname)||void 0===x?void 0:x.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=f;let g=p.pathname||"/",v=g;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=S(e,{pathname:v});y(m||null!=w,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),y(null==w||void 0!==w[w.length-1].route.element||void 0!==w[w.length-1].route.Component||void 0!==w[w.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let N=Ce(w&&w.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:K([h,i.encodeLocation?i.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:K([h,i.encodeLocation?i.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),o,n,s,a);return r&&N?t.createElement(de.Provider,{value:{location:c({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},N):N}function we(){let e=ke(),r=ee(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=t.createElement(t.Fragment,null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",t.createElement("code",{style:i},"ErrorBoundary")," or"," ",t.createElement("code",{style:i},"errorElement")," prop on your route.")),t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},r),n?t.createElement("pre",{style:a},n):null,o)}var Ne=t.createElement(we,null),je=class extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?t.createElement(ue.Provider,{value:this.props.routeContext},t.createElement(he.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function _e(e){let{routeContext:r,match:n,children:s}=e,a=t.useContext(ne);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),t.createElement(ue.Provider,{value:r},s)}function Ce(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==r.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let a=e,i=null===n||void 0===n?void 0:n.errors;if(null!=i){let e=a.findIndex(e=>e.route.id&&void 0!==(null===i||void 0===i?void 0:i[e.route.id]));b(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(i).join(","))),a=a.slice(0,Math.min(a.length,e+1))}let o=!1,l=-1;if(n)for(let t=0;t<a.length;t++){let e=a[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=t),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){o=!0,a=l>=0?a.slice(0,l+1):[a[0]];break}}}let c=n&&s?(e,t)=>{var r,a;s(e,{location:n.location,params:null!==(r=null===(a=n.matches)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.params)&&void 0!==r?r:{},errorInfo:t})}:void 0;return a.reduceRight((e,s,d)=>{let u,h=!1,m=null,p=null;n&&(u=i&&s.route.id?i[s.route.id]:void 0,m=s.route.errorElement||Ne,o&&(l<0&&0===d?(De("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):l===d&&(h=!0,p=s.route.hydrateFallbackElement||null)));let f=r.concat(a.slice(0,d+1)),x=()=>{let r;return r=u?m:h?p:s.route.Component?t.createElement(s.route.Component,null):s.route.element?s.route.element:e,t.createElement(_e,{match:s,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:r})};return n&&(s.route.ErrorBoundary||s.route.errorElement||0===d)?t.createElement(je,{location:n.location,revalidation:n.revalidation,component:m,error:u,children:x(),routeContext:{outlet:null,matches:f,isDataRoute:!0},onError:c}):x()},null)}function Se(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Ee(e){let r=t.useContext(ne);return b(r,Se(e)),r}function Ae(e){let r=t.useContext(se);return b(r,Se(e)),r}function Ie(e){let r=function(e){let r=t.useContext(ue);return b(r,Se(e)),r}(e),n=r.matches[r.matches.length-1];return b(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function ke(){var e;let r=t.useContext(he),n=Ae("useRouteError"),s=Ie("useRouteError");return void 0!==r?r:null===(e=n.errors)||void 0===e?void 0:e[s]}var Te={};function De(e,t,r){t||Te[e]||(Te[e]=!0,y(!1,r))}var Re={};function Oe(e,t){e||Re[t]||(Re[t]=!0,console.warn(t))}t.memo(function(e){let{routes:t,future:r,state:n,unstable_onError:s}=e;return ve(t,void 0,n,s,r)});function Me(e){let{to:r,replace:n,state:s,relative:a}=e;b(me(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=t.useContext(ce);y(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=t.useContext(ue),{pathname:l}=pe(),c=ge(),d=Q(r,X(o),l,"path"===a),u=JSON.stringify(d);return t.useEffect(()=>{c(JSON.parse(u),{replace:n,state:s,relative:a})},[c,u,a,n,s]),null}function Pe(e){b(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Le(e){let{basename:r="/",children:n=null,location:s,navigationType:a="POP",navigator:i,static:o=!1}=e;b(!me(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=r.replace(/^\/*/,"/"),c=t.useMemo(()=>({basename:l,navigator:i,static:o,future:{}}),[l,i,o]);"string"===typeof s&&(s=j(s));let{pathname:d="/",search:u="",hash:h="",state:m=null,key:p="default"}=s,f=t.useMemo(()=>{let e=H(d,l);return null==e?null:{location:{pathname:e,search:u,hash:h,state:m,key:p},navigationType:a}},[l,d,u,h,m,p,a]);return y(null!=f,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(d).concat(u).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==f?null:t.createElement(ce.Provider,{value:c},t.createElement(de.Provider,{children:n,value:f}))}function Be(e){let{children:t,location:r}=e;return ve(Fe(t),r)}t.Component;function Fe(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return t.Children.forEach(e,(e,s)=>{if(!t.isValidElement(e))return;let a=[...r,s];if(e.type===t.Fragment)return void n.push.apply(n,Fe(e.props.children,a));b(e.type===Pe,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),b(!e.props.index||!e.props.children,"An index route cannot have child routes.");let i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=Fe(e.props.children,a)),n.push(i)}),n}var Ue="get",ze="application/x-www-form-urlencoded";function He(e){return null!=e&&"string"===typeof e.tagName}var Ve=null;var We=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qe(e){return null==e||We.has(e)?e:(y(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(ze,'"')),null)}function Ge(e,t){let r,n,s,a,i;if(He(o=e)&&"form"===o.tagName.toLowerCase()){let i=e.getAttribute("action");n=i?H(i,t):null,r=e.getAttribute("method")||Ue,s=qe(e.getAttribute("enctype"))||ze,a=new FormData(e)}else if(function(e){return He(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return He(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let i=e.form;if(null==i)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||i.getAttribute("action");if(n=o?H(o,t):null,r=e.getAttribute("formmethod")||i.getAttribute("method")||Ue,s=qe(e.getAttribute("formenctype"))||qe(i.getAttribute("enctype"))||ze,a=new FormData(i,e),!function(){if(null===Ve)try{new FormData(document.createElement("form"),0),Ve=!1}catch(e){Ve=!0}return Ve}()){let{name:t,type:r,value:n}=e;if("image"===r){let e=t?"".concat(t,"."):"";a.append("".concat(e,"x"),"0"),a.append("".concat(e,"y"),"0")}else t&&a.append(t,n)}}else{if(He(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Ue,n=null,s=ze,i=e}var o;return a&&"text/plain"===s&&(i=a,a=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:a,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Ye(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Xe(e,t,r){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.".concat(r):t&&"/"===H(n.pathname,t)?n.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(r):n.pathname="".concat(n.pathname.replace(/\/$/,""),".").concat(r),n}async function Qe(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ke(e){return null!=e&&"string"===typeof e.page}function Ze(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Je(e,t,r,n,s,a){let i=(e,t)=>!r[t]||e.route.id!==r[t].route.id,o=(e,t)=>{var n;return r[t].pathname!==e.pathname||(null===(n=r[t].route.path)||void 0===n?void 0:n.endsWith("*"))&&r[t].params["*"]!==e.params["*"]};return"assets"===a?t.filter((e,t)=>i(e,t)||o(e,t)):"data"===a?t.filter((t,a)=>{let l=n.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(i(t,a)||o(t,a))return!0;if(t.route.shouldRevalidate){var c;let n=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:(null===(c=r[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof n)return n}return!0}):[]}function $e(e,t){let{includeHydrateFallback:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=e.map(e=>{let n=t.routes[e.route.id];if(!n)return[];let s=[n.module];return n.clientActionModule&&(s=s.concat(n.clientActionModule)),n.clientLoaderModule&&(s=s.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(s=s.concat(n.hydrateFallbackModule)),n.imports&&(s=s.concat(n.imports)),s}).flat(1),[...new Set(n)];var n}function et(e,t){let r=new Set,n=new Set(t);return e.reduce((e,s)=>{if(t&&!Ke(s)&&"script"===s.as&&s.href&&n.has(s.href))return e;let a=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}(s));return r.has(a)||(r.add(a),e.push({key:a,link:s})),e},[])}function tt(e,t){return"lazy"===e.mode&&!0===t}function rt(){let e=t.useContext(ne);return Ye(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function nt(){let e=t.useContext(se);return Ye(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var st=t.createContext(void 0);function at(){let e=t.useContext(st);return Ye(e,"You must render this element inside a <HydratedRouter> element"),e}function it(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function ot(e,t,r){if(r&&!ut)return[e[0]];if(t){let r=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,r+1)}return e}st.displayName="FrameworkContext";function lt(e){let{page:r}=e,n=s(e,u),{router:a}=rt(),i=t.useMemo(()=>S(a.routes,r,a.basename),[a.routes,r,a.basename]);return i?t.createElement(dt,c({page:r,matches:i},n)):null}function ct(e){let{manifest:r,routeModules:n}=at(),[s,a]=t.useState([]);return t.useEffect(()=>{let t=!1;return async function(e,t,r){return et((await Promise.all(e.map(async e=>{let n=t.routes[e.route.id];if(n){let e=await Qe(n,r);return e.links?e.links():[]}return[]}))).flat(1).filter(Ze).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?c(c({},e),{},{rel:"prefetch",as:"style"}):c(c({},e),{},{rel:"prefetch"})))}(e,r,n).then(e=>{t||a(e)}),()=>{t=!0}},[e,r,n]),s}function dt(e){let{page:r,matches:n}=e,a=s(e,h),i=pe(),{manifest:o,routeModules:l}=at(),{basename:d}=rt(),{loaderData:u,matches:m}=nt(),p=t.useMemo(()=>Je(r,n,m,o,i,"data"),[r,n,m,o,i]),f=t.useMemo(()=>Je(r,n,m,o,i,"assets"),[r,n,m,o,i]),x=t.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let e=new Set,t=!1;if(n.forEach(r=>{var n;let s=o.routes[r.route.id];s&&s.hasLoader&&(!p.some(e=>e.route.id===r.route.id)&&r.route.id in u&&null!==(n=l[r.route.id])&&void 0!==n&&n.shouldRevalidate||s.hasClientLoader?t=!0:e.add(r.route.id))}),0===e.size)return[];let s=Xe(r,d,"data");return t&&e.size>0&&s.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[s.pathname+s.search]},[d,u,i,o,p,n,r,l]),g=t.useMemo(()=>$e(f,o),[f,o]),b=ct(f);return t.createElement(t.Fragment,null,x.map(e=>t.createElement("link",c({key:e,rel:"prefetch",as:"fetch",href:e},a))),g.map(e=>t.createElement("link",c({key:e,rel:"modulepreload",href:e},a))),b.map(e=>{let{key:r,link:n}=e;return t.createElement("link",c({key:r,nonce:a.nonce},n))}))}var ut=!1;function ht(e){let{manifest:r,serverHandoffString:n,isSpaMode:a,renderMeta:i,routeDiscovery:o,ssr:l}=at(),{router:u,static:h,staticContext:m}=rt(),{matches:p}=nt(),f=t.useContext(ae),x=tt(o,l);i&&(i.didRenderScripts=!0);let g=ot(p,null,a);t.useEffect(()=>{0},[]);let b=t.useMemo(()=>{var a;if(f)return null;let i=m?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",o=h?"".concat(null!==r.hmr&&void 0!==a&&a.runtime?"import ".concat(JSON.stringify(r.hmr.runtime),";"):"").concat(x?"":"import ".concat(JSON.stringify(r.url)),";\n").concat(g.map((e,t)=>{let n="route".concat(t),s=r.routes[e.route.id];Ye(s,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:a,clientLoaderModule:i,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=s,d=[...a?[{module:a,varName:"".concat(n,"_clientAction")}]:[],...i?[{module:i,varName:"".concat(n,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(n,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(n,"_HydrateFallback")}]:[],{module:c,varName:"".concat(n,"_main")}];return 1===d.length?"import * as ".concat(n," from ").concat(JSON.stringify(c),";"):[d.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(n," = {").concat(d.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(x?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:r}=e,n=s(e,d),a=new Set(t.state.matches.map(e=>e.route.id)),i=t.state.location.pathname.split("/").filter(Boolean),o=["/"];for(i.pop();i.length>0;)o.push("/".concat(i.join("/"))),i.pop();o.forEach(e=>{let r=S(t.routes,e,t.basename);r&&r.forEach(e=>a.add(e.route.id))});let l=[...a].reduce((e,t)=>Object.assign(e,{[t]:n.routes[t]}),{});return c(c({},n),{},{routes:l,sri:!!r||void 0})}(r,u),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(g.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(r.entry.module),");"):" ";return t.createElement(t.Fragment,null,t.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:i},type:void 0})),t.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:o},type:"module",async:!0})))},[]),y=ut||f?[]:(r.entry.imports.concat($e(g,r,{includeHydrateFallback:!0})),[...new Set(v)]);var v;let w="object"===typeof r.sri?r.sri:{};return Oe(!f,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),ut||f?null:t.createElement(t.Fragment,null,"object"===typeof r.sri?t.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}}):null,x?null:t.createElement("link",{rel:"modulepreload",href:r.url,crossOrigin:e.crossOrigin,integrity:w[r.url],suppressHydrationWarning:!0}),t.createElement("link",{rel:"modulepreload",href:r.entry.module,crossOrigin:e.crossOrigin,integrity:w[r.entry.module],suppressHydrationWarning:!0}),y.map(r=>t.createElement("link",{key:r,rel:"modulepreload",href:r,crossOrigin:e.crossOrigin,integrity:w[r],suppressHydrationWarning:!0})),b)}function mt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}t.Component;function pt(e){let{error:r,isOutsideRemixApp:n}=e;console.error(r);let s,a=t.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(ee(r))return t.createElement(ft,{title:"Unhandled Thrown Response!"},t.createElement("h1",{style:{fontSize:"24px"}},r.status," ",r.statusText),a);if(r instanceof Error)0;else{let e=null==r?"Unknown Error":"object"===typeof r&&"toString"in r?r.toString():JSON.stringify(r);new Error(e)}return t.createElement(ft,{title:"Application Error!",isOutsideRemixApp:n},t.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),t.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},s.stack),a)}function ft(e){var r;let{title:n,renderScripts:s,isOutsideRemixApp:a,children:i}=e,{routeModules:o}=at();return null!==o.root&&void 0!==r&&r.Layout&&!a?i:t.createElement("html",{lang:"en"},t.createElement("head",null,t.createElement("meta",{charSet:"utf-8"}),t.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),t.createElement("title",null,n)),t.createElement("body",null,t.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},i,s?t.createElement(ht,null):null)))}var xt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{xt&&(window.__reactRouterVersion="7.9.6")}catch(zd){}function gt(e){let{basename:r,children:n,window:s}=e,a=t.useRef();null==a.current&&(a.current=g({window:s,v5Compat:!0}));let i=a.current,[o,l]=t.useState({action:i.action,location:i.location}),c=t.useCallback(e=>{t.startTransition(()=>l(e))},[l]);return t.useLayoutEffect(()=>i.listen(c),[i,c]),t.createElement(Le,{basename:r,children:n,location:o.location,navigationType:o.action,navigator:i})}var bt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yt=t.forwardRef(function(e,r){let n,{onClick:a,discover:i="render",prefetch:o="none",relative:l,reloadDocument:d,replace:u,state:h,target:p,to:f,preventScrollReset:x,viewTransition:g}=e,v=s(e,m),{basename:w}=t.useContext(ce),j="string"===typeof f&&bt.test(f),_=!1;if("string"===typeof f&&j&&(n=f,xt))try{let e=new URL(window.location.href),t=f.startsWith("//")?new URL(e.protocol+f):new URL(f),r=H(t.pathname,w);t.origin===e.origin&&null!=r?f=r+t.search+t.hash:_=!0}catch(zd){y(!1,'<Link to="'.concat(f,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let C=function(e){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(me(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=t.useContext(ce),{hash:a,pathname:i,search:o}=ye(e,{relative:r}),l=i;return"/"!==n&&(l="/"===i?n:K([n,i])),s.createHref({pathname:l,search:o,hash:a})}(f,{relative:l}),[S,E,A]=function(e,r){let n=t.useContext(st),[s,a]=t.useState(!1),[i,o]=t.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=r,m=t.useRef(null);t.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return m.current&&e.observe(m.current),()=>{e.disconnect()}}},[e]),t.useEffect(()=>{if(s){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[s]);let p=()=>{a(!0)},f=()=>{a(!1),o(!1)};return n?"intent"!==e?[i,m,{}]:[i,m,{onFocus:it(l,p),onBlur:it(c,f),onMouseEnter:it(d,p),onMouseLeave:it(u,f),onTouchStart:it(h,p)}]:[!1,m,{}]}(o,v),I=function(e){let{target:r,replace:n,state:s,preventScrollReset:a,relative:i,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=ge(),c=pe(),d=ye(e,{relative:i});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let r=void 0!==n?n:N(c)===N(d);l(e,{replace:r,state:s,preventScrollReset:a,relative:i,viewTransition:o})}},[c,l,d,n,s,r,e,a,i,o])}(f,{replace:u,state:h,target:p,preventScrollReset:x,relative:l,viewTransition:g});let k=t.createElement("a",c(c(c({},v),A),{},{href:n||C,onClick:_||d?a:function(e){a&&a(e),e.defaultPrevented||I(e)},ref:mt(r,E),target:p,"data-discover":j||"render"!==i?void 0:"true"}));return S&&!j?t.createElement(t.Fragment,null,k,t.createElement(lt,{page:C})):k});yt.displayName="Link";var vt=t.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:a=!1,className:i="",end:o=!1,style:l,to:d,viewTransition:u,children:h}=e,m=s(e,p),f=ye(d,{relative:m.relative}),x=pe(),g=t.useContext(se),{navigator:y,basename:v}=t.useContext(ce),w=null!=g&&function(e){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.useContext(ie);b(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=jt("useViewTransitionState"),a=ye(e,{relative:r});if(!n.isTransitioning)return!1;let i=H(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=H(n.nextLocation.pathname,s)||n.nextLocation.pathname;return null!=F(a.pathname,o)||null!=F(a.pathname,i)}(f)&&!0===u,N=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,j=x.pathname,_=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;a||(j=j.toLowerCase(),_=_?_.toLowerCase():null,N=N.toLowerCase()),_&&v&&(_=H(_,v)||_);const C="/"!==N&&N.endsWith("/")?N.length-1:N.length;let S,E=j===N||!o&&j.startsWith(N)&&"/"===j.charAt(C),A=null!=_&&(_===N||!o&&_.startsWith(N)&&"/"===_.charAt(N.length)),I={isActive:E,isPending:A,isTransitioning:w},k=E?n:void 0;S="function"===typeof i?i(I):[i,E?"active":null,A?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let T="function"===typeof l?l(I):l;return t.createElement(yt,c(c({},m),{},{"aria-current":k,className:S,ref:r,style:T,to:d,viewTransition:u}),"function"===typeof h?h(I):h)});vt.displayName="NavLink";var wt=t.forwardRef((e,r)=>{let{discover:n="render",fetcherKey:a,navigate:i,reloadDocument:o,replace:l,state:d,method:u=Ue,action:h,onSubmit:m,relative:p,preventScrollReset:x,viewTransition:g}=e,y=s(e,f),v=St(),w=function(e){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=t.useContext(ce),s=t.useContext(ue);b(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),i=c({},ye(e||".",{relative:r})),o=pe();if(null==e){i.search=o.search;let e=new URLSearchParams(i.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let r=e.toString();i.search=r?"?".concat(r):""}}e&&"."!==e||!a.route.index||(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(i.pathname="/"===i.pathname?n:K([n,i.pathname]));return N(i)}(h,{relative:p}),j="get"===u.toLowerCase()?"get":"post",_="string"===typeof h&&bt.test(h);return t.createElement("form",c(c({ref:r,method:j,action:w,onSubmit:o?m:e=>{if(m&&m(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,r=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||u;v(t||e.currentTarget,{fetcherKey:a,method:r,navigate:i,replace:l,state:d,relative:p,preventScrollReset:x,viewTransition:g})}},y),{},{"data-discover":_||"render"!==n?void 0:"true"}))});function Nt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function jt(e){let r=t.useContext(ne);return b(r,Nt(e)),r}wt.displayName="Form";var _t=0,Ct=()=>"__".concat(String(++_t),"__");function St(){let{router:e}=jt("useSubmit"),{basename:r}=t.useContext(ce),n=Ie("useRouteId");return t.useCallback(async function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:a,method:i,encType:o,formData:l,body:c}=Ge(t,r);if(!1===s.navigate){let t=s.fetcherKey||Ct();await e.fetch(t,n,s.action||a,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||i,formEncType:s.encType||o,flushSync:s.flushSync})}else await e.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||i,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,r,n])}var Et=r(579);function At(){const e=ge(),[r,n]=(0,t.useState)(""),[s,a]=(0,t.useState)(""),[i,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)("");return(0,Et.jsx)("div",{className:"min-h-screen bg-corp-bg-page flex items-center justify-center p-4 font-montserrat",children:(0,Et.jsxs)("div",{className:"corp-card shadow-corp-lg w-full max-w-md",children:[(0,Et.jsxs)("div",{className:"text-center mb-8",children:[(0,Et.jsx)("div",{className:"mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-corp-primary",children:(0,Et.jsx)("span",{className:"text-4xl font-bold text-white",children:"R"})}),(0,Et.jsx)("h1",{className:"text-3xl font-bold text-corp-text-dark",children:"Rental Hub"}),(0,Et.jsx)("p",{className:"text-sm text-corp-text-muted mt-2",children:"\u0423\u0432\u0456\u0439\u0434\u0456\u0442\u044c \u0443 \u0441\u0432\u0456\u0439 \u0430\u043a\u0430\u0443\u043d\u0442"})]}),(0,Et.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),c(""),o(!0);try{const t=await fetch("".concat("https://backrentalhub.farforrent.com.ua","/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:s})}),n=await t.json();if(!t.ok)throw new Error(n.detail||"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0456\u0457");localStorage.setItem("token",n.access_token),localStorage.setItem("user",JSON.stringify(n.user)),e("/dashboard"),window.location.reload()}catch(n){c(n.message||"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0456\u0457")}finally{o(!1)}},className:"space-y-5",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"email",className:"text-xs text-corp-text-muted uppercase tracking-wide mb-2 block font-medium",children:"Email"}),(0,Et.jsx)("input",{id:"email",type:"email",required:!0,value:r,onChange:e=>n(e.target.value),className:"corp-input",placeholder:"your@email.com",autoComplete:"email"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"password",className:"text-xs text-corp-text-muted uppercase tracking-wide mb-2 block font-medium",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),(0,Et.jsx)("input",{id:"password",type:"password",required:!0,value:s,onChange:e=>a(e.target.value),className:"corp-input",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",autoComplete:"current-password"})]}),l&&(0,Et.jsxs)("div",{className:"corp-badge corp-badge-error p-3 text-center w-full",children:["\u26a0\ufe0f ",l]}),(0,Et.jsx)("button",{type:"submit",disabled:i,className:"w-full corp-btn corp-btn-primary py-3 text-base disabled:opacity-50",children:i?"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f...":"\u0423\u0432\u0456\u0439\u0442\u0438"})]}),(0,Et.jsxs)("div",{className:"mt-8 text-center text-xs text-corp-text-muted",children:[(0,Et.jsx)("p",{className:"mb-2",children:"\u0414\u043b\u044f \u043e\u0442\u0440\u0438\u043c\u0430\u043d\u043d\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0443 \u0437\u0432\u0435\u0440\u043d\u0456\u0442\u044c\u0441\u044f \u0434\u043e \u0430\u0434\u043c\u0456\u043d\u0456\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430"}),(0,Et.jsxs)("p",{children:["\xa9 2024 Rental Hub \u2022 Powered by ",(0,Et.jsx)("span",{className:"text-corp-primary font-semibold",children:"FarforRent"})]})]})]})})}function It(e){var r,n;let{cabinetName:s="\u041a\u0430\u0431\u0456\u043d\u0435\u0442 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430",showBackButton:a=!1,onBackClick:i}=e;const[o,l]=(0,t.useState)(null),c=ge();(0,t.useEffect)(()=>{const e=localStorage.getItem("user");e&&l(JSON.parse(e))},[]);return(0,Et.jsx)("header",{className:"corp-header sticky top-0 z-30",children:(0,Et.jsxs)("div",{className:"mx-auto max-w-7xl flex items-center gap-4",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Et.jsx)("div",{className:"h-10 w-10 rounded-full bg-corp-primary grid place-content-center text-white font-bold text-sm",children:"RH"}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-lg font-semibold text-corp-text-dark",children:"Rental Hub"}),(0,Et.jsx)("p",{className:"text-xs text-corp-text-muted",children:s})]})]}),(0,Et.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-corp-bg-light rounded-corp border border-corp-border",children:[(0,Et.jsx)("div",{className:"h-8 w-8 rounded-full bg-corp-gold grid place-content-center text-white text-xs font-semibold",children:(null===o||void 0===o||null===(r=o.email)||void 0===r||null===(n=r[0])||void 0===n?void 0:n.toUpperCase())||"U"}),(0,Et.jsxs)("div",{className:"text-sm",children:[(0,Et.jsx)("div",{className:"font-medium text-corp-text-dark",children:(null===o||void 0===o?void 0:o.email)||"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447"}),(0,Et.jsx)("div",{className:"text-xs text-corp-text-muted",children:"admin"===(null===o||void 0===o?void 0:o.role)?"\u0410\u0434\u043c\u0456\u043d\u0456\u0441\u0442\u0440\u0430\u0442\u043e\u0440":"manager"===(null===o||void 0===o?void 0:o.role)?"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440":"\u0420\u0435\u043a\u0432\u0456\u0437\u0438\u0442\u043e\u0440"})]})]}),a&&(0,Et.jsx)("button",{className:"corp-btn corp-btn-secondary",onClick:()=>{i?i():c("/manager")},children:"\u2190 \u041d\u0430\u0437\u0430\u0434 \u0434\u043e \u0434\u0430\u0448\u0431\u043e\u0440\u0434\u0443"}),(0,Et.jsx)("button",{className:"corp-btn corp-btn-secondary text-corp-error hover:bg-corp-error hover:text-white",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),c("/login")},children:"\u0412\u0438\u0445\u0456\u0434"})]})]})})}const kt="https://backrentalhub.farforrent.com.ua";function Tt(){const[e,r]=(0,t.useState)([]),[n,s]=(0,t.useState)([]),[a,i]=(0,t.useState)([]),[o,l]=(0,t.useState)(!0),[c,d]=(0,t.useState)({revenue:0,deposits:0}),[u,h]=(0,t.useState)({repair:0}),[m,p]=(0,t.useState)(!1),[f,x]=(0,t.useState)(!0),[g,b]=(0,t.useState)(""),[y,v]=(0,t.useState)("\u0412\u0441\u0456"),[w,N]=(0,t.useState)(null),j=ge();(0,t.useEffect)(()=>{const e=localStorage.getItem("user");e&&N(JSON.parse(e))},[]);const _=async(e,t)=>{const r=prompt("\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f ".concat(t,"?\n\n\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0432\u0456\u0434\u043c\u043e\u0432\u0438 \u043a\u043b\u0456\u0454\u043d\u0442\u0430 (\u043e\u043f\u0446\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u043e):"));if(null!==r&&confirm("\u26a0\ufe0f \u041a\u043b\u0456\u0454\u043d\u0442 \u0432\u0456\u0434\u043c\u043e\u0432\u0438\u0432\u0441\u044f \u0432\u0456\u0434 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f ".concat(t,"?\n\n\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0431\u0443\u0434\u0435 \u0441\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u043e \u0456 \u0442\u043e\u0432\u0430\u0440\u0438 \u0440\u043e\u0437\u043c\u043e\u0440\u043e\u0436\u0435\u043d\u043e.")))try{const t=await fetch("".concat(kt,"/api/decor-orders/").concat(e,"/cancel-by-client"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:r||"\u041a\u043b\u0456\u0454\u043d\u0442 \u0432\u0456\u0434\u043c\u043e\u0432\u0438\u0432\u0441\u044f \u0431\u0435\u0437 \u043f\u043e\u044f\u0441\u043d\u0435\u043d\u044c"})});if(t.ok)alert("\u2705 \u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0441\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u043e. \u0422\u043e\u0432\u0430\u0440\u0438 \u0440\u043e\u0437\u043c\u043e\u0440\u043e\u0436\u0435\u043d\u043e."),C();else{const e=await t.json();alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430: ".concat(e.detail||"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0441\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"))}}catch(n){console.error("Error cancelling order:",n),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430: ".concat(n.message))}},C=()=>{console.log("[Dashboard] \ud83d\udcca Loading orders for today..."),fetch("".concat(kt,"/api/orders?status=awaiting_customer"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{var t;console.log("[Dashboard] Orders awaiting confirmation:",(null===(t=e.orders)||void 0===t?void 0:t.length)||0),r(e.orders||[])}).catch(e=>console.error("[Dashboard] Error loading orders:",e)),fetch("".concat(kt,"/api/decor-orders?status=processing,ready_for_issue,issued,on_rent,shipped,delivered,returning"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{s(e.orders||[]),l(!1)}).catch(e=>{console.error("[Dashboard] Error loading decor orders:",e),l(!1)}),fetch("".concat(kt,"/api/issue-cards"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{console.log("[Dashboard] Issue cards:",e.length),i(e)}).catch(e=>console.error("[Dashboard] Error loading issue cards:",e)),fetch("".concat(kt,"/api/manager/finance/summary"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{console.log("[Dashboard] Finance summary:",e),d({revenue:e.total_revenue||0,deposits:e.deposits_count||0})}).catch(e=>console.error("[Dashboard] Error loading finance:",e))};(0,t.useEffect)(()=>{C(),fetch("".concat(kt,"/api/product-cleaning/stats/summary"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{console.log("[Dashboard] Cleaning stats:",e),h({repair:e.repair||0})}).catch(e=>console.error("[Dashboard] Error loading cleaning stats:",e))},[]);const S=e,E=e,A=(n.filter(e=>"processing"===e.status),n.filter(e=>"processing"===e.status||"ready"===e.status||"ready_for_issue"===e.status),a.filter(e=>"preparation"===e.status)),I=a.filter(e=>"ready"===e.status||"ready_for_issue"===e.status),k=(a.filter(e=>"issued"===e.status),a.filter(e=>"issued"===e.status)),T={today:E.length+A.length+I.length+k.length,revenue:c.revenue,deposits:c.deposits,problems:0};return(0,Et.jsxs)("div",{className:"min-h-screen bg-corp-bg-page font-montserrat",children:[(0,Et.jsx)(It,{cabinetName:"\u041a\u0430\u0431\u0456\u043d\u0435\u0442 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"}),(0,Et.jsx)("div",{className:"bg-white border-b border-corp-border",children:(0,Et.jsx)("div",{className:"mx-auto max-w-7xl px-6 py-3",children:(0,Et.jsx)("button",{className:"corp-btn corp-btn-primary",onClick:()=>j("/order/new"),children:"+ \u041d\u043e\u0432\u0435 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"})})}),(0,Et.jsx)("section",{className:"mx-auto max-w-7xl px-6 py-4",children:(0,Et.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[(0,Et.jsx)(Dt,{label:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440",children:(0,Et.jsx)("select",{className:"corp-select",children:(0,Et.jsx)("option",{children:"\u0412\u0441\u0456"})})}),(0,Et.jsx)(Dt,{label:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",children:(0,Et.jsxs)("select",{className:"corp-select",value:y,onChange:e=>v(e.target.value),children:[(0,Et.jsx)("option",{children:"\u0412\u0441\u0456"}),(0,Et.jsx)("option",{children:"\u041d\u043e\u0432\u0435"}),(0,Et.jsx)("option",{children:"\u0412\u0438\u0434\u0430\u0447\u0430"}),(0,Et.jsx)("option",{children:"\u0412 \u043e\u0440\u0435\u043d\u0434\u0456"})]})}),(0,Et.jsx)(Dt,{label:"\u0424\u0456\u043d\u0430\u043d\u0441\u0438",children:(0,Et.jsxs)("select",{className:"corp-select",children:[(0,Et.jsx)("option",{children:"\u0412\u0441\u0456"}),(0,Et.jsx)("option",{children:"\u041e\u0447\u0456\u043a\u0443\u0454 \u043e\u043f\u043b\u0430\u0442\u0438"}),(0,Et.jsx)("option",{children:"\u0417\u0430\u043a\u0440\u0438\u0442\u043e"})]})}),(0,Et.jsx)(Dt,{label:"\u041f\u043e\u0448\u0443\u043a",children:(0,Et.jsx)("input",{placeholder:"\u0406\u043c\u02bc\u044f / \u0442\u0435\u043b\u0435\u0444\u043e\u043d / \u2116",className:"corp-input",value:g,onChange:e=>b(e.target.value)})}),(0,Et.jsx)("div",{className:"flex items-end",children:(0,Et.jsx)("button",{onClick:()=>j("/orders-archive"),className:"w-full rounded-xl border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-100 hover:border-slate-400 transition-colors",children:"\ud83d\udcc2 \u0410\u0440\u0445\u0456\u0432 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c"})})]})}),(0,Et.jsx)("section",{className:"mx-auto max-w-7xl px-6",children:(0,Et.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[(0,Et.jsx)(Rt,{title:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",value:T.today.toString(),note:"".concat(E.length," \u043d\u043e\u0432\u0456 / ").concat(A.length," \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457 / ").concat(I.length," \u0432\u0438\u0434\u0430\u0447 / ").concat(k.length," \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f")}),(0,Et.jsx)(Rt,{title:"\u0412\u0438\u0440\u0443\u0447\u043a\u0430",value:"\u20b4 ".concat(T.revenue.toFixed(0)),note:"\u0437 \u0444\u0456\u043d. \u043a\u0430\u0431\u0456\u043d\u0435\u0442\u0443"}),(0,Et.jsx)(Rt,{title:"\u0417\u0430\u0441\u0442\u0430\u0432\u0438 \u0432 \u0445\u043e\u043b\u0434\u0456",value:"\u20b4 ".concat(T.deposits.toFixed(0)),note:"\u0437 \u0444\u0456\u043d. \u043a\u0430\u0431\u0456\u043d\u0435\u0442\u0443"}),(0,Et.jsx)(Rt,{title:"\ud83d\udd27 \u041d\u0430 \u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u0457",value:u.repair.toString(),note:"\u0442\u043e\u0432\u0430\u0440\u0438 \u0443 \u0432\u0456\u0434\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u0456",tone:u.repair>0?"info":void 0}),(0,Et.jsx)(Rt,{title:"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0438",value:T.problems.toString(),note:"\u0454 \u0448\u043a\u043e\u0434\u0430/\u043f\u0440\u043e\u0441\u0442\u0440\u043e\u0447\u043a\u0430",tone:T.problems>0?"warn":void 0})]})}),(0,Et.jsxs)("main",{className:"mx-auto max-w-7xl px-6 py-6 grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,Et.jsx)(Ot,{title:"\u23f3 \u041e\u0447\u0456\u043a\u0443\u044e\u0442\u044c \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f",subtitle:"\u041d\u043e\u0432\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u2192 \u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u2192 Email",tone:"warning",children:o?(0,Et.jsx)("div",{className:"rounded-2xl border border-slate-200 p-4 h-32 bg-slate-50 animate-pulse"}):S.length>0?(0,Et.jsxs)(Et.Fragment,{children:[(m?S:S.slice(0,4)).map(e=>{var t;return(0,Et.jsx)(Mt,{id:e.order_number,name:e.client_name,phone:e.client_phone,rent:"\u20b4 ".concat(null===(t=e.total_rental)||void 0===t?void 0:t.toFixed(0)),deposit:"\u20b4 ".concat((e.total_deposit||0).toFixed(0)),badge:"awaiting",order:e,onDateUpdate:null,onCancelByClient:_,onClick:()=>j("/order/".concat(e.id,"/view"))},e.id)}),S.length>4&&!m&&(0,Et.jsxs)("button",{onClick:()=>p(!0),className:"text-center py-3 text-sm text-blue-600 hover:text-blue-800 font-medium hover:bg-blue-50 rounded-lg transition-colors cursor-pointer",children:["+",S.length-4," \u0431\u0456\u043b\u044c\u0448\u0435 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c - \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 \u0432\u0441\u0456"]}),S.length>4&&m&&(0,Et.jsx)("button",{onClick:()=>p(!1),className:"text-center py-3 text-sm text-corp-text-main hover:text-corp-text-dark font-medium hover:bg-slate-50 rounded-lg transition-colors cursor-pointer",children:"\u0417\u0433\u043e\u0440\u043d\u0443\u0442\u0438 \u2191"})]}):(0,Et.jsx)("div",{className:"rounded-2xl border border-slate-200 p-8 text-center text-slate-400",children:"\u041d\u0435\u043c\u0430\u0454 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c \u0449\u043e \u043e\u0447\u0456\u043a\u0443\u044e\u0442\u044c"})}),(0,Et.jsx)(Ot,{title:"\ud83d\udce6 \u041d\u0430 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457",subtitle:"\u0417\u0431\u0456\u0440 \u0442\u043e\u0432\u0430\u0440\u0456\u0432 + \u0432\u0438\u0434\u0430\u0447\u0430 \u0441\u044c\u043e\u0433\u043e\u0434\u043d\u0456",tone:"ok",children:o?(0,Et.jsx)("div",{className:"rounded-2xl border border-slate-200 p-4 h-32 bg-slate-50 animate-pulse"}):A.length>0?(0,Et.jsxs)(Et.Fragment,{children:[A.slice(0,4).map(e=>{var t,r;return(0,Et.jsx)(Mt,{id:"#".concat(e.order_id),name:e.customer_name||"\u2014",phone:e.customer_phone||"\u2014",rent:"\u20b4 ".concat((null===(t=e.total_rental)||void 0===t?void 0:t.toFixed(0))||0),deposit:"\u20b4 ".concat((null===(r=e.deposit_amount)||void 0===r?void 0:r.toFixed(0))||0),badge:"preparation",order:e,onDateUpdate:null,onCancelByClient:_,onClick:()=>j("/issue/".concat(e.id))},e.id)}),A.length>4&&(0,Et.jsxs)("div",{className:"text-center py-2 text-sm text-corp-text-muted",children:["+",A.length-4," \u0431\u0456\u043b\u044c\u0448\u0435 \u043a\u0430\u0440\u0442\u043e\u043a"]})]}):(0,Et.jsx)("div",{className:"rounded-2xl border border-slate-200 p-8 text-center text-slate-400",children:"\u041d\u0435\u043c\u0430\u0454 \u043a\u0430\u0440\u0442\u043e\u043a \u043d\u0430 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457"})}),(0,Et.jsx)(Ot,{title:"\u2705 \u0413\u043e\u0442\u043e\u0432\u0456 \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456",subtitle:"\u0421\u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u043e\u0432\u0430\u043d\u043e \u2192 \u0433\u043e\u0442\u043e\u0432\u043e \u0434\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0456 \u043a\u043b\u0456\u0454\u043d\u0442\u0443",tone:"ok",children:o?(0,Et.jsx)("div",{className:"rounded-2xl border border-slate-200 p-4 h-32 bg-slate-50 animate-pulse"}):I.length>0?(0,Et.jsxs)(Et.Fragment,{children:[I.slice(0,4).map(e=>{var t,r;return(0,Et.jsx)(Mt,{id:"#".concat(e.order_id),name:e.customer_name||"\u2014",phone:e.customer_phone||"\u2014",rent:"\u20b4 ".concat((null===(t=e.total_rental)||void 0===t?void 0:t.toFixed(0))||0),deposit:"\u20b4 ".concat((null===(r=e.deposit_amount)||void 0===r?void 0:r.toFixed(0))||0),badge:"ready",order:e,onDateUpdate:null,onCancelByClient:_,onClick:()=>j("/issue/".concat(e.id))},e.id)}),I.length>4&&(0,Et.jsxs)("div",{className:"text-center py-2 text-sm text-corp-text-muted",children:["+",I.length-4," \u0431\u0456\u043b\u044c\u0448\u0435 \u043a\u0430\u0440\u0442\u043e\u043a"]})]}):(0,Et.jsx)("div",{className:"rounded-2xl border border-slate-200 p-8 text-center text-slate-400",children:"\u041d\u0435\u043c\u0430\u0454 \u0433\u043e\u0442\u043e\u0432\u0438\u0445 \u043a\u0430\u0440\u0442\u043e\u043a"})}),(0,Et.jsx)(Ot,{title:"\ud83d\udd19 \u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f",subtitle:"\u0412\u0438\u0434\u0430\u043d\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f, \u044f\u043a\u0456 \u043e\u0447\u0456\u043a\u0443\u044e\u0442\u044c \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f",tone:"warn",children:o?(0,Et.jsx)("div",{className:"rounded-2xl border border-slate-200 p-4 h-32 bg-slate-50 animate-pulse"}):k.length>0?(0,Et.jsxs)(Et.Fragment,{children:[(f?k:k.slice(0,4)).map(e=>{var t;return(0,Et.jsx)(Mt,{id:e.order_number,name:e.customer_name,phone:e.customer_phone,rent:"\u20b4 ".concat(null===(t=e.total_rental)||void 0===t?void 0:t.toFixed(0)),deposit:"\u20b4 ".concat((e.deposit_amount||0).toFixed(0)),badge:"return",order:e,onClick:()=>j("/return/".concat(e.order_id))},e.id)}),k.length>4&&!f&&(0,Et.jsxs)("button",{onClick:()=>x(!0),className:"text-center py-3 text-sm text-blue-600 hover:text-blue-800 font-medium hover:bg-blue-50 rounded-lg transition-colors cursor-pointer",children:["+",k.length-4," \u0431\u0456\u043b\u044c\u0448\u0435 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c - \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 \u0432\u0441\u0456"]}),k.length>4&&f&&(0,Et.jsx)("button",{onClick:()=>x(!1),className:"text-center py-3 text-sm text-corp-text-main hover:text-corp-text-dark font-medium hover:bg-slate-50 rounded-lg transition-colors cursor-pointer",children:"\u0417\u0433\u043e\u0440\u043d\u0443\u0442\u0438 \u2191"})]}):(0,Et.jsx)("div",{className:"rounded-2xl border border-slate-200 p-8 text-center text-slate-400",children:"\u041d\u0435\u043c\u0430\u0454 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u044c \u0441\u044c\u043e\u0433\u043e\u0434\u043d\u0456"})})]}),(0,Et.jsx)("section",{className:"mx-auto max-w-7xl px-6 pb-12",children:(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,Et.jsx)(Pt,{title:"\ud83d\udcb0 \u0424\u0456\u043d\u0430\u043d\u0441\u0438",description:"\u041f\u043b\u0430\u0442\u0435\u0436\u0456, \u0440\u0430\u0445\u0443\u043d\u043a\u0438, \u0437\u0430\u0441\u0442\u0430\u0432\u0438",onClick:()=>j("/finance")}),(0,Et.jsx)(Pt,{title:"\ud83d\udcc5 \u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440",description:"\u041f\u043e\u0434\u0456\u0457, \u043a\u0430\u0440\u0442\u043a\u0438 \u0432\u0438\u0434\u0430\u0447\u0456/\u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f",onClick:()=>j("/calendar")}),(0,Et.jsx)(Pt,{title:"\ud83d\udce6 \u041a\u0430\u0442\u0430\u043b\u043e\u0433",description:"\u0422\u043e\u0432\u0430\u0440\u0438, \u043a\u0435\u0440\u0443\u0432\u0430\u043d\u043d\u044f \u043d\u0430\u0431\u043e\u0440\u0430\u043c\u0438",onClick:()=>j("/catalog")}),(0,Et.jsx)(Pt,{title:"\u26a0\ufe0f \u0428\u043a\u043e\u0434\u0438 PRO",description:"\u041a\u0435\u0439\u0441\u0438 \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u044c, \u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f",onClick:()=>j("/damages")}),(0,Et.jsx)(Pt,{title:"\ud83e\uddfe \u0417\u0430\u0432\u0434\u0430\u043d\u043d\u044f PRO",description:"Kanban \u0434\u043e\u0448\u043a\u0430, \u043c\u0438\u0439\u043a\u0430, \u0437\u0431\u0456\u0440",onClick:()=>j("/tasks")}),(0,Et.jsx)(Pt,{title:"\ud83d\udd0d \u041f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a PRO",description:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433 \u0434\u0435\u043a\u043e\u0440\u0443, \u0456\u0441\u0442\u043e\u0440\u0456\u044f \u043e\u0440\u0435\u043d\u0434",onClick:()=>j("/reaudit")}),(0,Et.jsx)(Pt,{title:"\ud83d\udce6 \u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u044f",description:"\u0417\u0431\u0456\u0440 \u0442\u043e\u0432\u0430\u0440\u0456\u0432 \u0434\u043b\u044f \u0432\u0438\u0434\u0430\u0447\u0456",onClick:()=>j("/packing")}),"admin"===(null===w||void 0===w?void 0:w.role)&&(0,Et.jsx)(Pt,{title:"\u2699\ufe0f \u0410\u0434\u043c\u0456\u043d-\u043f\u0430\u043d\u0435\u043b\u044c",description:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456, \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457, \u043d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f",onClick:()=>j("/admin")})]})}),(0,Et.jsxs)("footer",{className:"border-t border-corp-border-light py-8 text-center text-corp-text-muted text-sm",children:[(0,Et.jsx)("p",{className:"font-montserrat",children:"\xa9 2024 Rental Hub \u2022 \u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f \u043e\u0440\u0435\u043d\u0434\u043e\u044e"}),(0,Et.jsxs)("p",{className:"text-xs mt-2 text-corp-text-muted",children:["Powered by ",(0,Et.jsx)("span",{className:"text-corp-primary font-semibold",children:"FarforRent"})]})]})]})}function Dt(e){let{label:t,children:r}=e;return(0,Et.jsxs)("label",{className:"flex flex-col gap-2",children:[(0,Et.jsx)("span",{className:"text-xs text-corp-text-muted uppercase tracking-wide font-medium",children:t}),r]})}function Rt(e){let{title:t,value:r,note:n,tone:s}=e;return(0,Et.jsxs)("div",{className:"corp-stat-card",children:[(0,Et.jsx)("div",{className:"corp-stat-label",children:t}),(0,Et.jsx)("div",{className:"corp-stat-value ".concat(s?{ok:"text-corp-success",warn:"text-corp-warning",info:"text-corp-primary"}[s]:""),children:r}),n&&(0,Et.jsx)("div",{className:"text-xs text-corp-text-muted mt-2",children:n})]})}function Ot(e){let{title:t,subtitle:r,children:n,tone:s}=e;return(0,Et.jsxs)("section",{className:"rounded-2xl border border-slate-200 p-4 shadow-sm ring-2 ".concat(s?{ok:"ring-emerald-100",warn:"ring-amber-100",info:"ring-slate-100"}[s]:"ring-transparent"),children:[(0,Et.jsx)("header",{className:"mb-3 flex items-center justify-between",children:(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h3",{className:"text-base font-semibold leading-none",children:t}),r&&(0,Et.jsx)("p",{className:"mt-1 text-sm text-corp-text-muted",children:r})]})}),(0,Et.jsx)("div",{className:"grid gap-3",children:n})]})}function Mt(e){let{id:r,name:n,phone:s,rent:a,deposit:i,badge:o,onClick:l,order:c,onDateUpdate:d,onCancelByClient:u}=e;const h={new:{label:"\u041d\u043e\u0432\u0435",css:"corp-badge corp-badge-info"},awaiting:{label:"\u041e\u0447\u0456\u043a\u0443\u0454",css:"corp-badge corp-badge-warning"},processing:{label:"\u0412 \u0440\u043e\u0431\u043e\u0442\u0456",css:"corp-badge corp-badge-primary"},preparation:{label:"\u041d\u0430 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457",css:"corp-badge corp-badge-gold"},issue:{label:"\u0412\u0438\u0434\u0430\u0447\u0430",css:"corp-badge corp-badge-success"},return:{label:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f",css:"corp-badge corp-badge-warning"},ready:{label:"\u0413\u043e\u0442\u043e\u0432\u043e",css:"corp-badge corp-badge-success"},issued:{label:"\u0412\u0438\u0434\u0430\u043d\u043e",css:"corp-badge corp-badge-success"}}[o]||{label:o,css:"corp-badge corp-badge-neutral"},[m,p]=t.useState(!1),[f,x]=t.useState((null===c||void 0===c?void 0:c.issue_date)||""),[g,b]=t.useState((null===c||void 0===c?void 0:c.return_date)||""),[y,v]=t.useState(!1);return(0,Et.jsxs)("article",{className:"corp-card-flat cursor-pointer hover:shadow-corp transition-shadow active:bg-slate-50",onClick:m?void 0:l,children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,Et.jsx)("span",{className:h.css,children:h.label}),(0,Et.jsxs)("span",{className:"text-corp-text-muted text-sm font-medium",children:["#",r]})]}),"new"===o&&d&&!m&&(0,Et.jsx)("button",{onClick:e=>{e.stopPropagation(),p(!0)},className:"text-xs text-corp-primary hover:text-corp-primary-hover font-medium px-2 py-1 rounded-lg bg-blue-50 active:bg-blue-100",title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0434\u0430\u0442\u0438",children:"\ud83d\udcc5 \u0414\u0430\u0442\u0438"})]}),(0,Et.jsxs)("div",{className:"mb-3",children:[(0,Et.jsx)("div",{className:"font-semibold text-corp-text-dark text-base",children:n}),(0,Et.jsxs)("a",{href:"tel:".concat(s),onClick:e=>{e.stopPropagation(),window.location.href="tel:".concat(s)},className:"text-blue-600 font-medium text-sm flex items-center gap-1 mt-1",children:["\ud83d\udcde ",s]})]}),"new"===o&&m?(0,Et.jsxs)("div",{className:"mb-3 space-y-3 bg-corp-bg-light p-3 rounded-xl",onClick:e=>e.stopPropagation(),children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"text-xs text-corp-text-muted uppercase tracking-wide block mb-1",children:"\u0414\u0430\u0442\u0430 \u0432\u0438\u0434\u0430\u0447\u0456"}),(0,Et.jsx)("input",{type:"date",value:f,onChange:e=>x(e.target.value),className:"w-full rounded-lg border border-slate-200 px-3 py-2.5 text-sm",disabled:y})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"text-xs text-corp-text-muted uppercase tracking-wide block mb-1",children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f"}),(0,Et.jsx)("input",{type:"date",value:g,onChange:e=>b(e.target.value),className:"w-full rounded-lg border border-slate-200 px-3 py-2.5 text-sm",disabled:y})]}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsx)("button",{onClick:async e=>{if(e.stopPropagation(),d){v(!0);try{await d(r,f,g),p(!1)}catch(t){console.error("Error updating dates:",t),alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0434\u0430\u0442")}finally{v(!1)}}},disabled:y,className:"flex-1 py-2.5 rounded-lg bg-emerald-500 text-white font-medium text-sm disabled:opacity-50 active:bg-emerald-600",children:y?"\u23f3 ...":"\u2713 \u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"}),(0,Et.jsx)("button",{onClick:e=>{e.stopPropagation(),p(!1),x((null===c||void 0===c?void 0:c.issue_date)||""),b((null===c||void 0===c?void 0:c.return_date)||"")},disabled:y,className:"px-4 py-2.5 rounded-lg border border-slate-200 bg-white font-medium text-sm disabled:opacity-50 active:bg-slate-50",children:"\u2715"})]})]}):null!==c&&void 0!==c&&c.issue_date||null!==c&&void 0!==c&&c.return_date?(0,Et.jsxs)("div",{className:"mb-3 text-sm text-corp-text-main bg-slate-50 p-2.5 rounded-lg space-y-1",children:[c.issue_date&&(0,Et.jsxs)("div",{children:["\ud83d\udcc5 \u0412\u0438\u0434\u0430\u0447\u0430: ",(0,Et.jsx)("span",{className:"font-medium",children:c.issue_date})]}),c.return_date&&(0,Et.jsxs)("div",{children:["\ud83d\udcc6 \u041f\u043e\u0432\u0435\u0440\u043d.: ",(0,Et.jsx)("span",{className:"font-medium",children:c.return_date})]})]}):null,(0,Et.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,Et.jsxs)("div",{className:"rounded-xl bg-slate-50 px-3 py-2.5 text-center",children:[(0,Et.jsx)("div",{className:"text-corp-text-muted text-xs",children:"\u0421\u0443\u043c\u0430"}),(0,Et.jsx)("div",{className:"font-bold text-base tabular-nums",children:a})]}),(0,Et.jsxs)("div",{className:"rounded-xl bg-amber-50 px-3 py-2.5 text-center",children:[(0,Et.jsx)("div",{className:"text-corp-text-muted text-xs",children:"\u0417\u0430\u0441\u0442\u0430\u0432\u0430"}),(0,Et.jsx)("div",{className:"font-bold text-base tabular-nums text-amber-700",children:i})]})]}),u&&["awaiting","processing","preparation","ready"].includes(o)&&(0,Et.jsx)("button",{onClick:e=>{e.stopPropagation(),u(null===c||void 0===c?void 0:c.order_id,r)},className:"mt-3 w-full text-sm text-rose-600 border-2 border-rose-200 rounded-xl px-3 py-2.5 font-medium hover:bg-rose-50 active:bg-rose-100 transition-colors",children:"\ud83d\udeab \u041a\u043b\u0456\u0454\u043d\u0442 \u0432\u0456\u0434\u043c\u043e\u0432\u0438\u0432\u0441\u044f"})]})}function Pt(e){let{title:t,description:r,onClick:n}=e;return(0,Et.jsxs)("article",{className:"corp-card cursor-pointer hover:border-corp-primary group",onClick:n,children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-corp-text-dark mb-2 group-hover:text-corp-primary transition-colors",children:t}),(0,Et.jsx)("p",{className:"text-sm text-corp-text-muted group-hover:text-corp-text-main transition-colors",children:r})]})}function Lt(e,t){return function(){return e.apply(t,arguments)}}const{toString:Bt}=Object.prototype,{getPrototypeOf:Ft}=Object,{iterator:Ut,toStringTag:zt}=Symbol,Ht=(Vt=Object.create(null),e=>{const t=Bt.call(e);return Vt[t]||(Vt[t]=t.slice(8,-1).toLowerCase())});var Vt;const Wt=e=>(e=e.toLowerCase(),t=>Ht(t)===e),qt=e=>t=>typeof t===e,{isArray:Gt}=Array,Yt=qt("undefined");function Xt(e){return null!==e&&!Yt(e)&&null!==e.constructor&&!Yt(e.constructor)&&Zt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Qt=Wt("ArrayBuffer");const Kt=qt("string"),Zt=qt("function"),Jt=qt("number"),$t=e=>null!==e&&"object"===typeof e,er=e=>{if("object"!==Ht(e))return!1;const t=Ft(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(zt in e)&&!(Ut in e)},tr=Wt("Date"),rr=Wt("File"),nr=Wt("Blob"),sr=Wt("FileList"),ar=Wt("URLSearchParams"),[ir,or,lr,cr]=["ReadableStream","Request","Response","Headers"].map(Wt);function dr(e,t){let r,n,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Gt(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{if(Xt(e))return;const n=s?Object.getOwnPropertyNames(e):Object.keys(e),a=n.length;let i;for(r=0;r<a;r++)i=n[r],t.call(null,e[i],i,e)}}function ur(e,t){if(Xt(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n,s=r.length;for(;s-- >0;)if(n=r[s],t===n.toLowerCase())return n;return null}const hr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:r.g,mr=e=>!Yt(e)&&e!==hr;const pr=(fr="undefined"!==typeof Uint8Array&&Ft(Uint8Array),e=>fr&&e instanceof fr);var fr;const xr=Wt("HTMLFormElement"),gr=(e=>{let{hasOwnProperty:t}=e;return(e,r)=>t.call(e,r)})(Object.prototype),br=Wt("RegExp"),yr=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};dr(r,(r,s)=>{let a;!1!==(a=t(r,s,e))&&(n[s]=a||r)}),Object.defineProperties(e,n)};const vr=Wt("AsyncFunction"),wr=((e,t)=>{return e?setImmediate:t?(r="axios@".concat(Math.random()),n=[],hr.addEventListener("message",e=>{let{source:t,data:s}=e;t===hr&&s===r&&n.length&&n.shift()()},!1),e=>{n.push(e),hr.postMessage(r,"*")}):e=>setTimeout(e);var r,n})("function"===typeof setImmediate,Zt(hr.postMessage)),Nr="undefined"!==typeof queueMicrotask?queueMicrotask.bind(hr):"undefined"!==typeof process&&process.nextTick||wr,jr={isArray:Gt,isArrayBuffer:Qt,isBuffer:Xt,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Zt(e.append)&&("formdata"===(t=Ht(e))||"object"===t&&Zt(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Qt(e.buffer),t},isString:Kt,isNumber:Jt,isBoolean:e=>!0===e||!1===e,isObject:$t,isPlainObject:er,isEmptyObject:e=>{if(!$t(e)||Xt(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(zd){return!1}},isReadableStream:ir,isRequest:or,isResponse:lr,isHeaders:cr,isUndefined:Yt,isDate:tr,isFile:rr,isBlob:nr,isRegExp:br,isFunction:Zt,isStream:e=>$t(e)&&Zt(e.pipe),isURLSearchParams:ar,isTypedArray:pr,isFileList:sr,forEach:dr,merge:function e(){const{caseless:t,skipUndefined:r}=mr(this)&&this||{},n={},s=(s,a)=>{const i=t&&ur(n,a)||a;er(n[i])&&er(s)?n[i]=e(n[i],s):er(s)?n[i]=e({},s):Gt(s)?n[i]=s.slice():r&&Yt(s)||(n[i]=s)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&dr(arguments[a],s);return n},extend:function(e,t,r){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return dr(t,(t,n)=>{r&&Zt(t)?e[n]=Lt(t,r):e[n]=t},{allOwnKeys:n}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let s,a,i;const o={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),a=s.length;a-- >0;)i=s[a],n&&!n(i,e,t)||o[i]||(t[i]=e[i],o[i]=!0);e=!1!==r&&Ft(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:Ht,kindOfTest:Wt,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(Gt(e))return e;let t=e.length;if(!Jt(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Ut]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:xr,hasOwnProperty:gr,hasOwnProp:gr,reduceDescriptors:yr,freezeMethods:e=>{yr(e,(t,r)=>{if(Zt(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];Zt(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach(e=>{r[e]=!0})};return Gt(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:ur,global:hr,isContextDefined:mr,isSpecCompliantForm:function(e){return!!(e&&Zt(e.append)&&"FormData"===e[zt]&&e[Ut])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if($t(e)){if(t.indexOf(e)>=0)return;if(Xt(e))return e;if(!("toJSON"in e)){t[n]=e;const s=Gt(e)?[]:{};return dr(e,(e,t)=>{const a=r(e,n+1);!Yt(a)&&(s[t]=a)}),t[n]=void 0,s}}return e};return r(e,0)},isAsyncFn:vr,isThenable:e=>e&&($t(e)||Zt(e))&&Zt(e.then)&&Zt(e.catch),setImmediate:wr,asap:Nr,isIterable:e=>null!=e&&Zt(e[Ut])};function _r(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}jr.inherits(_r,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:jr.toJSONObject(this.config),code:this.code,status:this.status}}});const Cr=_r.prototype,Sr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Sr[e]={value:e}}),Object.defineProperties(_r,Sr),Object.defineProperty(Cr,"isAxiosError",{value:!0}),_r.from=(e,t,r,n,s,a)=>{const i=Object.create(Cr);jr.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const o=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return _r.call(i,o,l,r,n,s),e&&null==i.cause&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",a&&Object.assign(i,a),i};const Er=_r;function Ar(e){return jr.isPlainObject(e)||jr.isArray(e)}function Ir(e){return jr.endsWith(e,"[]")?e.slice(0,-2):e}function kr(e,t,r){return e?e.concat(t).map(function(e,t){return e=Ir(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const Tr=jr.toFlatObject(jr,{},null,function(e){return/^is[A-Z]/.test(e)});const Dr=function(e,t,r){if(!jr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=jr.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!jr.isUndefined(t[e])})).metaTokens,s=r.visitor||c,a=r.dots,i=r.indexes,o=(r.Blob||"undefined"!==typeof Blob&&Blob)&&jr.isSpecCompliantForm(t);if(!jr.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(jr.isDate(e))return e.toISOString();if(jr.isBoolean(e))return e.toString();if(!o&&jr.isBlob(e))throw new Er("Blob is not supported. Use a Buffer instead.");return jr.isArrayBuffer(e)||jr.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,s){let o=e;if(e&&!s&&"object"===typeof e)if(jr.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(jr.isArray(e)&&function(e){return jr.isArray(e)&&!e.some(Ar)}(e)||(jr.isFileList(e)||jr.endsWith(r,"[]"))&&(o=jr.toArray(e)))return r=Ir(r),o.forEach(function(e,n){!jr.isUndefined(e)&&null!==e&&t.append(!0===i?kr([r],n,a):null===i?r:r+"[]",l(e))}),!1;return!!Ar(e)||(t.append(kr(s,r,a),l(e)),!1)}const d=[],u=Object.assign(Tr,{defaultVisitor:c,convertValue:l,isVisitable:Ar});if(!jr.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!jr.isUndefined(r)){if(-1!==d.indexOf(r))throw Error("Circular reference detected in "+n.join("."));d.push(r),jr.forEach(r,function(r,a){!0===(!(jr.isUndefined(r)||null===r)&&s.call(t,r,jr.isString(a)?a.trim():a,n,u))&&e(r,n?n.concat(a):[a])}),d.pop()}}(e),t};function Rr(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Or(e,t){this._pairs=[],e&&Dr(e,this,t)}const Mr=Or.prototype;Mr.append=function(e,t){this._pairs.push([e,t])},Mr.toString=function(e){const t=e?function(t){return e.call(this,t,Rr)}:Rr;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Pr=Or;function Lr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Br(e,t,r){if(!t)return e;const n=r&&r.encode||Lr;jr.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let a;if(a=s?s(t,r):jr.isURLSearchParams(t)?t.toString():new Pr(t,r).toString(n),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}const Fr=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){jr.forEach(this.handlers,function(t){null!==t&&e(t)})}},Ur={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zr={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Pr,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Hr="undefined"!==typeof window&&"undefined"!==typeof document,Vr="object"===typeof navigator&&navigator||void 0,Wr=Hr&&(!Vr||["ReactNative","NativeScript","NS"].indexOf(Vr.product)<0),qr="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Gr=Hr&&window.location.href||"http://localhost",Yr=c(c({},e),zr);const Xr=function(e){function t(e,r,n,s){let a=e[s++];if("__proto__"===a)return!0;const i=Number.isFinite(+a),o=s>=e.length;if(a=!a&&jr.isArray(n)?n.length:a,o)return jr.hasOwnProp(n,a)?n[a]=[n[a],r]:n[a]=r,!i;n[a]&&jr.isObject(n[a])||(n[a]=[]);return t(e,r,n[a],s)&&jr.isArray(n[a])&&(n[a]=function(e){const t={},r=Object.keys(e);let n;const s=r.length;let a;for(n=0;n<s;n++)a=r[n],t[a]=e[a];return t}(n[a])),!i}if(jr.isFormData(e)&&jr.isFunction(e.entries)){const r={};return jr.forEachEntry(e,(e,n)=>{t(function(e){return jr.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,r,0)}),r}return null};const Qr={transitional:Ur,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,s=jr.isObject(e);s&&jr.isHTMLForm(e)&&(e=new FormData(e));if(jr.isFormData(e))return n?JSON.stringify(Xr(e)):e;if(jr.isArrayBuffer(e)||jr.isBuffer(e)||jr.isStream(e)||jr.isFile(e)||jr.isBlob(e)||jr.isReadableStream(e))return e;if(jr.isArrayBufferView(e))return e.buffer;if(jr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Dr(e,new Yr.classes.URLSearchParams,c({visitor:function(e,t,r,n){return Yr.isNode&&jr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=jr.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Dr(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||n?(t.setContentType("application/json",!1),function(e,t,r){if(jr.isString(e))try{return(t||JSON.parse)(e),jr.trim(e)}catch(zd){if("SyntaxError"!==zd.name)throw zd}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Qr.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(jr.isResponse(e)||jr.isReadableStream(e))return e;if(e&&jr.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(zd){if(r){if("SyntaxError"===zd.name)throw Er.from(zd,Er.ERR_BAD_RESPONSE,this,null,this.response);throw zd}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Yr.classes.FormData,Blob:Yr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};jr.forEach(["delete","get","head","post","put","patch"],e=>{Qr.headers[e]={}});const Kr=Qr,Zr=jr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Jr=Symbol("internals");function $r(e){return e&&String(e).trim().toLowerCase()}function en(e){return!1===e||null==e?e:jr.isArray(e)?e.map(en):String(e)}function tn(e,t,r,n,s){return jr.isFunction(n)?n.call(this,t,r):(s&&(t=r),jr.isString(t)?jr.isString(n)?-1!==t.indexOf(n):jr.isRegExp(n)?n.test(t):void 0:void 0)}class rn{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function s(e,t,r){const s=$r(t);if(!s)throw new Error("header name must be a non-empty string");const a=jr.findKey(n,s);(!a||void 0===n[a]||!0===r||void 0===r&&!1!==n[a])&&(n[a||t]=en(e))}const a=(e,t)=>jr.forEach(e,(e,r)=>s(e,r,t));if(jr.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(jr.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let r,n,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),r=e.substring(0,s).trim().toLowerCase(),n=e.substring(s+1).trim(),!r||t[r]&&Zr[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t})(e),t);else if(jr.isObject(e)&&jr.isIterable(e)){let r,n,s={};for(const t of e){if(!jr.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[n=t[0]]=(r=s[n])?jr.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}a(s,t)}else null!=e&&s(t,e,r);return this}get(e,t){if(e=$r(e)){const r=jr.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(jr.isFunction(t))return t.call(this,e,r);if(jr.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=$r(e)){const r=jr.findKey(this,e);return!(!r||void 0===this[r]||t&&!tn(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function s(e){if(e=$r(e)){const s=jr.findKey(r,e);!s||t&&!tn(0,r[s],s,t)||(delete r[s],n=!0)}}return jr.isArray(e)?e.forEach(s):s(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const s=t[r];e&&!tn(0,this[s],s,e,!0)||(delete this[s],n=!0)}return n}normalize(e){const t=this,r={};return jr.forEach(this,(n,s)=>{const a=jr.findKey(r,s);if(a)return t[a]=en(n),void delete t[s];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(s):String(s).trim();i!==s&&delete t[s],t[i]=en(n),r[i]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return jr.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&jr.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,r]=e;return t+": "+r}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return n.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[Jr]=this[Jr]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=$r(e);t[n]||(!function(e,t){const r=jr.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,s){return this[n].call(this,t,e,r,s)},configurable:!0})})}(r,e),t[n]=!0)}return jr.isArray(e)?e.forEach(n):n(e),this}}rn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),jr.reduceDescriptors(rn.prototype,(e,t)=>{let{value:r}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(e){this[n]=e}}}),jr.freezeMethods(rn);const nn=rn;function sn(e,t){const r=this||Kr,n=t||r,s=nn.from(n.headers);let a=n.data;return jr.forEach(e,function(e){a=e.call(r,a,s.normalize(),t?t.status:void 0)}),s.normalize(),a}function an(e){return!(!e||!e.__CANCEL__)}function on(e,t,r){Er.call(this,null==e?"canceled":e,Er.ERR_CANCELED,t,r),this.name="CanceledError"}jr.inherits(on,Er,{__CANCEL__:!0});const ln=on;function cn(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new Er("Request failed with status code "+r.status,[Er.ERR_BAD_REQUEST,Er.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const dn=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s,a=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=n[i];s||(s=l),r[a]=o,n[a]=l;let d=i,u=0;for(;d!==a;)u+=r[d++],d%=e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),l-s<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}};const un=function(e,t){let r,n,s=0,a=1e3/t;const i=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();s=a,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[function(){const e=Date.now(),t=e-s;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=a?i(l,e):(r=l,n||(n=setTimeout(()=>{n=null,i(r)},a-t)))},()=>r&&i(r)]},hn=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0;const s=dn(50,250);return un(r=>{const a=r.loaded,i=r.lengthComputable?r.total:void 0,o=a-n,l=s(o);n=a;e({loaded:a,total:i,progress:i?a/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&a<=i?(i-a)/l:void 0,event:r,lengthComputable:null!=i,[t?"download":"upload"]:!0})},r)},mn=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},pn=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return jr.asap(()=>e(...r))},fn=Yr.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Yr.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Yr.origin),Yr.navigator&&/(msie|trident)/i.test(Yr.navigator.userAgent)):()=>!0,xn=Yr.hasStandardBrowserEnv?{write(e,t,r,n,s,a,i){if("undefined"===typeof document)return;const o=["".concat(e,"=").concat(encodeURIComponent(t))];jr.isNumber(r)&&o.push("expires=".concat(new Date(r).toUTCString())),jr.isString(n)&&o.push("path=".concat(n)),jr.isString(s)&&o.push("domain=".concat(s)),!0===a&&o.push("secure"),jr.isString(i)&&o.push("SameSite=".concat(i)),document.cookie=o.join("; ")},read(e){if("undefined"===typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function gn(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const bn=e=>e instanceof nn?c({},e):e;function yn(e,t){t=t||{};const r={};function n(e,t,r,n){return jr.isPlainObject(e)&&jr.isPlainObject(t)?jr.merge.call({caseless:n},e,t):jr.isPlainObject(t)?jr.merge({},t):jr.isArray(t)?t.slice():t}function s(e,t,r,s){return jr.isUndefined(t)?jr.isUndefined(e)?void 0:n(void 0,e,0,s):n(e,t,0,s)}function a(e,t){if(!jr.isUndefined(t))return n(void 0,t)}function i(e,t){return jr.isUndefined(t)?jr.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function o(r,s,a){return a in t?n(r,s):a in e?n(void 0,r):void 0}const l={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,r)=>s(bn(e),bn(t),0,!0)};return jr.forEach(Object.keys(c(c({},e),t)),function(n){const a=l[n]||s,i=a(e[n],t[n],n);jr.isUndefined(i)&&a!==o||(r[n]=i)}),r}const vn=e=>{const t=yn({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:a,headers:i,auth:o}=t;if(t.headers=i=nn.from(i),t.url=Br(gn(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),jr.isFormData(r))if(Yr.hasStandardBrowserEnv||Yr.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(jr.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[r,n]=e;t.includes(r.toLowerCase())&&i.set(r,n)})}if(Yr.hasStandardBrowserEnv&&(n&&jr.isFunction(n)&&(n=n(t)),n||!1!==n&&fn(t.url))){const e=s&&a&&xn.read(a);e&&i.set(s,e)}return t},wn="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const n=vn(e);let s=n.data;const a=nn.from(n.headers).normalize();let i,o,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:m}=n;function p(){c&&c(),d&&d(),n.cancelToken&&n.cancelToken.unsubscribe(i),n.signal&&n.signal.removeEventListener("abort",i)}let f=new XMLHttpRequest;function x(){if(!f)return;const n=nn.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());cn(function(e){t(e),p()},function(e){r(e),p()},{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f}),f=null}f.open(n.method.toUpperCase(),n.url,!0),f.timeout=n.timeout,"onloadend"in f?f.onloadend=x:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(x)},f.onabort=function(){f&&(r(new Er("Request aborted",Er.ECONNABORTED,e,f)),f=null)},f.onerror=function(t){const n=t&&t.message?t.message:"Network Error",s=new Er(n,Er.ERR_NETWORK,e,f);s.event=t||null,r(s),f=null},f.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const s=n.transitional||Ur;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new Er(t,s.clarifyTimeoutError?Er.ETIMEDOUT:Er.ECONNABORTED,e,f)),f=null},void 0===s&&a.setContentType(null),"setRequestHeader"in f&&jr.forEach(a.toJSON(),function(e,t){f.setRequestHeader(t,e)}),jr.isUndefined(n.withCredentials)||(f.withCredentials=!!n.withCredentials),u&&"json"!==u&&(f.responseType=n.responseType),m&&([l,d]=hn(m,!0),f.addEventListener("progress",l)),h&&f.upload&&([o,c]=hn(h),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(i=t=>{f&&(r(!t||t.type?new ln(null,e,f):t),f.abort(),f=null)},n.cancelToken&&n.cancelToken.subscribe(i),n.signal&&(n.signal.aborted?i():n.signal.addEventListener("abort",i)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);g&&-1===Yr.protocols.indexOf(g)?r(new Er("Unsupported protocol "+g+":",Er.ERR_BAD_REQUEST,e)):f.send(s||null)})},Nn=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const s=function(e){if(!r){r=!0,i();const t=e instanceof Error?e:this.reason;n.abort(t instanceof Er?t:new ln(t instanceof Error?t.message:t))}};let a=t&&setTimeout(()=>{a=null,s(new Er("timeout ".concat(t," of ms exceeded"),Er.ETIMEDOUT))},t);const i=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));const{signal:o}=n;return o.unsubscribe=()=>jr.asap(i),o}};function jn(e,t){this.v=e,this.k=t}function _n(e){return function(){return new Cn(e.apply(this,arguments))}}function Cn(e){var t,r;function n(t,r){try{var a=e[t](r),i=a.value,o=i instanceof jn;Promise.resolve(o?i.v:i).then(function(r){if(o){var l="return"===t?"return":"next";if(!i.k||r.done)return n(l,r);r=e[l](r).value}s(a.done?"return":"normal",r)},function(e){n("throw",e)})}catch(e){s("throw",e)}}function s(e,s){switch(e){case"return":t.resolve({value:s,done:!0});break;case"throw":t.reject(s);break;default:t.resolve({value:s,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,s){return new Promise(function(a,i){var o={key:e,arg:s,resolve:a,reject:i,next:null};r?r=r.next=o:(t=r=o,n(e,s))})},"function"!=typeof e.return&&(this.return=void 0)}function Sn(e){return new jn(e,0)}function En(e){var t={},r=!1;function n(t,n){return r=!0,n=new Promise(function(r){r(e[t](n))}),{done:!1,value:new jn(n,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):n("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return n("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):n("return",e)}),t}function An(e){var t,r,n,s=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);s--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new In(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function In(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return In=function(e){this.s=e,this.n=e.next},In.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new In(e)}Cn.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Cn.prototype.next=function(e){return this._invoke("next",e)},Cn.prototype.throw=function(e){return this._invoke("throw",e)},Cn.prototype.return=function(e){return this._invoke("return",e)};const kn=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n,s=0;for(;s<r;)n=s+t,yield e.slice(s,n),s=n},Tn=function(){var e=_n(function*(e,t){var r,n=!1,s=!1;try{for(var a,i=An(Dn(e));n=!(a=yield Sn(i.next())).done;n=!1){const e=a.value;yield*En(An(kn(e,t)))}}catch(o){s=!0,r=o}finally{try{n&&null!=i.return&&(yield Sn(i.return()))}finally{if(s)throw r}}});return function(t,r){return e.apply(this,arguments)}}(),Dn=function(){var e=_n(function*(e){if(e[Symbol.asyncIterator])return void(yield*En(An(e)));const t=e.getReader();try{for(;;){const{done:e,value:r}=yield Sn(t.read());if(e)break;yield r}}finally{yield Sn(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),Rn=(e,t,r,n)=>{const s=Tn(e,t);let a,i=0,o=e=>{a||(a=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await s.next();if(t)return o(),void e.close();let a=n.byteLength;if(r){let e=i+=a;r(e)}e.enqueue(new Uint8Array(n))}catch(t){throw o(t),t}},cancel:e=>(o(e),s.return())},{highWaterMark:2})},{isFunction:On}=jr,Mn=(e=>{let{Request:t,Response:r}=e;return{Request:t,Response:r}})(jr.global),{ReadableStream:Pn,TextEncoder:Ln}=jr.global,Bn=function(e){try{for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return!!e(...r)}catch(zd){return!1}},Fn=e=>{e=jr.merge.call({skipUndefined:!0},Mn,e);const{fetch:t,Request:r,Response:n}=e,s=t?On(t):"function"===typeof fetch,a=On(r),i=On(n);if(!s)return!1;const o=s&&On(Pn),l=s&&("function"===typeof Ln?(d=new Ln,e=>d.encode(e)):async e=>new Uint8Array(await new r(e).arrayBuffer()));var d;const u=a&&o&&Bn(()=>{let e=!1;const t=new r(Yr.origin,{body:new Pn,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),h=i&&o&&Bn(()=>jr.isReadableStream(new n("").body)),m={stream:h&&(e=>e.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!m[e]&&(m[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new Er("Response type '".concat(e,"' is not supported"),Er.ERR_NOT_SUPPORT,r)})});const p=async(e,t)=>{const n=jr.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(jr.isBlob(e))return e.size;if(jr.isSpecCompliantForm(e)){const t=new r(Yr.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return jr.isArrayBufferView(e)||jr.isArrayBuffer(e)?e.byteLength:(jr.isURLSearchParams(e)&&(e+=""),jr.isString(e)?(await l(e)).byteLength:void 0)})(t):n};return async e=>{let{url:s,method:i,data:o,signal:l,cancelToken:d,timeout:f,onDownloadProgress:x,onUploadProgress:g,responseType:b,headers:y,withCredentials:v="same-origin",fetchOptions:w}=vn(e),N=t||fetch;b=b?(b+"").toLowerCase():"text";let j=Nn([l,d&&d.toAbortSignal()],f),_=null;const C=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let S;try{if(g&&u&&"get"!==i&&"head"!==i&&0!==(S=await p(y,o))){let e,t=new r(s,{method:"POST",body:o,duplex:"half"});if(jr.isFormData(o)&&(e=t.headers.get("content-type"))&&y.setContentType(e),t.body){const[e,r]=mn(S,hn(pn(g)));o=Rn(t.body,65536,e,r)}}jr.isString(v)||(v=v?"include":"omit");const t=a&&"credentials"in r.prototype,l=c(c({},w),{},{signal:j,method:i.toUpperCase(),headers:y.normalize().toJSON(),body:o,duplex:"half",credentials:t?v:void 0});_=a&&new r(s,l);let d=await(a?N(_,w):N(s,l));const f=h&&("stream"===b||"response"===b);if(h&&(x||f&&C)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=d[t]});const t=jr.toFiniteNumber(d.headers.get("content-length")),[r,s]=x&&mn(t,hn(pn(x),!0))||[];d=new n(Rn(d.body,65536,r,()=>{s&&s(),C&&C()}),e)}b=b||"text";let E=await m[jr.findKey(m,b)||"text"](d,e);return!f&&C&&C(),await new Promise((t,r)=>{cn(t,r,{data:E,headers:nn.from(d.headers),status:d.status,statusText:d.statusText,config:e,request:_})})}catch(E){if(C&&C(),E&&"TypeError"===E.name&&/Load failed|fetch/i.test(E.message))throw Object.assign(new Er("Network Error",Er.ERR_NETWORK,e,_),{cause:E.cause||E});throw Er.from(E,E&&E.code,e,_)}}},Un=new Map,zn=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:s}=t,a=[n,s,r];let i,o,l=a.length,c=Un;for(;l--;)i=a[l],o=c.get(i),void 0===o&&c.set(i,o=l?new Map:Fn(t)),c=o;return o},Hn=(zn(),{http:null,xhr:wn,fetch:{get:zn}});jr.forEach(Hn,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(zd){}Object.defineProperty(e,"adapterName",{value:t})}});const Vn=e=>"- ".concat(e),Wn=e=>jr.isFunction(e)||null===e||!1===e;const qn={getAdapter:function(e,t){e=jr.isArray(e)?e:[e];const{length:r}=e;let n,s;const a={};for(let i=0;i<r;i++){let r;if(n=e[i],s=n,!Wn(n)&&(s=Hn[(r=String(n)).toLowerCase()],void 0===s))throw new Er("Unknown adapter '".concat(r,"'"));if(s&&(jr.isFunction(s)||(s=s.get(t))))break;a[r||"#"+i]=s}if(!s){const e=Object.entries(a).map(e=>{let[t,r]=e;return"adapter ".concat(t," ")+(!1===r?"is not supported by the environment":"is not available in the build")});let t=r?e.length>1?"since :\n"+e.map(Vn).join("\n"):" "+Vn(e[0]):"as no adapter specified";throw new Er("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return s},adapters:Hn};function Gn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ln(null,e)}function Yn(e){Gn(e),e.headers=nn.from(e.headers),e.data=sn.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return qn.getAdapter(e.adapter||Kr.adapter,e)(e).then(function(t){return Gn(e),t.data=sn.call(e,e.transformResponse,t),t.headers=nn.from(t.headers),t},function(t){return an(t)||(Gn(e),t&&t.response&&(t.response.data=sn.call(e,e.transformResponse,t.response),t.response.headers=nn.from(t.response.headers))),Promise.reject(t)})}const Xn="1.13.2",Qn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Qn[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Kn={};Qn.transitional=function(e,t,r){function n(e,t){return"[Axios v"+Xn+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,s,a)=>{if(!1===e)throw new Er(n(s," has been removed"+(t?" in "+t:"")),Er.ERR_DEPRECATED);return t&&!Kn[s]&&(Kn[s]=!0,console.warn(n(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,s,a)}},Qn.spelling=function(e){return(t,r)=>(console.warn("".concat(r," is likely a misspelling of ").concat(e)),!0)};const Zn={assertOptions:function(e,t,r){if("object"!==typeof e)throw new Er("options must be an object",Er.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const a=n[s],i=t[a];if(i){const t=e[a],r=void 0===t||i(t,a,e);if(!0!==r)throw new Er("option "+a+" must be "+r,Er.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new Er("Unknown option "+a,Er.ERR_BAD_OPTION)}},validators:Qn},Jn=Zn.validators;class $n{constructor(e){this.defaults=e||{},this.interceptors={request:new Fr,response:new Fr}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(zd){}}throw r}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=yn(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:s}=t;void 0!==r&&Zn.assertOptions(r,{silentJSONParsing:Jn.transitional(Jn.boolean),forcedJSONParsing:Jn.transitional(Jn.boolean),clarifyTimeoutError:Jn.transitional(Jn.boolean)},!1),null!=n&&(jr.isFunction(n)?t.paramsSerializer={serialize:n}:Zn.assertOptions(n,{encode:Jn.function,serialize:Jn.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Zn.assertOptions(t,{baseUrl:Jn.spelling("baseURL"),withXsrfToken:Jn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&jr.merge(s.common,s[t.method]);s&&jr.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=nn.concat(a,s);const i=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!o){const e=[Yn.bind(this),void 0];for(e.unshift(...i),e.push(...l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let h=t;for(;u<d;){const e=i[u++],t=i[u++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=Yn.call(this,h)}catch(m){return Promise.reject(m)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return Br(gn((e=yn(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}jr.forEach(["delete","get","head","options"],function(e){$n.prototype[e]=function(t,r){return this.request(yn(r||{},{method:e,url:t,data:(r||{}).data}))}}),jr.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,s){return this.request(yn(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}$n.prototype[e]=t(),$n.prototype[e+"Form"]=t(!0)});const es=$n;class ts{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,s){r.reason||(r.reason=new ln(e,n,s),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new ts(function(t){e=t}),cancel:e}}}const rs=ts;const ns={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(ns).forEach(e=>{let[t,r]=e;ns[r]=t});const ss=ns;const as=function e(t){const r=new es(t),n=Lt(es.prototype.request,r);return jr.extend(n,es.prototype,r,{allOwnKeys:!0}),jr.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(yn(t,r))},n}(Kr);as.Axios=es,as.CanceledError=ln,as.CancelToken=rs,as.isCancel=an,as.VERSION=Xn,as.toFormData=Dr,as.AxiosError=Er,as.Cancel=as.CanceledError,as.all=function(e){return Promise.all(e)},as.spread=function(e){return function(t){return e.apply(null,t)}},as.isAxiosError=function(e){return jr.isObject(e)&&!0===e.isAxiosError},as.mergeConfig=yn,as.AxiosHeaders=nn,as.formToJSON=e=>Xr(jr.isHTMLForm(e)?new FormData(e):e),as.getAdapter=qn.getAdapter,as.HttpStatusCode=ss,as.default=as;const is=as,os="https://backrentalhub.farforrent.com.ua";function ls(e){let{sku:r,currentImageUrl:n,onUploadSuccess:s}=e;const[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(0),[u,h]=(0,t.useState)(null),[m,p]=(0,t.useState)(null),f=(0,t.useRef)(null),x=async e=>{if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type))return void h("\u041d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u0438\u0439 \u0444\u043e\u0440\u043c\u0430\u0442. \u0414\u043e\u0437\u0432\u043e\u043b\u0435\u043d\u0456: JPG, PNG, WEBP");if(e.size>10485760)return void h("\u0424\u0430\u0439\u043b \u0437\u0430\u0432\u0435\u043b\u0438\u043a\u0438\u0439. \u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c: 10MB");h(null),l(!0),d(0);const t=new FileReader;t.onloadend=()=>{p(t.result)},t.readAsDataURL(e);try{const t=new FormData;t.append("file",e);const n=await is.post("".concat(os,"/api/products/").concat(r,"/upload-image"),t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{const t=Math.round(100*e.loaded/e.total);d(t)}});console.log("Upload success:",n.data),s&&s(n.data.image_url),setTimeout(()=>{p(null),d(0)},2e3)}catch(i){var n,a;console.error("Upload error:",i),h((null===(n=i.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.detail)||"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f"),p(null)}finally{l(!1)}};return(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsxs)("div",{className:"relative border-2 border-dashed rounded-lg p-4 sm:p-6 transition-all cursor-pointer\n          ".concat(a?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400","\n          ").concat(o?"pointer-events-none opacity-60":"","\n        "),onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),i(!0)},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),i(!1)},onDrop:async e=>{e.preventDefault(),e.stopPropagation(),i(!1);const t=e.dataTransfer.files;t&&t.length>0&&await x(t[0])},onClick:()=>{var e;null===(e=f.current)||void 0===e||e.click()},children:[(0,Et.jsx)("input",{ref:f,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",capture:"environment",onChange:async e=>{const t=e.target.files;t&&t.length>0&&await x(t[0])},className:"hidden"}),m||n?(0,Et.jsxs)("div",{className:"flex flex-col items-center",children:[(0,Et.jsx)("img",{src:m||"".concat(os,"/").concat(n),alt:"Preview",className:"max-h-48 rounded-lg shadow-sm mb-3",onError:e=>{e.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="200" height="200"%3E%3Crect fill="%23f3f4f6" width="200" height="200"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-family="Arial" font-size="14" fill="%239ca3af"%3ENo Image%3C/text%3E%3C/svg%3E'}}),!o&&(0,Et.jsx)("p",{className:"text-sm text-gray-600",children:"\u041a\u043b\u0456\u043a\u043d\u0456\u0442\u044c \u0430\u0431\u043e \u043f\u0435\u0440\u0435\u0442\u044f\u0433\u043d\u0456\u0442\u044c \u043d\u043e\u0432\u0435 \u0444\u043e\u0442\u043e \u0434\u043b\u044f \u0437\u0430\u043c\u0456\u043d\u0438"})]}):(0,Et.jsxs)("div",{className:"text-center",children:[(0,Et.jsx)("svg",{className:"mx-auto h-10 w-10 sm:h-12 sm:w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,Et.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),(0,Et.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:[(0,Et.jsx)("span",{className:"font-semibold hidden sm:inline",children:"\u041a\u043b\u0456\u043a\u043d\u0456\u0442\u044c \u0434\u043b\u044f \u0432\u0438\u0431\u043e\u0440\u0443"}),(0,Et.jsx)("span",{className:"font-semibold sm:hidden",children:"\ud83d\udcf8 \u0417\u0440\u043e\u0431\u0438\u0442\u0438 \u0444\u043e\u0442\u043e"}),(0,Et.jsx)("span",{className:"hidden sm:inline",children:" \u0430\u0431\u043e \u043f\u0435\u0440\u0435\u0442\u044f\u0433\u043d\u0456\u0442\u044c \u0444\u043e\u0442\u043e"})]}),(0,Et.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG, WEBP \u0434\u043e 10MB"})]}),o&&(0,Et.jsxs)("div",{className:"mt-4",children:[(0,Et.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Et.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(c,"%")}})}),(0,Et.jsxs)("p",{className:"text-center text-sm text-gray-600 mt-2",children:["\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f... ",c,"%"]})]})]}),u&&(0,Et.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,Et.jsx)("p",{className:"text-sm text-red-800",children:u})}),!o&&!u&&100===c&&(0,Et.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:(0,Et.jsx)("p",{className:"text-sm text-green-800",children:"\u2713 \u0424\u043e\u0442\u043e \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043e!"})})]})}const cs=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")},ds=e=>(Number(e)||0).toLocaleString("uk-UA",{maximumFractionDigits:0});function us(e){let{tone:t="slate",children:r}=e;const n={slate:"bg-slate-100 text-slate-700 border-slate-200",green:"bg-emerald-100 text-emerald-700 border-emerald-200",blue:"bg-sky-100 text-sky-700 border-sky-200",amber:"bg-amber-100 text-amber-800 border-amber-200",red:"bg-rose-100 text-rose-700 border-rose-200"};return(0,Et.jsx)("span",{className:cs("inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[10px]",n[t]||n.slate),children:r})}function hs(e){let{children:t,onClick:r,tone:n="slate"}=e;return(0,Et.jsx)("button",{type:"button",onClick:r,className:cs("rounded-full px-3 py-1 text-[11px] font-medium transition",{slate:"bg-slate-900 text-white hover:bg-slate-800",green:"bg-emerald-600 text-white hover:bg-emerald-700",red:"bg-rose-600 text-white hover:bg-rose-700",amber:"bg-amber-500 text-corp-text-dark hover:bg-amber-600",ghost:"bg-white text-slate-700 border border-slate-200 hover:bg-slate-50"}[n]),children:t})}function ms(e){let{status:t}=e;return"ok"===t?(0,Et.jsx)("span",{className:"text-emerald-700",children:"\u2705 \u0437\u0430\u0434\u043e\u0432\u0456\u043b\u044c\u043d\u0438\u0439"}):"minor"===t?(0,Et.jsx)("span",{className:"text-amber-700",children:"\u26a0\ufe0f \u043f\u043e\u0442\u0440\u0435\u0431\u0443\u0454 \u0443\u0432\u0430\u0433\u0438"}):"critical"===t?(0,Et.jsx)("span",{className:"text-rose-700",children:"\u2757 \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u043e"}):(0,Et.jsx)("span",{className:"font-semibold text-rose-800",children:"\u26d4 \u0432\u0442\u0440\u0430\u0447\u0435\u043d\u043e"})}function ps(e){let{item:t}=e;const r=t.daysFromLastAudit>180,n=t.damagesCount>=3;return"lost"===t.status?(0,Et.jsx)(us,{tone:"red",children:"\u0420\u0438\u0437\u0438\u043a: \u0432\u0442\u0440\u0430\u0447\u0435\u043d\u043e"}):"critical"===t.status?(0,Et.jsx)(us,{tone:"red",children:"\u0420\u0438\u0437\u0438\u043a: \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u0438\u0439 \u0441\u0442\u0430\u043d"}):r&&n?(0,Et.jsx)(us,{tone:"red",children:"\u0420\u0438\u0437\u0438\u043a: \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u0438\u0442\u0438 \u043d\u0435\u0433\u0430\u0439\u043d\u043e"}):r?(0,Et.jsx)(us,{tone:"amber",children:"\u041f\u043e\u0442\u0440\u0456\u0431\u0435\u043d \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a"}):n?(0,Et.jsx)(us,{tone:"amber",children:"\u0427\u0430\u0441\u0442\u0430 \u0448\u043a\u043e\u0434\u0430"}):(0,Et.jsx)(us,{tone:"green",children:"\u0420\u0438\u0437\u0438\u043a \u043d\u0438\u0437\u044c\u043a\u0438\u0439"})}function fs(e){var r,n,s,a,i;let{onBackToDashboard:o,onNavigateToTasks:l}=e;const[d,u]=(0,t.useState)([]),[h,m]=(0,t.useState)(null),[p,f]=(0,t.useState)(!1),[x,g]=(0,t.useState)(""),[b,y]=(0,t.useState)("all"),[v,w]=(0,t.useState)("all"),[N,j]=(0,t.useState)({total:0,ok:0,minor:0,crit:0,lost:0,overdueCnt:0}),[_,C]=(0,t.useState)("all"),[S,E]=(0,t.useState)(!1),[A,I]=(0,t.useState)(null),[k,T]=(0,t.useState)(!1),[D,R]=(0,t.useState)([]),[O,M]=(0,t.useState)(!1),[P,L]=(0,t.useState)(!1),[B,F]=(0,t.useState)({name:"",code:"",price:0,rentalPrice:0,color:"",material:"",length:"",width:"",height:"",qty:0,zone:"",location:""}),[U,z]=(0,t.useState)(!1),[H,V]=(0,t.useState)({description:"",severity:"minor",estimated_cost:0,create_damage_case:!1,photo_url:"",action_type:"repair",qty:1}),[W,q]=(0,t.useState)([]),[G,Y]=(0,t.useState)([]),[X,Q]=(0,t.useState)({}),[K,Z]=(0,t.useState)(""),J="https://backrentalhub.farforrent.com.ua",$=async e=>{console.log("[ReauditCabinet] BACKEND_URL:",J),f(!0);try{const t=new URLSearchParams,r=void 0!==(null===e||void 0===e?void 0:e.search)?e.search:x,n=void 0!==(null===e||void 0===e?void 0:e.category)?e.category:b,s=void 0!==(null===e||void 0===e?void 0:e.subcategory)?e.subcategory:v;r&&t.append("q",r),"all"!==n&&t.append("category",n),"all"!==s&&t.append("subcategory",s);const a=await fetch("".concat(J,"/api/audit/items?").concat(t)),i=await a.json(),o=Array.isArray(i)?i:i.items||[];u(o),o.length>0&&!h&&m(o[0].id)}catch(t){console.error("Error:",t)}finally{f(!1)}},ee=async()=>{try{const e=await fetch("".concat(J,"/api/audit/stats")),t=await e.json();j(t)}catch(e){console.error("Error:",e)}};(0,t.useEffect)(()=>{$(),ee(),(async()=>{try{var e;const t=await fetch("".concat(J,"/api/audit/categories")),r=await t.json(),n=Object.values(r.subcategories||{}).reduce((e,t)=>e+t.length,0);console.log("[ReauditCabinet] Categories loaded:",null===(e=r.categories)||void 0===e?void 0:e.length,"main categories |",n,"total subcategories |",Object.keys(r.subcategories||{}).length,"categories with subcategories"),Y(r.categories||[]),Q(r.subcategories||{})}catch(zd){console.error("Error loading categories:",zd),Y([]),Q({})}})()},[x,b,v]),(0,t.useEffect)(()=>{h&&((async e=>{M(!0);try{const t=await fetch("".concat(J,"/api/audit/items/").concat(e,"/rental-history")),r=await t.json();R(r)}catch(zd){console.error("Error loading rental history:",zd),R([])}finally{M(!1)}})(h),(async e=>{try{const t=await fetch("".concat(J,"/api/audit/items/").concat(e,"/damages")),r=await t.json();q(r)}catch(zd){console.error("Error loading damages:",zd),q([])}})(h))},[h]);const te=(0,t.useMemo)(()=>h?d.find(e=>e.id===h)||d[0]||null:d[0]||null,[d,h]),re=(0,t.useMemo)(()=>d.filter(e=>{var t,r;const n="all"===b||(null===(t=e.category)||void 0===t?void 0:t.includes(b)),s="all"===v||(null===(r=e.category)||void 0===r?void 0:r.includes(v));let a=!0;return"audited"===_?a=Boolean(e.lastAuditDate&&e.daysFromLastAudit<=180):"notAudited"===_&&(a=Boolean(!e.lastAuditDate||e.daysFromLastAudit>180)),n&&s&&a}),[d,b,v,_]),ne=(0,t.useMemo)(()=>"all"===b?[]:X[b]||[],[b,X]),se=re.filter(e=>e.daysFromLastAudit>180),ae=re.filter(e=>"critical"===e.status||"lost"===e.status);d.reduce((e,t)=>e+t.totalProfit,0);return te||p?(0,Et.jsxs)("div",{className:"min-h-screen bg-corp-bg-page font-montserrat",children:[(0,Et.jsx)(It,{cabinetName:"\u041a\u0430\u0431\u0456\u043d\u0435\u0442 \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a\u0443",showBackButton:!0,onBackClick:o}),(0,Et.jsx)("div",{className:"mx-auto max-w-7xl px-6 py-4",children:(0,Et.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-4",children:[(0,Et.jsx)("p",{className:"text-sm text-corp-text-muted",children:"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u0441\u0442\u0430\u043d\u0443 \u0434\u0435\u043a\u043e\u0440\u0443, \u0446\u0438\u043a\u043b\u0443 \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f \u0442\u0430 \u0440\u0438\u0437\u0438\u043a\u0456\u0432"}),(0,Et.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-[11px]",children:[(0,Et.jsx)(hs,{tone:"green",onClick:async()=>{try{const e=new URLSearchParams;e.append("category",b),e.append("subcategory",v),x&&e.append("q",x);const t=await fetch("".concat(J,"/api/audit/export?").concat(e));if(!t.ok)throw new Error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0435\u043a\u0441\u043f\u043e\u0440\u0442\u0443");{const e=await t.blob(),r=window.URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download="\u041f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a_".concat((new Date).toISOString().slice(0,10),".xlsx"),document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(r),document.body.removeChild(n),alert("\u2705 \u0424\u0430\u0439\u043b \u0435\u043a\u0441\u043f\u043e\u0440\u0442\u043e\u0432\u0430\u043d\u043e \u0443\u0441\u043f\u0456\u0448\u043d\u043e!")}}catch(e){console.error("Export error:",e),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0435\u043a\u0441\u043f\u043e\u0440\u0442\u0443: "+String(e))}},children:"\u0415\u043a\u0441\u043f\u043e\u0440\u0442 \u0432 Excel"}),(0,Et.jsxs)("label",{className:"cursor-pointer",children:[(0,Et.jsx)("input",{type:"file",accept:".xlsx,.xls",onChange:async e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){try{const e=new FormData;e.append("file",r);const t=await fetch("".concat(J,"/api/audit/import"),{method:"POST",body:e}),n=await t.json();if(!t.ok)throw new Error(n.detail||"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0456\u043c\u043f\u043e\u0440\u0442\u0443");alert("\u2705 ".concat(n.message,"\n\n")+"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e: ".concat(n.updated,"\n")+"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e: ".concat(n.created,"\n")+(n.errors.length>0?"\n\u041f\u043e\u043c\u0438\u043b\u043a\u0438:\n".concat(n.errors.join("\n")):"")),await $(),await ee()}catch(n){console.error("Import error:",n),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0456\u043c\u043f\u043e\u0440\u0442\u0443: "+String(n))}e.target.value=""}},className:"hidden"}),(0,Et.jsx)(hs,{tone:"blue",onClick:()=>{},children:"\u0406\u043c\u043f\u043e\u0440\u0442 \u0437 Excel"})]})]})]})}),(0,Et.jsxs)("div",{className:"mx-auto max-w-7xl px-6 pb-6 space-y-5",children:[(0,Et.jsxs)("div",{className:"grid gap-3 md:grid-cols-5 text-[11px]",children:[(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[(0,Et.jsx)("div",{className:"text-corp-text-muted",children:"\u041f\u043e\u0437\u0438\u0446\u0456\u0439 \u0432 \u0430\u0443\u0434\u0438\u0442\u0456"}),(0,Et.jsx)("div",{className:"mt-1 text-xl font-semibold",children:N.total}),(0,Et.jsx)("div",{className:"mt-1 text-slate-400",children:"\u0437\u0430\u0440\u0430\u0437 \u0443 \u0432\u0438\u0431\u0456\u0440\u0446\u0456"})]}),(0,Et.jsxs)("div",{className:"rounded-2xl border border-emerald-200 bg-emerald-50 p-3",children:[(0,Et.jsx)("div",{className:"text-emerald-700",children:"\u2705 \u041f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a\u0430\u0432\u0430\u043d\u0456"}),(0,Et.jsx)("div",{className:"mt-1 text-xl font-semibold",children:N.ok}),(0,Et.jsx)("div",{className:"mt-0.5 text-xs text-emerald-600",children:"\u041f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a\u043e\u0432\u0430\u043d\u0456 \u043f\u0440\u043e\u0442\u044f\u0433\u043e\u043c 180 \u0434\u043d\u0456\u0432"})]}),(0,Et.jsxs)("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 p-3",children:[(0,Et.jsx)("div",{className:"text-amber-700",children:"\u23f0 \u041f\u043e\u0442\u0440\u0435\u0431\u0443\u044e\u0442\u044c \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a\u0443"}),(0,Et.jsx)("div",{className:"mt-1 text-xl font-semibold",children:N.minor}),(0,Et.jsx)("div",{className:"mt-0.5 text-xs text-amber-600",children:"\u041d\u0435\u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a\u0435\u043d\u0456 \u0430\u0431\u043e \u043f\u0440\u043e\u0441\u0442\u0440\u043e\u0447\u0435\u043d\u0456"})]}),(0,Et.jsxs)("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 p-3",children:[(0,Et.jsx)("div",{className:"text-rose-700",children:"\u26a0\ufe0f \u041a\u0440\u0438\u0442\u0438\u0447\u043d\u0456 (\u0448\u043a\u043e\u0434\u0438)"}),(0,Et.jsx)("div",{className:"mt-1 text-xl font-semibold",children:N.crit}),(0,Et.jsx)("div",{className:"mt-0.5 text-xs text-rose-600",children:"\u0422\u043e\u0432\u0430\u0440\u0438 \u0437 \u0430\u043a\u0442\u0438\u0432\u043d\u0438\u043c\u0438 \u0448\u043a\u043e\u0434\u0430\u043c\u0438"})]})]}),(0,Et.jsxs)("div",{className:"grid gap-4 md:grid-cols-[minmax(0,1.25fr),minmax(0,1.75fr)]",children:[(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 text-[11px] space-y-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-corp-text-muted font-medium mb-1",children:"\ud83d\udd0d \u041f\u043e\u0448\u0443\u043a"}),(0,Et.jsx)("input",{className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\u041d\u0430\u0437\u0432\u0430, \u043a\u043e\u0434, \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f, \u0437\u043e\u043d\u0430...",value:x,onChange:e=>g(e.target.value)})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-corp-text-muted font-medium mb-1",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f"}),(0,Et.jsxs)("select",{className:"w-full rounded-lg border border-slate-300 bg-white px-2 py-1.5 text-xs",value:b,onChange:e=>{y(e.target.value),w("all")},children:[(0,Et.jsx)("option",{value:"all",children:"\u0423\u0441\u0456 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457"}),G.map(e=>(0,Et.jsx)("option",{value:e,children:e},e))]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-corp-text-muted font-medium mb-1",children:"\u041f\u0456\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f"}),(0,Et.jsxs)("select",{className:"w-full rounded-lg border border-slate-300 bg-white px-2 py-1.5 text-xs disabled:bg-slate-100 disabled:text-slate-400",value:v,onChange:e=>w(e.target.value),disabled:"all"===b||0===ne.length,children:[(0,Et.jsx)("option",{value:"all",children:"\u0423\u0441\u0456 \u043f\u0456\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457"}),ne.map(e=>(0,Et.jsx)("option",{value:e,children:e},e))]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-corp-text-muted font-medium mb-1",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,Et.jsxs)("select",{className:"w-full rounded-lg border border-slate-300 bg-white px-2 py-1.5 text-xs",value:_,onChange:e=>C(e.target.value),children:[(0,Et.jsx)("option",{value:"all",children:"\u0423\u0441\u0456"}),(0,Et.jsx)("option",{value:"audited",children:"\u2705 \u041f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a\u043e\u0432\u0430\u043d\u0438\u0439"}),(0,Et.jsx)("option",{value:"notAudited",children:"\u23f0 \u041d\u0435 \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a\u043e\u0432\u0430\u043d\u0438\u0439"})]})]})]}),(0,Et.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,Et.jsxs)("div",{className:"text-corp-text-muted",children:["\u0423 \u0432\u0438\u0431\u0456\u0440\u0446\u0456: ",(0,Et.jsx)("span",{className:"font-semibold text-corp-text-dark",children:re.length})," \u043f\u043e\u0437\u0438\u0446\u0456\u0439"]}),(0,Et.jsx)(hs,{tone:"ghost",onClick:async()=>{if("all"===b)return void alert("\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0443 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e, \u0449\u043e\u0431 \u0437\u0430\u0444\u0456\u043a\u0441\u0443\u0432\u0430\u0442\u0438 \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a.");if(window.confirm('\u0417\u0430\u0444\u0456\u043a\u0441\u0443\u0432\u0430\u0442\u0438 \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a \u0434\u043b\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457 "'.concat(b,'"').concat("all"!==v?" \xb7 ".concat(v):"","?\n\n")+"\u0412\u0441\u0456 \u0442\u043e\u0432\u0430\u0440\u0438 \u0432 \u0446\u0456\u0439 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457 \u0431\u0443\u0434\u0443\u0442\u044c \u043f\u043e\u0437\u043d\u0430\u0447\u0435\u043d\u0456 \u044f\u043a \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a\u0435\u043d\u0456."))try{const e=await fetch("".concat(J,"/api/audit/mark-category-audited"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:b,subcategory:"all"!==v?v:null,audited_by:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"})}),t=await e.json();if(!e.ok)throw new Error(t.detail||"\u041f\u043e\u043c\u0438\u043b\u043a\u0430");alert("\u2705 ".concat(t.message,"\n\u041f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a\u0435\u043d\u043e \u0442\u043e\u0432\u0430\u0440\u0456\u0432: ").concat(t.updated_count)),await $(),await ee()}catch(e){console.error("Error marking category:",e),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0444\u0456\u043a\u0441\u0430\u0446\u0456\u0457 \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a\u0443: "+String(e))}},children:"\u2705 \u0417\u0430\u0444\u0456\u043a\u0441\u0443\u0432\u0430\u0442\u0438 \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457"}),(0,Et.jsx)(hs,{tone:"green",onClick:()=>E(!0),children:"\u2795 \u041d\u043e\u0432\u0438\u0439 \u0442\u043e\u0432\u0430\u0440"})]})]}),(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white overflow-hidden text-[11px]",children:[(0,Et.jsx)("div",{className:"border-b border-slate-100 px-3 py-2 text-corp-text-muted",children:"\u041f\u043e\u0437\u0438\u0446\u0456\u0457 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a\u0443"}),p?(0,Et.jsx)("div",{className:"p-8 text-center text-sm text-corp-text-muted",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."}):(0,Et.jsx)("div",{className:"max-h-[360px] overflow-auto divide-y divide-slate-100",children:re.map(e=>(0,Et.jsxs)("button",{onClick:()=>m(e.id),className:cs("flex w-full items-center justify-between gap-2 px-3 py-2 text-left hover:bg-slate-50",(null===te||void 0===te?void 0:te.id)===e.id&&"bg-slate-900/5"),children:[(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsx)("div",{className:"font-semibold text-corp-text-dark",children:e.name}),(0,Et.jsxs)("div",{className:"mt-0.5 text-[10px] text-corp-text-muted",children:[(0,Et.jsx)("span",{className:"font-mono text-slate-700",children:e.code}),(0,Et.jsxs)("span",{children:[" \xb7 ",e.category]}),(0,Et.jsxs)("span",{children:[" \xb7 ",e.zone]}),(0,Et.jsxs)("span",{children:[" \xb7 \u043c\u0456\u0441\u0446\u0435: ",e.location]})]}),(0,Et.jsxs)("div",{className:"mt-1 flex gap-2",children:[(0,Et.jsx)(ms,{status:e.status}),(0,Et.jsx)(ps,{item:e})]})]}),(0,Et.jsxs)("div",{className:"text-[10px] text-corp-text-muted text-right",children:[(0,Et.jsxs)("div",{children:["\u041a-\u0441\u0442\u044c: ",e.qty]}),(0,Et.jsxs)("div",{children:["\u041e\u0441\u0442\u0430\u043d\u043d\u0456\u0439: ",e.lastAuditDate]}),(0,Et.jsxs)("div",{children:[e.daysFromLastAudit," \u0434\u043d\u0456\u0432 \u0442\u043e\u043c\u0443"]})]})]},e.id))})]})]}),te&&(0,Et.jsxs)("div",{className:"space-y-3 text-[11px]",children:[(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[(0,Et.jsxs)("div",{className:"mb-4",children:[(0,Et.jsx)("div",{className:"text-xs font-medium text-slate-700 mb-2",children:"\ud83d\udcf8 \u0424\u043e\u0442\u043e \u0442\u043e\u0432\u0430\u0440\u0443"}),(0,Et.jsx)(ls,{sku:te.code,currentImageUrl:te.imageUrl,onUploadSuccess:e=>{u(d.map(t=>t.code===te.code?c(c({},t),{},{imageUrl:e}):t))}})]}),(0,Et.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,Et.jsx)("div",{className:"flex items-center gap-3",children:(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-sm font-semibold text-corp-text-dark",children:te.name}),(0,Et.jsxs)("div",{className:"text-[10px] text-corp-text-muted",children:[te.category," \xb7 ",te.zone," \xb7 \u043c\u0456\u0441\u0446\u0435: ",te.location]})]})}),(0,Et.jsxs)("div",{className:"flex flex-col items-end gap-1 text-[10px]",children:[(0,Et.jsx)(ms,{status:te.status}),(0,Et.jsx)(ps,{item:te}),(0,Et.jsxs)("div",{className:"text-corp-text-muted",children:["\u041e\u0441\u0442\u0430\u043d\u043d\u0456\u0439 \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a: ",te.lastAuditDate,te.lastAuditBy&&(0,Et.jsxs)(Et.Fragment,{children:[" \xb7 ",te.lastAuditBy]})]}),te.nextAuditDate&&(0,Et.jsxs)("div",{className:"text-slate-400",children:["\u041d\u0430\u0441\u0442\u0443\u043f\u043d\u0438\u0439: ",te.nextAuditDate]})]})]}),(0,Et.jsxs)("div",{className:"mt-4 grid gap-3 md:grid-cols-3",children:[(0,Et.jsxs)("div",{className:"rounded-xl bg-slate-50 p-3",children:[(0,Et.jsx)("div",{className:"text-corp-text-muted",children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0456"}),(0,Et.jsx)("div",{className:"mt-1 text-lg font-semibold text-corp-text-dark",children:te.qty})]}),(0,Et.jsxs)("div",{className:"rounded-xl bg-slate-50 p-3",children:[(0,Et.jsx)("div",{className:"text-corp-text-muted",children:"\u0411\u0443\u043b\u043e \u0432 \u043e\u0440\u0435\u043d\u0434\u0456"}),(0,Et.jsxs)("div",{className:"mt-1 text-lg font-semibold text-corp-text-dark",children:[te.rentalsCount," \u0440\u0430\u0437\u0456\u0432"]}),(0,Et.jsxs)("div",{className:"mt-1 text-slate-400",children:["\u043e\u0441\u0442\u0430\u043d\u043d\u0456\u0439: ",te.lastOrderId||"\u2014"]})]}),(0,Et.jsxs)("div",{className:"rounded-xl bg-slate-50 p-3",children:[(0,Et.jsx)("div",{className:"text-corp-text-muted",children:"\u041a\u0435\u0439\u0441\u0438 \u0448\u043a\u043e\u0434\u0438"}),(0,Et.jsx)("div",{className:"mt-1 text-lg font-semibold text-corp-text-dark",children:te.damagesCount}),(0,Et.jsxs)("div",{className:"mt-1 text-slate-400",children:["\u0434\u043e\u0445\u043e\u0434\u0443: \u20b4 ",ds(te.totalProfit)]})]})]}),(0,Et.jsxs)("div",{className:"mt-4 rounded-xl border border-slate-200 bg-gradient-to-br from-slate-50 to-white p-4",children:[(0,Et.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,Et.jsx)("div",{className:"font-semibold text-corp-text-dark",children:"\ud83d\udcdd \u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f \u043a\u0430\u0440\u0442\u043a\u0438"}),!P&&(0,Et.jsx)(hs,{tone:"slate",onClick:()=>{L(!0);const e=(te.size||"").split("x");F({name:te.name,code:te.code,price:te.price||0,rentalPrice:te.rentalPrice||0,color:te.color||"",material:te.material||"",length:e[0]||"",width:e[1]||"",height:e[2]||"",qty:te.qty,zone:te.zone||"",location:te.location||""})},children:"\u270f\ufe0f \u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"})]}),P?(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[10px] text-corp-text-main mb-1",children:"\ud83d\udcdd \u041d\u0430\u0437\u0432\u0430 \u0442\u043e\u0432\u0430\u0440\u0443"}),(0,Et.jsx)("input",{type:"text",value:B.name,onChange:e=>F(c(c({},B),{},{name:e.target.value})),className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[10px] text-corp-text-main mb-1",children:"\ud83c\udff7\ufe0f \u041a\u043e\u0434 \u0442\u043e\u0432\u0430\u0440\u0443 (SKU)"}),(0,Et.jsx)("input",{type:"text",value:B.code,onChange:e=>F(c(c({},B),{},{code:e.target.value})),className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm font-mono"})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[10px] text-corp-text-main mb-1",children:"\ud83d\udcb0 \u0426\u0456\u043d\u0430 \u043a\u0443\u043f\u0456\u0432\u043b\u0456"}),(0,Et.jsx)("input",{type:"number",step:"0.01",value:B.price,onChange:e=>F(c(c({},B),{},{price:parseFloat(e.target.value)||0})),placeholder:"0.00",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[10px] text-corp-text-main mb-1",children:"\ud83d\udcb5 \u0426\u0456\u043d\u0430 \u043e\u0440\u0435\u043d\u0434\u0438 \u0437\u0430 \u0434\u0435\u043d\u044c"}),(0,Et.jsx)("input",{type:"number",step:"0.01",value:B.rentalPrice,onChange:e=>F(c(c({},B),{},{rentalPrice:parseFloat(e.target.value)||0})),placeholder:"0.00",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm"})]})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[10px] text-corp-text-main mb-1",children:"\ud83c\udfa8 \u041a\u043e\u043b\u0456\u0440"}),(0,Et.jsx)("input",{type:"text",value:B.color,onChange:e=>F(c(c({},B),{},{color:e.target.value})),placeholder:"\u043d\u0430\u043f\u0440. \u0437\u043e\u043b\u043e\u0442\u043e, \u0447\u043e\u0440\u043d\u0438\u0439",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[10px] text-corp-text-main mb-1",children:"\ud83d\udd28 \u041c\u0430\u0442\u0435\u0440\u0456\u0430\u043b"}),(0,Et.jsx)("input",{type:"text",value:B.material,onChange:e=>F(c(c({},B),{},{material:e.target.value})),placeholder:"\u043d\u0430\u043f\u0440. \u043c\u0435\u0442\u0430\u043b, \u0441\u043a\u043b\u043e",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[10px] text-corp-text-main mb-2",children:"\ud83d\udccf \u0420\u043e\u0437\u043c\u0456\u0440\u0438 (\u0441\u043c)"}),(0,Et.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[9px] text-corp-text-muted mb-1",children:"\u0414\u043e\u0432\u0436\u0438\u043d\u0430"}),(0,Et.jsx)("input",{type:"text",value:B.length,onChange:e=>F(c(c({},B),{},{length:e.target.value})),placeholder:"50",className:"w-full rounded-lg border border-slate-200 px-2 py-1.5 text-sm"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[9px] text-corp-text-muted mb-1",children:"\u0428\u0438\u0440\u0438\u043d\u0430"}),(0,Et.jsx)("input",{type:"text",value:B.width,onChange:e=>F(c(c({},B),{},{width:e.target.value})),placeholder:"50",className:"w-full rounded-lg border border-slate-200 px-2 py-1.5 text-sm"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[9px] text-corp-text-muted mb-1",children:"\u0412\u0438\u0441\u043e\u0442\u0430"}),(0,Et.jsx)("input",{type:"text",value:B.height,onChange:e=>F(c(c({},B),{},{height:e.target.value})),placeholder:"50",className:"w-full rounded-lg border border-slate-200 px-2 py-1.5 text-sm"})]})]})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[10px] text-corp-text-main mb-1",children:"\ud83d\udce6 \u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"}),(0,Et.jsx)("input",{type:"number",value:B.qty,onChange:e=>F(c(c({},B),{},{qty:parseInt(e.target.value)||0})),className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[10px] text-corp-text-main mb-1",children:"\ud83c\udfe2 \u0417\u043e\u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0443"}),(0,Et.jsx)("input",{type:"text",value:B.zone,onChange:e=>F(c(c({},B),{},{zone:e.target.value})),placeholder:"\u043d\u0430\u043f\u0440. 6",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[10px] text-corp-text-main mb-1",children:"\ud83d\udccd \u041c\u0456\u0441\u0446\u0435 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0456"}),(0,Et.jsx)("input",{type:"text",value:B.location,onChange:e=>F(c(c({},B),{},{location:e.target.value})),placeholder:"\u043d\u0430\u043f\u0440. 6A12",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm"})]}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsx)(hs,{tone:"green",onClick:async()=>{try{const e=[B.length,B.width,B.height].filter(e=>e&&e.trim()).join("x"),t=await fetch("".concat(J,"/api/audit/items/").concat(te.id,"/edit-full"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:B.name,code:B.code,price:B.price,rentalPrice:B.rentalPrice,color:B.color,material:B.material,size:e,qty:B.qty,zone:B.zone,location:B.location,actor:"\u0420\u0435\u043a\u0432\u0456\u0437\u0438\u0442\u043e\u0440"})}),r=await t.json();r.success?(alert("\u2705 \u0417\u043c\u0456\u043d\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e!\n".concat(r.changes.join("\n"))),L(!1),$()):alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430: "+JSON.stringify(r))}catch(zd){alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430: "+String(zd))}},children:"\ud83d\udcbe \u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u043c\u0456\u043d\u0438"}),(0,Et.jsx)(hs,{tone:"slate",onClick:()=>L(!1),children:"\u274c \u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"})]})]}):(0,Et.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Et.jsxs)("div",{className:"flex justify-between",children:[(0,Et.jsx)("span",{className:"text-corp-text-main",children:"\ud83c\udff7\ufe0f \u041a\u043e\u0434:"}),(0,Et.jsx)("span",{className:"font-medium text-corp-text-dark font-mono",children:te.code})]}),(0,Et.jsxs)("div",{className:"flex justify-between",children:[(0,Et.jsx)("span",{className:"text-corp-text-main",children:"\ud83d\udcb0 \u0426\u0456\u043d\u0430 \u043a\u0443\u043f\u0456\u0432\u043b\u0456:"}),(0,Et.jsx)("span",{className:"font-medium text-corp-text-dark",children:te.price?"\u20b4".concat(te.price.toFixed(2)):"\u2014"})]}),(0,Et.jsxs)("div",{className:"flex justify-between",children:[(0,Et.jsx)("span",{className:"text-corp-text-main",children:"\ud83d\udcb5 \u0426\u0456\u043d\u0430 \u043e\u0440\u0435\u043d\u0434\u0438:"}),(0,Et.jsx)("span",{className:"font-medium text-corp-text-dark",children:te.rentalPrice?"\u20b4".concat(te.rentalPrice.toFixed(2),"/\u0434\u0435\u043d\u044c"):"\u2014"})]}),(0,Et.jsxs)("div",{className:"flex justify-between",children:[(0,Et.jsx)("span",{className:"text-corp-text-main",children:"\ud83c\udfa8 \u041a\u043e\u043b\u0456\u0440:"}),(0,Et.jsx)("span",{className:"font-medium text-corp-text-dark",children:te.color||"\u2014"})]}),(0,Et.jsxs)("div",{className:"flex justify-between",children:[(0,Et.jsx)("span",{className:"text-corp-text-main",children:"\ud83d\udd28 \u041c\u0430\u0442\u0435\u0440\u0456\u0430\u043b:"}),(0,Et.jsx)("span",{className:"font-medium text-corp-text-dark",children:te.material||"\u2014"})]}),(0,Et.jsxs)("div",{className:"flex justify-between",children:[(0,Et.jsx)("span",{className:"text-corp-text-main",children:"\ud83d\udccf \u0420\u043e\u0437\u043c\u0456\u0440:"}),(0,Et.jsx)("span",{className:"font-medium text-corp-text-dark",children:te.size||"\u2014"})]}),(0,Et.jsxs)("div",{className:"flex justify-between",children:[(0,Et.jsx)("span",{className:"text-corp-text-main",children:"\ud83d\udccd \u041c\u0456\u0441\u0446\u0435:"}),(0,Et.jsxs)("span",{className:"font-medium text-corp-text-dark",children:[te.zone," / ",te.location]})]})]})]}),(te.description||te.careInstructions)&&(0,Et.jsxs)("div",{className:"mt-4 space-y-3",children:[te.description&&(0,Et.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3",children:[(0,Et.jsx)("div",{className:"mb-1 text-[10px] font-semibold text-corp-text-main",children:"\ud83d\udcc4 \u041e\u043f\u0438\u0441 \u0442\u043e\u0432\u0430\u0440\u0443"}),(0,Et.jsx)("div",{className:"text-[11px] text-slate-700",dangerouslySetInnerHTML:{__html:te.description}})]}),te.careInstructions&&(0,Et.jsxs)("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 p-3",children:[(0,Et.jsx)("div",{className:"mb-1 text-[10px] font-semibold text-emerald-700",children:"\ud83d\udca1 \u0406\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0456\u044f \u043f\u043e \u0434\u043e\u0433\u043b\u044f\u0434\u0443"}),(0,Et.jsx)("div",{className:"text-[11px] text-emerald-800",dangerouslySetInnerHTML:{__html:te.careInstructions}})]})]}),(0,Et.jsxs)("div",{className:"mt-4 grid gap-4 md:grid-cols-[minmax(0,1.4fr),minmax(0,1.6fr)]",children:[(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"mb-1 block text-[10px] font-semibold text-corp-text-dark",children:"\ud83d\udcc4 \u041e\u043f\u0438\u0441 \u0442\u043e\u0432\u0430\u0440\u0443"}),(0,Et.jsx)("textarea",{id:"description-field",rows:4,defaultValue:(null===(r=te.description)||void 0===r?void 0:r.replace(/<[^>]*>/g,""))||"",className:"w-full rounded-xl border border-slate-200 bg-white px-3 py-1.5 text-[11px]",placeholder:"\u0414\u0435\u0442\u0430\u043b\u044c\u043d\u0438\u0439 \u043e\u043f\u0438\u0441 \u0442\u043e\u0432\u0430\u0440\u0443, \u043e\u0441\u043e\u0431\u043b\u0438\u0432\u043e\u0441\u0442\u0456, \u043f\u0440\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f..."})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"mb-1 block text-[10px] font-semibold text-emerald-700",children:"\ud83d\udca1 \u0406\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0456\u044f \u043f\u043e \u0434\u043e\u0433\u043b\u044f\u0434\u0443"}),(0,Et.jsx)("textarea",{id:"care-field",rows:3,defaultValue:(null===(n=te.careInstructions)||void 0===n?void 0:n.replace(/<[^>]*>/g,""))||"",className:"w-full rounded-xl border border-emerald-200 bg-emerald-50 px-3 py-1.5 text-[11px]",placeholder:"\u042f\u043a \u043c\u0438\u0442\u0438, \u0437\u0431\u0435\u0440\u0456\u0433\u0430\u0442\u0438, \u0434\u043e\u0433\u043b\u044f\u0434\u0430\u0442\u0438 \u0437\u0430 \u0442\u043e\u0432\u0430\u0440\u043e\u043c..."})]}),(0,Et.jsx)("div",{className:"flex justify-end",children:(0,Et.jsx)(hs,{tone:"green",onClick:async()=>{const e=document.getElementById("description-field"),t=document.getElementById("care-field");if(e&&t)try{const r=await fetch("".concat(J,"/api/audit/items/").concat(te.id,"/update-info"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:e.value,care_instructions:t.value})});(await r.json()).success&&(alert("\u2705 \u041e\u043f\u0438\u0441 \u0456 \u0456\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0456\u044e \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e!"),$())}catch(zd){alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430: "+String(zd))}},children:"\ud83d\udcbe \u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u043e\u043f\u0438\u0441 \u0456 \u0456\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0456\u044e"})})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"mb-1 font-semibold text-corp-text-dark",children:"\u0428\u0432\u0438\u0434\u043a\u0456 \u0434\u0456\u0457"}),(0,Et.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,Et.jsx)(hs,{tone:"green",onClick:()=>(async e=>{const t=prompt("\u041d\u0430\u0441\u0442\u0443\u043f\u043d\u0438\u0439 \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a \u0447\u0435\u0440\u0435\u0437 (\u0434\u043d\u0456\u0432)?","180");try{const r=await fetch("".concat(J,"/api/audit/items/").concat(e.id,"/mark-as-audited"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({audited_by:"\u0420\u0435\u043a\u0432\u0456\u0437\u0438\u0442\u043e\u0440",audit_status:"ok",notes:"\u041f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u043e",next_audit_days:t||"180"})});if((await r.json()).success){const r=(new Date).toISOString().split("T")[0],n=new Date;n.setDate(n.getDate()+parseInt(t||"180"));const s=n.toISOString().split("T")[0];u(t=>t.map(t=>t.id===e.id?c(c({},t),{},{lastAuditDate:r,lastAuditBy:"\u0420\u0435\u043a\u0432\u0456\u0437\u0438\u0442\u043e\u0440",nextAuditDate:s,daysFromLastAudit:0}):t)),alert("\u2705 \u041f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a \u0437\u0430\u0444\u0456\u043a\u0441\u043e\u0432\u0430\u043d\u043e!"),$()}}catch(r){alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430")}})(te),children:"\u2705 \u0417\u0430\u0444\u0456\u043a\u0441\u0443\u0432\u0430\u0442\u0438 \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a"}),(0,Et.jsx)(hs,{tone:"red",onClick:()=>z(!0),children:"\ud83d\udca5 \u041a\u0435\u0439\u0441 \u0448\u043a\u043e\u0434\u0438"})]})]}),(0,Et.jsxs)("div",{className:"rounded-xl border border-orange-200 bg-gradient-to-br from-orange-50 to-white p-3",children:[(0,Et.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,Et.jsx)("div",{className:"font-semibold text-orange-900",children:"\u26a0\ufe0f \u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f"}),!U&&(0,Et.jsx)(hs,{tone:"amber",onClick:()=>z(!0),children:"+ \u0414\u043e\u0434\u0430\u0442\u0438"})]}),U?(0,Et.jsxs)("div",{className:"space-y-2",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[10px] text-corp-text-main mb-1",children:"\u041e\u043f\u0438\u0441 \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f"}),(0,Et.jsx)("textarea",{value:H.description,onChange:e=>V(c(c({},H),{},{description:e.target.value})),placeholder:"\u043d\u0430\u043f\u0440. \u0422\u0440\u0456\u0449\u0438\u043d\u0430 5\u0441\u043c \u043d\u0430 \u043d\u0456\u0436\u0446\u0456, \u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0430 \u043d\u0430 \u0441\u0442\u0456\u043b\u044c\u043d\u0438\u0446\u0456...",className:"w-full rounded-lg border border-slate-200 px-2 py-1.5 text-sm",rows:3})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[10px] text-corp-text-main mb-1",children:"\ud83d\udcf7 \u0424\u043e\u0442\u043e \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f"}),(0,Et.jsxs)("div",{className:"flex items-start gap-2",children:[(0,Et.jsx)("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:async e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){T(!0);const e=new FormData;e.append("file",r);try{const t=await fetch("".concat(J,"/api/products/upload-image"),{method:"POST",body:e}),r=await t.json();t.ok&&V(c(c({},H),{},{photo_url:r.url}))}catch(n){alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0444\u043e\u0442\u043e")}finally{T(!1)}}},className:"flex-1 rounded-lg border border-slate-200 px-2 py-1 text-[11px]",disabled:k}),H.photo_url&&(0,Et.jsxs)("div",{className:"relative",children:[(0,Et.jsx)("img",{src:"".concat(J).concat(H.photo_url),alt:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f",className:"h-16 w-16 rounded-lg border border-orange-200 object-cover"}),(0,Et.jsx)("button",{type:"button",onClick:()=>V(c(c({},H),{},{photo_url:""})),className:"absolute -right-1 -top-1 rounded-full bg-rose-500 px-1 text-[10px] text-white hover:bg-rose-600",children:"\u2715"})]}),k&&(0,Et.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-lg border border-slate-200 bg-slate-50",children:(0,Et.jsx)("div",{className:"text-[9px] text-slate-400",children:"..."})})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[10px] text-corp-text-main mb-1",children:"\ud83d\udd27 \u0422\u0438\u043f \u0434\u0456\u0457"}),(0,Et.jsxs)("select",{value:H.action_type,onChange:e=>V(c(c({},H),{},{action_type:e.target.value})),className:"w-full rounded-lg border border-slate-200 px-2 py-1.5 text-sm",children:[(0,Et.jsx)("option",{value:"repair",children:"\ud83d\udd27 \u0420\u0435\u043c\u043e\u043d\u0442 (\u0437\u0430\u043c\u043e\u0440\u043e\u0436\u0443\u0454 \u0442\u043e\u0432\u0430\u0440)"}),(0,Et.jsx)("option",{value:"restoration",children:"\ud83c\udfa8 \u0420\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f (\u0437\u0430\u043c\u043e\u0440\u043e\u0436\u0443\u0454 \u0442\u043e\u0432\u0430\u0440)"}),(0,Et.jsx)("option",{value:"washing",children:"\ud83e\uddfc \u041c\u0438\u0439\u043a\u0430 (\u0437\u0430\u043c\u043e\u0440\u043e\u0436\u0443\u0454 \u0442\u043e\u0432\u0430\u0440)"}),(0,Et.jsx)("option",{value:"total_loss",children:"\ud83d\udc94 \u041f\u043e\u0432\u043d\u0430 \u0432\u0442\u0440\u0430\u0442\u0430 (\u0432\u0456\u0434\u043d\u0456\u043c\u0430\u0454 \u043a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c)"})]})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[10px] text-corp-text-main mb-1",children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"}),(0,Et.jsx)("input",{type:"number",min:"1",max:(null===te||void 0===te?void 0:te.qty)||1,value:H.qty,onChange:e=>V(c(c({},H),{},{qty:parseInt(e.target.value)||1})),className:"w-full rounded-lg border border-slate-200 px-2 py-1.5 text-sm"}),(0,Et.jsxs)("div",{className:"mt-0.5 text-[9px] text-corp-text-muted",children:["\u041c\u0430\u043a\u0441: ",(null===te||void 0===te?void 0:te.qty)||0]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[10px] text-corp-text-main mb-1",children:"\u0421\u0442\u0443\u043f\u0456\u043d\u044c"}),(0,Et.jsxs)("select",{value:H.severity,onChange:e=>V(c(c({},H),{},{severity:e.target.value})),className:"w-full rounded-lg border border-slate-200 px-2 py-1.5 text-sm",children:[(0,Et.jsx)("option",{value:"minor",children:"\u041d\u0435\u0437\u043d\u0430\u0447\u043d\u0435"}),(0,Et.jsx)("option",{value:"critical",children:"\u041a\u0440\u0438\u0442\u0438\u0447\u043d\u0435"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[10px] text-corp-text-main mb-1",children:"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c \u20b4"}),(0,Et.jsx)("input",{type:"number",value:H.estimated_cost,onChange:e=>V(c(c({},H),{},{estimated_cost:parseFloat(e.target.value)||0})),className:"w-full rounded-lg border border-slate-200 px-2 py-1.5 text-sm"})]})]}),"total_loss"===H.action_type&&(0,Et.jsxs)("div",{className:"rounded-lg bg-rose-50 border border-rose-200 p-2 text-[11px] text-rose-700",children:["\u26a0\ufe0f \u0423\u0432\u0430\u0433\u0430: \u041f\u043e\u0432\u043d\u0430 \u0432\u0442\u0440\u0430\u0442\u0430 \u0432\u0456\u0434\u043d\u0456\u043c\u0430\u0454 ",H.qty," \u043e\u0434. \u0432\u0456\u0434 \u0437\u0430\u0433\u0430\u043b\u044c\u043d\u043e\u0457 \u043a\u0456\u043b\u044c\u043a\u043e\u0441\u0442\u0456 \u0442\u043e\u0432\u0430\u0440\u0443!"]}),"total_loss"!==H.action_type&&(0,Et.jsxs)("div",{className:"rounded-lg bg-blue-50 border border-blue-200 p-2 text-[11px] text-blue-700",children:["\u2139\ufe0f ",H.qty," \u043e\u0434. \u0431\u0443\u0434\u0435 \u0437\u0430\u043c\u043e\u0440\u043e\u0436\u0435\u043d\u043e \u0434\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044f \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u0438"]}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsx)(hs,{tone:"amber",onClick:async()=>{if(H.description.trim())if(H.qty<=0||H.qty>((null===te||void 0===te?void 0:te.qty)||0))alert("\u041d\u0435\u043a\u043e\u0440\u0435\u043a\u0442\u043d\u0430 \u043a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c. \u0414\u043e\u0441\u0442\u0443\u043f\u043d\u043e: ".concat((null===te||void 0===te?void 0:te.qty)||0));else try{const e=localStorage.getItem("token"),t={"Content-Type":"application/json"};e&&(t.Authorization="Bearer ".concat(e));const r=await fetch("".concat(J,"/api/damage-cases/create"),{method:"POST",headers:t,body:JSON.stringify({product_id:te.product_id,qty:H.qty,action_type:H.action_type,description:H.description,estimated_cost:H.estimated_cost})}),n=await r.json();n.success?(alert("\u2705 ".concat(n.message,"\n\n\u041d\u043e\u043c\u0435\u0440 \u043a\u0435\u0439\u0441\u0443: ").concat(n.case_number||n.damage_id)),z(!1),V({description:"",severity:"minor",estimated_cost:0,create_damage_case:!1,photo_url:"",action_type:"repair",qty:1}),$(),ee()):alert("\u274c "+(n.detail||"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f \u043a\u0435\u0439\u0441\u0443"))}catch(zd){alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430: "+String(zd))}else alert("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043e\u043f\u0438\u0441 \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f")},children:"\ud83d\udcbe \u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u043a\u0435\u0439\u0441"}),(0,Et.jsx)(hs,{tone:"slate",onClick:()=>{z(!1),V({description:"",severity:"minor",estimated_cost:0,create_damage_case:!1,photo_url:"",action_type:"repair",qty:1})},children:"\u274c \u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"})]})]}):(0,Et.jsx)("div",{children:W.length>0?(0,Et.jsxs)("div",{className:"space-y-2 text-xs",children:[W.slice(0,3).map((e,t)=>(0,Et.jsx)("div",{className:"rounded-lg bg-white border border-orange-100 p-2",children:(0,Et.jsxs)("div",{className:"flex gap-2",children:[e.photo_url&&(0,Et.jsx)("img",{src:"".concat(J).concat(e.photo_url),alt:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f",className:"h-16 w-16 rounded-lg border border-orange-200 object-cover flex-shrink-0"}),(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsx)("div",{className:"font-medium text-orange-900",children:new Date(e.date).toLocaleDateString("uk-UA")}),(0,Et.jsx)("div",{className:"text-corp-text-main mt-1",children:e.notes}),(0,Et.jsxs)("div",{className:"text-[10px] text-slate-400 mt-1",children:["\u0417\u0430\u0444\u0456\u043a\u0441\u0443\u0432\u0430\u0432: ",e.actor]})]})]})},t)),W.length>3&&(0,Et.jsxs)("div",{className:"text-center text-[10px] text-slate-400",children:["\u0429\u0435 ",W.length-3," \u0437\u0430\u043f\u0438\u0441\u0456\u0432..."]})]}):(0,Et.jsx)("div",{className:"text-sm text-corp-text-muted",children:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u044c \u043d\u0435 \u0437\u0430\u0444\u0456\u043a\u0441\u043e\u0432\u0430\u043d\u043e"})})]})]}),(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3",children:[(0,Et.jsx)("div",{className:"mb-1 font-semibold text-corp-text-dark",children:"\u0416\u0438\u0442\u0442\u0454\u0432\u0438\u0439 \u0446\u0438\u043a\u043b \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0430"}),(0,Et.jsxs)("div",{className:"text-corp-text-main",children:[(0,Et.jsxs)("p",{children:["\u0426\u0435\u0439 \u043f\u0440\u0435\u0434\u043c\u0435\u0442 \u0431\u0443\u0432 \u0432 \u043e\u0440\u0435\u043d\u0434\u0456 ",(0,Et.jsx)("strong",{children:te.rentalsCount})," \u0440\u0430\u0437\u0456\u0432 \u0442\u0430 \u043f\u0440\u0438\u043d\u0456\u0441"," ",(0,Et.jsxs)("strong",{children:["\u20b4 ",ds(te.totalProfit)]})," \u0434\u043e\u0445\u043e\u0434\u0443. \u041a\u0435\u0439\u0441\u0456\u0432 \u0448\u043a\u043e\u0434\u0438:"," ",(0,Et.jsx)("strong",{children:te.damagesCount}),"."]}),(0,Et.jsxs)("p",{className:"mt-1",children:["\u041e\u0441\u0442\u0430\u043d\u043d\u0456\u0439 \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a \u0431\u0443\u0432 ",(0,Et.jsx)("strong",{children:te.daysFromLastAudit})," \u0434\u043d\u0456\u0432 \u0442\u043e\u043c\u0443."]}),(0,Et.jsx)("p",{className:"mt-1",children:"\u042f\u043a\u0449\u043e \u043f\u0440\u0435\u0434\u043c\u0435\u0442 \u0447\u0430\u0441\u0442\u043e \u043f\u043e\u0432\u0435\u0440\u0442\u0430\u0454\u0442\u044c\u0441\u044f \u0437 \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f\u043c\u0438 \u0430\u0431\u043e \u043c\u0430\u0439\u0436\u0435 \u043d\u0435 \u0437\u0434\u0430\u0454\u0442\u044c\u0441\u044f, \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u043c\u043e\u0436\u0435 \u043f\u0456\u0434\u043a\u0430\u0437\u0430\u0442\u0438 \u0441\u043f\u0438\u0441\u0430\u043d\u043d\u044f \u0430\u0431\u043e \u0437\u0430\u043c\u0456\u043d\u0443."})]})]}),(0,Et.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-3",children:[(0,Et.jsx)("div",{className:"mb-2 font-semibold text-corp-text-dark",children:"\u0406\u0441\u0442\u043e\u0440\u0456\u044f \u043e\u0440\u0435\u043d\u0434"}),O?(0,Et.jsx)("div",{className:"text-sm text-corp-text-muted",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."}):D.length>0?(0,Et.jsx)("div",{className:"max-h-64 space-y-2 overflow-y-auto",children:D.map((e,t)=>(0,Et.jsxs)("div",{className:"rounded-lg border border-slate-100 bg-slate-50 p-2 text-[11px]",children:[(0,Et.jsxs)("div",{className:"mb-1 flex items-center justify-between",children:[(0,Et.jsx)("span",{className:"font-semibold text-corp-text-dark",children:e.order_number}),(0,Et.jsxs)("span",{className:"rounded bg-emerald-100 px-1.5 py-0.5 text-[10px] text-emerald-700",children:["\u20b4 ",ds(e.total_rental)]})]}),(0,Et.jsxs)("div",{className:"text-corp-text-main",children:[(0,Et.jsxs)("div",{children:["\ud83d\udcc5 ",e.rent_date?new Date(e.rent_date).toLocaleDateString("uk-UA"):"\u041d/\u0414",e.rent_return_date&&" \u2192 ".concat(new Date(e.rent_return_date).toLocaleDateString("uk-UA"))]}),(0,Et.jsxs)("div",{children:["\ud83d\udc64 ",e.client_name||"\u041a\u043b\u0456\u0454\u043d\u0442 \u043d\u0435 \u0432\u043a\u0430\u0437\u0430\u043d\u0438\u0439"]}),(0,Et.jsxs)("div",{children:["\ud83d\udcde ",e.client_phone||"\u2014"]}),(0,Et.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,Et.jsx)(us,{tone:"completed"===e.status?"green":"active"===e.status?"blue":"slate",children:e.status}),(0,Et.jsxs)("span",{className:"text-[10px] text-corp-text-muted",children:[e.rental_days," ",1===e.rental_days?"\u0434\u0435\u043d\u044c":e.rental_days<5?"\u0434\u043d\u0456":"\u0434\u043d\u0456\u0432"," \xb7 \u041a\u0456\u043b-\u0441\u0442\u044c: ",e.quantity]})]})]})]},t))}):(0,Et.jsx)("div",{className:"text-sm text-corp-text-muted",children:"\ud83d\udccb \u0426\u0435\u0439 \u0442\u043e\u0432\u0430\u0440 \u0449\u0435 \u043d\u0435 \u0437\u0434\u0430\u0432\u0430\u0432\u0441\u044f \u0432 \u043e\u0440\u0435\u043d\u0434\u0443"})]})]})]})]}),(se.length>0||ae.length>0)&&(0,Et.jsxs)("div",{className:"rounded-2xl border border-amber-300 bg-amber-50 p-3 text-amber-800",children:[se.length>0&&(0,Et.jsxs)("div",{className:"mb-1",children:["\u26a0\ufe0f \u041f\u043e\u0442\u0440\u0456\u0431\u0435\u043d \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a: ",(0,Et.jsx)("strong",{children:se.length})," \u043f\u043e\u0437\u0438\u0446\u0456\u0439 \u043d\u0435 \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u044f\u043b\u0438\u0441\u044c \u0431\u0456\u043b\u044c\u0448\u0435 \u043d\u0456\u0436 6 \u043c\u0456\u0441\u044f\u0446\u0456\u0432."]}),ae.length>0&&(0,Et.jsxs)("div",{children:["\u2757 \u041a\u0440\u0438\u0442\u0438\u0447\u043d\u0456 / \u0432\u0442\u0440\u0430\u0447\u0435\u043d\u0456 \u043f\u043e\u0437\u0438\u0446\u0456\u0457: ",(0,Et.jsx)("strong",{children:ae.length}),". \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0454\u043c\u043e \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u0438\u0442\u0438."]})]})]})]}),S&&(0,Et.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>{E(!1),I(null)},children:(0,Et.jsxs)("div",{className:"w-full max-w-2xl rounded-2xl bg-white p-6 shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,Et.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,Et.jsx)("h2",{className:"text-xl font-bold text-corp-text-dark",children:"\u2795 \u0414\u043e\u0434\u0430\u0442\u0438 \u043d\u043e\u0432\u0438\u0439 \u0442\u043e\u0432\u0430\u0440"}),(0,Et.jsx)("button",{onClick:()=>{E(!1),I(null),Z("")},className:"text-slate-400 hover:text-corp-text-main",children:"\u2715"})]}),(0,Et.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=new FormData(e.currentTarget);(async e=>{try{const t=await fetch("".concat(J,"/api/products/create"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c(c({},e),{},{image:(null===A||void 0===A?void 0:A.path)||"",created_by:"\u0420\u0435\u043a\u0432\u0456\u0437\u0438\u0442\u043e\u0440"}))}),r=await t.json();if(!t.ok)throw new Error(r.detail||"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f");{alert("\u2705 ".concat(r.message)),E(!1),I(null),Z("");const t=e.category||"all",n=e.subcategory||"all";y(t),w(n),g(""),await $({category:t,subcategory:n,search:""}),r.item_id&&m(r.item_id)}}catch(t){alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f \u0442\u043e\u0432\u0430\u0440\u0443: "+String(t))}})({name:t.get("name"),sku:t.get("sku"),category:t.get("category"),subcategory:t.get("subcategory"),color:t.get("color"),material:t.get("material"),size:t.get("size"),quantity:Number(t.get("quantity")),location_zone:t.get("location_zone"),location:t.get("location"),description:t.get("description"),care_instructions:t.get("care_instructions"),image:(null===A||void 0===A?void 0:A.path)||""})},children:[(0,Et.jsxs)("div",{className:"space-y-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[11px] text-corp-text-main mb-1",children:"\ud83d\udcf7 \u0424\u043e\u0442\u043e \u0442\u043e\u0432\u0430\u0440\u0443"}),(0,Et.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsx)("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:async e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&await(async e=>{try{T(!0);const t=new FormData;t.append("file",e);const r=await fetch("".concat(J,"/api/products/upload-image"),{method:"POST",body:t}),n=await r.json();if(r.ok)return I({path:n.path,url:n.url}),n.path;throw new Error(n.detail||"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f")}catch(t){return alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0444\u043e\u0442\u043e: "+String(t)),null}finally{T(!1)}})(r)},className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm",disabled:k}),(0,Et.jsx)("div",{className:"mt-1 text-[10px] text-slate-400",children:"\u0414\u043e\u0437\u0432\u043e\u043b\u0435\u043d\u0456: JPG, PNG, WEBP. \u041c\u0430\u043a\u0441 5MB"})]}),A&&(0,Et.jsxs)("div",{className:"relative",children:[(0,Et.jsx)("img",{src:"".concat(J).concat(A.url),alt:"\u041f\u043e\u043f\u0435\u0440\u0435\u0434\u043d\u0456\u0439 \u043f\u0435\u0440\u0435\u0433\u043b\u044f\u0434",className:"h-20 w-20 rounded-lg border border-slate-200 object-cover"}),(0,Et.jsx)("button",{type:"button",onClick:()=>I(null),className:"absolute -right-1 -top-1 rounded-full bg-rose-500 px-1.5 text-[10px] text-white hover:bg-rose-600",children:"\u2715"})]}),k&&(0,Et.jsx)("div",{className:"flex h-20 w-20 items-center justify-center rounded-lg border border-slate-200 bg-slate-50",children:(0,Et.jsx)("div",{className:"text-[10px] text-slate-400",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})})]})]}),(0,Et.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[11px] text-corp-text-main",children:"\u041d\u0430\u0437\u0432\u0430 \u0442\u043e\u0432\u0430\u0440\u0443 *"}),(0,Et.jsx)("input",{name:"name",required:!0,className:"mt-1 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm",placeholder:"\u0412\u0430\u0437\u0430 \u0441\u043a\u043b\u044f\u043d\u0430 \u0437\u043e\u043b\u043e\u0442\u0430"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[11px] text-corp-text-main",children:"SKU (\u0430\u0440\u0442\u0438\u043a\u0443\u043b) *"}),(0,Et.jsx)("input",{name:"sku",required:!0,className:"mt-1 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm",placeholder:"8900"})]})]}),(0,Et.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[11px] text-corp-text-main",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f *"}),(0,Et.jsxs)("select",{name:"category",required:!0,value:K,onChange:e=>Z(e.target.value),className:"mt-1 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm",children:[(0,Et.jsx)("option",{value:"",children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e..."}),G.map(e=>(0,Et.jsx)("option",{value:e,children:e},e))]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[11px] text-corp-text-main",children:"\u041f\u0456\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f"}),(0,Et.jsxs)("select",{name:"subcategory",disabled:!K||!(null!==(s=X[K])&&void 0!==s&&s.length),className:"mt-1 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm disabled:bg-slate-50 disabled:cursor-not-allowed",children:[(0,Et.jsx)("option",{value:"",children:K?null!==(a=X[K])&&void 0!==a&&a.length?"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u043f\u0456\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e...":"\u041d\u0435\u043c\u0430\u0454 \u043f\u0456\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0439":"\u0421\u043f\u043e\u0447\u0430\u0442\u043a\u0443 \u043e\u0431\u0435\u0440\u0456\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e"}),K&&(null===(i=X[K])||void 0===i?void 0:i.map(e=>(0,Et.jsx)("option",{value:e,children:e},e)))]})]})]}),(0,Et.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[11px] text-corp-text-main",children:"\u041a\u043e\u043b\u0456\u0440"}),(0,Et.jsx)("input",{name:"color",className:"mt-1 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm",placeholder:"\u0417\u043e\u043b\u043e\u0442\u0438\u0439"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[11px] text-corp-text-main",children:"\u041c\u0430\u0442\u0435\u0440\u0456\u0430\u043b"}),(0,Et.jsx)("input",{name:"material",className:"mt-1 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm",placeholder:"\u0421\u043a\u043b\u043e"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[11px] text-corp-text-main",children:"\u0420\u043e\u0437\u043c\u0456\u0440\u0438"}),(0,Et.jsx)("input",{name:"size",className:"mt-1 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm",placeholder:"30x20 \u0441\u043c"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[11px] text-corp-text-main",children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c *"}),(0,Et.jsx)("input",{name:"quantity",type:"number",required:!0,defaultValue:"1",min:"1",className:"mt-1 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm"})]})]}),(0,Et.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[11px] text-corp-text-main",children:"\u0417\u043e\u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0443"}),(0,Et.jsx)("input",{name:"location_zone",className:"mt-1 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm",placeholder:"A"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[11px] text-corp-text-main",children:"\u041b\u043e\u043a\u0430\u0446\u0456\u044f (\u0441\u0442\u0435\u043b\u0430\u0436/\u043f\u043e\u043b\u0438\u0446\u044f)"}),(0,Et.jsx)("input",{name:"location",className:"mt-1 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm",placeholder:"\u04201/\u041f3"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[11px] text-corp-text-main",children:"\u041e\u043f\u0438\u0441"}),(0,Et.jsx)("textarea",{name:"description",rows:3,className:"mt-1 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm",placeholder:"\u0414\u0435\u0442\u0430\u043b\u044c\u043d\u0438\u0439 \u043e\u043f\u0438\u0441 \u0442\u043e\u0432\u0430\u0440\u0443..."})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-[11px] text-corp-text-main",children:"\u0406\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0456\u044f \u043f\u043e \u0434\u043e\u0433\u043b\u044f\u0434\u0443"}),(0,Et.jsx)("textarea",{name:"care_instructions",rows:2,className:"mt-1 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm",placeholder:"\u042f\u043a \u043c\u0438\u0442\u0438, \u0437\u0431\u0435\u0440\u0456\u0433\u0430\u0442\u0438..."})]})]}),(0,Et.jsxs)("div",{className:"mt-6 flex justify-end gap-2",children:[(0,Et.jsx)("button",{type:"button",onClick:()=>{E(!1),I(null),Z("")},className:"rounded-full border border-slate-200 bg-white px-3 py-1 text-[11px] text-slate-700 hover:bg-slate-50",children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"}),(0,Et.jsx)("button",{type:"submit",className:"rounded-full px-3 py-1 text-[11px] font-medium transition bg-emerald-600 text-white hover:bg-emerald-700",children:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u0456 \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a\u0443\u0432\u0430\u0442\u0438"})]})]})]})})]})]}):(0,Et.jsx)("div",{className:"p-6 text-sm text-corp-text-main",children:"\u041d\u0435\u043c\u0430\u0454 \u0434\u0430\u043d\u0438\u0445 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a\u0443."})}const xs=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("uploads/")?"".concat("https://backrentalhub.farforrent.com.ua","/").concat(e):(console.warn('[ImageHelper] \u26a0\ufe0f Image path should start with "uploads/products/":',e),null):null,gs=e=>{e.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="200" height="200"%3E%3Crect width="200" height="200" fill="%23f1f5f9"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-family="sans-serif" font-size="14" fill="%2394a3b8"%3E\u041d\u0435\u043c\u0430 \u0444\u043e\u0442\u043e%3C/text%3E%3C/svg%3E',e.target.crossOrigin=null},bs=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},ys=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var vs={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ws=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],Ns=(0,t.forwardRef)((e,r)=>{let{color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:d,iconNode:u}=e,h=s(e,ws);return(0,t.createElement)("svg",c(c(c({ref:r},vs),{},{width:a,height:a,stroke:n,strokeWidth:o?24*Number(i)/Number(a):i,className:ys("lucide",l)},!d&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"}),h),[...u.map(e=>{let[r,n]=e;return(0,t.createElement)(r,n)}),...Array.isArray(d)?d:[d]])}),js=["className"],_s=(e,r)=>{const n=(0,t.forwardRef)((n,a)=>{let{className:i}=n,o=s(n,js);return(0,t.createElement)(Ns,c({ref:a,iconNode:r,className:ys("lucide-".concat((l=bs(e),l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),i)},o));var l});return n.displayName=bs(e),n},Cs=_s("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Ss=_s("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Es=_s("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),As=_s("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Is=_s("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),ks=_s("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),Ts=_s("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ds=_s("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Rs="https://backrentalhub.farforrent.com.ua",Os=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")},Ms=e=>(Number(e)||0).toLocaleString("uk-UA",{maximumFractionDigits:0});function Ps(e){let{tone:t="slate",children:r}=e;const n={slate:"corp-badge corp-badge-neutral",green:"corp-badge corp-badge-success",blue:"corp-badge corp-badge-info",amber:"corp-badge corp-badge-warning",red:"corp-badge corp-badge-error",violet:"corp-badge corp-badge-primary"};return(0,Et.jsx)("span",{className:n[t]||n.slate,children:r})}function Ls(e){let{children:t,onClick:r,tone:n="slate"}=e;return(0,Et.jsx)("button",{type:"button",onClick:r,className:{slate:"corp-btn corp-btn-secondary",green:"corp-btn corp-btn-primary",red:"corp-btn corp-btn-secondary text-corp-error hover:bg-corp-error hover:text-white",amber:"corp-btn corp-btn-gold",ghost:"corp-btn corp-btn-outline"}[n],children:t})}function Bs(e){let{severity:t}=e;return"low"===t?(0,Et.jsx)(Ps,{tone:"green",children:"Low"}):"medium"===t?(0,Et.jsx)(Ps,{tone:"amber",children:"Medium"}):"high"===t?(0,Et.jsx)(Ps,{tone:"red",children:"High"}):(0,Et.jsx)(Ps,{tone:"red",children:"Critical"})}function Fs(e){let{status:t}=e;const r={draft:{label:"\u0427\u0435\u0440\u043d\u0435\u0442\u043a\u0430",tone:"slate"},awaiting_client:{label:"\u041e\u0447\u0456\u043a\u0443\u0454\u043c\u043e \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f \u043a\u043b\u0456\u0454\u043d\u0442\u0430",tone:"amber"},awaiting_payment:{label:"\u041e\u0447\u0456\u043a\u0443\u0454\u043c\u043e \u043e\u043f\u043b\u0430\u0442\u0443",tone:"amber"},in_repair:{label:"\u0412 \u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u0457",tone:"blue"},closed:{label:"\u0417\u0430\u043a\u0440\u0438\u0442\u043e",tone:"green"}}[t]||{label:t||"\u041d\u0435\u0432\u0456\u0434\u043e\u043c\u043e",tone:"slate"};return(0,Et.jsx)(Ps,{tone:r.tone,children:r.label})}function Us(e){let{onBackToDashboard:r,onNavigateToTasks:n,initialDamageId:s}=e;const[a,i]=(0,t.useState)("main"),[o,l]=(0,t.useState)([]),[d,u]=(0,t.useState)(!0),[h,m]=(0,t.useState)(s||null),[p,f]=(0,t.useState)(""),[x,g]=(0,t.useState)("all"),[b,y]=(0,t.useState)("all"),[v,w]=(0,t.useState)("all"),[N,j]=(0,t.useState)(!1),[_,C]=(0,t.useState)(!1),[S,E]=(0,t.useState)([]),[A,I]=(0,t.useState)(null),[k,T]=(0,t.useState)(!1),[D,R]=(0,t.useState)("all"),[O,M]=(0,t.useState)(!1),[P,L]=(0,t.useState)(null),[B,F]=(0,t.useState)(!1),[U,z]=(0,t.useState)([]),[H,V]=(0,t.useState)(!1),[W,q]=(0,t.useState)("all"),[G,Y]=(0,t.useState)([]),[X,Q]=(0,t.useState)(!1),[K,Z]=(0,t.useState)("all");(0,t.useEffect)(()=>{J()},[]);const J=async()=>{try{u(!0);const e=await fetch("".concat(Rs,"/api/product-damage-history/recent?limit=200")),t=await e.json();console.log("[DamageCabinet] Loaded damage history:",t.length);const r=t.map(e=>({id:String(e.id),orderId:e.order_id?String(e.order_id):null,clientName:e.product_name||"\u0411\u0435\u0437 \u043d\u0430\u0437\u0432\u0438",eventName:e.order_number?"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f ".concat(e.order_number):e.note||"\u041a\u0435\u0439\u0441 \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f",status:"closed",severity:"high"===e.severity?"critical":"medium"===e.severity?"medium":"low",source:"return"===e.stage?"return":"audit"===e.stage?"reaudit":"other",depositHold:0,lines:[{id:String(e.id),productName:e.product_name,sku:e.sku,category:e.category||"Unknown",qty:1,note:e.note||"",amountPerUnit:e.fee||0,total:e.fee||0,image:e.product_image||e.photo_url}],createdAt:e.created_at,createdBy:e.created_by||"Unknown",returnDate:e.created_at}));l(r),r.length>0&&!h&&m(r[0].id)}catch(e){console.error("Error loading cases:",e),alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u043a\u0435\u0439\u0441\u0456\u0432")}finally{u(!1)}},[$,ee]=(0,t.useState)([]),te=async()=>{try{T(!0);const e=localStorage.getItem("token"),t="all"!==D?{status:D}:{},[r,n,s]=await Promise.all([is.get("".concat(Rs,"/api/laundry/batches"),{params:t,headers:{Authorization:"Bearer ".concat(e)}}),is.get("".concat(Rs,"/api/laundry/statistics"),{headers:{Authorization:"Bearer ".concat(e)}}),is.get("".concat(Rs,"/api/laundry/queue"),{headers:{Authorization:"Bearer ".concat(e)}}).catch(()=>({data:[]}))]);E(r.data),I(n.data),ee(s.data||[])}catch(e){console.error("Error loading laundry data:",e)}finally{T(!1)}},re=async()=>{try{V(!0);const e=localStorage.getItem("token");let t=(await is.get("".concat(Rs,"/api/tasks"),{params:{task_type:"washing"},headers:{Authorization:"Bearer ".concat(e)}})).data||[];"all"!==W&&(t=t.filter(e=>e.status===W)),z(t)}catch(e){console.error("Error loading washing data:",e),z([])}finally{V(!1)}},ne=async()=>{try{Q(!0);const e=localStorage.getItem("token");let t=(await is.get("".concat(Rs,"/api/tasks"),{params:{task_type:"restoration"},headers:{Authorization:"Bearer ".concat(e)}})).data||[];"all"!==K&&(t=t.filter(e=>e.status===K)),Y(t)}catch(e){console.error("Error loading restoration data:",e),Y([])}finally{Q(!1)}};(0,t.useEffect)(()=>{"laundry"===a?te():"washing"===a?re():"restoration"===a&&ne()},[a,D,W,K]);const se=async(e,t,r)=>{try{const n=localStorage.getItem("token");await is.put("".concat(Rs,"/api/tasks/").concat(e),{status:t},{headers:{Authorization:"Bearer ".concat(n)}}),"washing"===r?re():"restoration"===r&&ne(),alert("\u2705 \u0421\u0442\u0430\u0442\u0443\u0441 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e")}catch(a){var n,s;alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430: "+((null===(n=a.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.detail)||a.message))}},ae=async(e,t,r)=>{try{const n=localStorage.getItem("token");await is.put("".concat(Rs,"/api/tasks/").concat(e),{assigned_to:t},{headers:{Authorization:"Bearer ".concat(n)}}),"washing"===r?re():"restoration"===r&&ne(),alert("\u2705 \u0412\u0438\u043a\u043e\u043d\u0430\u0432\u0446\u044f \u043f\u0440\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043e")}catch(a){var n,s;alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430: "+((null===(n=a.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.detail)||a.message))}},ie=(0,t.useMemo)(()=>o.length?h&&o.find(e=>e.id===h)||o[0]:null,[o,h]),oe=(0,t.useMemo)(()=>o.filter(e=>{const t=(e.lines||[]).map(e=>e.productName+e.sku+e.category+(e.note||"")).join(" "),r=(e.id+(e.orderId||"")+e.clientName+(e.eventName||"")+t).toLowerCase(),n=!p||r.includes(p.toLowerCase()),s="all"===x||e.status===x,a="all"===b||e.severity===b,i="all"===v||e.source===v;return n&&s&&a&&i}),[o,p,x,b,v]),le=(0,t.useMemo)(()=>({open:o.filter(e=>"closed"!==e.status).length,awaitingClient:o.filter(e=>"awaiting_client"===e.status).length,awaitingPayment:o.filter(e=>"awaiting_payment"===e.status).length,inRepair:o.filter(e=>"in_repair"===e.status).length,closed:o.filter(e=>"closed"===e.status).length}),[o]);if(d&&"main"===a)return(0,Et.jsxs)("div",{className:"min-h-screen bg-corp-bg-main",children:[(0,Et.jsx)(It,{cabinetName:"\u041a\u0430\u0431\u0456\u043d\u0435\u0442 \u0448\u043a\u043e\u0434\u0438",showBackButton:!0,onBackClick:r}),(0,Et.jsx)("div",{className:"p-6 text-sm text-corp-text-main",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]});const ce=ie?(ie.lines||[]).reduce((e,t)=>e+t.total,0):0,de=ie?Math.min(ie.depositHold,ce):0,ue=Math.max(0,ce-((null===ie||void 0===ie?void 0:ie.depositHold)||0));return(0,Et.jsxs)("div",{className:"min-h-screen bg-corp-bg-main",children:[(0,Et.jsx)(It,{cabinetName:"\u041a\u0430\u0431\u0456\u043d\u0435\u0442 \u0448\u043a\u043e\u0434\u0438",showBackButton:!0,onBackClick:r}),(0,Et.jsxs)("div",{className:"mx-auto max-w-7xl p-6 space-y-5",children:[(0,Et.jsx)("div",{className:"flex gap-2 border-b border-slate-200 pb-3",children:[{id:"main",label:"\u0413\u043e\u043b\u043e\u0432\u043d\u0430",icon:"\ud83d\udccb"},{id:"washing",label:"\u041c\u0438\u0439\u043a\u0430",icon:"\ud83d\udebf"},{id:"restoration",label:"\u0420\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f",icon:"\ud83d\udd27"},{id:"laundry",label:"\u0425\u0456\u043c\u0447\u0438\u0441\u0442\u043a\u0430",icon:"\ud83e\uddfa"}].map(e=>(0,Et.jsxs)("button",{onClick:()=>i(e.id),className:Os("px-4 py-2 rounded-t-lg text-sm font-medium transition-all",a===e.id?"bg-corp-primary text-white":"bg-slate-100 text-corp-text-muted hover:bg-slate-200"),children:[e.icon," ",e.label]},e.id))}),"main"===a&&(0,Et.jsx)(zs,{cases:o,filtered:oe,selected:ie,selectedId:h,setSelectedId:m,q:p,setQ:f,statusFilter:x,setStatusFilter:g,severityFilter:b,setSeverityFilter:y,sourceFilter:v,setSourceFilter:w,counters:le,linesTotal:ce,chargeFromDeposit:de,extraPayment:ue,onStatusChange:async(e,t)=>{try{(await fetch("".concat(Rs,"/api/damages/cases/").concat(e,"/status"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})})).ok&&(l(r=>r.map(r=>r.id===e?c(c({},r),{},{status:t}):r)),alert("\u2705 \u0421\u0442\u0430\u0442\u0443\u0441 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e"))}catch(r){alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u0443")}},editLineAmount:async(e,t)=>{const r=o.find(t=>t.id===e);if(!r||!r.lines)return;const n=r.lines.find(e=>e.id===t);if(!n)return;const s=prompt("\u041d\u043e\u0432\u0430 \u0441\u0443\u043c\u0430 \u0437\u0430 \u043e\u0434\u0438\u043d\u0438\u0446\u044e (\u043c\u0456\u043d\u0456\u043c\u0443\u043c ".concat(n.minAmount," \u0433\u0440\u043d) \u0434\u043b\u044f \xab").concat(n.productName,"\xbb?"),String(n.amountPerUnit));if(!s)return;const a=Number(s);if(isNaN(a)||a<=0)return void alert("\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043a\u043e\u0440\u0435\u043a\u0442\u043d\u0443 \u0441\u0443\u043c\u0443.");const i=Math.max(n.minAmount||0,a);try{(await fetch("".concat(Rs,"/api/damages/cases/").concat(e,"/lines/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_per_unit:i})})).ok&&(l(r=>r.map(r=>r.id===e?c(c({},r),{},{lines:(r.lines||[]).map(e=>e.id===t?c(c({},e),{},{amountPerUnit:i,total:Math.round(i*e.qty)}):e)}):r)),alert("\u2705 \u0421\u0443\u043c\u0443 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e"))}catch(d){alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0441\u0443\u043c\u0438")}},addLine:async e=>{const t=prompt("\u041d\u0430\u0437\u0432\u0430 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0430?");if(!t)return;const r=prompt("SKU / \u043a\u043e\u0434 (\u043c\u043e\u0436\u043d\u0430 \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u0438)?")||"",n=prompt("\u0429\u043e \u0442\u0440\u0430\u043f\u0438\u043b\u043e\u0441\u044c? (\u043a\u043e\u0440\u043e\u0442\u043a\u043e)")||"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f",s=prompt("\u041c\u0456\u043d\u0456\u043c\u0430\u043b\u044c\u043d\u0430 \u0441\u0443\u043c\u0430 \u0437\u0433\u0456\u0434\u043d\u043e \u043f\u0440\u0430\u0439\u0441\u0443?","500")||"500",a=prompt("\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u043e\u0434\u0438\u043d\u0438\u0446\u044c?","1")||"1",i=Math.max(0,Number(s)||0),o=Math.max(1,Number(a)||1);try{(await fetch("".concat(Rs,"/api/damages/cases/").concat(e,"/lines"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_name:t,sku:r,rule_label:n,min_amount:i,qty:o,amount_per_unit:i})})).ok&&(await J(),alert("\u2705 \u041f\u043e\u0437\u0438\u0446\u0456\u044e \u0434\u043e\u0434\u0430\u043d\u043e"))}catch(l){alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0434\u043e\u0434\u0430\u0432\u0430\u043d\u043d\u044f \u043f\u043e\u0437\u0438\u0446\u0456\u0457")}},openInFinance:e=>{alert("\u041c\u043e\u043a: \u043a\u0435\u0439\u0441 ".concat(e.id," \u0431\u0443\u0434\u0435 \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u0443 \u0444\u0456\u043d\u0430\u043d\u0441\u043e\u0432\u0438\u0439 \u043a\u0430\u0431\u0456\u043d\u0435\u0442 (manager frontend) \u0437 \u043f\u0440\u0438\u0432'\u044f\u0437\u043a\u043e\u044e \u0434\u043e \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f ").concat(e.orderId||"\u2014","."))},openInReaudit:e=>{e.fromReauditItemId?alert("\u041c\u043e\u043a: \u0432\u0456\u0434\u043a\u0440\u0438\u0454\u043c\u043e \u043a\u0430\u0431\u0456\u043d\u0435\u0442 \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a\u0443 \u0437 \u043f\u043e\u0437\u0438\u0446\u0456\u0454\u044e ".concat(e.fromReauditItemId,".")):alert("\u0414\u043b\u044f \u0446\u044c\u043e\u0433\u043e \u043a\u0435\u0439\u0441\u0443 \u043d\u0435\u043c\u0430\u0454 \u043f\u0440\u0438\u0432\u02bc\u044f\u0437\u043a\u0438 \u0434\u043e \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a\u0443.")},loadCases:J,showTaskModal:N,setShowTaskModal:j,showSendModal:_,setShowSendModal:C,onNavigateToTasks:n,onSendToProcess:async(e,t,r)=>{const n=localStorage.getItem("token"),s={laundry:"\u0445\u0456\u043c\u0447\u0438\u0441\u0442\u043a\u0443",washing:"\u043c\u0438\u0439\u043a\u0443",restoration:"\u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044e"};try{if("laundry"===r){await is.post("".concat(Rs,"/api/laundry/queue"),{damage_id:e.id,order_id:e.orderId?parseInt(e.orderId):null,order_number:e.orderId?"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f #".concat(e.orderId):null,product_name:t.productName,sku:t.sku,category:t.category||"textile",quantity:t.qty,condition:"dirty",notes:t.note||t.ruleLabel||"\u0417 \u043a\u0430\u0431\u0456\u043d\u0435\u0442\u0443 \u0448\u043a\u043e\u0434\u0438",source:"damage_cabinet"},{headers:{Authorization:"Bearer ".concat(n)}});alert('\u2705 "'.concat(t.productName,'" \u0434\u043e\u0434\u0430\u043d\u043e \u0434\u043e \u0447\u0435\u0440\u0433\u0438 \u0445\u0456\u043c\u0447\u0438\u0441\u0442\u043a\u0438!\n\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f \u0432 \u041a\u0430\u0431\u0456\u043d\u0435\u0442\u0456 \u0437\u0430\u0432\u0434\u0430\u043d\u044c.')),"laundry"===a&&te()}else{const a="washing"===r?"washing":"restoration";await is.post("".concat(Rs,"/api/tasks"),{damage_id:e.id,order_id:e.orderId?parseInt(e.orderId):null,order_number:e.orderId?"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f #".concat(e.orderId):null,title:"".concat("washing"===r?"\ud83d\udebf \u041c\u0438\u0439\u043a\u0430":"\ud83d\udd27 \u0420\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f",": ").concat(t.productName," (").concat(t.sku,")"),description:"\u0422\u043e\u0432\u0430\u0440 \u043f\u043e\u0442\u0440\u0435\u0431\u0443\u0454 ".concat(s[r],".\n\u0421\u0442\u0430\u043d: ").concat(t.ruleLabel||"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f",".\n").concat(t.note||""),task_type:a,status:"todo",priority:"medium"},{headers:{Authorization:"Bearer ".concat(n)}});alert('\u2705 "'.concat(t.productName,'" \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u043d\u0430 ').concat(s[r],"!\n\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f \u0432 \u041a\u0430\u0431\u0456\u043d\u0435\u0442\u0456 \u0437\u0430\u0432\u0434\u0430\u043d\u044c."))}}catch(l){var i,o;console.error("Error sending to process:",l),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430: ".concat((null===(i=l.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.detail)||l.message))}}}),"washing"===a&&(0,Et.jsx)(Hs,{tasks:U,loading:H,filterStatus:W,setFilterStatus:q,onRefresh:re,onUpdateStatus:(e,t)=>se(e,t,"washing"),onAssignTask:(e,t)=>ae(e,t,"washing")}),"restoration"===a&&(0,Et.jsx)(Vs,{tasks:G,loading:X,filterStatus:K,setFilterStatus:Z,onRefresh:ne,onUpdateStatus:(e,t)=>se(e,t,"restoration"),onAssignTask:(e,t)=>ae(e,t,"restoration")}),"laundry"===a&&(0,Et.jsx)(Ws,{batches:S,statistics:A,loading:k,filterStatus:D,setFilterStatus:R,onDeleteBatch:async e=>{if(window.confirm("\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043f\u0430\u0440\u0442\u0456\u044e? \u0422\u043e\u0432\u0430\u0440\u0438 \u043f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u043a\u043b\u0430\u0434."))try{const t=localStorage.getItem("token");await is.delete("".concat(Rs,"/api/laundry/batches/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),alert("\u041f\u0430\u0440\u0442\u0456\u044e \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e"),te()}catch(n){var t,r;alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f: "+((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||n.message))}},onCompleteBatch:async e=>{if(window.confirm("\u0417\u0430\u043a\u0440\u0438\u0442\u0438 \u043f\u0430\u0440\u0442\u0456\u044e?"))try{const t=localStorage.getItem("token");await is.post("".concat(Rs,"/api/laundry/batches/").concat(e,"/complete"),{},{headers:{Authorization:"Bearer ".concat(t)}}),alert("\u041f\u0430\u0440\u0442\u0456\u044e \u0437\u0430\u043a\u0440\u0438\u0442\u043e"),te()}catch(n){var t,r;alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430: "+((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||n.message))}},onRefresh:te,setShowCreateModal:M,setSelectedBatch:L,setShowReturnModal:F,getStatusBadge:e=>{const t={sent:{label:"\u0412\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e",tone:"blue"},partial_return:{label:"\u0427\u0430\u0441\u0442\u043a\u043e\u0432\u0435 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f",tone:"amber"},returned:{label:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043e",tone:"green"},completed:{label:"\u0417\u0430\u043a\u0440\u0438\u0442\u043e",tone:"slate"}},r=t[e]||t.sent;return(0,Et.jsx)(Ps,{tone:r.tone,children:r.label})},queue:$,onCreateBatchFromQueue:async(e,t,r,n,s)=>{try{const a=localStorage.getItem("token"),i=await is.post("".concat(Rs,"/api/laundry/batches/from-queue"),{item_ids:e,laundry_company:t,expected_return_date:r,cost:n,notes:s},{headers:{Authorization:"Bearer ".concat(a)}});alert("\u2705 ".concat(i.data.message)),te()}catch(o){var a,i;alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430: "+((null===(a=o.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.detail)||o.message))}},onRemoveFromQueue:async e=>{if(window.confirm("\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0442\u043e\u0432\u0430\u0440 \u0437 \u0447\u0435\u0440\u0433\u0438?"))try{const t=localStorage.getItem("token");await is.delete("".concat(Rs,"/api/laundry/queue/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),te()}catch(n){var t,r;alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430: "+((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||n.message))}}})]})]})}function zs(e){let{cases:r,filtered:n,selected:s,selectedId:a,setSelectedId:i,q:o,setQ:l,statusFilter:c,setStatusFilter:d,severityFilter:u,setSeverityFilter:h,sourceFilter:m,setSourceFilter:p,counters:f,linesTotal:x,chargeFromDeposit:g,extraPayment:b,onStatusChange:y,editLineAmount:v,addLine:w,openInFinance:N,openInReaudit:j,loadCases:_,showTaskModal:C,setShowTaskModal:S,showSendModal:E,setShowSendModal:A,onNavigateToTasks:I,onSendToProcess:k}=e;const[T,D]=(0,t.useState)(null);return s?(0,Et.jsxs)("div",{className:"space-y-5",children:[(0,Et.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-[11px]",children:[(0,Et.jsxs)(Ps,{tone:"amber",children:["\u0412\u0456\u0434\u043a\u0440\u0438\u0442\u0456 \u043a\u0435\u0439\u0441\u0438: ",f.open]}),(0,Et.jsxs)(Ps,{tone:"amber",children:["\u0427\u0435\u043a\u0430\u0454\u043c\u043e \u043a\u043b\u0456\u0454\u043d\u0442\u0430: ",f.awaitingClient]}),(0,Et.jsxs)(Ps,{tone:"amber",children:["\u0427\u0435\u043a\u0430\u0454\u043c\u043e \u043e\u043f\u043b\u0430\u0442\u0443: ",f.awaitingPayment]}),(0,Et.jsxs)(Ps,{tone:"blue",children:["\u0412 \u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u0457: ",f.inRepair]}),(0,Et.jsxs)(Ps,{tone:"green",children:["\u0417\u0430\u043a\u0440\u0438\u0442\u043e: ",f.closed]})]}),(0,Et.jsxs)("div",{className:"grid gap-4 md:grid-cols-[minmax(0,1.25fr),minmax(0,1.75fr)]",children:[(0,Et.jsxs)("div",{className:"space-y-3 text-[11px]",children:[(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 space-y-2",children:[(0,Et.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:items-end",children:[(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsx)("label",{className:"block text-corp-text-muted",children:"\u041f\u043e\u0448\u0443\u043a"}),(0,Et.jsx)("input",{className:"mt-1 w-full rounded-full border border-slate-200 bg-white px-3 py-1.5",placeholder:"\u041a\u043b\u0456\u0454\u043d\u0442, \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f, \u0442\u043e\u0432\u0430\u0440, \u043a\u0435\u0439\u0441...",value:o,onChange:e=>l(e.target.value)})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-corp-text-muted",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,Et.jsxs)("select",{className:"mt-1 w-40 rounded-full border border-slate-200 bg-white px-2 py-1.5",value:c,onChange:e=>d(e.target.value),children:[(0,Et.jsx)("option",{value:"all",children:"\u0423\u0441\u0456"}),(0,Et.jsx)("option",{value:"draft",children:"\u0427\u0435\u0440\u043d\u0435\u0442\u043a\u0430"}),(0,Et.jsx)("option",{value:"awaiting_client",children:"\u041e\u0447\u0456\u043a\u0443\u0454\u043c\u043e \u043a\u043b\u0456\u0454\u043d\u0442\u0430"}),(0,Et.jsx)("option",{value:"awaiting_payment",children:"\u041e\u0447\u0456\u043a\u0443\u0454\u043c\u043e \u043e\u043f\u043b\u0430\u0442\u0443"}),(0,Et.jsx)("option",{value:"in_repair",children:"\u0412 \u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u0457"}),(0,Et.jsx)("option",{value:"closed",children:"\u0417\u0430\u043a\u0440\u0438\u0442\u043e"})]})]})]}),(0,Et.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:items-end",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-corp-text-muted",children:"\u0421\u0435\u0440\u0439\u043e\u0437\u043d\u0456\u0441\u0442\u044c"}),(0,Et.jsxs)("select",{className:"mt-1 w-32 rounded-full border border-slate-200 bg-white px-2 py-1.5",value:u,onChange:e=>h(e.target.value),children:[(0,Et.jsx)("option",{value:"all",children:"\u0423\u0441\u0456"}),(0,Et.jsx)("option",{value:"low",children:"Low"}),(0,Et.jsx)("option",{value:"medium",children:"Medium"}),(0,Et.jsx)("option",{value:"high",children:"High"}),(0,Et.jsx)("option",{value:"critical",children:"Critical"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-corp-text-muted",children:"\u0414\u0436\u0435\u0440\u0435\u043b\u043e"}),(0,Et.jsxs)("select",{className:"mt-1 w-40 rounded-full border border-slate-200 bg-white px-2 py-1.5",value:m,onChange:e=>p(e.target.value),children:[(0,Et.jsx)("option",{value:"all",children:"\u0423\u0441\u0456"}),(0,Et.jsx)("option",{value:"return",children:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f"}),(0,Et.jsx)("option",{value:"reaudit",children:"\u041f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a"}),(0,Et.jsx)("option",{value:"other",children:"\u0406\u043d\u0448\u0435"})]})]})]}),(0,Et.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,Et.jsxs)("div",{className:"text-corp-text-muted",children:["\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u043e ",n.length," \u0437 ",r.length," \u043a\u0435\u0439\u0441\u0456\u0432"]}),(0,Et.jsx)("div",{className:"flex gap-2",children:(0,Et.jsx)(Ls,{tone:"ghost",onClick:_,children:"\ud83d\udd04 \u041e\u043d\u043e\u0432\u0438\u0442\u0438"})})]})]}),(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white overflow-hidden",children:[(0,Et.jsx)("div",{className:"border-b border-slate-100 px-3 py-2 text-[11px] text-corp-text-muted",children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043a\u0435\u0439\u0441\u0456\u0432"}),(0,Et.jsx)("div",{className:"max-h-[360px] divide-y divide-slate-100 overflow-auto text-[11px]",children:0===n.length?(0,Et.jsx)("div",{className:"px-3 py-6 text-center text-[11px] text-corp-text-muted",children:"\u041a\u0435\u0439\u0441\u0456\u0432 \u0437\u0430 \u0446\u0438\u043c\u0438 \u0444\u0456\u043b\u044c\u0442\u0440\u0430\u043c\u0438 \u043d\u0435\u043c\u0430\u0454"}):n.map(e=>(0,Et.jsxs)("div",{onClick:()=>i(e.id),className:Os("flex cursor-pointer gap-2 px-3 py-2 hover:bg-slate-50",e.id===a&&"bg-slate-100 ring-1 ring-inset ring-slate-300"),children:[(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsxs)("div",{className:"flex flex-wrap items-center gap-1",children:[(0,Et.jsx)("span",{className:"font-semibold text-corp-text-dark",children:e.clientName}),(0,Et.jsx)(Bs,{severity:e.severity})]}),(0,Et.jsxs)("div",{className:"mt-0.5 flex flex-wrap items-center gap-2 text-[10px] text-corp-text-muted",children:[(0,Et.jsxs)("span",{children:["\u041a\u0435\u0439\u0441 #",e.id]}),e.orderId&&(0,Et.jsxs)("span",{children:["\u2022 \u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f #",e.orderId]})]}),(0,Et.jsxs)("div",{className:"mt-0.5 flex flex-wrap items-center gap-2 text-[10px]",children:[(0,Et.jsx)(Fs,{status:e.status}),"return"===e.source&&(0,Et.jsx)(Ps,{tone:"blue",children:"\u0437 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f"}),"reaudit"===e.source&&(0,Et.jsx)(Ps,{tone:"violet",children:"\u0437 \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a\u0443"})]})]}),(0,Et.jsxs)("div",{className:"flex flex-col items-end gap-1 text-[10px] text-corp-text-main",children:[(0,Et.jsxs)("span",{className:"font-semibold",children:[Ms((e.lines||[]).reduce((e,t)=>e+t.total,0))," \u20b4"]}),(0,Et.jsxs)("span",{className:"text-corp-text-muted",children:[(e.lines||[]).length," \u043f\u043e\u0437."]})]})]},e.id))})]})]}),(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 space-y-4 text-[11px]",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h2",{className:"text-base font-bold text-corp-text-dark",children:s.clientName}),(0,Et.jsxs)("p",{className:"text-corp-text-muted",children:["\u041a\u0435\u0439\u0441 #",s.id," \u2022 ",s.eventName||"\u0411\u0435\u0437 \u043f\u043e\u0434\u0456\u0457"]})]}),(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)(Fs,{status:s.status}),(0,Et.jsx)(Bs,{severity:s.severity})]})]}),(0,Et.jsxs)("div",{className:"rounded-xl border border-slate-200 overflow-hidden",children:[(0,Et.jsxs)("div",{className:"bg-slate-50 px-3 py-2 text-[10px] font-semibold text-corp-text-muted uppercase tracking-wide",children:["\u041f\u043e\u0437\u0438\u0446\u0456\u0457 \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u044c (",(s.lines||[]).length,")"]}),(0,Et.jsx)("div",{className:"divide-y divide-slate-100",children:(s.lines||[]).map(e=>(0,Et.jsxs)("div",{className:"flex items-center gap-3 px-3 py-2",children:[e.image&&(0,Et.jsx)("img",{src:xs(e.image)||"",alt:e.productName,className:"w-12 h-12 rounded-lg object-cover border border-slate-200"}),(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsx)("div",{className:"font-semibold text-corp-text-dark",children:e.productName}),(0,Et.jsxs)("div",{className:"text-[10px] text-corp-text-muted",children:[e.sku&&(0,Et.jsxs)("span",{children:["SKU: ",e.sku," \u2022 "]}),e.ruleLabel||"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f"]}),e.note&&(0,Et.jsx)("div",{className:"text-[10px] text-corp-text-muted italic mt-1",children:e.note})]}),(0,Et.jsxs)("div",{className:"text-right mr-2",children:[(0,Et.jsxs)("div",{className:"font-semibold text-corp-text-dark",children:[Ms(e.total)," \u20b4"]}),(0,Et.jsxs)("div",{className:"text-[10px] text-corp-text-muted",children:[e.qty," \xd7 ",Ms(e.amountPerUnit)," \u20b4"]})]}),(0,Et.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Et.jsxs)("select",{className:"text-[10px] rounded-lg border border-slate-200 px-2 py-1 bg-white",disabled:T===e.id,defaultValue:"",onChange:t=>{const r=t.target.value;r&&((async(e,t)=>{D(e.id);try{await k(s,e,t)}finally{D(null)}})(e,r),t.target.value="")},children:[(0,Et.jsx)("option",{value:"",disabled:!0,children:"\u0412\u0456\u0434\u043f\u0440\u0430\u0432\u0438\u0442\u0438 \u2192"}),(0,Et.jsx)("option",{value:"laundry",children:"\ud83e\uddfa \u0425\u0456\u043c\u0447\u0438\u0441\u0442\u043a\u0430"}),(0,Et.jsx)("option",{value:"washing",children:"\ud83d\udebf \u041c\u0438\u0439\u043a\u0430"}),(0,Et.jsx)("option",{value:"restoration",children:"\ud83d\udd27 \u0420\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f"})]}),T===e.id&&(0,Et.jsx)("span",{className:"text-[10px] text-corp-text-muted",children:"\u23f3"})]}),(0,Et.jsx)("button",{onClick:()=>v(s.id,e.id),className:"text-corp-text-muted hover:text-corp-text-dark ml-1",children:"\u270f\ufe0f"})]},e.id))})]}),(0,Et.jsxs)("div",{className:"flex justify-between items-center bg-slate-50 rounded-xl px-4 py-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted",children:"\u0412\u0441\u044c\u043e\u0433\u043e \u0437\u0431\u0438\u0442\u043a\u0456\u0432"}),(0,Et.jsxs)("div",{className:"text-xl font-bold text-corp-text-dark",children:[Ms(x)," \u20b4"]})]}),(0,Et.jsxs)("div",{className:"text-right",children:[(0,Et.jsxs)("div",{className:"text-[10px] text-corp-text-muted",children:["\u0417 \u0434\u0435\u043f\u043e\u0437\u0438\u0442\u0443: ",Ms(g)," \u20b4"]}),b>0&&(0,Et.jsxs)("div",{className:"text-[10px] text-red-600 font-semibold",children:["\u0414\u043e \u043e\u043f\u043b\u0430\u0442\u0438: ",Ms(b)," \u20b4"]})]})]}),(0,Et.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,Et.jsx)(Ls,{tone:"green",onClick:()=>y(s.id,"closed"),children:"\u2705 \u0417\u0430\u043a\u0440\u0438\u0442\u0438 \u043a\u0435\u0439\u0441"}),(0,Et.jsx)(Ls,{tone:"slate",onClick:()=>w(s.id),children:"\u2795 \u0414\u043e\u0434\u0430\u0442\u0438 \u043f\u043e\u0437\u0438\u0446\u0456\u044e"}),(0,Et.jsx)(Ls,{tone:"ghost",onClick:()=>N(s),children:"\ud83d\udcb0 \u0414\u043e \u0444\u0456\u043d\u0430\u043d\u0441\u0456\u0432"}),I&&(0,Et.jsx)(Ls,{tone:"ghost",onClick:()=>I(s.id),children:"\ud83d\udcdd \u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f"})]})]})]})]}):(0,Et.jsx)("div",{className:"text-sm text-corp-text-main",children:"\u041d\u0435\u043c\u0430\u0454 \u043a\u0435\u0439\u0441\u0456\u0432 \u0448\u043a\u043e\u0434\u0438."})}function Hs(e){let{tasks:r,loading:n,filterStatus:s,setFilterStatus:a,onRefresh:i,onUpdateStatus:o,onAssignTask:l}=e;const[c,d]=(0,t.useState)(null),u=e=>{const t={todo:{label:"\u041e\u0447\u0456\u043a\u0443\u0454",tone:"amber"},in_progress:{label:"\u0412 \u0440\u043e\u0431\u043e\u0442\u0456",tone:"blue"},done:{label:"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e",tone:"green"}},r=t[e]||t.todo;return(0,Et.jsx)(Ps,{tone:r.tone,children:r.label})},h={total:r.length,todo:r.filter(e=>"todo"===e.status).length,inProgress:r.filter(e=>"in_progress"===e.status).length,done:r.filter(e=>"done"===e.status).length};return n?(0,Et.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Et.jsx)(Cs,{className:"w-8 h-8 text-corp-primary animate-spin"})}):(0,Et.jsxs)("div",{className:"space-y-6",children:[(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Et.jsx)("div",{className:"corp-card",children:(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("p",{className:"text-xs text-corp-text-muted mb-1",children:"\u0412\u0441\u044c\u043e\u0433\u043e \u043d\u0430 \u043c\u0438\u0439\u0446\u0456"}),(0,Et.jsx)("p",{className:"text-2xl font-bold text-corp-text-dark",children:h.total})]}),(0,Et.jsx)("div",{className:"text-4xl opacity-50",children:"\ud83d\udebf"})]})}),(0,Et.jsx)("div",{className:"corp-card border-amber-200",children:(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("p",{className:"text-xs text-amber-600 mb-1",children:"\u041e\u0447\u0456\u043a\u0443\u0454"}),(0,Et.jsx)("p",{className:"text-2xl font-bold text-amber-600",children:h.todo})]}),(0,Et.jsx)(Ss,{className:"w-10 h-10 text-amber-500 opacity-50"})]})}),(0,Et.jsx)("div",{className:"corp-card border-blue-200",children:(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("p",{className:"text-xs text-blue-600 mb-1",children:"\u0412 \u0440\u043e\u0431\u043e\u0442\u0456"}),(0,Et.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:h.inProgress})]}),(0,Et.jsx)(Cs,{className:"w-10 h-10 text-blue-500 opacity-50"})]})}),(0,Et.jsx)("div",{className:"corp-card border-emerald-200",children:(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("p",{className:"text-xs text-emerald-600 mb-1",children:"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e"}),(0,Et.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:h.done})]}),(0,Et.jsx)(Es,{className:"w-10 h-10 text-emerald-500 opacity-50"})]})})]}),(0,Et.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,Et.jsx)("div",{className:"flex gap-2 flex-wrap",children:["all","todo","in_progress","done"].map(e=>(0,Et.jsx)("button",{className:Os("corp-btn",s===e?"corp-btn-primary":"corp-btn-secondary"),onClick:()=>a(e),children:"all"===e?"\u0412\u0441\u0456":"todo"===e?"\u041e\u0447\u0456\u043a\u0443\u0454":"in_progress"===e?"\u0412 \u0440\u043e\u0431\u043e\u0442\u0456":"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e"},e))}),(0,Et.jsxs)("button",{onClick:i,className:"corp-btn corp-btn-secondary",children:[(0,Et.jsx)(Cs,{className:"w-4 h-4"})," \u041e\u043d\u043e\u0432\u0438\u0442\u0438"]})]}),(0,Et.jsx)("div",{className:"space-y-3",children:0===r.length?(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-12 text-center",children:[(0,Et.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udebf"}),(0,Et.jsx)("h3",{className:"text-lg font-semibold text-corp-text-dark mb-2",children:"\u041d\u0435\u043c\u0430\u0454 \u0442\u043e\u0432\u0430\u0440\u0456\u0432 \u043d\u0430 \u043c\u0438\u0439\u0446\u0456"}),(0,Et.jsx)("p",{className:"text-sm text-corp-text-muted",children:"\u0422\u043e\u0432\u0430\u0440\u0438 \u0437'\u044f\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u0442\u0443\u0442 \u043f\u0456\u0441\u043b\u044f \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043a\u0438 \u0437 \u041a\u0430\u0431\u0456\u043d\u0435\u0442\u0443 \u0448\u043a\u043e\u0434\u0438"})]}):r.map(e=>(0,Et.jsx)("div",{className:"corp-card hover:shadow-md transition-shadow",children:(0,Et.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Et.jsx)("h3",{className:"font-semibold text-corp-text-dark",children:e.title}),u(e.status)]}),(0,Et.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm mb-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-corp-text-muted",children:"\ud83d\udce6 \u0414\u0436\u0435\u0440\u0435\u043b\u043e:"}),(0,Et.jsx)("p",{className:"font-medium",children:e.order_number||"\u041a\u0430\u0431\u0456\u043d\u0435\u0442 \u0448\u043a\u043e\u0434\u0438"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-corp-text-muted",children:"\ud83d\udc64 \u0421\u0442\u0432\u043e\u0440\u0438\u0432:"}),(0,Et.jsx)("p",{className:"font-medium",children:e.created_by||"\u0421\u0438\u0441\u0442\u0435\u043c\u0430"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-corp-text-muted",children:"\ud83c\udfaf \u0412\u0438\u043a\u043e\u043d\u0430\u0432\u0435\u0446\u044c:"}),(0,Et.jsx)("p",{className:"font-medium",children:e.assigned_to||(0,Et.jsx)("span",{className:"text-amber-600",children:"\u041d\u0435 \u043f\u0440\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043e"})})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-corp-text-muted",children:"\ud83d\udcc5 \u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e:"}),(0,Et.jsx)("p",{className:"font-medium",children:e.created_at?new Date(e.created_at).toLocaleDateString("uk-UA"):"\u2014"})]})]}),e.description&&(0,Et.jsx)("p",{className:"text-sm text-corp-text-muted bg-slate-50 rounded-lg p-2 mb-3",children:e.description}),(0,Et.jsxs)("div",{className:"flex flex-wrap gap-2",children:["todo"===e.status&&(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsx)("button",{onClick:()=>o(e.id,"in_progress"),className:"corp-btn corp-btn-primary text-sm",children:"\u25b6\ufe0f \u0412\u0437\u044f\u0442\u0438 \u0432 \u0440\u043e\u0431\u043e\u0442\u0443"}),(0,Et.jsx)("button",{onClick:()=>{const t=prompt("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0456\u043c'\u044f \u0432\u0438\u043a\u043e\u043d\u0430\u0432\u0446\u044f:");t&&l(e.id,t)},className:"corp-btn corp-btn-secondary text-sm",children:"\ud83d\udc64 \u041f\u0440\u0438\u0437\u043d\u0430\u0447\u0438\u0442\u0438"})]}),"in_progress"===e.status&&(0,Et.jsx)("button",{onClick:()=>o(e.id,"done"),className:"corp-btn corp-btn-primary text-sm",children:"\u2705 \u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e"}),"done"===e.status&&(0,Et.jsxs)("span",{className:"text-sm text-emerald-600",children:["\u2713 \u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e ",e.completed_at?new Date(e.completed_at).toLocaleDateString("uk-UA"):""]})]})]})})},e.id))})]})}function Vs(e){let{tasks:t,loading:r,filterStatus:n,setFilterStatus:s,onRefresh:a,onUpdateStatus:i,onAssignTask:o}=e;const l=e=>{const t={todo:{label:"\u041e\u0447\u0456\u043a\u0443\u0454",tone:"amber"},in_progress:{label:"\u0412 \u0440\u043e\u0431\u043e\u0442\u0456",tone:"blue"},done:{label:"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e",tone:"green"}},r=t[e]||t.todo;return(0,Et.jsx)(Ps,{tone:r.tone,children:r.label})},c={total:t.length,todo:t.filter(e=>"todo"===e.status).length,inProgress:t.filter(e=>"in_progress"===e.status).length,done:t.filter(e=>"done"===e.status).length};return r?(0,Et.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Et.jsx)(Cs,{className:"w-8 h-8 text-corp-primary animate-spin"})}):(0,Et.jsxs)("div",{className:"space-y-6",children:[(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Et.jsx)("div",{className:"corp-card",children:(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("p",{className:"text-xs text-corp-text-muted mb-1",children:"\u0412\u0441\u044c\u043e\u0433\u043e \u043d\u0430 \u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u0457"}),(0,Et.jsx)("p",{className:"text-2xl font-bold text-corp-text-dark",children:c.total})]}),(0,Et.jsx)("div",{className:"text-4xl opacity-50",children:"\ud83d\udd27"})]})}),(0,Et.jsx)("div",{className:"corp-card border-amber-200",children:(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("p",{className:"text-xs text-amber-600 mb-1",children:"\u041e\u0447\u0456\u043a\u0443\u0454"}),(0,Et.jsx)("p",{className:"text-2xl font-bold text-amber-600",children:c.todo})]}),(0,Et.jsx)(Ss,{className:"w-10 h-10 text-amber-500 opacity-50"})]})}),(0,Et.jsx)("div",{className:"corp-card border-blue-200",children:(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("p",{className:"text-xs text-blue-600 mb-1",children:"\u0412 \u0440\u043e\u0431\u043e\u0442\u0456"}),(0,Et.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:c.inProgress})]}),(0,Et.jsx)(Cs,{className:"w-10 h-10 text-blue-500 opacity-50"})]})}),(0,Et.jsx)("div",{className:"corp-card border-emerald-200",children:(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("p",{className:"text-xs text-emerald-600 mb-1",children:"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e"}),(0,Et.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:c.done})]}),(0,Et.jsx)(Es,{className:"w-10 h-10 text-emerald-500 opacity-50"})]})})]}),(0,Et.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,Et.jsx)("div",{className:"flex gap-2 flex-wrap",children:["all","todo","in_progress","done"].map(e=>(0,Et.jsx)("button",{className:Os("corp-btn",n===e?"corp-btn-primary":"corp-btn-secondary"),onClick:()=>s(e),children:"all"===e?"\u0412\u0441\u0456":"todo"===e?"\u041e\u0447\u0456\u043a\u0443\u0454":"in_progress"===e?"\u0412 \u0440\u043e\u0431\u043e\u0442\u0456":"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e"},e))}),(0,Et.jsxs)("button",{onClick:a,className:"corp-btn corp-btn-secondary",children:[(0,Et.jsx)(Cs,{className:"w-4 h-4"})," \u041e\u043d\u043e\u0432\u0438\u0442\u0438"]})]}),(0,Et.jsx)("div",{className:"space-y-3",children:0===t.length?(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-12 text-center",children:[(0,Et.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udd27"}),(0,Et.jsx)("h3",{className:"text-lg font-semibold text-corp-text-dark mb-2",children:"\u041d\u0435\u043c\u0430\u0454 \u0442\u043e\u0432\u0430\u0440\u0456\u0432 \u043d\u0430 \u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u0457"}),(0,Et.jsx)("p",{className:"text-sm text-corp-text-muted",children:"\u0422\u043e\u0432\u0430\u0440\u0438 \u0437'\u044f\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u0442\u0443\u0442 \u043f\u0456\u0441\u043b\u044f \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043a\u0438 \u0437 \u041a\u0430\u0431\u0456\u043d\u0435\u0442\u0443 \u0448\u043a\u043e\u0434\u0438"})]}):t.map(e=>(0,Et.jsx)("div",{className:"corp-card hover:shadow-md transition-shadow",children:(0,Et.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Et.jsx)("h3",{className:"font-semibold text-corp-text-dark",children:e.title}),l(e.status),"high"===e.priority&&(0,Et.jsx)(Ps,{tone:"red",children:"\u0422\u0435\u0440\u043c\u0456\u043d\u043e\u0432\u043e"})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm mb-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-corp-text-muted",children:"\ud83d\udce6 \u0414\u0436\u0435\u0440\u0435\u043b\u043e:"}),(0,Et.jsx)("p",{className:"font-medium",children:e.order_number||"\u041a\u0430\u0431\u0456\u043d\u0435\u0442 \u0448\u043a\u043e\u0434\u0438"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-corp-text-muted",children:"\ud83d\udc64 \u0421\u0442\u0432\u043e\u0440\u0438\u0432:"}),(0,Et.jsx)("p",{className:"font-medium",children:e.created_by||"\u0421\u0438\u0441\u0442\u0435\u043c\u0430"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-corp-text-muted",children:"\ud83c\udfaf \u0412\u0438\u043a\u043e\u043d\u0430\u0432\u0435\u0446\u044c:"}),(0,Et.jsx)("p",{className:"font-medium",children:e.assigned_to||(0,Et.jsx)("span",{className:"text-amber-600",children:"\u041d\u0435 \u043f\u0440\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043e"})})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-corp-text-muted",children:"\ud83d\udcc5 \u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e:"}),(0,Et.jsx)("p",{className:"font-medium",children:e.created_at?new Date(e.created_at).toLocaleDateString("uk-UA"):"\u2014"})]})]}),e.description&&(0,Et.jsx)("p",{className:"text-sm text-corp-text-muted bg-slate-50 rounded-lg p-2 mb-3",children:e.description}),(0,Et.jsxs)("div",{className:"flex flex-wrap gap-2",children:["todo"===e.status&&(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsx)("button",{onClick:()=>i(e.id,"in_progress"),className:"corp-btn corp-btn-primary text-sm",children:"\u25b6\ufe0f \u0412\u0437\u044f\u0442\u0438 \u0432 \u0440\u043e\u0431\u043e\u0442\u0443"}),(0,Et.jsx)("button",{onClick:()=>{const t=prompt("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0456\u043c'\u044f \u0432\u0438\u043a\u043e\u043d\u0430\u0432\u0446\u044f:");t&&o(e.id,t)},className:"corp-btn corp-btn-secondary text-sm",children:"\ud83d\udc64 \u041f\u0440\u0438\u0437\u043d\u0430\u0447\u0438\u0442\u0438"})]}),"in_progress"===e.status&&(0,Et.jsx)("button",{onClick:()=>i(e.id,"done"),className:"corp-btn corp-btn-primary text-sm",children:"\u2705 \u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e"}),"done"===e.status&&(0,Et.jsxs)("span",{className:"text-sm text-emerald-600",children:["\u2713 \u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e ",e.completed_at?new Date(e.completed_at).toLocaleDateString("uk-UA"):""]})]})]})})},e.id))})]})}function Ws(e){var r;let{batches:n,statistics:s,loading:a,filterStatus:i,setFilterStatus:o,onDeleteBatch:l,onCompleteBatch:d,onRefresh:u,setShowCreateModal:h,setSelectedBatch:m,setShowReturnModal:p,getStatusBadge:f,queue:x,onCreateBatchFromQueue:g,onRemoveFromQueue:b}=e;const[y,v]=(0,t.useState)([]),[w,N]=(0,t.useState)(!1),[j,_]=(0,t.useState)({laundry_company:"",expected_return_date:"",cost:"",notes:""});return a?(0,Et.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Et.jsx)(Cs,{className:"w-8 h-8 text-corp-primary animate-spin"})}):(0,Et.jsxs)("div",{className:"space-y-6",children:[x&&x.length>0&&(0,Et.jsxs)("div",{className:"corp-card border-amber-200 bg-amber-50",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsxs)("h3",{className:"text-lg font-semibold text-corp-text-dark flex items-center gap-2",children:["\ud83d\udce5 \u0427\u0435\u0440\u0433\u0430 \u043d\u0430 \u0445\u0456\u043c\u0447\u0438\u0441\u0442\u043a\u0443",(0,Et.jsxs)("span",{className:"text-sm font-normal text-amber-600",children:["(",x.length," \u0442\u043e\u0432\u0430\u0440\u0456\u0432)"]})]}),(0,Et.jsx)("p",{className:"text-sm text-corp-text-muted",children:"\u0422\u043e\u0432\u0430\u0440\u0438 \u043e\u0447\u0456\u043a\u0443\u044e\u0442\u044c \u043d\u0430 \u0444\u043e\u0440\u043c\u0443\u0432\u0430\u043d\u043d\u044f \u043f\u0430\u0440\u0442\u0456\u0457 \u0434\u043b\u044f \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043a\u0438"})]}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsx)("button",{onClick:()=>{y.length===(null===x||void 0===x?void 0:x.length)?v([]):v((null===x||void 0===x?void 0:x.map(e=>e.id))||[])},className:"corp-btn corp-btn-secondary text-sm",children:y.length===x.length?"\u2610 \u0417\u043d\u044f\u0442\u0438 \u0432\u0441\u0456":"\u2611 \u0412\u0438\u0431\u0440\u0430\u0442\u0438 \u0432\u0441\u0456"}),y.length>0&&(0,Et.jsxs)("button",{onClick:()=>N(!0),className:"corp-btn corp-btn-primary text-sm",children:["\ud83d\udce6 \u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u043f\u0430\u0440\u0442\u0456\u044e (",y.length,")"]})]})]}),(0,Et.jsx)("div",{className:"divide-y divide-amber-200",children:x.map(e=>(0,Et.jsxs)("div",{className:Os("flex items-center gap-3 py-2 px-2 rounded-lg cursor-pointer transition-colors",y.includes(e.id)?"bg-amber-100":"hover:bg-amber-100/50"),onClick:()=>{return t=e.id,void v(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},children:[(0,Et.jsx)("input",{type:"checkbox",checked:y.includes(e.id),onChange:()=>{},className:"w-4 h-4 rounded border-amber-300"}),(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsx)("div",{className:"font-medium text-corp-text-dark",children:e.product_name}),(0,Et.jsxs)("div",{className:"text-xs text-corp-text-muted",children:["SKU: ",e.sku," \u2022 ",e.order_number||"\u0411\u0435\u0437 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"," \u2022 ",e.condition]})]}),(0,Et.jsx)("div",{className:"text-xs text-corp-text-muted",children:new Date(e.created_at).toLocaleDateString("uk-UA")}),(0,Et.jsx)("button",{onClick:t=>{t.stopPropagation(),b(e.id)},className:"text-red-500 hover:text-red-700 p-1",title:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0437 \u0447\u0435\u0440\u0433\u0438",children:(0,Et.jsx)(As,{className:"w-4 h-4"})})]},e.id))})]}),w&&(0,Et.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>N(!1),children:(0,Et.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md",onClick:e=>e.stopPropagation(),children:[(0,Et.jsxs)("h3",{className:"text-lg font-semibold text-corp-text-dark mb-4",children:["\ud83d\udce6 \u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u043f\u0430\u0440\u0442\u0456\u044e (",y.length," \u0442\u043e\u0432\u0430\u0440\u0456\u0432)"]}),(0,Et.jsxs)("div",{className:"space-y-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm text-corp-text-muted mb-1",children:"\u0425\u0456\u043c\u0447\u0438\u0441\u0442\u043a\u0430 *"}),(0,Et.jsx)("input",{type:"text",value:j.laundry_company,onChange:e=>_(c(c({},j),{},{laundry_company:e.target.value})),placeholder:"\u041d\u0430\u0437\u0432\u0430 \u043a\u043e\u043c\u043f\u0430\u043d\u0456\u0457 \u0445\u0456\u043c\u0447\u0438\u0441\u0442\u043a\u0438",className:"w-full rounded-lg border border-slate-200 px-3 py-2"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm text-corp-text-muted mb-1",children:"\u041e\u0447\u0456\u043a\u0443\u0432\u0430\u043d\u0430 \u0434\u0430\u0442\u0430 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f *"}),(0,Et.jsx)("input",{type:"date",value:j.expected_return_date,onChange:e=>_(c(c({},j),{},{expected_return_date:e.target.value})),className:"w-full rounded-lg border border-slate-200 px-3 py-2"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm text-corp-text-muted mb-1",children:"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c (\u0433\u0440\u043d)"}),(0,Et.jsx)("input",{type:"number",value:j.cost,onChange:e=>_(c(c({},j),{},{cost:e.target.value})),placeholder:"0",className:"w-full rounded-lg border border-slate-200 px-3 py-2"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm text-corp-text-muted mb-1",children:"\u041f\u0440\u0438\u043c\u0456\u0442\u043a\u0438"}),(0,Et.jsx)("textarea",{value:j.notes,onChange:e=>_(c(c({},j),{},{notes:e.target.value})),placeholder:"\u0414\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u0430 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f...",className:"w-full rounded-lg border border-slate-200 px-3 py-2 h-20"})]})]}),(0,Et.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,Et.jsx)("button",{onClick:async()=>{0!==y.length?j.laundry_company&&j.expected_return_date?(await g(y,j.laundry_company,j.expected_return_date,j.cost?parseFloat(j.cost):null,j.notes),v([]),N(!1),_({laundry_company:"",expected_return_date:"",cost:"",notes:""})):alert("\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u0445\u0456\u043c\u0447\u0438\u0441\u0442\u043a\u0438 \u0442\u0430 \u043e\u0447\u0456\u043a\u0443\u0432\u0430\u043d\u0443 \u0434\u0430\u0442\u0443 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f"):alert("\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u0438 \u0434\u043b\u044f \u043f\u0430\u0440\u0442\u0456\u0457")},className:"flex-1 corp-btn corp-btn-primary",children:"\u2705 \u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438"}),(0,Et.jsx)("button",{onClick:()=>N(!1),className:"corp-btn corp-btn-secondary",children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"})]})]})}),s&&(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Et.jsx)("div",{className:"corp-card",children:(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("p",{className:"text-xs text-corp-text-muted mb-1",children:"\u0412\u0441\u044c\u043e\u0433\u043e \u043f\u0430\u0440\u0442\u0456\u0439"}),(0,Et.jsx)("p",{className:"text-2xl font-bold text-corp-text-dark",children:s.total_batches})]}),(0,Et.jsx)(Is,{className:"w-10 h-10 text-corp-primary opacity-50"})]})}),(0,Et.jsx)("div",{className:"corp-card",children:(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("p",{className:"text-xs text-corp-text-muted mb-1",children:"\u0410\u043a\u0442\u0438\u0432\u043d\u0456 \u043f\u0430\u0440\u0442\u0456\u0457"}),(0,Et.jsx)("p",{className:"text-2xl font-bold text-amber-600",children:s.active_batches})]}),(0,Et.jsx)(Ss,{className:"w-10 h-10 text-amber-500 opacity-50"})]})}),(0,Et.jsx)("div",{className:"corp-card",children:(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("p",{className:"text-xs text-corp-text-muted mb-1",children:"\u0412\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u0442\u043e\u0432\u0430\u0440\u0456\u0432"}),(0,Et.jsx)("p",{className:"text-2xl font-bold text-corp-gold",children:s.total_items_sent})]}),(0,Et.jsx)(ks,{className:"w-10 h-10 text-corp-gold opacity-50"})]})}),(0,Et.jsx)("div",{className:"corp-card",children:(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("p",{className:"text-xs text-corp-text-muted mb-1",children:"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c"}),(0,Et.jsxs)("p",{className:"text-2xl font-bold text-emerald-600",children:[(null===(r=s.total_cost)||void 0===r?void 0:r.toFixed(2))||0," \u20b4"]})]}),(0,Et.jsx)(Es,{className:"w-10 h-10 text-emerald-500 opacity-50"})]})})]}),(0,Et.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,Et.jsx)("div",{className:"flex gap-2 flex-wrap",children:["all","sent","partial_return","returned","completed"].map(e=>(0,Et.jsx)("button",{className:Os("corp-btn",i===e?"corp-btn-primary":"corp-btn-secondary"),onClick:()=>o(e),children:"all"===e?"\u0412\u0441\u0456":"sent"===e?"\u0412\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e":"partial_return"===e?"\u0427\u0430\u0441\u0442\u043a\u043e\u0432\u0435":"returned"===e?"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043e":"\u0417\u0430\u043a\u0440\u0438\u0442\u043e"},e))}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsxs)("button",{onClick:u,className:"corp-btn corp-btn-secondary",children:[(0,Et.jsx)(Cs,{className:"w-4 h-4"})," \u041e\u043d\u043e\u0432\u0438\u0442\u0438"]}),(0,Et.jsxs)("button",{onClick:()=>h(!0),className:"corp-btn corp-btn-primary",children:[(0,Et.jsx)(Ts,{className:"w-4 h-4"})," \u041d\u043e\u0432\u0430 \u043f\u0430\u0440\u0442\u0456\u044f"]})]})]}),(0,Et.jsx)("div",{className:"space-y-4",children:0===n.length?(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-12 text-center",children:[(0,Et.jsx)(Ds,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,Et.jsx)("h3",{className:"text-lg font-semibold text-corp-text-dark mb-2",children:"\u041f\u0430\u0440\u0442\u0456\u0439 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),(0,Et.jsx)("p",{className:"text-sm text-corp-text-muted",children:"\u0421\u0442\u0432\u043e\u0440\u0456\u0442\u044c \u043d\u043e\u0432\u0443 \u043f\u0430\u0440\u0442\u0456\u044e \u0434\u043b\u044f \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043a\u0438 \u0442\u0435\u043a\u0441\u0442\u0438\u043b\u044e \u0432 \u0445\u0456\u043c\u0447\u0438\u0441\u0442\u043a\u0443"})]}):n.map(e=>(0,Et.jsxs)("div",{className:"corp-card",children:[(0,Et.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-corp-text-dark",children:e.batch_number}),(0,Et.jsxs)("p",{className:"text-sm text-corp-text-muted mt-1",children:["\ud83c\udfe2 ",e.laundry_company]})]}),(0,Et.jsxs)("div",{className:"text-right",children:[f(e.status),e.cost>0&&(0,Et.jsxs)("p",{className:"text-sm font-medium text-corp-gold mt-2",children:[e.cost.toFixed(2)," \u20b4"]})]})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4 pb-4 border-b border-corp-border-light",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("p",{className:"text-xs text-corp-text-muted uppercase mb-1",children:"\ud83d\udcc5 \u0412\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e"}),(0,Et.jsx)("p",{className:"font-medium text-corp-text-dark",children:new Date(e.sent_date).toLocaleDateString("uk-UA")})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("p",{className:"text-xs text-corp-text-muted uppercase mb-1",children:"\ud83d\udcc6 \u041e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f"}),(0,Et.jsx)("p",{className:"font-medium text-corp-text-dark",children:new Date(e.expected_return_date).toLocaleDateString("uk-UA")})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("p",{className:"text-xs text-corp-text-muted uppercase mb-1",children:"\ud83d\udce6 \u0422\u043e\u0432\u0430\u0440\u0456\u0432"}),(0,Et.jsxs)("p",{className:"font-medium text-corp-text-dark mb-2",children:[e.returned_items," / ",e.total_items]}),(0,Et.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-2",children:(0,Et.jsx)("div",{className:"bg-corp-primary h-2 rounded-full",style:{width:"".concat(e.returned_items/e.total_items*100,"%")}})})]})]}),(0,Et.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,Et.jsx)("button",{onClick:()=>{m(e),p(!0)},className:"corp-btn corp-btn-secondary text-sm",children:"\ud83d\udce5 \u041f\u0440\u0438\u0439\u043d\u044f\u0442\u0438 \u0442\u043e\u0432\u0430\u0440\u0438"}),"completed"!==e.status&&(0,Et.jsx)("button",{onClick:()=>d(e.id),className:"corp-btn corp-btn-primary text-sm",children:"\u2705 \u0417\u0430\u043a\u0440\u0438\u0442\u0438 \u043f\u0430\u0440\u0442\u0456\u044e"}),(0,Et.jsxs)("button",{onClick:()=>l(e.id),className:"corp-btn corp-btn-secondary text-sm text-red-600 hover:bg-red-50",children:[(0,Et.jsx)(As,{className:"w-4 h-4"})," \u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"]})]})]},e.id))})]})}const qs={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:"0",FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://backrentalhub.farforrent.com.ua"}.REACT_APP_API_PREFIX||"/api",Gs=is.create({baseURL:"".concat("https://backrentalhub.farforrent.com.ua").concat(qs),headers:{"Content-Type":"application/json"},timeout:0}),Ys=async e=>{const t=e?{status:e}:{};return(await Gs.get("/tasks",{params:t})).data},Xs=async e=>(await Gs.post("/tasks",e)).data,Qs=async(e,t)=>(await Gs.put("/tasks/".concat(e),t)).data,Ks=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")};function Zs(e){let{tone:t="slate",children:r}=e;const n={slate:"bg-slate-100 text-slate-700 border-slate-200",green:"bg-emerald-100 text-emerald-700 border-emerald-200",blue:"bg-sky-100 text-sky-700 border-sky-200",amber:"bg-amber-100 text-amber-800 border-amber-200",red:"bg-rose-100 text-rose-700 border-rose-200",violet:"bg-violet-100 text-violet-700 border-violet-200"};return(0,Et.jsx)("span",{className:Ks("inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[10px]",n[t]||n.slate),children:r})}function Js(e){let{children:t,onClick:r,tone:n="slate"}=e;return(0,Et.jsx)("button",{type:"button",onClick:r,className:Ks("rounded-full px-3 py-1 text-[11px] font-medium transition",{slate:"bg-slate-900 text-white hover:bg-slate-800",green:"bg-emerald-600 text-white hover:bg-emerald-700",red:"bg-rose-600 text-white hover:bg-rose-700",amber:"bg-amber-500 text-corp-text-dark hover:bg-amber-600",ghost:"bg-white text-slate-700 border border-slate-200 hover:bg-slate-50"}[n]),children:t})}function $s(e){let{priority:t}=e;return"low"===t?(0,Et.jsx)(Zs,{tone:"slate",children:"\u26aa \u041d\u0438\u0437\u044c\u043a\u0438\u0439"}):"medium"===t?(0,Et.jsx)(Zs,{tone:"amber",children:"\ud83d\udfe1 \u0421\u0435\u0440\u0435\u0434\u043d\u0456\u0439"}):(0,Et.jsx)(Zs,{tone:"red",children:"\ud83d\udd34 \u0412\u0438\u0441\u043e\u043a\u0438\u0439"})}function ea(e){let{status:t}=e;return"todo"===t?(0,Et.jsx)(Zs,{tone:"slate",children:"\ud83d\udccb \u0414\u043e \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f"}):"in_progress"===t?(0,Et.jsx)(Zs,{tone:"blue",children:"\ud83d\udd04 \u0412 \u0440\u043e\u0431\u043e\u0442\u0456"}):(0,Et.jsx)(Zs,{tone:"green",children:"\u2705 \u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e"})}function ta(e){let{type:t}=e;const r={packing:{label:"\ud83d\udce6 \u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u044f",tone:"blue"},washing:{label:"\ud83d\udca7 \u041c\u0438\u0439\u043a\u0430",tone:"sky"},restoration:{label:"\ud83d\udd27 \u0420\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f",tone:"violet"},reaudit:{label:"\ud83d\udd0d \u041f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a",tone:"amber"},return:{label:"\u21a9\ufe0f \u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f",tone:"green"},general:{label:"\ud83d\udcdd \u0417\u0430\u0433\u0430\u043b\u044c\u043d\u0435",tone:"slate"}},{label:n,tone:s}=r[t]||r.general;return(0,Et.jsx)(Zs,{tone:s,children:n})}function ra(e){let{onBackToDashboard:r,onNavigateToDamage:n,initialContext:s}=e;const[a,i]=(0,t.useState)([]),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(!0),[u,h]=(0,t.useState)(!1),[m,p]=(0,t.useState)(""),[f,x]=(0,t.useState)("all"),[g,b]=(0,t.useState)("all"),[y,v]=(0,t.useState)("all"),[w,N]=(0,t.useState)(s||{}),j=async()=>{try{d(!0);const e=await Ys();i(e)}catch(e){console.error("Error loading tasks:",e)}finally{d(!1)}};(0,t.useEffect)(()=>{j()},[]);const _=(0,t.useMemo)(()=>a.filter(e=>{var t,r;const n=!m||e.title.toLowerCase().includes(m.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase()))||(null===(r=e.assigned_to)||void 0===r?void 0:r.toLowerCase().includes(m.toLowerCase())),s="all"===f||e.status===f,a="all"===g||e.task_type===g,i="all"===y||e.priority===y;return n&&s&&a&&i}),[a,m,f,g,y]),C=(0,t.useMemo)(()=>({todo:_.filter(e=>"todo"===e.status),in_progress:_.filter(e=>"in_progress"===e.status),done:_.filter(e=>"done"===e.status)}),[_]),S=async(e,t)=>{try{const r=await Qs(e,{status:t});i(a.map(t=>t.id===e?r:t)),(null===o||void 0===o?void 0:o.id)===e&&l(r)}catch(r){console.error("Error updating task status:",r),alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u0443")}},E=e=>!(!e.due_date||"done"===e.status)&&new Date(e.due_date)<new Date;return(0,Et.jsxs)("div",{className:"min-h-screen bg-corp-bg-main",children:[(0,Et.jsx)(It,{cabinetName:"\u041a\u0430\u0431\u0456\u043d\u0435\u0442 \u0437\u0430\u0432\u0434\u0430\u043d\u044c",showBackButton:!0,onBackClick:r}),(0,Et.jsxs)("div",{className:"mx-auto max-w-7xl p-6 space-y-4",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsx)("h2",{className:"text-xl font-semibold text-corp-text-dark",children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f\u043c\u0438"}),(0,Et.jsx)(Js,{tone:"green",onClick:()=>h(!0),children:"\u2795 \u041d\u043e\u0432\u0435 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f"})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-5 gap-4",children:[(0,Et.jsxs)("div",{className:"corp-card",children:[(0,Et.jsx)("div",{className:"text-xs text-corp-text-muted mb-1",children:"\u0412\u0441\u044c\u043e\u0433\u043e \u0437\u0430\u0432\u0434\u0430\u043d\u044c"}),(0,Et.jsx)("div",{className:"text-2xl font-bold text-corp-text-dark",children:a.length})]}),(0,Et.jsxs)("div",{className:"corp-card",children:[(0,Et.jsx)("div",{className:"text-xs text-corp-text-muted mb-1",children:"\u0414\u043e \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f"}),(0,Et.jsx)("div",{className:"text-2xl font-bold text-corp-text-main",children:C.todo.length})]}),(0,Et.jsxs)("div",{className:"corp-card",children:[(0,Et.jsx)("div",{className:"text-xs text-blue-600 mb-1",children:"\u0412 \u0440\u043e\u0431\u043e\u0442\u0456"}),(0,Et.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:C.in_progress.length})]}),(0,Et.jsxs)("div",{className:"corp-card",children:[(0,Et.jsx)("div",{className:"text-xs text-emerald-600 mb-1",children:"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e"}),(0,Et.jsx)("div",{className:"text-2xl font-bold text-emerald-600",children:C.done.length})]}),(0,Et.jsxs)("div",{className:"corp-card border-rose-200",children:[(0,Et.jsx)("div",{className:"text-xs text-rose-600 mb-1",children:"\u041f\u0440\u043e\u0441\u0442\u0440\u043e\u0447\u0435\u043d\u043e"}),(0,Et.jsx)("div",{className:"text-2xl font-bold text-rose-600",children:a.filter(e=>E(e)).length})]})]}),(0,Et.jsx)("div",{className:"corp-card",children:(0,Et.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-xs text-corp-text-main mb-1",children:"\u041f\u043e\u0448\u0443\u043a"}),(0,Et.jsx)("input",{type:"text",value:m,onChange:e=>p(e.target.value),placeholder:"\u041d\u0430\u0437\u0432\u0430, \u043e\u043f\u0438\u0441, \u0432\u0438\u043a\u043e\u043d\u0430\u0432\u0435\u0446\u044c...",className:"w-full rounded-corp border border-corp-border px-3 py-1.5 text-sm"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-xs text-corp-text-main mb-1",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,Et.jsxs)("select",{value:f,onChange:e=>x(e.target.value),className:"w-full rounded-corp border border-corp-border px-3 py-1.5 text-sm",children:[(0,Et.jsx)("option",{value:"all",children:"\u0412\u0441\u0456"}),(0,Et.jsx)("option",{value:"todo",children:"\u0414\u043e \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f"}),(0,Et.jsx)("option",{value:"in_progress",children:"\u0412 \u0440\u043e\u0431\u043e\u0442\u0456"}),(0,Et.jsx)("option",{value:"done",children:"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-xs text-corp-text-main mb-1",children:"\u0422\u0438\u043f"}),(0,Et.jsxs)("select",{value:g,onChange:e=>b(e.target.value),className:"w-full rounded-corp border border-corp-border px-3 py-1.5 text-sm",children:[(0,Et.jsx)("option",{value:"all",children:"\u0412\u0441\u0456 \u0442\u0438\u043f\u0438"}),(0,Et.jsx)("option",{value:"packing",children:"\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u044f"}),(0,Et.jsx)("option",{value:"washing",children:"\u041c\u0438\u0439\u043a\u0430"}),(0,Et.jsx)("option",{value:"restoration",children:"\u0420\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f"}),(0,Et.jsx)("option",{value:"reaudit",children:"\u041f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a"}),(0,Et.jsx)("option",{value:"return",children:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f"}),(0,Et.jsx)("option",{value:"general",children:"\u0417\u0430\u0433\u0430\u043b\u044c\u043d\u0435"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-xs text-corp-text-main mb-1",children:"\u041f\u0440\u0456\u043e\u0440\u0438\u0442\u0435\u0442"}),(0,Et.jsxs)("select",{value:y,onChange:e=>v(e.target.value),className:"w-full rounded-corp border border-corp-border px-3 py-1.5 text-sm",children:[(0,Et.jsx)("option",{value:"all",children:"\u0412\u0441\u0456"}),(0,Et.jsx)("option",{value:"high",children:"\u0412\u0438\u0441\u043e\u043a\u0438\u0439"}),(0,Et.jsx)("option",{value:"medium",children:"\u0421\u0435\u0440\u0435\u0434\u043d\u0456\u0439"}),(0,Et.jsx)("option",{value:"low",children:"\u041d\u0438\u0437\u044c\u043a\u0438\u0439"})]})]})]})}),(0,Et.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Et.jsxs)("div",{className:"bg-slate-100 rounded-corp p-4",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Et.jsx)("h3",{className:"font-semibold text-slate-700",children:"\ud83d\udccb \u0414\u043e \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f"}),(0,Et.jsx)("span",{className:"text-xs bg-slate-200 text-slate-700 px-2 py-0.5 rounded-full",children:C.todo.length})]}),(0,Et.jsxs)("div",{className:"space-y-3",children:[C.todo.map(e=>(0,Et.jsx)(na,{task:e,isOverdue:E(e),onClick:()=>l(e),onStatusChange:S},e.id)),0===C.todo.length&&(0,Et.jsx)("div",{className:"text-center text-sm text-slate-400 py-8",children:"\u041d\u0435\u043c\u0430\u0454 \u0437\u0430\u0432\u0434\u0430\u043d\u044c"})]})]}),(0,Et.jsxs)("div",{className:"bg-blue-50 rounded-corp p-4",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Et.jsx)("h3",{className:"font-semibold text-blue-700",children:"\ud83d\udd04 \u0412 \u0440\u043e\u0431\u043e\u0442\u0456"}),(0,Et.jsx)("span",{className:"text-xs bg-blue-200 text-blue-700 px-2 py-0.5 rounded-full",children:C.in_progress.length})]}),(0,Et.jsxs)("div",{className:"space-y-3",children:[C.in_progress.map(e=>(0,Et.jsx)(na,{task:e,isOverdue:E(e),onClick:()=>l(e),onStatusChange:S},e.id)),0===C.in_progress.length&&(0,Et.jsx)("div",{className:"text-center text-sm text-slate-400 py-8",children:"\u041d\u0435\u043c\u0430\u0454 \u0437\u0430\u0432\u0434\u0430\u043d\u044c"})]})]}),(0,Et.jsxs)("div",{className:"bg-emerald-50 rounded-corp p-4",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Et.jsx)("h3",{className:"font-semibold text-emerald-700",children:"\u2705 \u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e"}),(0,Et.jsx)("span",{className:"text-xs bg-emerald-200 text-emerald-700 px-2 py-0.5 rounded-full",children:C.done.length})]}),(0,Et.jsxs)("div",{className:"space-y-3",children:[C.done.map(e=>(0,Et.jsx)(na,{task:e,isOverdue:!1,onClick:()=>l(e),onStatusChange:S},e.id)),0===C.done.length&&(0,Et.jsx)("div",{className:"text-center text-sm text-slate-400 py-8",children:"\u041d\u0435\u043c\u0430\u0454 \u0437\u0430\u0432\u0434\u0430\u043d\u044c"})]})]})]}),o&&(0,Et.jsx)(sa,{task:o,onClose:()=>l(null),onStatusChange:S,onAssigneeChange:async(e,t)=>{try{const r=await Qs(e,{assigned_to:t});i(a.map(t=>t.id===e?r:t)),(null===o||void 0===o?void 0:o.id)===e&&l(r)}catch(r){console.error("Error updating assignee:",r),alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u0432\u0438\u043a\u043e\u043d\u0430\u0432\u0446\u044f")}},onUpdate:j,onNavigateToDamage:n}),u&&(0,Et.jsx)(aa,{onClose:()=>h(!1),onSuccess:j,prefilledData:w})]})]})}function na(e){let{task:t,isOverdue:r,onClick:n,onStatusChange:s}=e;return(0,Et.jsxs)("div",{onClick:n,className:"bg-white rounded-lg border border-slate-200 p-3 cursor-pointer hover:shadow-md transition",children:[r&&(0,Et.jsx)("div",{className:"mb-2",children:(0,Et.jsx)(Zs,{tone:"red",children:"\u23f0 \u041f\u0440\u043e\u0441\u0442\u0440\u043e\u0447\u0435\u043d\u043e"})}),(0,Et.jsxs)("div",{className:"flex items-start gap-2 mb-2",children:[(0,Et.jsx)($s,{priority:t.priority}),(0,Et.jsx)(ta,{type:t.task_type})]}),(0,Et.jsx)("h4",{className:"font-semibold text-sm text-corp-text-dark mb-1",children:t.title}),t.description&&(0,Et.jsx)("p",{className:"text-xs text-corp-text-main mb-2 line-clamp-2",children:t.description}),(0,Et.jsxs)("div",{className:"flex items-center justify-between text-xs text-corp-text-muted",children:[(0,Et.jsx)("div",{children:t.assigned_to||"\ud83d\udc64 \u041d\u0435 \u043f\u0440\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043e"}),t.due_date&&(0,Et.jsxs)("div",{className:r?"text-rose-600 font-medium":"",children:["\ud83d\udcc5 ",new Date(t.due_date).toLocaleDateString("uk-UA")]})]}),t.order_number&&(0,Et.jsx)("div",{className:"mt-2 pt-2 border-t border-slate-100",children:(0,Et.jsxs)("span",{className:"text-xs text-blue-600",children:["\ud83d\udd17 ",t.order_number]})}),t.damage_id&&(0,Et.jsx)("div",{className:"mt-2 pt-2 border-t border-slate-100",children:(0,Et.jsxs)("span",{className:"text-xs text-rose-600",children:["\u26a0\ufe0f ",t.damage_case_number||t.damage_id]})})]})}function sa(e){let{task:r,onClose:n,onStatusChange:s,onAssigneeChange:a,onUpdate:i,onNavigateToDamage:o}=e;const[l,c]=(0,t.useState)(r.assigned_to||"");return(0,Et.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:n,children:(0,Et.jsx)("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto m-4",onClick:e=>e.stopPropagation(),children:(0,Et.jsxs)("div",{className:"p-6",children:[(0,Et.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsx)("h2",{className:"text-xl font-bold text-corp-text-dark mb-2",children:r.title}),(0,Et.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,Et.jsx)($s,{priority:r.priority}),(0,Et.jsx)(ta,{type:r.task_type}),(0,Et.jsx)(ea,{status:r.status})]})]}),(0,Et.jsx)("button",{onClick:n,className:"text-slate-400 hover:text-corp-text-main text-2xl leading-none",children:"\xd7"})]}),r.description&&(0,Et.jsxs)("div",{className:"mb-4 p-4 bg-slate-50 rounded-lg",children:[(0,Et.jsx)("div",{className:"text-xs text-corp-text-main mb-1",children:"\u041e\u043f\u0438\u0441:"}),(0,Et.jsx)("div",{className:"text-sm text-corp-text-dark",children:r.description})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,Et.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,Et.jsx)("div",{className:"text-xs text-corp-text-main mb-1",children:"ID \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f"}),(0,Et.jsx)("div",{className:"text-sm font-mono text-corp-text-dark",children:r.id})]}),(0,Et.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,Et.jsx)("div",{className:"text-xs text-corp-text-main mb-1",children:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e"}),(0,Et.jsx)("div",{className:"text-sm text-corp-text-dark",children:new Date(r.created_at).toLocaleDateString("uk-UA")})]}),r.due_date&&(0,Et.jsxs)("div",{className:"p-3 bg-amber-50 rounded-lg",children:[(0,Et.jsx)("div",{className:"text-xs text-amber-800 mb-1",children:"\u0422\u0435\u0440\u043c\u0456\u043d \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f"}),(0,Et.jsx)("div",{className:"text-sm font-medium text-amber-900",children:new Date(r.due_date).toLocaleString("uk-UA")})]}),r.completed_at&&(0,Et.jsxs)("div",{className:"p-3 bg-emerald-50 rounded-lg",children:[(0,Et.jsx)("div",{className:"text-xs text-emerald-800 mb-1",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e"}),(0,Et.jsx)("div",{className:"text-sm font-medium text-emerald-900",children:new Date(r.completed_at).toLocaleString("uk-UA")})]}),r.order_number&&(0,Et.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[(0,Et.jsx)("div",{className:"text-xs text-blue-800 mb-1",children:"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),(0,Et.jsx)("div",{className:"text-sm font-medium text-blue-900",children:r.order_number})]}),r.damage_id&&(0,Et.jsxs)("div",{className:"p-3 bg-rose-50 rounded-lg",children:[(0,Et.jsx)("div",{className:"text-xs text-rose-800 mb-1",children:"ID \u043a\u0435\u0439\u0441\u0443 \u0448\u043a\u043e\u0434\u0438"}),(0,Et.jsx)("div",{className:"text-sm font-medium text-rose-900",children:r.damage_case_number||r.damage_id})]})]}),(0,Et.jsxs)("div",{className:"mb-4",children:[(0,Et.jsx)("label",{className:"block text-sm text-slate-700 mb-2",children:"\u0412\u0438\u043a\u043e\u043d\u0430\u0432\u0435\u0446\u044c"}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),placeholder:"\u0406\u043c'\u044f \u0432\u0438\u043a\u043e\u043d\u0430\u0432\u0446\u044f",className:"flex-1 rounded-lg border border-slate-300 px-3 py-2 text-sm"}),(0,Et.jsx)(Js,{tone:"green",onClick:()=>{a(r.id,l)},children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})]})]}),r.damage_id&&(0,Et.jsxs)("div",{className:"border-t border-slate-200 pt-4",children:[(0,Et.jsx)("div",{className:"text-sm text-slate-700 mb-3",children:"\u041f\u043e\u0432'\u044f\u0437\u0430\u043d\u0456 \u0437\u0430\u043f\u0438\u0441\u0438:"}),(0,Et.jsx)("div",{className:"flex gap-2",children:o&&(0,Et.jsxs)(Js,{tone:"ghost",onClick:()=>{o(r.damage_id),n()},children:["\u26a0\ufe0f \u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0434\u043e \u043a\u0435\u0439\u0441\u0443 ",r.damage_case_number||r.damage_id]})})]}),r.order_number&&(0,Et.jsxs)("div",{className:"border-t border-slate-200 pt-4",children:[(0,Et.jsx)("div",{className:"text-sm text-slate-700 mb-2",children:"\u041f\u043e\u0432'\u044f\u0437\u0430\u043d\u0435 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f:"}),(0,Et.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg px-3 py-2 text-sm text-blue-900",children:["\ud83d\udce6 ",r.order_number," (\u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0441\u044c\u043a\u0438\u0439 \u043a\u0430\u0431\u0456\u043d\u0435\u0442)"]})]}),(0,Et.jsxs)("div",{className:"border-t border-slate-200 pt-4",children:[(0,Et.jsx)("div",{className:"text-sm text-slate-700 mb-3",children:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438 \u0441\u0442\u0430\u0442\u0443\u0441:"}),(0,Et.jsxs)("div",{className:"flex gap-2",children:["todo"!==r.status&&(0,Et.jsx)(Js,{tone:"ghost",onClick:()=>s(r.id,"todo"),children:"\ud83d\udccb \u0414\u043e \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f"}),"in_progress"!==r.status&&(0,Et.jsx)(Js,{tone:"amber",onClick:()=>s(r.id,"in_progress"),children:"\ud83d\udd04 \u0412 \u0440\u043e\u0431\u043e\u0442\u0443"}),"done"!==r.status&&(0,Et.jsx)(Js,{tone:"green",onClick:()=>s(r.id,"done"),children:"\u2705 \u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438"})]})]})]})})})}function aa(e){let{onClose:r,onSuccess:n,prefilledData:s}=e;const[a,i]=(0,t.useState)({title:"",description:"",task_type:"general",priority:"medium",assigned_to:"",due_date:"",order_number:(null===s||void 0===s?void 0:s.orderNumber)||"",damage_id:(null===s||void 0===s?void 0:s.damageId)||""});return(0,Et.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:r,children:(0,Et.jsx)("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto m-4",onClick:e=>e.stopPropagation(),children:(0,Et.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Xs(c(c({},a),{},{due_date:a.due_date?new Date(a.due_date).toISOString():void 0,order_number:a.order_number||void 0,damage_id:a.damage_id||void 0})),n(),r()}catch(t){console.error("Error creating task:",t),alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f")}},className:"p-6",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Et.jsx)("h2",{className:"text-xl font-bold text-corp-text-dark",children:"\u2795 \u041d\u043e\u0432\u0435 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f"}),(0,Et.jsx)("button",{type:"button",onClick:r,className:"text-slate-400 hover:text-corp-text-main text-2xl leading-none",children:"\xd7"})]}),(0,Et.jsxs)("div",{className:"space-y-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm text-slate-700 mb-1",children:"\u041d\u0430\u0437\u0432\u0430 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f *"}),(0,Et.jsx)("input",{type:"text",required:!0,value:a.title,onChange:e=>i(c(c({},a),{},{title:e.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"\u041d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434: \u041f\u0456\u0434\u0433\u043e\u0442\u0443\u0432\u0430\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm text-slate-700 mb-1",children:"\u041e\u043f\u0438\u0441"}),(0,Et.jsx)("textarea",{value:a.description,onChange:e=>i(c(c({},a),{},{description:e.target.value})),rows:3,className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"\u0414\u0435\u0442\u0430\u043b\u044c\u043d\u0438\u0439 \u043e\u043f\u0438\u0441 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f..."})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm text-slate-700 mb-1",children:"\u0422\u0438\u043f \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f"}),(0,Et.jsxs)("select",{value:a.task_type,onChange:e=>i(c(c({},a),{},{task_type:e.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm",children:[(0,Et.jsx)("option",{value:"general",children:"\u0417\u0430\u0433\u0430\u043b\u044c\u043d\u0435"}),(0,Et.jsx)("option",{value:"packing",children:"\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u044f"}),(0,Et.jsx)("option",{value:"washing",children:"\u041c\u0438\u0439\u043a\u0430"}),(0,Et.jsx)("option",{value:"restoration",children:"\u0420\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f"}),(0,Et.jsx)("option",{value:"reaudit",children:"\u041f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a"}),(0,Et.jsx)("option",{value:"return",children:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm text-slate-700 mb-1",children:"\u041f\u0440\u0456\u043e\u0440\u0438\u0442\u0435\u0442"}),(0,Et.jsxs)("select",{value:a.priority,onChange:e=>i(c(c({},a),{},{priority:e.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm",children:[(0,Et.jsx)("option",{value:"low",children:"\u041d\u0438\u0437\u044c\u043a\u0438\u0439"}),(0,Et.jsx)("option",{value:"medium",children:"\u0421\u0435\u0440\u0435\u0434\u043d\u0456\u0439"}),(0,Et.jsx)("option",{value:"high",children:"\u0412\u0438\u0441\u043e\u043a\u0438\u0439"})]})]})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm text-slate-700 mb-1",children:"\u0412\u0438\u043a\u043e\u043d\u0430\u0432\u0435\u0446\u044c"}),(0,Et.jsx)("input",{type:"text",value:a.assigned_to,onChange:e=>i(c(c({},a),{},{assigned_to:e.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"\u0406\u043c'\u044f \u0432\u0438\u043a\u043e\u043d\u0430\u0432\u0446\u044f"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm text-slate-700 mb-1",children:"\u0422\u0435\u0440\u043c\u0456\u043d \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f"}),(0,Et.jsx)("input",{type:"datetime-local",value:a.due_date,onChange:e=>i(c(c({},a),{},{due_date:e.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm"})]})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm text-slate-700 mb-1",children:"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f (\u043e\u043f\u0446\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u043e)"}),(0,Et.jsx)("input",{type:"text",value:a.order_number,onChange:e=>i(c(c({},a),{},{order_number:e.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"ORD-6937"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm text-slate-700 mb-1",children:"ID \u043a\u0435\u0439\u0441\u0443 \u0448\u043a\u043e\u0434\u0438 (\u043e\u043f\u0446\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u043e)"}),(0,Et.jsx)("input",{type:"text",value:a.damage_id,onChange:e=>i(c(c({},a),{},{damage_id:e.target.value})),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm",placeholder:"DMG-001"})]})]})]}),(0,Et.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,Et.jsx)("button",{type:"submit",className:"flex-1 bg-emerald-600 text-white rounded-lg py-2 font-medium hover:bg-emerald-700 transition",children:"\u2705 \u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f"}),(0,Et.jsx)("button",{type:"button",onClick:r,className:"px-6 bg-slate-200 text-slate-700 rounded-lg py-2 font-medium hover:bg-slate-300 transition",children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"})]})]})})})}const ia=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")};function oa(e){let{tone:t="slate",children:r}=e;const n={slate:"bg-slate-100 text-slate-700 border-slate-200",blue:"bg-sky-100 text-sky-700 border-sky-200",green:"bg-emerald-100 text-emerald-700 border-emerald-200",amber:"bg-amber-100 text-amber-800 border-amber-200",violet:"bg-violet-100 text-violet-700 border-violet-200"};return(0,Et.jsx)("span",{className:ia("inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[10px]",n[t]||n.slate),children:r})}function la(e){let{children:t,onClick:r,tone:n="slate"}=e;const s={slate:"bg-slate-900 text-white hover:bg-slate-800",green:"bg-emerald-600 text-white hover:bg-emerald-700",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 border border-slate-200"};return(0,Et.jsx)("button",{type:"button",onClick:r,className:ia("rounded-full px-3 py-1 text-[11px] font-medium transition",s[n]||s.slate),children:t})}function ca(e){let{value:t}=e;const r=Math.max(0,Math.min(100,t));return(0,Et.jsx)("div",{className:"h-1.5 w-full overflow-hidden rounded-full bg-slate-200",children:(0,Et.jsx)("div",{className:"h-full rounded-full bg-sky-500",style:{width:"".concat(r,"%")}})})}function da(e){let{orders:t,selectedId:r,onSelect:n,loading:s}=e;return(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[(0,Et.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h2",{className:"text-sm font-semibold text-corp-text-dark",children:"\u041e\u0440\u0434\u0435\u0440\u0438 \u0432 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457"}),(0,Et.jsx)("p",{className:"text-[11px] text-corp-text-muted",children:"\u0422\u0456\u043b\u044c\u043a\u0438 \u0437\u0431\u0456\u0440 \u0456 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u043d\u0430 \u0432\u0438\u0434\u0430\u0447\u0443 \xb7 \u0441\u0442\u0430\u0442\u0443\u0441 progress / ready."})]}),(0,Et.jsxs)("div",{className:"flex gap-2 text-[11px] text-corp-text-muted",children:[(0,Et.jsxs)(oa,{tone:"blue",children:["\u0432 \u0440\u043e\u0431\u043e\u0442\u0456: ",t.filter(e=>"progress"===e.status).length]}),(0,Et.jsxs)(oa,{tone:"green",children:["\u0433\u043e\u0442\u043e\u0432\u0456: ",t.filter(e=>"ready"===e.status).length]})]})]}),s?(0,Et.jsx)("div",{className:"py-8 text-center text-sm text-corp-text-muted",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."}):0===t.length?(0,Et.jsx)("div",{className:"py-8 text-center text-sm text-corp-text-muted",children:"\u041d\u0435\u043c\u0430\u0454 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c \u0432 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457"}):(0,Et.jsx)("div",{className:"space-y-2 text-xs",children:t.map(e=>(0,Et.jsxs)("button",{type:"button",onClick:()=>n(e.id),className:ia("flex w-full items-center justify-between gap-3 rounded-xl border px-3 py-2 text-left transition",r===e.id?"border-slate-900 bg-slate-900/5":"border-slate-200 hover:border-slate-300"),children:[(0,Et.jsxs)("div",{children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsxs)("span",{className:"text-[11px] font-semibold text-corp-text-dark",children:["#",e.order_id]}),(0,Et.jsx)("span",{className:"text-[11px] text-corp-text-muted",children:e.client})]}),(0,Et.jsxs)("div",{className:"mt-0.5 flex flex-wrap items-center gap-2 text-[10px] text-corp-text-muted",children:[(0,Et.jsxs)("span",{children:[e.skuCount," SKU \xb7 ",e.itemsCount," \u043e\u0434."]}),(0,Et.jsxs)("span",{children:["\u0417\u043e\u043d\u0430: ",e.warehouseZone]})]})]}),(0,Et.jsxs)("div",{className:"flex flex-col items-end gap-1 text-[10px]",children:[(0,Et.jsxs)("span",{className:"text-corp-text-muted",children:["\u0415\u0432\u0435\u043d\u0442: ",e.eventDate]}),(0,Et.jsxs)("span",{className:"text-corp-text-muted",children:["\u0412\u0438\u0434\u0430\u0447\u0430: ",e.issueTime]}),(0,Et.jsx)("span",{children:(0,Et.jsx)(oa,{tone:"ready"===e.status?"green":"blue",children:"ready"===e.status?"\u0413\u043e\u0442\u043e\u0432\u043e \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456":"\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u044f"})})]})]},e.id))})]})}function ua(e){let{order:t,loading:r,onMarkReady:n,onOpenIssueCard:s,onOpenReturnCard:a,onCreateChecklist:i,onFlagForDamage:o}=e;if(r)return(0,Et.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 text-sm text-corp-text-muted",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."});if(!t)return(0,Et.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 text-sm text-corp-text-muted",children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u043e\u0440\u0434\u0435\u0440 \u043b\u0456\u0432\u043e\u0440\u0443\u0447, \u0449\u043e\u0431 \u043f\u043e\u0431\u0430\u0447\u0438\u0442\u0438 \u0434\u0435\u0442\u0430\u043b\u0456 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457."});const l="ready"===t.status;return(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[(0,Et.jsxs)("div",{className:"mb-3 flex items-center justify-between gap-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsxs)("h2",{className:"text-sm font-semibold text-corp-text-dark",children:["\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u044f #",t.order_id]}),(0,Et.jsxs)("p",{className:"text-[11px] text-corp-text-muted",children:[t.client," \xb7 ",t.itemsCount," \u043e\u0434. (",t.skuCount," SKU) \xb7 ",t.warehouseZone]})]}),(0,Et.jsxs)("div",{className:"flex flex-col items-end gap-1 text-[10px] text-corp-text-muted",children:[(0,Et.jsxs)("span",{children:["\u0415\u0432\u0435\u043d\u0442: ",t.eventDate]}),(0,Et.jsxs)("span",{children:["\u0412\u0438\u0434\u0430\u0447\u0430: ",t.issueTime]}),(0,Et.jsxs)("span",{children:["\u041e\u0447\u0456\u043a\u0443\u0432\u0430\u043d\u0435 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f: ",t.returnTime]}),(0,Et.jsxs)("span",{children:["\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440: ",t.manager]})]})]}),(0,Et.jsxs)("div",{className:"mb-4 rounded-xl bg-slate-50 p-3",children:[(0,Et.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("span",{className:"text-[11px] font-semibold text-corp-text-dark",children:"\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u044f \u043d\u0430 \u0432\u0438\u0434\u0430\u0447\u0443"}),(0,Et.jsx)(oa,{tone:l?"green":"blue",children:l?"\u0413\u043e\u0442\u043e\u0432\u043e \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456":"\u0412 \u0440\u043e\u0431\u043e\u0442\u0456 (progress)"})]}),(0,Et.jsxs)("span",{className:"text-[11px] text-corp-text-muted",children:["\u041f\u0440\u043e\u0433\u0440\u0435\u0441: ",t.progressPack,"%"]})]}),(0,Et.jsx)(ca,{value:t.progressPack}),(0,Et.jsxs)("div",{className:"mt-2 grid gap-2 text-[11px] text-corp-text-main md:grid-cols-2",children:[(0,Et.jsxs)("ul",{className:"space-y-1",children:[(0,Et.jsx)("li",{children:"\u2022 \u0423\u0441\u0456 \u043f\u043e\u0437\u0438\u0446\u0456\u0457 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u0456 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0456"}),(0,Et.jsx)("li",{children:"\u2022 \u041f\u0456\u0434\u0442\u044f\u0433\u043d\u0443\u043b\u0438 \u0437 \u043c\u0438\u0439\u043a\u0438/\u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u0457 (\u044f\u043a\u0449\u043e \u0449\u043e\u0441\u044c \u0449\u0435 \u043d\u0435 \u043f\u043e\u0432\u0435\u0440\u043d\u0443\u043b\u043e\u0441\u044c)"}),(0,Et.jsx)("li",{children:"\u2022 \u0424\u0456\u0440\u043c\u043e\u0432\u0456 \u0447\u043e\u0445\u043b\u0438 / \u043a\u043e\u0440\u043e\u0431\u043a\u0438 \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u0456 \u0434\u0435 \u043f\u043e\u0442\u0440\u0456\u0431\u043d\u043e"})]}),(0,Et.jsxs)("ul",{className:"space-y-1",children:[(0,Et.jsx)("li",{children:"\u2022 \u041a\u043e\u0436\u0435\u043d \u0435\u043b\u0435\u043c\u0435\u043d\u0442 \u043f\u0440\u043e\u043c\u0430\u0440\u043a\u043e\u0432\u0430\u043d\u043e \u043f\u043e \u043e\u0440\u0434\u0435\u0440\u0443"}),(0,Et.jsx)("li",{children:"\u2022 \u041e\u0440\u0434\u0435\u0440 \u0441\u0442\u043e\u0457\u0442\u044c \u0443 \u0437\u043e\u043d\u0456 \u0432\u0438\u0434\u0430\u0447\u0456 (\u0440\u0430\u043c\u043f\u0430/\u0432\u0438\u0434\u0430\u0442\u043a\u043e\u0432\u0430 \u0437\u043e\u043d\u0430)"}),(0,Et.jsx)("li",{children:"\u2022 \u0413\u043e\u0442\u043e\u0432\u043e \u0434\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0456 \u0432 \u043a\u0430\u0440\u0442\u043a\u0443 \u0432\u0438\u0434\u0430\u0447\u0456 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"})]})]}),(0,Et.jsxs)("div",{className:"mt-2 rounded-lg bg-white/70 px-2 py-1 text-[11px] text-corp-text-main",children:[(0,Et.jsx)("span",{className:"font-semibold",children:"\u041d\u043e\u0442\u0430\u0442\u043a\u0430:"})," ",t.notes]}),(0,Et.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2 text-[11px]",children:[!l&&(0,Et.jsx)(la,{tone:"green",onClick:()=>n(t.id),children:"\u041f\u043e\u0437\u043d\u0430\u0447\u0438\u0442\u0438 \u044f\u043a \u0433\u043e\u0442\u043e\u0432\u0435 \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456"}),(0,Et.jsx)(la,{onClick:()=>s(t.id),children:"\u0412\u0456\u0434\u043a\u0440\u0438\u0442\u0438 \u043a\u0430\u0440\u0442\u043a\u0443 \u0432\u0438\u0434\u0430\u0447\u0456"})]})]}),(0,Et.jsxs)("div",{className:"grid gap-3 md:grid-cols-2 text-[11px]",children:[(0,Et.jsxs)("div",{className:"rounded-xl border border-slate-100 bg-slate-50 p-3",children:[(0,Et.jsx)("div",{className:"mb-2 flex items-center justify-between",children:(0,Et.jsx)("span",{className:"font-semibold text-corp-text-dark",children:"\u041f\u0456\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0430 \u0434\u043e \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f"})}),(0,Et.jsxs)("div",{className:"space-y-1 text-corp-text-main",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsx)("span",{children:"\u041e\u0447\u0456\u043a\u0443\u0432\u0430\u043d\u0430 \u0434\u0430\u0442\u0430/\u0447\u0430\u0441:"}),(0,Et.jsx)("span",{className:"font-medium",children:t.returnTime})]}),(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsx)("span",{children:"\u041f\u043b\u0430\u043d\u043e\u0432\u0430 \u0437\u043e\u043d\u0430 \u043f\u0440\u0438\u0439\u043e\u043c\u0443:"}),(0,Et.jsx)("span",{className:"font-medium",children:"\u0417\u043e\u043d\u0430 B \xb7 \u041f\u0440\u0438\u0439\u043c\u0430\u043d\u043d\u044f \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u044c"})]}),(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsx)("span",{children:"\u041e\u0431\u02bc\u0454\u043c:"}),(0,Et.jsxs)("span",{className:"font-medium",children:[t.skuCount," SKU / ",t.itemsCount," \u043e\u0434."]})]})]}),(0,Et.jsxs)("div",{className:"mt-2 space-y-1 text-corp-text-main",children:[(0,Et.jsx)("div",{className:"font-semibold text-corp-text-dark",children:"\u041f\u043b\u0430\u043d \u0434\u0456\u0439 \u0434\u043b\u044f \u0441\u043a\u043b\u0430\u0434\u0443:"}),(0,Et.jsxs)("ul",{className:"space-y-1",children:[(0,Et.jsx)("li",{children:"\u2022 \u041f\u0456\u0434\u0433\u043e\u0442\u0443\u0432\u0430\u0442\u0438 \u043c\u0456\u0441\u0446\u0435 \u0432 \u0437\u043e\u043d\u0456 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u044c"}),(0,Et.jsx)("li",{children:"\u2022 \u041f\u0440\u0438 \u043d\u0435\u043e\u0431\u0445\u0456\u0434\u043d\u043e\u0441\u0442\u0456 \u2014 \u0432\u0438\u0434\u0456\u043b\u0438\u0442\u0438 \u0434\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u0438\u0439 \u043f\u0440\u043e\u0441\u0442\u0456\u0440 \u0431\u0456\u043b\u044f \u0440\u0430\u043c\u043f\u0438"}),(0,Et.jsx)("li",{children:"\u2022 \u0417\u0430\u0444\u0456\u043a\u0441\u0443\u0432\u0430\u0442\u0438, \u044f\u043a\u0449\u043e \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u0431\u0443\u0434\u0435 \u043a\u0456\u043b\u044c\u043a\u043e\u043c\u0430 \u0430\u0432\u0442\u043e"})]})]}),(0,Et.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[(0,Et.jsx)(la,{tone:"ghost",onClick:()=>i(t.id),children:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u0447\u0435\u043a\u043b\u0456\u0441\u0442 \u043f\u0440\u0438\u0439\u043e\u043c\u0443"}),(0,Et.jsx)(la,{tone:"ghost",onClick:()=>a(t.id),children:"\u0412\u0456\u0434\u043a\u0440\u0438\u0442\u0438 \u043a\u0430\u0440\u0442\u043a\u0443 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f"})]})]}),(0,Et.jsxs)("div",{className:"rounded-xl border border-slate-100 bg-slate-50 p-3",children:[(0,Et.jsx)("div",{className:"mb-2 flex items-center justify-between",children:(0,Et.jsx)("span",{className:"font-semibold text-corp-text-dark",children:"\u0417\u0432\u02bc\u044f\u0437\u043e\u043a \u0437 \u043a\u0430\u0431\u0456\u043d\u0435\u0442\u043e\u043c \u0448\u043a\u043e\u0434\u0438"})}),(0,Et.jsxs)("div",{className:"space-y-1 text-corp-text-main",children:[(0,Et.jsx)("p",{children:"\u041f\u0456\u0441\u043b\u044f \u0444\u0430\u043a\u0442\u0438\u0447\u043d\u043e\u0433\u043e \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u043e\u0440\u0434\u0435\u0440\u0430 \u043a\u043e\u043c\u0456\u0440\u043d\u0438\u043a \u0443 \u043a\u0430\u0440\u0442\u0446\u0456 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u0437\u043c\u043e\u0436\u0435 \u0441\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u043a\u0435\u0439\u0441 \u0448\u043a\u043e\u0434\u0438, \u044f\u043a\u0449\u043e \u0434\u0435\u043a\u043e\u0440 \u043f\u043e\u0432\u0435\u0440\u043d\u0443\u0432\u0441\u044f \u0431\u0440\u0443\u0434\u043d\u0438\u0439 \u0430\u0431\u043e \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u0438\u0439."}),(0,Et.jsx)("p",{children:"\u0422\u0443\u0442 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u044f \u0442\u0456\u043b\u044c\u043a\u0438 \u043f\u043b\u0430\u043d\u0443\u0454, \u0434\u0435 \u0446\u0435 \u0431\u0443\u0434\u0435 \u0441\u043a\u043b\u0430\u0434\u0435\u043d\u043e, \u0456 \u0444\u0456\u043a\u0441\u0443\u0454, \u0449\u043e \u043e\u0440\u0434\u0435\u0440 \u0447\u0435\u043a\u0430\u0454\u043c\u043e \u043d\u0430\u0437\u0430\u0434 \u0443 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0443 \u0437\u043e\u043d\u0443."})]}),(0,Et.jsxs)("div",{className:"mt-2 space-y-1 text-corp-text-main",children:[(0,Et.jsx)("div",{className:"font-semibold text-corp-text-dark",children:"\u0429\u043e \u043f\u043e\u0431\u0430\u0447\u0438\u0442\u044c \u0441\u043a\u043b\u0430\u0434 \u043f\u0456\u0441\u043b\u044f \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f:"}),(0,Et.jsxs)("ul",{className:"space-y-1",children:[(0,Et.jsx)("li",{children:"\u2022 \u0421\u0442\u0430\u0442\u0443\u0441 \u043f\u0440\u0438\u0439\u043e\u043c\u0443: \u043e\u043a / \u0454 \u043f\u0456\u0434\u043e\u0437\u0440\u0430 \u043d\u0430 \u0448\u043a\u043e\u0434\u0443"}),(0,Et.jsx)("li",{children:"\u2022 \u042f\u043a\u0449\u043e \u0454 \u0448\u043a\u043e\u0434\u0430 \u2014 \u043b\u0456\u043d\u043a \u043d\u0430 \u043a\u0435\u0439\u0441 \u0443 \u043a\u0430\u0431\u0456\u043d\u0435\u0442\u0456 \u0448\u043a\u043e\u0434\u0438"}),(0,Et.jsx)("li",{children:"\u2022 \u0406\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f, \u0447\u0438 \u0434\u043e\u0437\u0432\u043e\u043b\u0435\u043d\u043e \u043f\u043e\u0432\u0435\u0440\u0442\u0430\u0442\u0438 \u0437\u0430\u0441\u0442\u0430\u0432\u0443 \u043f\u043e\u0432\u043d\u0456\u0441\u0442\u044e \u0430\u0431\u043e \u0447\u0430\u0441\u0442\u043a\u043e\u0432\u043e"})]})]}),(0,Et.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:(0,Et.jsx)(la,{tone:"ghost",onClick:()=>o(t.id),children:"\u041f\u043e\u043c\u0456\u0442\u0438\u0442\u0438 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u043a\u0438 \u0448\u043a\u043e\u0434\u0438"})})]})]})]})}function ha(e){let{onBackToDashboard:r,onNavigateToTasks:n,initialOrderId:s}=e;const[a,i]=(0,t.useState)([]),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)(!1),[m,p]=(0,t.useState)(!1),[f,x]=(0,t.useState)("all"),[g,b]=(0,t.useState)("all"),[y,v]=(0,t.useState)(""),w="https://backrentalhub.farforrent.com.ua",N=async()=>{h(!0);try{const e=new URLSearchParams;"all"!==f&&e.append("status",f),"all"!==g&&e.append("zone",g),y&&e.append("search",y);const t=await fetch("".concat(w,"/api/warehouse/packing-orders?").concat(e)),r=await t.json();Array.isArray(r)?(i(r),r.length>0&&!o&&l(r[0].id)):(console.error("API returned non-array:",r),i([]))}catch(e){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c:",e),i([])}finally{h(!1)}},j=async e=>{p(!0);try{const t=await fetch("".concat(w,"/api/warehouse/packing-orders/").concat(e)),r=await t.json();d(r)}catch(t){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0434\u0435\u0442\u0430\u043b\u0435\u0439:",t)}finally{p(!1)}};(0,t.useEffect)(()=>{N()},[f,g,y]),(0,t.useEffect)(()=>{o&&j(o)},[o]);return(0,Et.jsxs)("div",{className:"min-h-screen bg-corp-bg-main",children:[(0,Et.jsx)(It,{cabinetName:"\u041a\u0430\u0431\u0456\u043d\u0435\u0442 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457",showBackButton:!0,onBackClick:r}),(0,Et.jsxs)("div",{className:"mx-auto max-w-7xl p-6",children:[(0,Et.jsx)("div",{className:"mb-4",children:(0,Et.jsx)("p",{className:"text-sm text-corp-text-muted",children:"\u0417\u0431\u0456\u0440 \u0456 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u043d\u0430 \u0432\u0438\u0434\u0430\u0447\u0443 + \u043f\u043b\u0430\u043d\u0443\u0432\u0430\u043d\u043d\u044f \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f. \u0411\u0435\u0437 \u043c\u0438\u0439\u043a\u0438/\u0441\u0443\u0448\u043a\u0438 \u2014 \u0446\u0435 \u043e\u043a\u0440\u0435\u043c\u043e \u0432 \u043a\u0430\u0431\u0456\u043d\u0435\u0442\u0456 \u0448\u043a\u043e\u0434\u0438."})}),(0,Et.jsxs)("div",{className:"mb-4 flex flex-wrap items-center gap-3 text-[11px] text-corp-text-muted",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("span",{children:"\u0424\u0456\u043b\u044c\u0442\u0440 \u043f\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u0443:"}),(0,Et.jsxs)("select",{className:"rounded-full border border-slate-200 bg-white px-3 py-1",value:f,onChange:e=>x(e.target.value),children:[(0,Et.jsx)("option",{value:"all",children:"\u0412\u0441\u0456"}),(0,Et.jsx)("option",{value:"progress",children:"\u0412 \u0440\u043e\u0431\u043e\u0442\u0456 (progress)"}),(0,Et.jsx)("option",{value:"ready",children:"\u0413\u043e\u0442\u043e\u0432\u043e \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456"})]})]}),(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("span",{children:"\u0421\u043a\u043b\u0430\u0434:"}),(0,Et.jsxs)("select",{className:"rounded-full border border-slate-200 bg-white px-3 py-1",value:g,onChange:e=>b(e.target.value),children:[(0,Et.jsx)("option",{value:"all",children:"\u0423\u0441\u0456 \u0437\u043e\u043d\u0438"}),(0,Et.jsx)("option",{value:"A",children:"\u0417\u043e\u043d\u0430 A"}),(0,Et.jsx)("option",{value:"B",children:"\u0417\u043e\u043d\u0430 B"}),(0,Et.jsx)("option",{value:"C",children:"\u0417\u043e\u043d\u0430 C"})]})]}),(0,Et.jsx)("div",{className:"flex-1"}),(0,Et.jsx)("div",{className:"flex items-center gap-2",children:(0,Et.jsx)("input",{className:"w-48 rounded-full border border-slate-200 bg-white px-3 py-1 text-[11px]",placeholder:"\u041f\u043e\u0448\u0443\u043a \u043f\u043e #, \u043a\u043b\u0456\u0454\u043d\u0442\u0443, \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0443...",value:y,onChange:e=>v(e.target.value)})})]}),(0,Et.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,Et.jsx)(da,{orders:a,selectedId:o,onSelect:l,loading:u}),(0,Et.jsx)(ua,{order:c,loading:m,onMarkReady:async e=>{try{const t=await fetch("".concat(w,"/api/warehouse/packing-orders/").concat(e,"/mark-ready"),{method:"PUT"});(await t.json()).success&&(alert("\u2705 \u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u043f\u043e\u0437\u043d\u0430\u0447\u0435\u043d\u043e \u044f\u043a \u0433\u043e\u0442\u043e\u0432\u0435 \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456!"),N(),j(e))}catch(t){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430:",t),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u043e\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0456")}},onOpenIssueCard:e=>{alert("\u041c\u043e\u043a: \u0432\u0456\u0434\u043a\u0440\u0438\u0442\u0438 \u043f\u043e\u0432\u043d\u0443 \u043a\u0430\u0440\u0442\u043a\u0443 \u0432\u0438\u0434\u0430\u0447\u0456 \u0446\u044c\u043e\u0433\u043e \u043e\u0440\u0434\u0435\u0440\u0430 \u0443 \u043a\u0430\u0431\u0456\u043d\u0435\u0442\u0456 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 (Issue Card: ".concat(e,")."))},onOpenReturnCard:e=>{alert("\u041c\u043e\u043a: \u0432\u0456\u0434\u043a\u0440\u0438\u0442\u0438 \u043a\u0430\u0440\u0442\u043a\u0443 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u0446\u044c\u043e\u0433\u043e \u043e\u0440\u0434\u0435\u0440\u0430 (Return Card) \u0443 \u043a\u0430\u0431\u0456\u043d\u0435\u0442\u0456 \u043a\u043e\u043c\u0456\u0440\u043d\u0438\u043a\u0430 \u0434\u043b\u044f ".concat(e,"."))},onCreateChecklist:async e=>{try{const t=await fetch("".concat(w,"/api/warehouse/packing-orders/").concat(e,"/return-checklist"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({notes:"\u0427\u0435\u043a\u043b\u0456\u0441\u0442 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u043d\u043e"})});(await t.json()).success&&alert("\u2705 \u0427\u0435\u043a\u043b\u0456\u0441\u0442 \u043f\u0440\u0438\u0439\u043e\u043c\u0443 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e!")}catch(t){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430:",t),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f \u0447\u0435\u043a\u043b\u0456\u0441\u0442\u0430")}},onFlagForDamage:e=>{alert("\u041c\u043e\u043a: \u043f\u043e\u0437\u043d\u0430\u0447\u0438\u0442\u0438, \u0449\u043e \u043f\u0456\u0441\u043b\u044f \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u0442\u0440\u0435\u0431\u0430 \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u0438\u0442\u0438 \u0446\u0435\u0439 \u043e\u0440\u0434\u0435\u0440 \u043d\u0430 \u043c\u043e\u0436\u043b\u0438\u0432\u0456 \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f (".concat(e,")."))}})]}),(0,Et.jsx)("div",{className:"mt-4 rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-3 text-[11px] text-corp-text-muted",children:"\u0423 \u0440\u0435\u0430\u043b\u044c\u043d\u0456\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u0456 \u0446\u0435\u0439 \u043a\u0430\u0431\u0456\u043d\u0435\u0442 \u043f\u043e\u0432\u02bc\u044f\u0437\u0430\u043d\u0438\u0439 \u0437: \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u0435\u043c \u0440\u0435\u043a\u0432\u0456\u0437\u0438\u0442\u043e\u0440\u0430, \u043a\u0430\u0440\u0442\u043a\u043e\u044e \u0432\u0438\u0434\u0430\u0447\u0456 (\u0433\u043e\u0442\u043e\u0432\u043d\u0456\u0441\u0442\u044c \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456) \u0442\u0430 \u043a\u0430\u0431\u0456\u043d\u0435\u0442\u043e\u043c \u0448\u043a\u043e\u0434\u0438 (\u043f\u0456\u0441\u043b\u044f \u0444\u0430\u043a\u0442\u0438\u0447\u043d\u043e\u0433\u043e \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u0456 \u0444\u0456\u043a\u0441\u0430\u0446\u0456\u0457 \u0441\u0442\u0430\u043d\u0443 \u0434\u0435\u043a\u043e\u0440\u0443)."})]})]})}const ma="https://backrentalhub.farforrent.com.ua",pa=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")},fa=[{value:"admin",label:"\ud83d\udc51 \u0410\u0434\u043c\u0456\u043d\u0456\u0441\u0442\u0440\u0430\u0442\u043e\u0440"},{value:"manager",label:"\ud83d\udcca \u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"},{value:"office_manager",label:"\ud83c\udfe2 \u041e\u0444\u0456\u0441-\u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"},{value:"requisitor",label:"\ud83d\udce6 \u0420\u0435\u043a\u0432\u0456\u0437\u0438\u0442\u043e\u0440"}];function xa(){const[e,r]=(0,t.useState)("users"),[n,s]=(0,t.useState)([]),[a,i]=(0,t.useState)([]),[o,l]=(0,t.useState)(!1),[d,u]=(0,t.useState)(!1),[h,m]=(0,t.useState)(null),[p,f]=(0,t.useState)({username:"",email:"",password:"",firstname:"",lastname:"",role:"requisitor"}),[x,g]=(0,t.useState)(!1),[b,y]=(0,t.useState)(null),[v,w]=(0,t.useState)({name:"",parent_id:null,description:"",sort_order:0});(0,t.useEffect)(()=>{"users"===e?j():_()},[e]);const N=()=>localStorage.getItem("token"),j=async()=>{try{l(!0);const e=await fetch("".concat(ma,"/api/admin/users"),{headers:{Authorization:"Bearer ".concat(N())}});if(e.ok){const t=await e.json();s(t)}}catch(e){console.error("Error loading users:",e)}finally{l(!1)}},_=async()=>{try{l(!0);const e=await fetch("".concat(ma,"/api/admin/categories"),{headers:{Authorization:"Bearer ".concat(N())}});if(e.ok){const t=await e.json();i(t)}}catch(e){console.error("Error loading categories:",e)}finally{l(!1)}},C=async e=>{if(window.confirm("\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e?"))try{const t=await fetch("".concat(ma,"/api/admin/categories/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(N())}});if(t.ok)alert("\u2705 \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e!"),_();else{const e=await t.json();alert("\u274c ".concat(e.detail))}}catch(t){alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f")}};return(0,Et.jsxs)("div",{className:"min-h-screen bg-gray-50 p-6",children:[(0,Et.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,Et.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\u2699\ufe0f \u0410\u0434\u043c\u0456\u043d-\u043f\u0430\u043d\u0435\u043b\u044c"}),(0,Et.jsx)("p",{className:"text-gray-600 mt-1",children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u044e"})]}),(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm mb-6",children:(0,Et.jsx)("div",{className:"border-b border-gray-200",children:(0,Et.jsxs)("nav",{className:"flex -mb-px",children:[(0,Et.jsx)("button",{onClick:()=>r("users"),className:pa("px-6 py-3 border-b-2 font-medium text-sm transition","users"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\ud83d\udc65 \u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456"}),(0,Et.jsx)("button",{onClick:()=>r("categories"),className:pa("px-6 py-3 border-b-2 font-medium text-sm transition","categories"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\ud83d\udcc1 \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457"})]})})}),"users"===e&&(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,Et.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Et.jsx)("h2",{className:"text-xl font-semibold",children:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456 \u0441\u0438\u0441\u0442\u0435\u043c\u0438"}),(0,Et.jsx)("button",{onClick:()=>{m(null),f({username:"",email:"",password:"",firstname:"",lastname:"",role:"requisitor"}),u(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"+ \u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430"})]}),o?(0,Et.jsx)("p",{className:"text-center py-8 text-gray-500",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."}):(0,Et.jsx)("div",{className:"overflow-x-auto",children:(0,Et.jsxs)("table",{className:"w-full",children:[(0,Et.jsx)("thead",{className:"bg-gray-50",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"\u0406\u043c'\u044f"}),(0,Et.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),(0,Et.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"\u0420\u043e\u043b\u044c"}),(0,Et.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,Et.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"\u041e\u0441\u0442\u0430\u043d\u043d\u0456\u0439 \u0432\u0445\u0456\u0434"}),(0,Et.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"\u0414\u0456\u0457"})]})}),(0,Et.jsx)("tbody",{className:"divide-y divide-gray-200",children:n.map(e=>{var t;return(0,Et.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Et.jsxs)("td",{className:"px-4 py-3",children:[(0,Et.jsxs)("div",{className:"font-medium text-gray-900",children:[e.firstname," ",e.lastname]}),(0,Et.jsxs)("div",{className:"text-sm text-gray-500",children:["@",e.username]})]}),(0,Et.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.email}),(0,Et.jsx)("td",{className:"px-4 py-3",children:(0,Et.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:null===(t=fa.find(t=>t.value===e.role))||void 0===t?void 0:t.label})}),(0,Et.jsx)("td",{className:"px-4 py-3",children:e.is_active?(0,Et.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800",children:"\u0410\u043a\u0442\u0438\u0432\u043d\u0438\u0439"}):(0,Et.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-red-100 text-red-800",children:"\u0417\u0430\u0431\u043b\u043e\u043a\u043e\u0432\u0430\u043d\u0438\u0439"})}),(0,Et.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.last_login?new Date(e.last_login).toLocaleDateString("uk-UA"):"-"}),(0,Et.jsxs)("td",{className:"px-4 py-3 text-right",children:[(0,Et.jsx)("button",{onClick:()=>{m(e),f({username:e.username,email:e.email,password:"",firstname:e.firstname,lastname:e.lastname,role:e.role}),u(!0)},className:"text-blue-600 hover:text-blue-800 mr-3",children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"}),(0,Et.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430?"))try{const t=await fetch("".concat(ma,"/api/admin/users/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(N())}});if(t.ok)alert("\u2705 \u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e!"),j();else{const e=await t.json();alert("\u274c ".concat(e.detail))}}catch(t){alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f")}})(e.user_id),className:"text-red-600 hover:text-red-800",children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})]})]},e.user_id)})})]})})]}),"categories"===e&&(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,Et.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Et.jsx)("h2",{className:"text-xl font-semibold",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457 \u0442\u043e\u0432\u0430\u0440\u0456\u0432"}),(0,Et.jsx)("button",{onClick:()=>{y(null),w({name:"",parent_id:null,description:"",sort_order:0}),g(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"+ \u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e"})]}),o?(0,Et.jsx)("p",{className:"text-center py-8 text-gray-500",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."}):(0,Et.jsx)("div",{className:"space-y-2",children:a.filter(e=>!e.parent_id).map(e=>(0,Et.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),e.description&&(0,Et.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsx)("button",{onClick:()=>{y(e),w({name:e.name,parent_id:e.parent_id,description:e.description,sort_order:e.sort_order}),g(!0)},className:"text-blue-600 hover:text-blue-800 text-sm",children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"}),(0,Et.jsx)("button",{onClick:()=>C(e.category_id),className:"text-red-600 hover:text-red-800 text-sm",children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})]})]}),(0,Et.jsx)("div",{className:"ml-6 mt-3 space-y-2",children:a.filter(t=>t.parent_id===e.category_id).map(e=>(0,Et.jsxs)("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsxs)("span",{className:"text-sm",children:["\u21b3 ",e.name]}),e.description&&(0,Et.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["(",e.description,")"]})]}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsx)("button",{onClick:()=>{y(e),w({name:e.name,parent_id:e.parent_id,description:e.description,sort_order:e.sort_order}),g(!0)},className:"text-blue-600 hover:text-blue-800 text-xs",children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"}),(0,Et.jsx)("button",{onClick:()=>C(e.category_id),className:"text-red-600 hover:text-red-800 text-xs",children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})]})]},e.category_id))})]},e.category_id))})]})]}),d&&(0,Et.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Et.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Et.jsx)("h3",{className:"text-xl font-semibold mb-4",children:h?"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430":"\u041d\u043e\u0432\u0438\u0439 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447"}),(0,Et.jsxs)("div",{className:"space-y-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,Et.jsx)("input",{type:"text",value:p.username,onChange:e=>f(c(c({},p),{},{username:e.target.value})),className:"w-full px-3 py-2 border rounded-lg",disabled:!!h})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Et.jsx)("input",{type:"email",value:p.email,onChange:e=>f(c(c({},p),{},{email:e.target.value})),className:"w-full px-3 py-2 border rounded-lg"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["\u041f\u0430\u0440\u043e\u043b\u044c ",h&&"(\u0437\u0430\u043b\u0438\u0448\u0438\u0442\u0438 \u043f\u043e\u0440\u043e\u0436\u043d\u0456\u043c, \u0449\u043e\u0431 \u043d\u0435 \u0437\u043c\u0456\u043d\u044e\u0432\u0430\u0442\u0438)"]}),(0,Et.jsx)("input",{type:"password",value:p.password,onChange:e=>f(c(c({},p),{},{password:e.target.value})),className:"w-full px-3 py-2 border rounded-lg",placeholder:h?"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022":"temp123"})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0406\u043c'\u044f"}),(0,Et.jsx)("input",{type:"text",value:p.firstname,onChange:e=>f(c(c({},p),{},{firstname:e.target.value})),className:"w-full px-3 py-2 border rounded-lg"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u041f\u0440\u0456\u0437\u0432\u0438\u0449\u0435"}),(0,Et.jsx)("input",{type:"text",value:p.lastname,onChange:e=>f(c(c({},p),{},{lastname:e.target.value})),className:"w-full px-3 py-2 border rounded-lg"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0420\u043e\u043b\u044c"}),(0,Et.jsx)("select",{value:p.role,onChange:e=>f(c(c({},p),{},{role:e.target.value})),className:"w-full px-3 py-2 border rounded-lg",children:fa.map(e=>(0,Et.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,Et.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,Et.jsx)("button",{onClick:async()=>{try{const e=h?"".concat(ma,"/api/admin/users/").concat(h.user_id):"".concat(ma,"/api/admin/users"),t=await fetch(e,{method:h?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N())},body:JSON.stringify(p)});if(t.ok)alert(h?"\u2705 \u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e!":"\u2705 \u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e!"),u(!1),m(null),f({username:"",email:"",password:"",firstname:"",lastname:"",role:"requisitor"}),j();else{const e=await t.json();alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430: ".concat(e.detail))}}catch(e){alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f")}},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"}),(0,Et.jsx)("button",{onClick:()=>{u(!1),m(null)},className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"})]})]})}),x&&(0,Et.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Et.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Et.jsx)("h3",{className:"text-xl font-semibold mb-4",children:b?"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e":"\u041d\u043e\u0432\u0430 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f"}),(0,Et.jsxs)("div",{className:"space-y-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u041d\u0430\u0437\u0432\u0430"}),(0,Et.jsx)("input",{type:"text",value:v.name,onChange:e=>w(c(c({},v),{},{name:e.target.value})),className:"w-full px-3 py-2 border rounded-lg"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0411\u0430\u0442\u044c\u043a\u0456\u0432\u0441\u044c\u043a\u0430 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f"}),(0,Et.jsxs)("select",{value:v.parent_id||"",onChange:e=>w(c(c({},v),{},{parent_id:e.target.value?parseInt(e.target.value):null})),className:"w-full px-3 py-2 border rounded-lg",children:[(0,Et.jsx)("option",{value:"",children:"- \u0413\u043e\u043b\u043e\u0432\u043d\u0430 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f -"}),a.filter(e=>!e.parent_id).map(e=>(0,Et.jsx)("option",{value:e.category_id,children:e.name},e.category_id))]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u041e\u043f\u0438\u0441"}),(0,Et.jsx)("textarea",{value:v.description,onChange:e=>w(c(c({},v),{},{description:e.target.value})),className:"w-full px-3 py-2 border rounded-lg",rows:3})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u041f\u043e\u0440\u044f\u0434\u043e\u043a \u0441\u043e\u0440\u0442\u0443\u0432\u0430\u043d\u043d\u044f"}),(0,Et.jsx)("input",{type:"number",value:v.sort_order,onChange:e=>w(c(c({},v),{},{sort_order:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border rounded-lg"})]})]}),(0,Et.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,Et.jsx)("button",{onClick:async()=>{try{const e=b?"".concat(ma,"/api/admin/categories/").concat(b.category_id):"".concat(ma,"/api/admin/categories"),t=await fetch(e,{method:b?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N())},body:JSON.stringify(v)});if(t.ok)alert(b?"\u2705 \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e!":"\u2705 \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e!"),g(!1),y(null),w({name:"",parent_id:null,description:"",sort_order:0}),_();else{const e=await t.json();alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430: ".concat(e.detail))}}catch(e){alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f")}},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"}),(0,Et.jsx)("button",{onClick:()=>{g(!1),y(null)},className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"})]})]})})]})}const ga=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")};function ba(e){let{tone:t="slate",children:r}=e;const n={slate:"bg-slate-100 text-slate-700 border-slate-200",green:"bg-emerald-100 text-emerald-700 border-emerald-200",blue:"bg-sky-100 text-sky-700 border-sky-200",amber:"bg-amber-100 text-amber-800 border-amber-200",violet:"bg-violet-100 text-violet-700 border-violet-200",red:"bg-rose-100 text-rose-700 border-rose-200"};return(0,Et.jsx)("span",{className:ga("inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[10px]",n[t]||n.slate),children:r})}function ya(e){let{children:t,onClick:r,tone:n="slate"}=e;return(0,Et.jsx)("button",{type:"button",onClick:r,className:ga("rounded-full px-3 py-1 text-[11px] font-medium transition",{slate:"bg-slate-900 text-white hover:bg-slate-800",green:"bg-emerald-600 text-white hover:bg-emerald-700",red:"bg-rose-600 text-white hover:bg-rose-700",ghost:"bg-white text-slate-700 border border-slate-200 hover:bg-slate-50"}[n]),children:t})}function va(e){let{title:t,children:r,right:n}=e;return(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[(0,Et.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,Et.jsx)("h3",{className:"text-sm font-semibold text-corp-text-dark",children:t}),n]}),r]})}function wa(e){let{summary:t}=e;return(0,Et.jsxs)("div",{className:"flex flex-wrap gap-1 text-[10px]",children:[(0,Et.jsxs)(ba,{tone:"slate",children:["\u0412\u0441\u044c\u043e\u0433\u043e: ",t.total]}),t.available>0&&(0,Et.jsxs)(ba,{tone:"green",children:["\u0412 \u043d\u0430\u044f\u0432\u043d\u043e\u0441\u0442\u0456: ",t.available]}),t.reserved>0&&(0,Et.jsxs)(ba,{tone:"amber",children:["\u0420\u0435\u0437\u0435\u0440\u0432: ",t.reserved]}),t.on_rent>0&&(0,Et.jsxs)(ba,{tone:"blue",children:["\u0412 \u043e\u0440\u0435\u043d\u0434\u0456: ",t.on_rent]}),t.washing>0&&(0,Et.jsxs)(ba,{tone:"violet",children:["\u041c\u0438\u0439\u043a\u0430: ",t.washing]}),t.repair>0&&(0,Et.jsxs)(ba,{tone:"red",children:["\u0420\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f: ",t.repair]}),t.lost>0&&(0,Et.jsxs)(ba,{tone:"red",children:["\u0412\u0442\u0440\u0430\u0447\u0435\u043d\u043e: ",t.lost]})]})}function Na(e){let{label:t}=e;return(0,Et.jsx)("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-[10px] text-corp-text-main",children:t})}function ja(e){let{products:r,selectedId:n,onSelect:s,loading:a}=e;const[i,o]=(0,t.useState)(""),[l,c]=(0,t.useState)("all"),d=(0,t.useMemo)(()=>r.filter(e=>{const t=(e.name+e.mainSku+e.category+(e.subcategory||"")+e.tags.join(" ")).toLowerCase(),r=!i||t.includes(i.toLowerCase()),n="all"===l||e.category===l;return r&&n}),[r,i,l]),u=Array.from(new Set(r.map(e=>e.category)));return(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsx)(va,{title:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433 \u0440\u0435\u043a\u0432\u0456\u0437\u0438\u0442\u0443",right:(0,Et.jsxs)(ba,{tone:"blue",children:[d.length," \u043f\u043e\u0437\u0438\u0446\u0456\u0439"]}),children:(0,Et.jsxs)("div",{className:"flex flex-col gap-2 text-[11px] md:flex-row md:items-center",children:[(0,Et.jsx)("div",{className:"flex-1",children:(0,Et.jsx)("input",{className:"w-full rounded-full border border-slate-200 bg-white px-3 py-1.5 text-[11px]",placeholder:"\u041f\u043e\u0448\u0443\u043a \u043f\u043e \u043d\u0430\u0437\u0432\u0456, SKU, \u0442\u0435\u0433\u0430\u043c...",value:i,onChange:e=>o(e.target.value)})}),(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("span",{className:"text-corp-text-muted",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f:"}),(0,Et.jsxs)("select",{className:"rounded-full border border-slate-200 bg-white px-3 py-1.5 text-[11px]",value:l,onChange:e=>c(e.target.value),children:[(0,Et.jsx)("option",{value:"all",children:"\u0423\u0441\u0456"}),u.map(e=>(0,Et.jsx)("option",{value:e,children:e},e))]})]})]})}),(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white",children:[(0,Et.jsx)("div",{className:"border-b border-slate-100 px-3 py-2 text-[11px] text-corp-text-muted",children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u043e\u0432\u0430\u0440\u0456\u0432"}),a?(0,Et.jsx)("div",{className:"py-8 text-center text-sm text-corp-text-muted",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."}):(0,Et.jsxs)("div",{className:"max-h-[460px] divide-y divide-slate-100 overflow-auto text-xs",children:[d.map(e=>(0,Et.jsxs)("button",{type:"button",onClick:()=>s(e.id),className:ga("flex w-full items-start justify-between gap-2 px-3 py-2 text-left hover:bg-slate-50",n===e.id&&"bg-slate-900/5"),children:[(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsx)("div",{className:"flex items-center gap-2",children:(0,Et.jsx)("span",{className:"text-[11px] font-semibold text-corp-text-dark",children:e.name})}),(0,Et.jsxs)("div",{className:"mt-0.5 flex flex-wrap items-center gap-2 text-[10px] text-corp-text-muted",children:[(0,Et.jsx)("span",{children:e.category}),e.subcategory&&(0,Et.jsxs)("span",{children:["\xb7 ",e.subcategory]}),(0,Et.jsxs)("span",{children:["\xb7 SKU: ",e.mainSku]})]}),(0,Et.jsx)("div",{className:"mt-1",children:(0,Et.jsx)(wa,{summary:e.statusSummary})})]}),(0,Et.jsxs)("div",{className:"flex flex-col items-end gap-1 text-[10px] text-corp-text-muted",children:[(0,Et.jsxs)("span",{children:["\u0421\u0442\u0435\u043b\u0430\u0436: ",e.defaultLocation]}),(0,Et.jsxs)("span",{children:["\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e: ",e.updatedAt?new Date(e.updatedAt).toLocaleDateString("uk-UA"):"N/A"]})]})]},e.id)),0===d.length&&(0,Et.jsx)("div",{className:"px-3 py-6 text-center text-[11px] text-corp-text-muted",children:"\u0417\u0430 \u0444\u0456\u043b\u044c\u0442\u0440\u0430\u043c\u0438 \u043d\u0456\u0447\u043e\u0433\u043e \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]})]})]})}function _a(e){let{product:r,onSave:n}=e;const[s,a]=(0,t.useState)(!1),[i,o]=(0,t.useState)({name:r.name,mainSku:r.mainSku,category:r.category,subcategory:r.subcategory||"",color:r.color||"",material:r.material||"",size:r.size||"",defaultLocation:r.defaultLocation,description:r.description,careNotes:r.careNotes});return(0,Et.jsx)(va,{title:"\u041f\u0430\u0441\u043f\u043e\u0440\u0442 \u0442\u043e\u0432\u0430\u0440\u0443",right:(0,Et.jsxs)("div",{className:"flex gap-2",children:[!s&&(0,Et.jsx)(ya,{tone:"ghost",onClick:()=>a(!0),children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"}),s&&(0,Et.jsx)(ya,{tone:"green",onClick:()=>{a(!1),n(i)},children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})]}),children:(0,Et.jsxs)("div",{className:"grid gap-4 md:grid-cols-3 text-[11px]",children:[(0,Et.jsxs)("div",{className:"md:col-span-2 space-y-3",children:[(0,Et.jsxs)("div",{className:"grid gap-2 md:grid-cols-2",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-corp-text-muted",children:"\u041d\u0430\u0437\u0432\u0430"}),(0,Et.jsx)("input",{disabled:!s,className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-1.5 disabled:bg-slate-50",value:i.name,onChange:e=>o(c(c({},i),{},{name:e.target.value}))})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-corp-text-muted",children:"\u041e\u0441\u043d\u043e\u0432\u043d\u0438\u0439 SKU"}),(0,Et.jsx)("input",{disabled:!s,className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-1.5 disabled:bg-slate-50",value:i.mainSku,onChange:e=>o(c(c({},i),{},{mainSku:e.target.value}))})]})]}),(0,Et.jsxs)("div",{className:"grid gap-2 md:grid-cols-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-corp-text-muted",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f"}),(0,Et.jsx)("input",{disabled:!s,className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-1.5 disabled:bg-slate-50",value:i.category,onChange:e=>o(c(c({},i),{},{category:e.target.value}))})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-corp-text-muted",children:"\u041f\u0456\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f"}),(0,Et.jsx)("input",{disabled:!s,className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-1.5 disabled:bg-slate-50",value:i.subcategory,onChange:e=>o(c(c({},i),{},{subcategory:e.target.value}))})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-corp-text-muted",children:"\u041a\u043e\u043b\u0456\u0440"}),(0,Et.jsx)("input",{disabled:!s,className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-1.5 disabled:bg-slate-50",value:i.color,onChange:e=>o(c(c({},i),{},{color:e.target.value}))})]})]}),(0,Et.jsxs)("div",{className:"grid gap-2 md:grid-cols-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-corp-text-muted",children:"\u041c\u0430\u0442\u0435\u0440\u0456\u0430\u043b"}),(0,Et.jsx)("input",{disabled:!s,className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-1.5 disabled:bg-slate-50",value:i.material,onChange:e=>o(c(c({},i),{},{material:e.target.value}))})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-corp-text-muted",children:"\u0420\u043e\u0437\u043c\u0456\u0440 / \u0442\u0438\u043f"}),(0,Et.jsx)("input",{disabled:!s,className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-1.5 disabled:bg-slate-50",value:i.size,onChange:e=>o(c(c({},i),{},{size:e.target.value}))})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-corp-text-muted",children:"\u0411\u0430\u0437\u043e\u0432\u0435 \u043c\u0456\u0441\u0446\u0435\u0437\u043d\u0430\u0445\u043e\u0434\u0436\u0435\u043d\u043d\u044f"}),(0,Et.jsx)("input",{disabled:!s,className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-1.5 disabled:bg-slate-50",value:i.defaultLocation,onChange:e=>o(c(c({},i),{},{defaultLocation:e.target.value}))})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-corp-text-muted",children:"\u041e\u043f\u0438\u0441"}),(0,Et.jsx)("textarea",{disabled:!s,rows:3,className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-1.5 disabled:bg-slate-50",value:i.description,onChange:e=>o(c(c({},i),{},{description:e.target.value}))})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-corp-text-muted",children:"\u041d\u043e\u0442\u0430\u0442\u043a\u0438 \u043f\u043e \u0434\u043e\u0433\u043b\u044f\u0434\u0443"}),(0,Et.jsx)("textarea",{disabled:!s,rows:3,className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-1.5 disabled:bg-slate-50",value:i.careNotes,onChange:e=>o(c(c({},i),{},{careNotes:e.target.value}))})]})]}),(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"mb-1 text-corp-text-muted",children:"\u0422\u0435\u0433\u0438"}),(0,Et.jsx)("div",{className:"flex flex-wrap gap-1",children:r.tags.map(e=>(0,Et.jsx)(Na,{label:e},e))})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"mb-1 text-corp-text-muted",children:"\u0421\u0442\u0430\u0442\u0443\u0441\u0438"}),(0,Et.jsx)(wa,{summary:r.statusSummary})]}),(0,Et.jsxs)("div",{className:"text-[10px] text-corp-text-muted",children:["\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e: ",r.createdAt?new Date(r.createdAt).toLocaleDateString("uk-UA"):"N/A",(0,Et.jsx)("br",{}),"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e: ",r.updatedAt?new Date(r.updatedAt).toLocaleDateString("uk-UA"):"N/A"]}),(0,Et.jsxs)("div",{className:"rounded-xl bg-slate-50 p-2 text-[10px] text-corp-text-main",children:[(0,Et.jsx)("div",{className:"mb-1 font-semibold text-corp-text-dark",children:"\u0428\u0432\u0438\u0434\u043a\u0456 \u0434\u0456\u0457"}),(0,Et.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,Et.jsx)(ya,{tone:"ghost",onClick:()=>alert("\u041c\u043e\u043a: \u0441\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u043d\u043e\u0432\u0443 \u0456\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u043d\u0443 \u043e\u0434\u0438\u043d\u0438\u0446\u044e \u043d\u0430 \u0431\u0430\u0437\u0456 \u0446\u044c\u043e\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0443."),children:"+ \u0414\u043e\u0434\u0430\u0442\u0438 \u043e\u0434\u0438\u043d\u0438\u0446\u044e \u043d\u0430 \u0441\u043a\u043b\u0430\u0434"}),(0,Et.jsx)(ya,{tone:"ghost",onClick:()=>alert("\u041c\u043e\u043a: \u0432\u0456\u0434\u043a\u0440\u0438\u0442\u0438 \u0446\u0435\u0439 \u0442\u043e\u0432\u0430\u0440 \u0443 \u043a\u0430\u0431\u0456\u043d\u0435\u0442\u0456 \u0448\u043a\u043e\u0434\u0438 \u0437 \u0444\u0456\u043b\u044c\u0442\u0440\u043e\u043c \u043f\u043e \u0432\u0441\u0456\u0445 \u043a\u0435\u0439\u0441\u0430\u0445."),children:"\u0412\u0456\u0434\u043a\u0440\u0438\u0442\u0438 \u0432 \u043a\u0430\u0431\u0456\u043d\u0435\u0442\u0456 \u0448\u043a\u043e\u0434\u0438"})]})]})]})]})})}function Ca(e){let{product:t}=e;const r=t.inventory||[];return(0,Et.jsx)(va,{title:"\u0406\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u043d\u0456 \u043e\u0434\u0438\u043d\u0438\u0446\u0456",right:(0,Et.jsxs)(ba,{tone:"blue",children:[r.length," \u043e\u0434."]}),children:0===r.length?(0,Et.jsx)("div",{className:"py-8 text-center text-[11px] text-corp-text-muted",children:'\u0406\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u043d\u0456 \u043e\u0434\u0438\u043d\u0438\u0446\u0456 \u043d\u0435 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u0456. \u041d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c "+ \u0414\u043e\u0434\u0430\u0442\u0438 \u043e\u0434\u0438\u043d\u0438\u0446\u044e" \u0449\u043e\u0431 \u0441\u0442\u0432\u043e\u0440\u0438\u0442\u0438.'}):(0,Et.jsx)("div",{className:"space-y-2 text-[11px]",children:r.map(e=>(0,Et.jsx)("div",{className:"rounded-xl border border-slate-100 bg-slate-50 p-3",children:(0,Et.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsx)("div",{className:"font-semibold text-corp-text-dark",children:e.code}),(0,Et.jsxs)("div",{className:"mt-1 text-[10px] text-corp-text-main",children:["\ud83d\udccd ",e.location]}),e.note&&(0,Et.jsx)("div",{className:"mt-1 text-[10px] text-corp-text-muted",children:e.note})]}),(0,Et.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,Et.jsx)(ba,{tone:"available"===e.status?"green":"amber",children:e.status}),(0,Et.jsx)("span",{className:"text-[10px] text-corp-text-muted",children:e.lastMovementAt?new Date(e.lastMovementAt).toLocaleDateString("uk-UA"):"N/A"})]})]})},e.id))})})}function Sa(e){let{product:t}=e;const r=t.history||[],n={created:"\ud83d\udce6 \u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e",edited:"\u270f\ufe0f \u0420\u0435\u0434\u0430\u0433\u043e\u0432\u0430\u043d\u043e",moved:"\ud83d\ude9a \u041f\u0435\u0440\u0435\u043c\u0456\u0449\u0435\u043d\u043e",rent_out:"\ud83d\udce4 \u0412\u0438\u0434\u0430\u043d\u043e \u0432 \u043e\u0440\u0435\u043d\u0434\u0443",returned:"\ud83d\udce5 \u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u043e",damage_opened:"\u26a0\ufe0f \u0412\u0456\u0434\u043a\u0440\u0438\u0442\u043e \u043a\u0435\u0439\u0441 \u0448\u043a\u043e\u0434\u0438",damage_closed:"\u2705 \u041a\u0435\u0439\u0441 \u0448\u043a\u043e\u0434\u0438 \u0437\u0430\u043a\u0440\u0438\u0442\u043e",cleaned:"\ud83e\uddfc \u041e\u0447\u0438\u0449\u0435\u043d\u043e"};return(0,Et.jsx)(va,{title:"\u0406\u0441\u0442\u043e\u0440\u0456\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u0439",right:(0,Et.jsxs)(ba,{tone:"blue",children:[r.length," \u043f\u043e\u0434\u0456\u0439"]}),children:0===r.length?(0,Et.jsx)("div",{className:"py-8 text-center text-[11px] text-corp-text-muted",children:"\u0406\u0441\u0442\u043e\u0440\u0456\u044f \u043f\u043e\u0440\u043e\u0436\u043d\u044f"}):(0,Et.jsx)("div",{className:"space-y-2 text-[11px]",children:r.map(e=>(0,Et.jsx)("div",{className:"rounded-xl border border-slate-100 bg-slate-50 p-3",children:(0,Et.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsx)("div",{className:"font-semibold text-corp-text-dark",children:n[e.kind]||e.kind}),(0,Et.jsx)("div",{className:"mt-1 text-[10px] text-corp-text-main",children:e.note}),(0,Et.jsxs)("div",{className:"mt-1 text-[10px] text-corp-text-muted",children:["\u0412\u0438\u043a\u043e\u043d\u0430\u0432: ",e.actor,e.orderId&&" \xb7 \u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f: #".concat(e.orderId)]})]}),(0,Et.jsx)("div",{className:"text-[10px] text-corp-text-muted",children:new Date(e.date).toLocaleDateString("uk-UA")})]})},e.id))})})}function Ea(e){let{onBackToDashboard:r}=e;const[n,s]=(0,t.useState)([]),[a,i]=(0,t.useState)(null),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)("passport"),[u,h]=(0,t.useState)(!1),[m,p]=(0,t.useState)(!1),f="https://backrentalhub.farforrent.com.ua",x=async e=>{p(!0);try{const t=e.replace("P-",""),r=await fetch("".concat(f,"/api/catalog/extended/product/").concat(t)),n=await r.json();l(n)}catch(t){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0434\u0435\u0442\u0430\u043b\u0435\u0439:",t)}finally{p(!1)}};return(0,t.useEffect)(()=>{(async()=>{h(!0);try{const e=await fetch("".concat(f,"/api/catalog/extended/search?limit=9999")),t=await e.json();t.items&&Array.isArray(t.items)?(s(t.items),t.items.length>0&&!a&&i(t.items[0].id)):s([])}catch(e){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f:",e),s([])}finally{h(!1)}})()},[]),(0,t.useEffect)(()=>{a&&x(a)},[a]),(0,Et.jsxs)("div",{className:"mx-auto max-w-7xl p-6",children:[(0,Et.jsxs)("div",{className:"mb-4 flex flex-wrap items-center justify-between gap-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-corp-text-dark",children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u043a\u0430\u0442\u0430\u043b\u043e\u0433"}),(0,Et.jsx)("p",{className:"text-sm text-corp-text-muted",children:"\u041f\u043e\u0432\u043d\u0430 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f \u043f\u0440\u043e \u0442\u043e\u0432\u0430\u0440\u0438: \u043f\u0430\u0441\u043f\u043e\u0440\u0442, \u0456\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u043d\u0456 \u043e\u0434\u0438\u043d\u0438\u0446\u0456, \u0456\u0441\u0442\u043e\u0440\u0456\u044f \u0440\u0443\u0445\u0443"})]}),(0,Et.jsx)("button",{onClick:r,className:"rounded-full border border-slate-200 bg-white px-3 py-1 text-[11px] text-slate-700 hover:bg-slate-50",children:"\u2190 \u0414\u043e \u0434\u0430\u0448\u0431\u043e\u0440\u0434\u0443"})]}),(0,Et.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,Et.jsx)(ja,{products:n,selectedId:a,onSelect:i,loading:u}),(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsxs)("div",{className:"flex gap-2 text-[11px]",children:[(0,Et.jsx)("button",{onClick:()=>d("passport"),className:ga("rounded-full px-3 py-1 transition","passport"===c?"bg-slate-900 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"),children:"\u041f\u0430\u0441\u043f\u043e\u0440\u0442"}),(0,Et.jsx)("button",{onClick:()=>d("inventory"),className:ga("rounded-full px-3 py-1 transition","inventory"===c?"bg-slate-900 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"),children:"\u0406\u043d\u0432\u0435\u043d\u0442\u0430\u0440"}),(0,Et.jsx)("button",{onClick:()=>d("history"),className:ga("rounded-full px-3 py-1 transition","history"===c?"bg-slate-900 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"),children:"\u0406\u0441\u0442\u043e\u0440\u0456\u044f"})]}),m?(0,Et.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white p-8 text-center text-sm text-corp-text-muted",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."}):o?(0,Et.jsxs)(Et.Fragment,{children:["passport"===c&&(0,Et.jsx)(_a,{product:o,onSave:async e=>{if(o)try{const t=o.id.replace("P-",""),r=await fetch("".concat(f,"/api/catalog/extended/product/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});(await r.json()).success&&(alert("\u2705 \u0417\u043c\u0456\u043d\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e!"),x(o.id))}catch(t){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f:",t),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f")}}}),"inventory"===c&&(0,Et.jsx)(Ca,{product:o}),"history"===c&&(0,Et.jsx)(Sa,{product:o})]}):(0,Et.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white p-8 text-center text-sm text-corp-text-muted",children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0442\u043e\u0432\u0430\u0440 \u0437\u0456 \u0441\u043f\u0438\u0441\u043a\u0443"})]})]})]})}const Aa="https://backrentalhub.farforrent.com.ua",Ia=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")},ka=(e,t)=>{const r=new Date(e);return r.setDate(r.getDate()+t),r},Ta=e=>e.toISOString().slice(0,10),Da=e=>{const t=new Date(e),r=t.getDay(),n=0===r?-6:1-r;return t.setDate(t.getDate()+n),t};function Ra(e){let{children:t,tone:r="slate"}=e;const n={slate:"corp-badge corp-badge-neutral",green:"corp-badge corp-badge-success",blue:"corp-badge corp-badge-info",violet:"corp-badge corp-badge-primary",amber:"corp-badge corp-badge-warning",red:"corp-badge corp-badge-error"};return(0,Et.jsx)("span",{className:Ia("inline-flex items-center rounded-full border px-2 py-0.5 text-[10px] font-medium",n[r]||n.slate),children:t})}function Oa(e){let{value:t,onChange:r,options:n}=e;return(0,Et.jsx)("div",{className:"inline-flex rounded-full border border-slate-200 bg-slate-50 p-0.5 text-[11px]",children:n.map(e=>(0,Et.jsx)("button",{type:"button",onClick:()=>r(e.value),className:Ia("rounded-full px-3 py-1 transition",t===e.value?"bg-white text-corp-text-dark shadow-sm":"text-corp-text-muted hover:text-corp-text-dark"),children:e.label},e.value))})}const Ma={issue:{label:"\u0412\u0438\u0434\u0430\u0447\u0430",color:"text-[#B08900]",bg:"bg-[#FFF9E7] border-[#F7D75C]",desc:"\u041d\u043e\u0432\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0442\u0430 \u0433\u043e\u0442\u043e\u0432\u0456 \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456"},return:{label:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f",color:"text-[#9A5B15]",bg:"bg-[#FFF3E2] border-[#E7B16B]",desc:"\u041e\u0447\u0456\u043a\u0443\u0432\u0430\u043d\u0456 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u0442\u0430 \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u043a\u0430"},task:{label:"\u0417\u0430\u0432\u0434\u0430\u043d\u043d\u044f",color:"text-[#6E349E]",bg:"bg-[#F4E8FF] border-[#B979E6]",desc:"\u041c\u0438\u0439\u043a\u0430, \u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f, \u0432\u043d\u0443\u0442\u0440\u0456\u0448\u043d\u0456 \u0437\u0430\u0434\u0430\u0447\u0456"},damage:{label:"\u0428\u043a\u043e\u0434\u0430",color:"text-[#C43737]",bg:"bg-[#FFE8E8] border-[#E87474]",desc:"\u041a\u0435\u0439\u0441\u0438 \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u044c \u0437 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u044c"}},Pa={morning:{label:"\ud83c\udf05 \u0420\u0430\u043d\u043e\u043a",hours:"06:00-14:00",from:"06:00",to:"14:00"},day:{label:"\u2600\ufe0f \u0414\u0435\u043d\u044c",hours:"14:00-18:00",from:"14:00",to:"18:00"},evening:{label:"\ud83c\udf06 \u0412\u0435\u0447\u0456\u0440",hours:"18:00-22:00",from:"18:00",to:"22:00"}};function La(e){let{item:t,onOpen:r,onDragStart:n}=e;const s=Ma[t.lane];return(0,Et.jsxs)("div",{draggable:!0,onDragStart:e=>n(e,t),onClick:()=>r(t),className:Ia("mb-1 cursor-move rounded-lg border px-1.5 py-1 text-left text-[9px] shadow-sm transition hover:-translate-y-0.5 hover:shadow","md:px-2 md:py-1.5 md:text-[10px]",s.bg),children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,Et.jsx)("span",{className:"font-semibold text-corp-text-dark truncate text-[8px] md:text-[10px]",children:t.title}),(0,Et.jsx)("span",{className:"whitespace-nowrap text-[8px] md:text-[9px] text-corp-text-muted",children:"morning"===t.timeSlot?"\ud83c\udf05":"day"===t.timeSlot?"\u2600\ufe0f":"\ud83c\udf06"})]}),(0,Et.jsxs)("div",{className:"mt-0.5 flex flex-wrap items-center gap-0.5 text-[8px] md:text-[9px] text-corp-text-muted",children:[t.orderCode&&(0,Et.jsx)("span",{className:"font-mono text-slate-700",children:t.orderCode}),t.client&&(0,Et.jsxs)("span",{className:"hidden md:inline",children:["\xb7 ",t.client]})]}),t.badge&&(0,Et.jsx)("div",{className:"mt-0.5 md:mt-1",children:(0,Et.jsx)(Ra,{tone:"issue"===t.lane?"green":"return"===t.lane?"blue":"task"===t.lane?"violet":"red",children:t.badge})})]})}function Ba(e){let{onDrop:r,children:n,isEmpty:s}=e;const[a,i]=(0,t.useState)(!1);return(0,Et.jsx)("div",{onDragOver:e=>{e.preventDefault(),i(!0)},onDragLeave:()=>{i(!1)},onDrop:e=>{e.preventDefault(),i(!1),r(e)},className:Ia("min-h-[50px] md:min-h-[70px] rounded-lg md:rounded-xl p-1 md:p-1.5 ring-1 transition-colors overflow-y-auto max-h-[120px] md:max-h-[200px]",a?"bg-blue-50 ring-blue-300":"bg-slate-50/60 ring-slate-100"),children:s&&!a?(0,Et.jsx)("div",{className:"flex h-full items-center justify-center text-[8px] md:text-[9px] text-slate-300",children:"\u2014"}):n})}function Fa(e){let{date:t,items:r,onOpen:n,onUpdateItem:s}=e;const a=Ta(t),i=(e,t)=>{e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("application/json",JSON.stringify(t))};return(0,Et.jsxs)("div",{className:"rounded-xl md:rounded-2xl border border-slate-200 bg-white p-2 md:p-3 text-[10px] md:text-[11px] overflow-x-auto",children:[(0,Et.jsxs)("div",{className:"mb-2 grid grid-cols-[70px,1fr] md:grid-cols-[120px,1fr] items-end gap-1 md:gap-2 border-b border-slate-100 pb-2 min-w-[350px]",children:[(0,Et.jsx)("div",{className:"text-[8px] md:text-[10px] font-semibold uppercase tracking-wide text-corp-text-muted",children:"\u041f\u043e\u0442\u0456\u043a"}),(0,Et.jsx)("div",{className:"grid grid-cols-3 gap-0.5 md:gap-1",children:Object.values(Pa).map(e=>(0,Et.jsxs)("div",{className:"text-center text-[8px] md:text-[10px]",children:[(0,Et.jsx)("div",{className:"font-medium text-corp-text-dark",children:e.label}),(0,Et.jsx)("div",{className:"text-corp-text-muted hidden md:block",children:e.hours})]},e.label))})]}),Object.keys(Ma).map(e=>{const t=Ma[e];return(0,Et.jsxs)("div",{className:"grid grid-cols-[70px,1fr] md:grid-cols-[120px,1fr] gap-1 md:gap-2 border-b border-slate-50 py-1.5 md:py-2 last:border-b-0 min-w-[350px]",children:[(0,Et.jsxs)("div",{className:"flex flex-col gap-0.5 md:gap-1",children:[(0,Et.jsx)("span",{className:Ia("text-[9px] md:text-[11px] font-semibold",t.color),children:t.label}),(0,Et.jsx)("span",{className:"text-[8px] md:text-[10px] text-slate-400 hidden md:block",children:t.desc})]}),(0,Et.jsx)("div",{className:"grid grid-cols-3 gap-1 md:gap-2",children:Object.keys(Pa).map(t=>{const o=r.filter(r=>r.date===a&&r.lane===e&&r.timeSlot===t);return(0,Et.jsx)(Ba,{onDrop:r=>((e,t,r)=>{const n=JSON.parse(e.dataTransfer.getData("application/json"));s(n,a,t,r)})(r,e,t),isEmpty:0===o.length,children:o.map(e=>(0,Et.jsx)(La,{item:e,onOpen:n,onDragStart:i},e.id))},t)})})]},e)})]})}function Ua(e){let{baseDate:r,items:n,onOpen:s,onUpdateItem:a}=e;const i=t.useRef(null),[o,l]=t.useState(0),[c,d]=t.useState(0),[u,h]=t.useState(0),m=t.useRef(!1),p=(0,t.useMemo)(()=>{const e=[],t=u-Math.floor(26);for(let n=0;n<52;n++){const s=t+n,a=Da(ka(r,7*s)),i=Array.from({length:7},(e,t)=>ka(a,t)),o=Da(new Date),l=Ta(a)===Ta(o);e.push({id:"week-".concat(s),offset:s,dates:i,label:l?"\u041f\u043e\u0442\u043e\u0447\u043d\u0438\u0439 \u0442\u0438\u0436\u0434\u0435\u043d\u044c":i[0].toLocaleDateString("uk-UA",{month:"long",year:"numeric"}),isCurrentWeek:l})}return e},[r,u]),f=(0,t.useMemo)(()=>p.findIndex(e=>e.isCurrentWeek),[p]);t.useEffect(()=>{if(i.current&&f>=0){const e=i.current.offsetWidth;i.current.scrollLeft=f*e}},[f]);const x=t.useCallback(e=>{if(m.current)return;const t=e.target,r=t.scrollLeft,n=t.scrollWidth,s=t.clientWidth;r+s>n-2*s&&(m.current=!0,setTimeout(()=>{h(e=>e+10),m.current=!1},300)),r<2*s&&(m.current=!0,setTimeout(()=>{h(e=>e-10),i.current&&(i.current.scrollLeft=r+10*s),m.current=!1},300))},[]),g=(e,t)=>{e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("application/json",JSON.stringify(t))};return(0,Et.jsxs)("div",{className:"rounded-xl md:rounded-2xl border border-slate-200 bg-white overflow-hidden",children:[(0,Et.jsx)("div",{ref:i,className:"overflow-x-auto overflow-y-visible scroll-smooth hide-scrollbar",onScroll:x,onTouchStart:e=>{l(e.targetTouches[0].clientX)},onTouchMove:e=>{d(e.targetTouches[0].clientX)},onTouchEnd:()=>{if(!o||!c)return;const e=o-c,t=e<-50;e>50&&i.current&&i.current.scrollBy({left:i.current.offsetWidth,behavior:"smooth"}),t&&i.current&&i.current.scrollBy({left:-i.current.offsetWidth,behavior:"smooth"}),l(0),d(0)},style:{WebkitOverflowScrolling:"touch"},children:(0,Et.jsx)("div",{className:"flex",children:p.map((e,t)=>(0,Et.jsxs)("div",{className:"flex-shrink-0 w-full p-2 md:p-3 text-[10px] md:text-[11px]",children:[(0,Et.jsxs)("div",{className:"text-[10px] md:text-xs font-semibold text-corp-text-main mb-2 md:mb-3 text-center",children:[e.dates[0].toLocaleDateString("uk-UA",{day:"2-digit",month:"short"})," - ",e.dates[6].toLocaleDateString("uk-UA",{day:"2-digit",month:"short",year:"numeric"})]}),(0,Et.jsxs)("div",{className:"mb-2 grid grid-cols-[60px,1fr] md:grid-cols-[120px,1fr] items-end gap-1 md:gap-2 border-b border-slate-100 pb-2 overflow-x-auto",children:[(0,Et.jsx)("div",{className:"text-[8px] md:text-[10px] font-semibold uppercase tracking-wide text-corp-text-muted",children:"\u041f\u043e\u0442\u0456\u043a"}),(0,Et.jsx)("div",{className:"grid grid-cols-7 gap-0.5 md:gap-1 min-w-[280px] md:min-w-0",children:e.dates.map(e=>{const t=Ta(e)===Ta(new Date);return(0,Et.jsxs)("div",{className:Ia("text-center text-[8px] md:text-[10px] p-0.5 md:p-1 rounded",t&&"bg-blue-50 ring-1 ring-blue-200"),children:[(0,Et.jsx)("div",{className:Ia("font-medium",t?"text-blue-600":"text-corp-text-dark"),children:e.toLocaleDateString("uk-UA",{day:"2-digit"})}),(0,Et.jsx)("div",{className:Ia("hidden md:block",t?"text-blue-500":"text-corp-text-muted"),children:e.toLocaleDateString("uk-UA",{weekday:"short"})})]},Ta(e))})})]}),(0,Et.jsx)("div",{className:"overflow-x-auto",children:Object.keys(Ma).map(t=>{const r=Ma[t];return(0,Et.jsxs)("div",{className:"grid grid-cols-[60px,1fr] md:grid-cols-[120px,1fr] gap-1 md:gap-2 border-b border-slate-50 py-1.5 md:py-2 last:border-b-0",children:[(0,Et.jsx)("div",{className:"flex flex-col gap-0.5 md:gap-1",children:(0,Et.jsx)("span",{className:Ia("text-[9px] md:text-[11px] font-semibold",r.color),children:r.label})}),(0,Et.jsx)("div",{className:"grid grid-cols-7 gap-0.5 md:gap-2 min-w-[280px] md:min-w-0",children:e.dates.map(e=>{const r=Ta(e),i=n.filter(e=>e.date===r&&e.lane===t);return(0,Et.jsx)(Ba,{onDrop:r=>((e,t,r)=>{const n=JSON.parse(e.dataTransfer.getData("application/json"));a(n,Ta(t),r,n.timeSlot)})(r,e,t),isEmpty:0===i.length,children:i.map(e=>(0,Et.jsx)(La,{item:e,onOpen:s,onDragStart:g},e.id))},r)})})]},t)})})]},e.id))})}),(0,Et.jsxs)("div",{className:"px-3 py-2 bg-slate-50 border-t border-slate-200 text-center",children:[(0,Et.jsx)("div",{className:"text-[10px] text-corp-text-muted",children:"\u2190 \u041d\u0435\u0441\u043a\u0456\u043d\u0447\u0435\u043d\u043d\u0438\u0439 \u0441\u043a\u0440\u043e\u043b: \u043f\u0440\u043e\u0442\u044f\u0433\u043d\u0456\u0442\u044c \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0433\u043b\u044f\u0434\u0443 \u0456\u043d\u0448\u0438\u0445 \u0442\u0438\u0436\u043d\u0456\u0432 \u2192"}),(0,Et.jsxs)("div",{className:"text-[9px] text-slate-400 mt-1",children:["\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u043e ",p.length," \u0442\u0438\u0436\u043d\u0456\u0432 \u2022 \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u043d\u043e \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0443\u0454\u0442\u044c\u0441\u044f \u0431\u0456\u043b\u044c\u0448\u0435 \u043f\u0440\u0438 \u0441\u043a\u0440\u043e\u043b\u0456"]})]})]})}function za(){const[e,r]=(0,t.useState)("week"),[n,s]=(0,t.useState)(new Date),[a,i]=(0,t.useState)("all"),[o,l]=(0,t.useState)([]),[d,u]=(0,t.useState)(!0);(0,t.useEffect)(()=>{h()},[e,n]);const h=async()=>{try{let r,s;if(u(!0),"day"===e)r=n,s=n;else{const e=Da(n);r=ka(e,-180),s=ka(e,365)}const a=[];try{const e=await is.get("".concat(Aa,"/api/orders"),{params:{from_date:Ta(r),to_date:Ta(s)}});(e.data.orders||[]).forEach(e=>{const t=e.issue_date||e.rental_start_date,r=e.client_name||e.customer_name;t&&a.push({id:"order-".concat(e.order_number,"-issue"),lane:"issue",date:t,timeSlot:"morning",orderCode:e.order_number,title:"\u041d\u043e\u0432\u0435: ".concat(r),client:r,badge:"\u041e\u0447\u0456\u043a\u0443\u0454 \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f",status:e.status,orderData:e})})}catch(t){console.error("Failed to load awaiting orders:",t)}try{const e=(await is.get("".concat(Aa,"/api/decor-orders"),{params:{status:"processing,ready_for_issue,issued,on_rent,shipped,delivered,returning",from_date:Ta(r),to_date:Ta(s)}})).data.orders||[];e.forEach(e=>{const t=e.issue_date||e.rental_start_date,r=e.return_date||e.rental_end_date,n=e.client_name||e.customer_name;t&&["processing","ready_for_issue","ready"].includes(e.status)&&a.push({id:"decor-".concat(e.order_number,"-issue"),lane:"issue",date:t,timeSlot:"day",orderCode:e.order_number,title:"".concat("ready_for_issue"===e.status||"ready"===e.status?"\u0413\u043e\u0442\u043e\u0432\u043e":"\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u044f",": ").concat(n),client:n,badge:"ready_for_issue"===e.status||"ready"===e.status?"\u0413\u043e\u0442\u043e\u0432\u043e \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456":"\u041d\u0430 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457",status:e.status,orderData:e}),r&&["issued","on_rent","returning"].includes(e.status)&&a.push({id:"decor-".concat(e.order_number,"-return"),lane:"return",date:r,timeSlot:"evening",orderCode:e.order_number,title:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f: ".concat(n),client:n,badge:"returning"===e.status?"\u041f\u043e\u0432\u0435\u0440\u0442\u0430\u0454\u0442\u044c\u0441\u044f":"\u041e\u0447\u0456\u043a\u0443\u0454\u043c\u043e",status:e.status,orderData:e})}),console.log("[Calendar] \u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043e ".concat(e.length," \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c \u043d\u0430 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457/\u0432\u0438\u0434\u0430\u043d\u0438\u0445"))}catch(t){console.error("Failed to load decor orders:",t)}try{const e=(await is.get("".concat(Aa,"/api/issue-cards"))).data||[];e.forEach(e=>{const t=e.issue_date||e.rental_start_date;if(t&&["preparation","ready","ready_for_issue"].includes(e.status)&&a.push({id:"issue-card-".concat(e.id),lane:"issue",date:t,timeSlot:"day",orderCode:e.order_number,title:"\u041a\u0430\u0440\u0442\u043a\u0430 \u0432\u0438\u0434\u0430\u0447\u0456: ".concat(e.customer_name),client:e.customer_name,badge:"ready"===e.status||"ready_for_issue"===e.status?"\u0413\u043e\u0442\u043e\u0432\u0430":"\u041f\u0456\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0430",status:e.status,orderData:e}),"issued"===e.status){let t=e.return_date;if(!t&&e.issued_at&&e.rental_days){const r=new Date(e.issued_at);r.setDate(r.getDate()+e.rental_days),t=r.toISOString().slice(0,10)}var r,n;if(!t)t=(null===(r=e.issued_at)||void 0===r?void 0:r.slice(0,10))||(null===(n=e.created_at)||void 0===n?void 0:n.slice(0,10));t&&a.push({id:"return-card-".concat(e.id),lane:"return",date:t,timeSlot:"evening",orderCode:e.order_number,title:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f: ".concat(e.customer_name),client:e.customer_name,badge:"\u041d\u0430 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u0456",status:"issued",orderData:e})}}),console.log("[Calendar] \u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043e ".concat(e.length," \u043a\u0430\u0440\u0442\u043e\u043a \u0432\u0438\u0434\u0430\u0447\u0456"))}catch(t){console.error("Failed to load issue cards:",t)}try{const e=(await is.get("".concat(Aa,"/api/product-cleaning/all"))).data||[];e.forEach(e=>{const t=e.updated_at?e.updated_at.slice(0,10):Ta(new Date);a.push({id:"task-".concat(e.sku,"-").concat(e.status,"-").concat(e.updated_at),lane:"task",date:t,timeSlot:"wash"===e.status?"morning":"dry"===e.status?"day":"evening",orderCode:null,title:"".concat({wash:"\u041c\u0438\u0439\u043a\u0430",dry:"\u0421\u0443\u0448\u043a\u0430",repair:"\u0420\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f",clean:"\u0427\u0438\u0441\u0442\u0435",damaged:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043e"}[e.status]||e.status,": ").concat(e.sku),client:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e: ".concat(new Date(e.updated_at||new Date).toLocaleDateString("uk-UA")),badge:"repair"===e.status?"\u041a\u0440\u0438\u0442\u0438\u0447\u043d\u043e":"clean"===e.status?"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e":"\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0456",status:e.status,orderData:e})}),console.log("[Calendar] \u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043e ".concat(e.length," \u0437\u0430\u0432\u0434\u0430\u043d\u044c (\u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0447\u0438 \u0432\u0441\u0456 \u0441\u0442\u0430\u0442\u0443\u0441\u0438)"))}catch(t){console.error("Failed to load cleaning tasks:",t)}try{const e=await is.get("".concat(Aa,"/api/product-damage-history/recent?limit=500"));(e.data||[]).forEach(e=>{const t=e.created_at?e.created_at.slice(0,10):Ta(new Date);a.push({id:"damage-".concat(e.id),lane:"damage",date:t,timeSlot:"day",orderCode:e.order_number,title:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f: ".concat(e.product_name),client:e.order_number?"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f ".concat(e.order_number):"\u041f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a",badge:"high"===e.severity?"\u041a\u0440\u0438\u0442\u0438\u0447\u043d\u043e":"medium"===e.severity?"\u0421\u0435\u0440\u0435\u0434\u043d\u044c\u043e":"\u041d\u0438\u0437\u044c\u043a\u043e",status:e.severity,orderData:e})})}catch(t){console.error("Failed to load damage cases:",t)}l(a)}catch(t){console.error("Failed to load calendar:",t)}finally{u(!1)}},m=async(e,t,r,n)=>{console.log("Update item:",{item:e,newDate:t,newLane:r,newTimeSlot:n}),l(s=>s.map(s=>s.id===e.id?c(c({},s),{},{date:t,lane:r,timeSlot:n}):s));try{if(e.orderData&&("issue"===r||"return"===r)){const s=e.orderData.order_id||e.orderData.id;await is.put("".concat(Aa,"/api/orders/").concat(s,"/calendar-update"),{lane:r,date:t,timeSlot:n}),console.log("\u2705 Backend updated successfully")}}catch(s){console.error("Failed to update backend:",s),l(t=>t.map(t=>t.id===e.id?c(c({},t),{},{date:e.date,lane:e.lane,timeSlot:e.timeSlot}):t)),alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u0456. \u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0449\u0435 \u0440\u0430\u0437.")}},p=e=>{alert("\u0414\u0435\u0442\u0430\u043b\u0456: ".concat(e.title,"\n\u041a\u043b\u0456\u0454\u043d\u0442: ").concat(e.client,"\n\u0421\u0442\u0430\u0442\u0443\u0441: ").concat(e.badge))},f=e=>{s(t=>ka(t,e))},x=(0,t.useMemo)(()=>"all"===a?o:o.filter(e=>e.lane===a),[o,a]),g=(0,t.useMemo)(()=>({total:x.length,issues:x.filter(e=>"issue"===e.lane).length,returns:x.filter(e=>"return"===e.lane).length,tasks:x.filter(e=>"task"===e.lane).length,damages:x.filter(e=>"damage"===e.lane).length}),[x]);return d?(0,Et.jsx)("div",{className:"flex items-center justify-center h-screen",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."}):(0,Et.jsxs)("div",{className:"mx-auto max-w-7xl space-y-4 bg-slate-50 p-4 md:p-6",children:[(0,Et.jsxs)("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-xl font-bold text-corp-text-dark",children:"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440 \u043f\u0440\u043e\u0446\u0435\u0441\u0456\u0432"}),(0,Et.jsx)("p",{className:"text-xs text-corp-text-muted",children:"\u0412\u0441\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f, \u0432\u0438\u0434\u0430\u0447\u0456, \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f, \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f \u0442\u0430 \u043a\u0435\u0439\u0441\u0438 \u0448\u043a\u043e\u0434\u0438"})]}),(0,Et.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-[11px]",children:[(0,Et.jsx)(Oa,{value:e,onChange:e=>r(e),options:[{value:"day",label:"\u0414\u0435\u043d\u044c"},{value:"week",label:"\u0422\u0438\u0436\u0434\u0435\u043d\u044c"}]}),"day"===e&&(0,Et.jsxs)("div",{className:"flex items-center gap-1 rounded-full border border-slate-200 bg-white px-2 py-1",children:[(0,Et.jsx)("button",{type:"button",onClick:()=>f(-1),className:"rounded-full px-2 py-1 text-xs text-corp-text-muted hover:bg-slate-100",children:"\u2039"}),(0,Et.jsx)("span",{className:"px-2 text-[11px] font-medium text-slate-700",children:(b=n,b.toLocaleDateString("uk-UA",{weekday:"short",day:"2-digit",month:"short"}))}),(0,Et.jsx)("button",{type:"button",onClick:()=>f(1),className:"rounded-full px-2 py-1 text-xs text-corp-text-muted hover:bg-slate-100",children:"\u203a"})]})]})]}),(0,Et.jsxs)("div",{className:"grid gap-3 text-[11px] md:grid-cols-5",children:[(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[(0,Et.jsx)("div",{className:"text-corp-text-muted",children:"\u041f\u043e\u0434\u0456\u0439"}),(0,Et.jsx)("div",{className:"mt-1 text-lg font-semibold text-corp-text-dark",children:g.total})]}),(0,Et.jsxs)("div",{className:"rounded-2xl border border-emerald-200 bg-emerald-50 p-3",children:[(0,Et.jsx)("div",{className:"text-emerald-700",children:"\u0412\u0438\u0434\u0430\u0447\u0456"}),(0,Et.jsx)("div",{className:"mt-1 text-lg font-semibold",children:g.issues})]}),(0,Et.jsxs)("div",{className:"rounded-2xl border border-sky-200 bg-sky-50 p-3",children:[(0,Et.jsx)("div",{className:"text-sky-700",children:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f"}),(0,Et.jsx)("div",{className:"mt-1 text-lg font-semibold",children:g.returns})]}),(0,Et.jsxs)("div",{className:"rounded-2xl border border-violet-200 bg-violet-50 p-3",children:[(0,Et.jsx)("div",{className:"text-violet-700",children:"\u0417\u0430\u0432\u0434\u0430\u043d\u043d\u044f"}),(0,Et.jsx)("div",{className:"mt-1 text-lg font-semibold",children:g.tasks})]}),(0,Et.jsxs)("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 p-3",children:[(0,Et.jsx)("div",{className:"text-rose-700",children:"\u041a\u0435\u0439\u0441\u0438 \u0448\u043a\u043e\u0434\u0438"}),(0,Et.jsx)("div",{className:"mt-1 text-lg font-semibold",children:g.damages})]})]}),(0,Et.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-slate-200 bg-white p-3 text-[11px]",children:[(0,Et.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,Et.jsx)("span",{className:"text-corp-text-muted",children:"\u041f\u043e\u0442\u0456\u043a"}),(0,Et.jsx)(Oa,{value:a,onChange:e=>i(e),options:[{value:"all",label:"\u0423\u0441\u0456"},{value:"issue",label:"\u0412\u0438\u0434\u0430\u0447\u0430"},{value:"return",label:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f"},{value:"task",label:"\u0417\u0430\u0432\u0434\u0430\u043d\u043d\u044f"},{value:"damage",label:"\u0428\u043a\u043e\u0434\u0430"}]})]}),(0,Et.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,Et.jsx)(Ra,{tone:"green",children:"\u0412\u0438\u0434\u0430\u0447\u0430"}),(0,Et.jsx)(Ra,{tone:"blue",children:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f"}),(0,Et.jsx)(Ra,{tone:"violet",children:"\u0417\u0430\u0432\u0434\u0430\u043d\u043d\u044f"}),(0,Et.jsx)(Ra,{tone:"red",children:"\u0428\u043a\u043e\u0434\u0430"})]})]}),"day"===e&&(0,Et.jsx)(Fa,{date:n,items:x,onOpen:p,onUpdateItem:m}),"week"===e&&(0,Et.jsx)(Ua,{baseDate:n,items:x,onOpen:p,onUpdateItem:m})]});var b}const Ha=document.createElement("style");var Va;Ha.textContent="\n  .hide-scrollbar::-webkit-scrollbar {\n    display: none;\n  }\n  .hide-scrollbar {\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n  }\n","undefined"!==typeof document&&document.head.appendChild(Ha),function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(Va||(Va={}));var Wa,qa,Ga=new Map([[Va.QR_CODE,"QR_CODE"],[Va.AZTEC,"AZTEC"],[Va.CODABAR,"CODABAR"],[Va.CODE_39,"CODE_39"],[Va.CODE_93,"CODE_93"],[Va.CODE_128,"CODE_128"],[Va.DATA_MATRIX,"DATA_MATRIX"],[Va.MAXICODE,"MAXICODE"],[Va.ITF,"ITF"],[Va.EAN_13,"EAN_13"],[Va.EAN_8,"EAN_8"],[Va.PDF_417,"PDF_417"],[Va.RSS_14,"RSS_14"],[Va.RSS_EXPANDED,"RSS_EXPANDED"],[Va.UPC_A,"UPC_A"],[Va.UPC_E,"UPC_E"],[Va.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function Ya(e){return Object.values(Va).includes(e)}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"}(Wa||(Wa={})),function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"}(qa||(qa={}));var Xa,Qa=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[qa.SCAN_TYPE_CAMERA,qa.SCAN_TYPE_FILE],e}(),Ka=function(){function e(e,t){this.format=e,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Ga.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,Ga.get(t))},e}(),Za=function(){function e(){}return e.createFromText=function(e){return{decodedText:e,result:{text:e}}},e.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},e}();!function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"}(Xa||(Xa={}));var Ja=function(){function e(){}return e.createFrom=function(e){return{errorMessage:e,type:Xa.UNKWOWN_ERROR}},e}(),$a=function(){function e(e){this.verbose=e}return e.prototype.log=function(e){this.verbose&&console.log(e)},e.prototype.warn=function(e){this.verbose&&console.warn(e)},e.prototype.logError=function(e,t){(this.verbose||!0===t)&&console.error(e)},e.prototype.logErrors=function(e){if(0===e.length)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},e}();function ei(e){return"undefined"===typeof e||null===e}var ti,ri=function(){function e(){}return e.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},e.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),ni=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(e){return"Last Match: ".concat(e)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),si=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),ai=function(){function e(){}return e.isMediaStreamConstraintsValid=function(e,t){if("object"!==typeof e){var r=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var n=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),s=0,a=Object.keys(e);s<a.length;s++){var i=a[s];if(n.has(i))return t.logError("".concat(i," is not supported videoConstaints."),!0),!1}return!0},e}(),ii=r(72),oi=function(){function e(e,t,r){if(this.formatMap=new Map([[Va.QR_CODE,ii.BarcodeFormat.QR_CODE],[Va.AZTEC,ii.BarcodeFormat.AZTEC],[Va.CODABAR,ii.BarcodeFormat.CODABAR],[Va.CODE_39,ii.BarcodeFormat.CODE_39],[Va.CODE_93,ii.BarcodeFormat.CODE_93],[Va.CODE_128,ii.BarcodeFormat.CODE_128],[Va.DATA_MATRIX,ii.BarcodeFormat.DATA_MATRIX],[Va.MAXICODE,ii.BarcodeFormat.MAXICODE],[Va.ITF,ii.BarcodeFormat.ITF],[Va.EAN_13,ii.BarcodeFormat.EAN_13],[Va.EAN_8,ii.BarcodeFormat.EAN_8],[Va.PDF_417,ii.BarcodeFormat.PDF_417],[Va.RSS_14,ii.BarcodeFormat.RSS_14],[Va.RSS_EXPANDED,ii.BarcodeFormat.RSS_EXPANDED],[Va.UPC_A,ii.BarcodeFormat.UPC_A],[Va.UPC_E,ii.BarcodeFormat.UPC_E],[Va.UPC_EAN_EXTENSION,ii.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!ii)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=r;var n=this.createZXingFormats(e),s=new Map;s.set(ii.DecodeHintType.POSSIBLE_FORMATS,n),s.set(ii.DecodeHintType.TRY_HARDER,!1),this.hints=s}return e.prototype.decodeAsync=function(e){var t=this;return new Promise(function(r,n){try{r(t.decode(e))}catch(s){n(s)}})},e.prototype.decode=function(e){var t=new ii.MultiFormatReader(this.verbose,this.hints),r=new ii.HTMLCanvasElementLuminanceSource(e),n=new ii.BinaryBitmap(new ii.HybridBinarizer(r)),s=t.decode(n);return{text:s.text,format:Ka.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,n){e.set(t,r)}),e},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createZXingFormats=function(e){for(var t=[],r=0,n=e;r<n.length;r++){var s=n[r];this.formatMap.has(s)?t.push(this.formatMap.get(s)):this.logger.logError("".concat(s," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),li=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(zd){a(zd)}}function o(e){try{l(n.throw(e))}catch(zd){a(zd)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},ci=function(e,t){var r,n,s,a,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(zd){o=[6,zd],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},di=function(){function e(t,r,n){if(this.formatMap=new Map([[Va.QR_CODE,"qr_code"],[Va.AZTEC,"aztec"],[Va.CODABAR,"codabar"],[Va.CODE_39,"code_39"],[Va.CODE_93,"code_93"],[Va.CODE_128,"code_128"],[Va.DATA_MATRIX,"data_matrix"],[Va.ITF,"itf"],[Va.EAN_13,"ean_13"],[Va.EAN_8,"ean_8"],[Va.PDF_417,"pdf417"],[Va.UPC_A,"upc_a"],[Va.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var s=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(s),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){return"BarcodeDetector"in window&&"undefined"!==typeof new BarcodeDetector({formats:["qr_code"]})},e.prototype.decodeAsync=function(e){return li(this,void 0,void 0,function(){var t,r;return ci(this,function(n){switch(n.label){case 0:return[4,this.detector.detect(e)];case 1:if(!(t=n.sent())||0===t.length)throw"No barcode or QR code detected.";return[2,{text:(r=this.selectLargestBarcode(t)).rawValue,format:Ka.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(e){for(var t=null,r=0,n=0,s=e;n<s.length;n++){var a=s[n],i=a.boundingBox.width*a.boundingBox.height;i>r&&(r=i,t=a)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],r=0,n=e;r<n.length;r++){var s=n[r];this.formatMap.has(s)?t.push(this.formatMap.get(s)):this.logger.warn("".concat(s," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,n){e.set(t,r)}),e},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),ui=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(zd){a(zd)}}function o(e){try{l(n.throw(e))}catch(zd){a(zd)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},hi=function(e,t){var r,n,s,a,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(zd){o=[6,zd],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},mi=function(){function e(e,t,r,n){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,t&&di.isSupported()?(this.primaryDecoder=new di(e,r,n),this.secondaryDecoder=new oi(e,r,n)):this.primaryDecoder=new oi(e,r,n)}return e.prototype.decodeAsync=function(e){return ui(this,void 0,void 0,function(){var t;return hi(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(e){return ui(this,void 0,void 0,function(){var t,r;return hi(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,n.sent()];case 3:if(r=n.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,r=this.executionResults;t<r.length;t++){e+=r[t]}var n=e/this.executionResults.length;console.log("".concat(n," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),pi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fi=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(zd){a(zd)}}function o(e){try{l(n.throw(e))}catch(zd){a(zd)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},xi=function(e,t){var r,n,s,a,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(zd){o=[6,zd],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},gi=function(){function e(e,t){this.name=e,this.track=t}return e.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},e.prototype.apply=function(e){var t={};t[this.name]=e;var r={advanced:[t]};return this.track.applyConstraints(r)},e.prototype.value=function(){var e=this.track.getSettings();return this.name in e?e[this.name]:null},e}(),bi=function(e){function t(t){return e.call(this,"zoom",t)||this}return pi(t,e),t}(function(e){function t(t,r){return e.call(this,t,r)||this}return pi(t,e),t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(e){var t={};t[this.name]=e;var r={advanced:[t]};return this.track.applyConstraints(r)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var e=this.track.getCapabilities()[this.name];return{min:e.min,max:e.max,step:e.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(gi)),yi=function(e){function t(t){return e.call(this,"torch",t)||this}return pi(t,e),t}(gi),vi=function(){function e(e){this.track=e}return e.prototype.zoomFeature=function(){return new bi(this.track)},e.prototype.torchFeature=function(){return new yi(this.track)},e}(),wi=function(){function e(e,t,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return e.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var r=e.surface.clientWidth,n=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,n),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,n,s){return fi(this,void 0,void 0,function(){var a,i;return xi(this,function(o){switch(o.label){case 0:return a=new e(t,r,s),n.aspectRatio?(i={aspectRatio:n.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(i)]):[3,2];case 1:o.sent(),o.label=2;case 2:return a.setupSurface(),[2,a]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(e){this.failIfClosed();var t=this,r=function(){setTimeout(e,200),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(e){return fi(this,void 0,void 0,function(){return xi(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,r){var n=e.mediaStream.getVideoTracks().length,s=0;e.mediaStream.getVideoTracks().forEach(function(r){e.mediaStream.removeTrack(r),r.stop(),++s>=n&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},e.prototype.getCapabilities=function(){return new vi(this.getFirstTrackOrFail())},e}(),Ni=function(){function e(e){this.mediaStream=e}return e.prototype.render=function(e,t,r){return fi(this,void 0,void 0,function(){return xi(this,function(n){return[2,wi.create(e,this.mediaStream,t,r)]})})},e.create=function(t){return fi(this,void 0,void 0,function(){var r;return xi(this,function(n){switch(n.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return[2,new e(n.sent())]}})})},e}(),ji=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(zd){a(zd)}}function o(e){try{l(n.throw(e))}catch(zd){a(zd)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},_i=function(e,t){var r,n,s,a,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(zd){o=[6,zd],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Ci=function(){function e(){}return e.failIfNotSupported=function(){return ji(this,void 0,void 0,function(){return _i(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(e){return ji(this,void 0,void 0,function(){return _i(this,function(t){return[2,Ni.create(e)]})})},e}(),Si=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(zd){a(zd)}}function o(e){try{l(n.throw(e))}catch(zd){a(zd)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},Ei=function(e,t){var r,n,s,a,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(zd){o=[6,zd],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Ai=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=ri.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=ri.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var e=location.host.split(":")[0];return"127.0.0.1"===e||"localhost"===e},e.getCamerasFromMediaDevices=function(){return Si(this,void 0,void 0,function(){var e,t,r,n,s,a,i;return Ei(this,function(o){switch(o.label){case 0:return e=function(e){for(var t=0,r=e.getVideoTracks();t<r.length;t++){var n=r[t];n.enabled=!1,n.stop(),e.removeTrack(n)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=o.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=o.sent(),n=[],s=0,a=r;s<a.length;s++)"videoinput"===(i=a[s]).kind&&n.push({id:i.deviceId,label:i.label});return e(t),[2,n]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){MediaStreamTrack.getSources(function(t){for(var r=[],n=0,s=t;n<s.length;n++){var a=s[n];"video"===a.kind&&r.push({id:a.id,label:a.label})}e(r)})})},e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"}(ti||(ti={}));var Ii,ki=function(){function e(){this.state=ti.NOT_STARTED,this.onGoingTransactionNewState=ti.UNKNOWN}return e.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},e.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===ti.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=ti.UNKNOWN,this.directTransition(e)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===ti.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=ti.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==ti.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(e){switch(this.state){case ti.UNKNOWN:throw"Transition from unknown is not allowed";case ti.NOT_STARTED:this.failIfNewStateIs(e,[ti.PAUSED]);case ti.SCANNING:case ti.PAUSED:}},e.prototype.failIfNewStateIs=function(e,t){for(var r=0,n=t;r<n.length;r++){if(e===n[r])throw"Cannot transition from ".concat(this.state," to ").concat(e)}},e}(),Ti=function(){function e(e){this.stateManager=e}return e.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},e.prototype.directTransition=function(e){this.stateManager.directTransition(e)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===ti.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==ti.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===ti.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===ti.PAUSED},e}(),Di=function(){function e(){}return e.create=function(){return new Ti(new ki)},e}(),Ri=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Oi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ri(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(Qa),Mi=function(){function e(e,t){this.logger=t,this.fps=Oi.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=!0===e.disableFlip,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Oi.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?ai.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!ei(this.qrbox)},e.create=function(t,r){return new e(t,r)},e}(),Pi=function(){function e(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");var r;this.elementId=e,this.verbose=!1,"boolean"==typeof t?this.verbose=!0===t:t&&(r=t,this.verbose=!0===r.verbose,r.experimentalFeatures),this.logger=new $a(this.verbose),this.qrcode=new mi(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Di.create()}return e.prototype.start=function(e,t,r,n){var s,a=this;if(!e)throw"cameraIdOrConfig is required";if(!r||"function"!=typeof r)throw"qrCodeSuccessCallback is required and should be a function.";s=n||(this.verbose?this.logger.log:function(){});var i=Mi.create(t,this.logger);this.clearElement();var o=!1;i.videoConstraints&&(i.isMediaStreamConstraintsValid()?o=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var l=o,c=document.getElementById(this.elementId);c.clientWidth?c.clientWidth:Oi.DEFAULT_WIDTH;c.style.position="relative",this.shouldScan=!0,this.element=c;var d=this,u=this.stateManagerProxy.startTransition(ti.SCANNING);return new Promise(function(t,n){var o=l?i.videoConstraints:d.createVideoConstraints(e);if(!o)return u.cancel(),void n("videoConstraints should be defined");var c={};l&&!i.aspectRatio||(c.aspectRatio=i.aspectRatio);var h={onRenderSurfaceReady:function(e,t){d.setupUi(e,t,i),d.isScanning=!0,d.foreverScan(i,r,s)}};Ci.failIfNotSupported().then(function(e){e.create(o).then(function(e){return e.render(a.element,c,h).then(function(e){d.renderedCamera=e,u.execute(),t(null)}).catch(function(e){u.cancel(),n(e)})}).catch(function(e){u.cancel(),n(ri.errorGettingUserMedia(e))})}).catch(function(e){u.cancel(),n(ri.cameraStreamingNotSupported())})})},e.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(ti.PAUSED),this.showPausedState(),(ei(e)||!0!==e)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(ti.SCANNING),e.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume(function(){t()}):t()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(ti.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=this;return this.renderedCamera.close().then(function(){return r.renderedCamera=null,r.element&&(r.element.removeChild(r.canvasElement),r.canvasElement=null),function(){if(e.element){var t=document.getElementById(Oi.SHADED_REGION_ELEMENT_ID);t&&e.element.removeChild(t)}}(),r.qrRegion&&(r.qrRegion=null),r.context&&(r.context=null),t.execute(),r.hidePausedState(),r.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(e){return e.decodedText})},e.prototype.scanFileV2=function(e,t){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ei(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(n,s){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var a=new Image;a.onload=function(){var e=a.width,i=a.height,o=document.getElementById(r.elementId),l=o.clientWidth?o.clientWidth:Oi.DEFAULT_WIDTH,c=Math.max(o.clientHeight?o.clientHeight:i,Oi.FILE_SCAN_MIN_HEIGHT),d=r.computeCanvasDrawConfig(e,i,l,c);if(t){var u=r.createCanvasElement(l,c,"qr-canvas-visible");u.style.display="inline-block",o.appendChild(u);var h=u.getContext("2d");if(!h)throw"Unable to get 2d context from canvas";h.canvas.width=l,h.canvas.height=c,h.drawImage(a,0,0,e,i,d.x,d.y,d.width,d.height)}var m=Oi.FILE_SCAN_HIDDEN_CANVAS_PADDING,p=Math.max(a.width,d.width),f=Math.max(a.height,d.height),x=p+2*m,g=f+2*m,b=r.createCanvasElement(x,g);o.appendChild(b);var y=b.getContext("2d");if(!y)throw"Unable to get 2d context from canvas";y.canvas.width=x,y.canvas.height=g,y.drawImage(a,0,0,e,i,m,m,p,f);try{r.qrcode.decodeRobustlyAsync(b).then(function(e){n(Za.createFromQrcodeResult(e))}).catch(s)}catch(v){s("QR code parse error, error = ".concat(v))}},a.onerror=s,a.onabort=s,a.onstalled=s,a.onsuspend=s,a.src=URL.createObjectURL(e)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return Ai.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(e){if(!e)throw"videoConstaints is required argument.";if(!ai.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},e.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(e){var t=[Va.QR_CODE,Va.AZTEC,Va.CODABAR,Va.CODE_39,Va.CODE_93,Va.CODE_128,Va.DATA_MATRIX,Va.MAXICODE,Va.ITF,Va.EAN_13,Va.EAN_8,Va.PDF_417,Va.RSS_14,Va.RSS_EXPANDED,Va.UPC_A,Va.UPC_E,Va.UPC_EAN_EXTENSION];if(!e||"boolean"==typeof e)return t;if(!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===e.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],n=0,s=e.formatsToSupport;n<s.length;n++){var a=s[n];Ya(a)?r.push(a):this.logger.warn("Invalid format: ".concat(a," passed in config, ignoring."))}if(0===r.length)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(e){if(ei(e))return!0;if(!ei(e.useBarCodeDetectorIfSupported))return!1!==e.useBarCodeDetectorIfSupported;if(ei(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return!!ei(t.useBarCodeDetectorIfSupported)||!1!==t.useBarCodeDetectorIfSupported},e.prototype.validateQrboxSize=function(e,t,r){var n=this,s=r.qrbox;this.validateQrboxConfig(s);var a,i=this.toQrdimensions(e,t,s),o=function(e){if(e<Oi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Oi.MIN_QR_BOX_SIZE,"px.")};o(i.width),o(i.height),i.width=((a=i.width)>e&&(n.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),a=e),a)},e.prototype.validateQrboxConfig=function(e){if("number"!==typeof e&&"function"!==typeof e&&(void 0===e.width||void 0===e.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(e,t,r){if("number"===typeof r)return{width:r,height:r};if("function"===typeof r)try{return r(e,t)}catch(n){throw new Error("qrbox config was passed as a function but it failed with unknown error"+n)}return r},e.prototype.setupUi=function(e,t,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,r);var n=ei(r.qrbox)?{width:e,height:t}:r.qrbox;this.validateQrboxConfig(n);var s=this.toQrdimensions(e,t,n);s.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var a=r.isShadedBoxEnabled()&&s.height<=t,i={x:0,y:0,width:e,height:t},o=a?this.getShadedRegionBounds(e,t,s):i,l=this.createCanvasElement(o.width,o.height),c=l.getContext("2d",{willReadFrequently:!0});c.canvas.width=o.width,c.canvas.height=o.height,this.element.append(l),a&&this.possiblyInsertShadingElement(this.element,e,t,s),this.createScannerPausedUiElement(this.element),this.qrRegion=o,this.context=c,this.canvasElement=l},e.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=ri.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(e,t){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(t){return e(t.text,Za.createFromQrcodeResult(t)),r.possiblyUpdateShaders(!0),!0}).catch(function(e){r.possiblyUpdateShaders(!1);var n=ri.codeParseError(e);return t(n,Ja.createFrom(n)),!1})},e.prototype.foreverScan=function(e,t,r){var n=this;if(this.shouldScan&&this.renderedCamera){var s=this.renderedCamera.getSurface(),a=s.videoWidth/s.clientWidth,i=s.videoHeight/s.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var o=this.qrRegion.width*a,l=this.qrRegion.height*i,c=this.qrRegion.x*a,d=this.qrRegion.y*i;this.context.drawImage(s,c,d,o,l,0,0,this.qrRegion.width,this.qrRegion.height);var u=function(){n.foreverScanTimeout=setTimeout(function(){n.foreverScan(e,t,r)},n.getTimeoutFps(e.fps))};this.scanContext(t,r).then(function(s){s||!0===e.disableFlip?u():(n.context.translate(n.context.canvas.width,0),n.context.scale(-1,1),n.scanContext(t,r).finally(function(){u()}))}).catch(function(e){n.logger.logError("Error happend while scanning context",e),u()})}},e.prototype.createVideoConstraints=function(e){if("string"==typeof e)return{deviceId:{exact:e}};if("object"==typeof e){var t="facingMode",r="deviceId",n={user:!0,environment:!0},s="exact",a=function(e){if(e in n)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(e,"'")},i=Object.keys(e);if(1!==i.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(i.length," keys");var o=Object.keys(e)[0];if(o!==t&&o!==r)throw"Only '".concat(t,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(o!==t){var l=e.deviceId;if("string"==typeof l)return{deviceId:l};if("object"==typeof l){if(s in l)return{deviceId:{exact:l["".concat(s)]}};throw"'deviceId' should be string or object with"+" ".concat(s," as key.")}throw"Invalid type of 'deviceId' = ".concat(typeof l)}var c=e.facingMode;if("string"==typeof c){if(a(c))return{facingMode:c}}else{if("object"!=typeof c)throw"Invalid type of 'facingMode' = ".concat(typeof c);if(!(s in c))throw"'facingMode' should be string or object with"+" ".concat(s," as key.");if(a(c["".concat(s)]))return{facingMode:{exact:c["".concat(s)]}}}}throw"Invalid type of 'cameraIdOrConfig' = ".concat(typeof e)},e.prototype.computeCanvasDrawConfig=function(e,t,r,n){if(e<=r&&t<=n)return{x:(r-e)/2,y:(n-t)/2,width:e,height:t};var s=e,a=t;return e>r&&(t*=r/e,e=r),t>n&&(e*=n/t,t=n),this.logger.log("Image downsampled from "+"".concat(s,"X").concat(a)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,r,n)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},e.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?Oi.BORDER_SHADER_MATCH_COLOR:Oi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(e,t,r){var n=e,s=t,a=document.createElement("canvas");return a.style.width="".concat(n,"px"),a.style.height="".concat(s,"px"),a.style.display="none",a.id=ei(r)?"qr-canvas":r,a},e.prototype.getShadedRegionBounds=function(e,t,r){if(r.width>e||r.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(t-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(e,t,r,n){if(!(t-n.width<1||r-n.height<1)){var s=document.createElement("div");s.style.position="absolute";var a=(t-n.width)/2,i=(r-n.height)/2;if(s.style.borderLeft="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderRight="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderTop="".concat(i,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderBottom="".concat(i,"px solid rgba(0, 0, 0, 0.48)"),s.style.boxSizing="border-box",s.style.top="0px",s.style.bottom="0px",s.style.left="0px",s.style.right="0px",s.id="".concat(Oi.SHADED_REGION_ELEMENT_ID),t-n.width<11||r-n.height<11)this.hasBorderShaders=!1;else{var o=40;this.insertShaderBorders(s,o,5,-5,null,0,!0),this.insertShaderBorders(s,o,5,-5,null,0,!1),this.insertShaderBorders(s,o,5,null,-5,0,!0),this.insertShaderBorders(s,o,5,null,-5,0,!1),this.insertShaderBorders(s,5,45,-5,null,-5,!0),this.insertShaderBorders(s,5,45,null,-5,-5,!0),this.insertShaderBorders(s,5,45,-5,null,-5,!1),this.insertShaderBorders(s,5,45,null,-5,-5,!1),this.hasBorderShaders=!0}e.append(s)}},e.prototype.insertShaderBorders=function(e,t,r,n,s,a,i){var o=document.createElement("div");o.style.position="absolute",o.style.backgroundColor=Oi.BORDER_SHADER_DEFAULT_COLOR,o.style.width="".concat(t,"px"),o.style.height="".concat(r,"px"),null!==n&&(o.style.top="".concat(n,"px")),null!==s&&(o.style.bottom="".concat(s,"px")),i?o.style.left="".concat(a,"px"):o.style.right="".concat(a,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(o),e.appendChild(o)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(e){return 1e3/e},e}(),Li="data:image/svg+xml;base64,",Bi=Li+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Fi=Li+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Ui=Li+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",zi=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),Hi=function(){function e(){this.data=zi.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},e.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=zi.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),Vi=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=si.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var r=document.createElement("br"),n=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(n);var s=document.createElement("a");s.innerText=si.reportIssues(),s.href="https://github.com/mebjas/html5-qrcode/issues",s.target="new",s.style.color="white",this.infoDiv.appendChild(s),e.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),Wi=function(){function e(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Ui,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(e){return t.onHoverIn()},this.infoIcon.onmouseout=function(e){return t.onHoverOut()},this.infoIcon.onclick=function(e){return t.onClick()},e.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Ui,this.infoIcon.style.opacity="0.6")},e}(),qi=function(){function e(){var e=this;this.infoDiv=new Vi,this.infoIcon=new Wi(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return e.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},e}(),Gi=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(zd){a(zd)}}function o(e){try{l(n.throw(e))}catch(zd){a(zd)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},Yi=function(e,t){var r,n,s,a,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(zd){o=[6,zd],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Xi=function(){function e(){}return e.hasPermissions=function(){return Gi(this,void 0,void 0,function(){var e,t,r,n;return Yi(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=s.sent(),t=0,r=e;t<r.length;t++)if("videoinput"===(n=r[t]).kind&&n.label)return[2,!0];return[2,!1]}})})},e}(),Qi=function(){function e(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,r=this.supportedScanTypes;t<r.length;t++){var n=r[t];if(e.isCameraScanType(n))return!0}return!1},e.isCameraScanType=function(e){return e===qa.SCAN_TYPE_CAMERA},e.isFileScanType=function(e){return e===qa.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(e){if(!e||0===e.length)return Qa.DEFAULT_SUPPORTED_SCAN_TYPE;var t=Qa.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var r=0,n=e;r<n.length;r++){var s=n[r];if(!Qa.DEFAULT_SUPPORTED_SCAN_TYPE.includes(s))throw"Unsupported scan type ".concat(s)}return e},e}(),Ki=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),Zi=function(){function e(){}return e.createElement=function(e,t){var r=document.createElement(e);return r.id=t,r.classList.add(Ki.ALL_ELEMENT_CLASS),"button"===e&&r.setAttribute("type","button"),r},e}(),Ji=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(zd){a(zd)}}function o(e){try{l(n.throw(e))}catch(zd){a(zd)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},$i=function(e,t){var r,n,s,a,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(zd){o=[6,zd],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},eo=function(){function e(e,t,r){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=r}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return Ji(this,void 0,void 0,function(){var e,t;return $i(this,function(r){switch(r.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=r.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?ni.torchOffButton():ni.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},e.prototype.propagateFailure=function(e,t){var r=e?ni.torchOnFailedMessage():ni.torchOffFailedMessage();t&&(r+="; Error = "+t),this.onTorchActionFailureCallback(r)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),to=function(){function e(e,t){this.onTorchActionFailureCallback=t,this.torchButton=Zi.createElement("button",Ki.TORCH_BUTTON_ID),this.torchController=new eo(e,this,t)}return e.prototype.render=function(e,t){var r=this;this.torchButton.innerText=ni.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var n=this;this.torchButton.addEventListener("click",function(e){return Ji(r,void 0,void 0,function(){return $i(this,function(e){switch(e.label){case 0:return[4,n.torchController.flipState()];case 1:return e.sent(),n.torchController.isTorchEnabled()?(n.torchButton.classList.remove(Ki.TORCH_BUTTON_CLASS_TORCH_OFF),n.torchButton.classList.add(Ki.TORCH_BUTTON_CLASS_TORCH_ON)):(n.torchButton.classList.remove(Ki.TORCH_BUTTON_CLASS_TORCH_ON),n.torchButton.classList.add(Ki.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(e){this.torchController=new eo(e,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(e){this.torchButton.innerText=e},e.prototype.reset=function(){this.torchButton.innerText=ni.torchOnButton(),this.torchController.reset()},e.create=function(t,r,n,s){var a=new e(r,s);return a.render(t,n),a},e}(),ro=function(){function e(e,t,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var n=document.createElement("label");n.setAttribute("for",this.getFileScanInputId()),n.style.display="inline-block",this.fileBasedScanRegion.appendChild(n),this.fileSelectionButton=Zi.createElement("button",Ki.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(e){n.click()}),n.append(this.fileSelectionButton),this.fileScanInput=Zi.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",n.appendChild(this.fileScanInput);var s=this;this.fileScanInput.addEventListener("change",function(e){if(null!=e&&null!=e.target){var t=e.target;if(!t.files||0!==t.files.length){var n=t.files[0],a=n.name;s.setImageNameToButton(a),r(n)}}});var a=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(a),this.fileBasedScanRegion.addEventListener("dragenter",function(e){s.fileBasedScanRegion.style.border=s.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(e){s.fileBasedScanRegion.style.border=s.fileBasedScanRegionDefaultBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(e){s.fileBasedScanRegion.style.border=s.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),s.fileBasedScanRegion.style.border=s.fileBasedScanRegionDefaultBorder();var t=e.dataTransfer;if(t){var n=t.files;if(!n||0===n.length)return;for(var i=!1,o=0;o<n.length;++o){var l=n.item(o);if(l){if(l.type.match(/image.*/)){i=!0;var c=l.name;s.setImageNameToButton(c),r(l),a.innerText=ni.dragAndDropMessage();break}}}i||(a.innerText=ni.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=ni.dragAndDropMessage(),e.style.fontWeight="400",e},e.prototype.setImageNameToButton=function(e){if(e.length>20){var t=e.substring(0,8),r=e.length,n=e.substring(r-8,r);e="".concat(t,"....").concat(n)}var s=ni.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=s},e.prototype.setInitialValueToButton=function(){var e=ni.fileSelectionChooseImage()+" - "+ni.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,r,n){return new e(t,r,n)},e}(),no=function(){function e(e){this.selectElement=Zi.createElement("select",Ki.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return e.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var r=this.cameras.length;if(0===r)throw new Error("No cameras found");if(1===r)t.style.display="none";else{var n=ni.selectCamera();t.innerText="".concat(n," (").concat(this.cameras.length,")  ")}for(var s=1,a=0,i=this.cameras;a<i.length;a++){var o=i[a],l=o.id,c=null==o.label?l:o.label;c&&""!==c||(c=[ni.anonymousCameraPrefix(),s++].join(" "));var d=document.createElement("option");d.value=l,d.innerText=c,this.options.push(d),this.selectElement.appendChild(d)}t.appendChild(this.selectElement),e.appendChild(t)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return!0===this.selectElement.disabled},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(e){for(var t=0,r=this.options;t<r.length;t++){if(r[t].value===e)return!0}return!1},e.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},e.prototype.hasSingleItem=function(){return 1===this.cameras.length},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,r){var n=new e(r);return n.render(t),n},e}(),so=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Zi.createElement("input",Ki.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=ni.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var n=this;this.rangeInput.addEventListener("input",function(){return n.onValueChange()}),this.rangeInput.addEventListener("change",function(){return n.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var e=ni.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(e,t,r,n){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=n.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,r){var n=new e;return n.render(t,r),n},e}();!function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"}(Ii||(Ii={}));var ao=function(){function e(e,t,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=!0===r,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new Qi(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new $a(this.verbose),this.persistedDataManager=new Hi,!0!==t.rememberLastUsedCamera&&this.persistedDataManager.reset()}return e.prototype.render=function(e,t){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(t,n){if(e)e(t,n);else{if(r.lastMatchFound===t)return;r.lastMatchFound=t,r.setHeaderMessage(ni.lastMatch(t),Ii.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(e,r){t&&t(e,r)};var n,s,a=document.getElementById(this.elementId);if(!a)throw"HTML Element with id=".concat(this.elementId," not found");a.innerHTML="",this.createBasicLayout(a),this.html5Qrcode=new Pi(this.getScanRegionId(),(n=this.config,s=this.verbose,{formatsToSupport:n.formatsToSupport,useBarCodeDetectorIfSupported:n.useBarCodeDetectorIfSupported,experimentalFeatures:n.experimentalFeatures,verbose:s}))},e.prototype.pause=function(e){(ei(e)||!0!==e)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var e=this,t=function(){var t=document.getElementById(e.elementId);t&&(t.innerHTML="",e.resetBasicLayout(t))};return this.html5Qrcode?new Promise(function(r,n){e.html5Qrcode?e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(n){e.html5Qrcode?(e.html5Qrcode.clear(),t(),r()):r()}).catch(function(t){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",t),n(t)}):(e.html5Qrcode.clear(),t(),r()):r()}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Qa.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Qa.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Qa.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Qa.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Qa.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Qa.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Qa.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),r=this.getScanRegionId();t.id=r,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),Qi.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var n=document.createElement("div"),s=this.getDashboardId();n.id=s,n.style.width="100%",e.appendChild(n),this.setupInitialDashboard(n)},e.prototype.resetBasicLayout=function(e){e.style.border="none"},e.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t),(new qi).renderInto(t);var r=document.createElement("div");r.id=this.getHeaderMessageContainerId(),r.style.display="none",r.style.textAlign="center",r.style.fontSize="14px",r.style.padding="2px 10px",r.style.margin="4px",r.style.borderTop="1px solid #f6f6f6",t.appendChild(r)},e.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},e.prototype.createCameraListUi=function(e,t,r){var n=this;n.showHideScanTypeSwapLink(!1),n.setHeaderMessage(ni.cameraPermissionRequesting());var s=function(){r||n.createPermissionButton(e,t)};Pi.getCameras().then(function(r){n.persistedDataManager.setHasPermission(!0),n.showHideScanTypeSwapLink(!0),n.resetHeaderMessage(),r&&r.length>0?(e.removeChild(t),n.renderCameraSelection(r)):(n.setHeaderMessage(ni.noCameraFound(),Ii.STATUS_WARNING),s())}).catch(function(e){n.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:s(),n.setHeaderMessage(e,Ii.STATUS_WARNING),n.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(e,t){var r=this,n=Zi.createElement("button",this.getCameraPermissionButtonId());n.innerText=ni.cameraPermissionTitle(),n.addEventListener("click",function(){n.disabled=!0,r.createCameraListUi(e,t,n)}),t.appendChild(n)},e.prototype.createPermissionsUi=function(e,t){var r=this;Qi.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?Xi.hasPermissions().then(function(n){n?r.createCameraListUi(e,t):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,t))}).catch(function(n){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,t)}):this.createPermissionButton(e,t)},e.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=Qi.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(r);var n=document.createElement("div");n.style.textAlign="center",r.appendChild(n),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,n),this.renderFileScanUi(t)},e.prototype.renderFileScanUi=function(e){var t=Qi.isFileScanType(this.currentScanType),r=this;this.fileSelectionUi=ro.create(e,t,function(e){if(!r.html5Qrcode)throw"html5Qrcode not defined";Qi.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(ni.loadingImage()),r.html5Qrcode.scanFileV2(e,!0).then(function(e){r.resetHeaderMessage(),r.qrCodeSuccessCallback(e.decodedText,e)}).catch(function(e){r.setHeaderMessage(e,Ii.STATUS_WARNING),r.qrCodeErrorCallback(e,Ja.createFrom(e))}))})},e.prototype.renderCameraSelection=function(e){var t=this,r=this,n=document.getElementById(this.getDashboardSectionCameraScanRegionId());n.style.textAlign="center";var s=so.create(n,!1),a=no.create(n,e),i=document.createElement("span"),o=Zi.createElement("button",Ki.CAMERA_START_BUTTON_ID);o.innerText=ni.scanButtonStartScanningText(),i.appendChild(o);var l,c=Zi.createElement("button",Ki.CAMERA_STOP_BUTTON_ID);c.innerText=ni.scanButtonStopScanningText(),c.style.display="none",c.disabled=!0,i.appendChild(c);n.appendChild(i);var d=function(e){e||(o.style.display="none"),o.innerText=ni.scanButtonStartScanningText(),o.style.opacity="1",o.disabled=!1,e&&(o.style.display="inline-block")};if(o.addEventListener("click",function(e){o.innerText=ni.scanButtonScanningStarting(),a.disable(),o.disabled=!0,o.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var n,u=a.getValue();r.persistedDataManager.setLastUsedCameraId(u),r.html5Qrcode.start(u,(n=r.config,{fps:n.fps,qrbox:n.qrbox,aspectRatio:n.aspectRatio,disableFlip:n.disableFlip,videoConstraints:n.videoConstraints}),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(e){c.disabled=!1,c.style.display="inline-block",d(!1);var n=r.html5Qrcode.getRunningTrackCameraCapabilities();!0===t.config.showTorchButtonIfSupported&&function(e){e.torchFeature().isSupported()?(l?l.updateTorchCapability(e.torchFeature()):l=to.create(i,e.torchFeature(),{display:"none",marginLeft:"5px"},function(e){r.setHeaderMessage(e,Ii.STATUS_WARNING)}),l.show()):l&&l.hide()}(n),!0===t.config.showZoomSliderIfSupported&&function(e){var r=e.zoomFeature();if(r.isSupported()){s.setOnCameraZoomValueChangeCallback(function(e){r.apply(e)});var n,a,i,o=1;t.config.defaultZoomValueIfSupported&&(o=t.config.defaultZoomValueIfSupported),n=o,a=r.min(),o=n>(i=r.max())?i:n<a?a:n,s.setValues(r.min(),r.max(),o,r.step()),s.show()}}(n)}).catch(function(e){r.showHideScanTypeSwapLink(!0),a.enable(),d(!0),r.setHeaderMessage(e,Ii.STATUS_WARNING)})}),a.hasSingleItem()&&o.click(),c.addEventListener("click",function(e){if(!r.html5Qrcode)throw"html5Qrcode not defined";c.disabled=!0,r.html5Qrcode.stop().then(function(e){t.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),a.enable(),o.disabled=!1,c.style.display="none",o.style.display="inline-block",l&&(l.reset(),l.hide()),s.removeOnCameraZoomValueChangeCallback(),s.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(e){c.disabled=!1,r.setHeaderMessage(e,Ii.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var u=r.persistedDataManager.getLastUsedCameraId();a.hasValue(u)?(a.setValue(u),o.click()):r.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var e=this,t=ni.textIfCameraScanSelected(),r=ni.textIfFileScanSelected(),n=document.getElementById(this.getDashboardSectionId()),s=document.createElement("div");s.style.textAlign="center";var a=Zi.createElement("span",this.getDashboardSectionSwapLinkId());a.style.textDecoration="underline",a.style.cursor="pointer",a.innerText=Qi.isCameraScanType(this.currentScanType)?t:r,a.addEventListener("click",function(){e.sectionSwapAllowed?(e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,Qi.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),a.innerText=r,e.currentScanType=qa.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),a.innerText=t,e.currentScanType=qa.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0):e.verbose&&e.logger.logError("Section swap called when not allowed")}),s.appendChild(a),n.appendChild(s)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;this.persistedDataManager.hasCameraPermissions()&&Xi.hasPermissions().then(function(r){if(r){var n=document.getElementById(t.getCameraPermissionButtonId());if(!n)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";n.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(e){t.persistedDataManager.setHasPermission(!1)})},e.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},e.prototype.setHeaderMessage=function(e,t){t||(t=Ii.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=e,r.style.display="block",t){case Ii.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case Ii.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case Ii.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)"}},e.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==e&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return t.innerHTML="<br>",void t.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=Bi,this.cameraScanImage.alt=ni.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return t.innerHTML="<br>",void t.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(r){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Fi,this.fileScanImage.alt=ni.fileScanAltText()},e.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return Ki.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return Ki.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();function io(e){let{isOpen:r,onClose:n,onScan:s,title:a="\u0421\u043a\u0430\u043d\u0443\u0432\u0430\u043d\u043d\u044f \u0448\u0442\u0440\u0438\u0445-\u043a\u043e\u0434\u0443"}=e;(0,t.useRef)(null);const[i,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{if(!r)return;c(!0),o(null);const e=new ao("qr-reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1,formatsToSupport:[0,11,8,9,13,14]},!1),t=(t,r)=>{console.log("[Scanner] Scanned: ".concat(t),r),e.clear(),c(!1),s&&s(t),n()},a=e=>{e.includes("NotFoundException")||console.warn("[Scanner] Error: ".concat(e))};try{e.render(t,a)}catch(i){console.error("[Scanner] Failed to start:",i),o("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0438 \u043a\u0430\u043c\u0435\u0440\u0443. \u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435 \u0434\u043e\u0437\u0432\u043e\u043b\u0438."),c(!1)}return()=>{if(e)try{e.clear()}catch(i){console.warn("[Scanner] Cleanup error:",i)}}},[r,s,n]),r?(0,Et.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4",children:(0,Et.jsxs)("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[(0,Et.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold",children:a}),(0,Et.jsx)("button",{onClick:n,className:"text-2xl text-slate-500 hover:text-slate-700",children:"\u2715"})]}),(0,Et.jsx)("div",{className:"mb-4",children:(0,Et.jsx)("div",{id:"qr-reader",className:"rounded-lg overflow-hidden"})}),i&&(0,Et.jsxs)("div",{className:"mb-4 rounded-lg bg-red-50 border border-red-200 p-3 text-sm text-red-700",children:["\u26a0\ufe0f ",i]}),(0,Et.jsxs)("div",{className:"text-sm text-slate-600 space-y-2",children:[(0,Et.jsx)("p",{className:"font-medium",children:"\ud83d\udcf1 \u0406\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0456\u044f:"}),(0,Et.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[(0,Et.jsx)("li",{children:"\u041d\u0430\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u0430\u043c\u0435\u0440\u0443 \u043d\u0430 \u0448\u0442\u0440\u0438\u0445-\u043a\u043e\u0434 \u0430\u0431\u043e QR-\u043a\u043e\u0434"}),(0,Et.jsx)("li",{children:"\u0422\u0440\u0438\u043c\u0430\u0439\u0442\u0435 \u043a\u0430\u043c\u0435\u0440\u0443 \u0441\u0442\u0430\u0431\u0456\u043b\u044c\u043d\u043e \u043d\u0430 \u0432\u0456\u0434\u0441\u0442\u0430\u043d\u0456 10-20 \u0441\u043c"}),(0,Et.jsx)("li",{children:"\u041f\u0435\u0440\u0435\u043a\u043e\u043d\u0430\u0439\u0442\u0435\u0441\u044f \u0449\u043e \u043a\u043e\u0434 \u0447\u0456\u0442\u043a\u043e \u0432\u0438\u0434\u043d\u043e"}),(0,Et.jsx)("li",{children:"\u0421\u043a\u0430\u043d\u0443\u0432\u0430\u043d\u043d\u044f \u0432\u0456\u0434\u0431\u0443\u0432\u0430\u0454\u0442\u044c\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u043d\u043e"})]})]}),(0,Et.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,Et.jsx)("p",{className:"text-xs text-slate-500 mb-2",children:"\u0410\u0431\u043e \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0440\u0443\u0447\u043d\u0443:"}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsx)("input",{type:"text",placeholder:"SKU \u0430\u0431\u043e \u0448\u0442\u0440\u0438\u0445-\u043a\u043e\u0434...",className:"flex-1 rounded-lg border px-3 py-2 text-sm",onKeyDown:e=>{"Enter"===e.key&&e.target.value.trim()&&(s(e.target.value.trim()),n())}}),(0,Et.jsx)("button",{onClick:()=>{const e=document.querySelector('input[placeholder*="SKU"]');e&&e.value.trim()&&(s(e.value.trim()),n())},className:"rounded-lg bg-blue-600 px-4 py-2 text-sm text-white hover:bg-blue-700",children:"OK"})]})]}),(0,Et.jsx)("button",{onClick:n,className:"mt-4 w-full rounded-lg border border-slate-300 py-2 text-sm hover:bg-slate-50",children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"})]})}):null}const oo="https://backrentalhub.farforrent.com.ua",lo=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")},co={ok:{label:"\u0412 \u043d\u0430\u044f\u0432\u043d\u043e\u0441\u0442\u0456",tone:"corp-badge corp-badge-success"},fragile:{label:"\u041a\u0440\u0438\u0445\u043a\u0435",tone:"corp-badge corp-badge-primary"},damaged:{label:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043e",tone:"corp-badge corp-badge-error"}},uo={clean:{label:"\u0427\u0438\u0441\u0442\u0435",tone:"bg-emerald-50 text-emerald-700 border-emerald-200"},wash:{label:"\u041d\u0430 \u043c\u0438\u0439\u0446\u0456",tone:"corp-badge corp-badge-info"},dry:{label:"\u0421\u0443\u0448\u043a\u0430",tone:"corp-badge corp-badge-warning"},repair:{label:"\u0420\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f",tone:"bg-fuchsia-100 text-fuchsia-700 border-fuchsia-200"}};function ho(e){let{tone:t,children:r}=e;return(0,Et.jsx)("span",{className:lo("inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-xs",t),children:r})}function mo(e){let{onClick:t,children:r,tone:n="slate"}=e;return(0,Et.jsx)("button",{onClick:t,className:lo("rounded-full px-3 py-1 text-sm",{slate:"corp-btn corp-btn-secondary",green:"corp-btn corp-btn-primary",blue:"corp-btn corp-btn-primary",amber:"bg-amber-500 hover:bg-amber-600 text-corp-text-dark"}[n]),children:r})}function po(e){let{title:t,right:r,children:n}=e;return(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[(0,Et.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,Et.jsx)("h3",{className:"text-base font-semibold",children:t}),r]}),n]})}function fo(e){let{q:t,setQ:r,cat:n,setCat:s,state:a,setState:i,clean:o,setClean:l,categories:c}=e;return(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsxs)("div",{className:"w-full",children:[(0,Et.jsx)("label",{className:"text-xs text-corp-text-muted font-medium",children:"\u041f\u043e\u0448\u0443\u043a (\u043d\u0430\u0437\u0432\u0430 / SKU / \u0448\u0442\u0440\u0438\u0445\u2011\u043a\u043e\u0434)"}),(0,Et.jsx)("input",{value:t,onChange:e=>r(e.target.value),placeholder:"\u0432\u0432\u0435\u0434\u0456\u0442\u044c \u0442\u0435\u043a\u0441\u0442 \u0430\u0431\u043e \u0432\u0456\u0434\u0441\u043a\u0430\u043d\u0443\u0439\u0442\u0435 \u0448\u0442\u0440\u0438\u0445\u2011\u043a\u043e\u0434\u2026",className:"mt-1 w-full rounded-xl border border-slate-300 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Et.jsxs)("div",{className:"flex flex-wrap gap-3 items-end",children:[(0,Et.jsxs)("div",{className:"min-w-[180px]",children:[(0,Et.jsx)("label",{className:"text-xs text-corp-text-muted font-medium",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f"}),(0,Et.jsxs)("select",{className:"mt-1 w-full rounded-xl border border-slate-300 px-3 py-2",value:n,onChange:e=>s(e.target.value),children:[(0,Et.jsx)("option",{value:"all",children:"\u0412\u0441\u0456"}),c.map(e=>(0,Et.jsx)("option",{value:e,children:e},e))]})]}),(0,Et.jsxs)("div",{className:"min-w-[150px]",children:[(0,Et.jsx)("label",{className:"text-xs text-corp-text-muted font-medium",children:"\u0421\u0442\u0430\u043d"}),(0,Et.jsxs)("select",{className:"mt-1 w-full rounded-xl border border-slate-300 px-3 py-2",value:a,onChange:e=>i(e.target.value),children:[(0,Et.jsx)("option",{value:"all",children:"\u0411\u0443\u0434\u044c\u2011\u044f\u043a\u0438\u0439"}),(0,Et.jsx)("option",{value:"ok",children:"\u0412 \u043d\u0430\u044f\u0432\u043d\u043e\u0441\u0442\u0456"}),(0,Et.jsx)("option",{value:"fragile",children:"\u041a\u0440\u0438\u0445\u043a\u0435"}),(0,Et.jsx)("option",{value:"damaged",children:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043e"})]})]}),(0,Et.jsxs)("div",{className:"min-w-[150px]",children:[(0,Et.jsx)("label",{className:"text-xs text-corp-text-muted font-medium",children:"\u0427\u0438\u0441\u0442\u043a\u0430"}),(0,Et.jsxs)("select",{className:"mt-1 w-full rounded-xl border border-slate-300 px-3 py-2",value:o,onChange:e=>l(e.target.value),children:[(0,Et.jsx)("option",{value:"all",children:"\u0411\u0443\u0434\u044c\u2011\u044f\u043a\u0430"}),(0,Et.jsx)("option",{value:"clean",children:"\u0427\u0438\u0441\u0442\u0435"}),(0,Et.jsx)("option",{value:"wash",children:"\u041d\u0430 \u043c\u0438\u0439\u0446\u0456"}),(0,Et.jsx)("option",{value:"dry",children:"\u0421\u0443\u0448\u043a\u0430"}),(0,Et.jsx)("option",{value:"repair",children:"\u0420\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f"})]})]}),(0,Et.jsxs)("div",{className:"flex gap-2 ml-auto",children:[(0,Et.jsx)(mo,{tone:"blue",onClick:()=>alert("\u0412\u0456\u0434\u043a\u0440\u0438\u0442\u0438 \u0441\u043a\u0430\u043d\u0435\u0440 \u0448\u0442\u0440\u0438\u0445\u2011\u043a\u043e\u0434\u0443 (\u043c\u043e\u043a)"),children:"\u0421\u043a\u0430\u043d\u0443\u0432\u0430\u0442\u0438"}),(0,Et.jsx)(mo,{tone:"green",onClick:()=>alert("\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u0442\u043e\u0432\u0430\u0440 (\u043c\u043e\u043a)"),children:"\u041d\u043e\u0432\u0438\u0439 \u0442\u043e\u0432\u0430\u0440"})]})]}),(0,Et.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,Et.jsx)("span",{className:"text-xs text-corp-text-muted font-medium",children:"\u0428\u0432\u0438\u0434\u043a\u0456 \u0444\u0456\u043b\u044c\u0442\u0440\u0438:"}),(0,Et.jsx)("button",{onClick:()=>{l("repair"),i("all")},className:lo("rounded-full px-3 py-1 text-xs font-medium border transition-colors","repair"===o?"bg-fuchsia-100 text-fuchsia-700 border-fuchsia-300":"bg-white text-corp-text-main border-slate-200 hover:bg-slate-50"),children:"\ud83d\udd27 \u0412 \u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u0457"}),(0,Et.jsx)("button",{onClick:()=>{l("wash"),i("all")},className:lo("rounded-full px-3 py-1 text-xs font-medium border transition-colors","wash"===o?"bg-sky-100 text-sky-700 border-sky-300":"bg-white text-corp-text-main border-slate-200 hover:bg-slate-50"),children:"\ud83d\udebf \u041d\u0430 \u043c\u0438\u0439\u0446\u0456"}),(0,Et.jsx)("button",{onClick:()=>{i("damaged"),l("all")},className:lo("rounded-full px-3 py-1 text-xs font-medium border transition-colors","damaged"===a?"bg-rose-100 text-rose-700 border-rose-300":"bg-white text-corp-text-main border-slate-200 hover:bg-slate-50"),children:"\u26a0\ufe0f \u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043e"}),(0,Et.jsx)("button",{onClick:()=>{i("all"),l("all"),s("all")},className:"rounded-full px-3 py-1 text-xs font-medium border bg-white text-corp-text-main border-slate-200 hover:bg-slate-50 transition-colors",children:"\u2716\ufe0f \u0421\u043a\u0438\u043d\u0443\u0442\u0438 \u0444\u0456\u043b\u044c\u0442\u0440\u0438"})]})]})}function xo(e){let{rows:t,onOpen:r,loading:n}=e;return n?(0,Et.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white p-12 text-center",children:(0,Et.jsx)("div",{className:"text-corp-text-muted",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0443..."})}):(0,Et.jsx)("div",{className:"overflow-hidden rounded-2xl border border-slate-200",children:(0,Et.jsxs)("table",{className:"min-w-full text-sm",children:[(0,Et.jsx)("thead",{className:"bg-slate-50 text-left text-corp-text-muted",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0424\u043e\u0442\u043e"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"SKU / \u041d\u0430\u0437\u0432\u0430"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0421\u043a\u043b\u0430\u0434"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0412 \u043e\u0431\u0456\u0433\u0443"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0412\u0456\u0434\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0414\u0435 \u0437\u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0427\u0438\u0441\u0442\u043a\u0430"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right",children:"\u0414\u0456\u0457"})]})}),(0,Et.jsx)("tbody",{children:t.map(e=>(0,Et.jsxs)("tr",{className:"border-t hover:bg-slate-50/50",children:[(0,Et.jsx)("td",{className:"px-3 py-2",children:e.cover?(0,Et.jsx)("img",{src:xs(e.cover),alt:e.name,className:"h-12 w-18 rounded-md object-cover bg-slate-100",onError:gs}):(0,Et.jsx)("div",{className:"h-12 w-18 rounded-md bg-slate-100 flex items-center justify-center text-xl",children:"\ud83d\udce6"})}),(0,Et.jsxs)("td",{className:"px-3 py-2",children:[(0,Et.jsx)("div",{className:"font-medium text-corp-text-dark",children:e.sku}),(0,Et.jsx)("div",{className:"text-xs text-corp-text-muted",children:e.name})]}),(0,Et.jsx)("td",{className:"px-3 py-2",children:e.cat}),(0,Et.jsx)("td",{className:"px-3 py-2",children:(0,Et.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(0,Et.jsxs)(ho,{tone:co.ok.tone,children:["\u0412\u0441\u044c\u043e\u0433\u043e ",e.total]}),(0,Et.jsxs)(ho,{tone:co.ok.tone,children:["\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u043e ",e.available]}),(0,Et.jsxs)(ho,{tone:co.fragile.tone,children:["\u0420\u0435\u0437\u0435\u0440\u0432 ",e.reserved]}),(0,Et.jsxs)(ho,{tone:co.damaged.tone,children:["\u0412 \u043e\u0440\u0435\u043d\u0434\u0456 ",e.rented]})]})}),(0,Et.jsx)("td",{className:"px-3 py-2",children:(0,Et.jsxs)("div",{className:"space-y-1",children:[e.due_back.map(e=>(0,Et.jsxs)("div",{className:"text-xs text-corp-text-main",children:["#",e.order_id," \xb7 ",e.customer," \xb7 ",e.qty," \u0448\u0442 \xb7 \u043f\u043e\u0432\u0435\u0440\u043d: ",e.date]},e.order_id)),0===e.due_back.length&&(0,Et.jsx)("div",{className:"text-xs text-slate-400",children:"\u2014"})]})}),(0,Et.jsx)("td",{className:"px-3 py-2",children:e.in_restore>0?(0,Et.jsxs)(ho,{tone:uo.repair.tone,children:["\ud83d\udd27 ",e.in_restore," \u0448\u0442"]}):(0,Et.jsx)("div",{className:"text-xs text-slate-400",children:"\u2014"})}),(0,Et.jsx)("td",{className:"px-3 py-2",children:(0,Et.jsxs)("div",{className:"text-xs",children:["\u0417\u043e\u043d\u0430 ",e.location.zone," \xb7 \u0420\u044f\u0434 ",e.location.aisle," \xb7 \u041f\u043e\u043b\u0438\u0446\u044f ",e.location.shelf," \xb7 \u0411\u043e\u043a\u0441 ",e.location.bin]})}),(0,Et.jsxs)("td",{className:"px-3 py-2",children:[(0,Et.jsx)(ho,{tone:uo[e.cleaning.status].tone,children:uo[e.cleaning.status].label}),(0,Et.jsxs)("div",{className:"text-xs text-corp-text-muted",children:["\u043e\u0441\u0442. \u043e\u043d\u043e\u0432\u043b.: ",e.cleaning.last]})]}),(0,Et.jsx)("td",{className:"px-3 py-2 text-right",children:(0,Et.jsx)("button",{onClick:()=>r(e),className:"rounded-full bg-slate-900 px-3 py-1 text-sm text-white",children:"\u0414\u0435\u0442\u0430\u043b\u0456"})})]},e.id))})]})})}function go(e){let{open:r,item:n,onClose:s,onSave:a}=e;const[i,o]=(0,t.useState)(!1),[l,d]=(0,t.useState)({}),[u,h]=(0,t.useState)([]),[m,p]=(0,t.useState)(!1);(0,t.useEffect)(()=>{n&&(d({location:c({},n.location),cleaning:c({},n.cleaning),state:n.state}),f(n.sku))},[n]);const f=async e=>{if(e)try{p(!0);const t=await fetch("".concat(oo,"/api/product-damage-history/sku/").concat(e)),r=await t.json();h(r.history||[])}catch(t){console.error("Error loading damage history:",t),h([])}finally{p(!1)}};if(!r||!n)return null;return(0,Et.jsxs)("div",{className:"fixed inset-0 z-30 flex",children:[(0,Et.jsx)("div",{className:"h-full w-full bg-black/30",onClick:s}),(0,Et.jsxs)("div",{className:"absolute right-0 top-0 h-full w-full max-w-2xl overflow-y-auto rounded-l-2xl bg-white p-5 shadow-xl",children:[(0,Et.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-lg font-semibold",children:n.name}),(0,Et.jsxs)("div",{className:"text-xs text-corp-text-muted",children:[n.sku," \xb7 ",n.cat]})]}),(0,Et.jsx)("div",{className:"flex gap-2",children:i?(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsx)("button",{onClick:async()=>{try{await a(n.id,l),o(!1)}catch(e){console.error("Error saving:",e),alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f")}},className:"rounded-full bg-green-600 px-3 py-1 text-sm text-white",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"}),(0,Et.jsx)("button",{onClick:()=>o(!1),className:"rounded-full bg-slate-400 px-3 py-1 text-sm text-white",children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"})]}):(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsx)("button",{onClick:()=>o(!0),className:"rounded-full bg-blue-600 px-3 py-1 text-sm text-white",children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"}),(0,Et.jsx)("button",{onClick:s,className:"rounded-full bg-slate-900 px-3 py-1 text-sm text-white",children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,Et.jsx)("img",{src:xs(n.cover),alt:n.name,className:"md:col-span-1 h-32 w-full rounded-xl object-cover",onError:gs}),(0,Et.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,Et.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,Et.jsxs)(ho,{tone:co.ok.tone,children:["\u0412\u0441\u044c\u043e\u0433\u043e ",n.total]}),(0,Et.jsxs)(ho,{tone:co.ok.tone,children:["\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u043e ",n.available]}),(0,Et.jsxs)(ho,{tone:co.fragile.tone,children:["\u0420\u0435\u0437\u0435\u0440\u0432 ",n.reserved]}),(0,Et.jsxs)(ho,{tone:co.damaged.tone,children:["\u0412 \u043e\u0440\u0435\u043d\u0434\u0456 ",n.rented]}),(0,Et.jsx)(ho,{tone:co[n.state].tone,children:co[n.state].label}),(0,Et.jsx)(ho,{tone:uo[n.cleaning.status].tone,children:uo[n.cleaning.status].label})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:[(0,Et.jsx)(po,{title:"\u0420\u043e\u0437\u0442\u0430\u0448\u0443\u0432\u0430\u043d\u043d\u044f",children:i?(0,Et.jsx)("div",{className:"space-y-2",children:(0,Et.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Et.jsx)("input",{value:l.location.zone,onChange:e=>d(c(c({},l),{},{location:c(c({},l.location),{},{zone:e.target.value})})),placeholder:"\u0417\u043e\u043d\u0430",className:"rounded border px-2 py-1 text-sm"}),(0,Et.jsx)("input",{value:l.location.aisle,onChange:e=>d(c(c({},l),{},{location:c(c({},l.location),{},{aisle:e.target.value})})),placeholder:"\u0420\u044f\u0434",className:"rounded border px-2 py-1 text-sm"}),(0,Et.jsx)("input",{value:l.location.shelf,onChange:e=>d(c(c({},l),{},{location:c(c({},l.location),{},{shelf:e.target.value})})),placeholder:"\u041f\u043e\u043b\u0438\u0446\u044f",className:"rounded border px-2 py-1 text-sm"}),(0,Et.jsx)("input",{value:l.location.bin,onChange:e=>d(c(c({},l),{},{location:c(c({},l.location),{},{bin:e.target.value})})),placeholder:"\u0411\u043e\u043a\u0441",className:"rounded border px-2 py-1 text-sm"})]})}):(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsxs)("div",{className:"text-sm",children:["\u0417\u043e\u043d\u0430 ",n.location.zone," / \u0420\u044f\u0434 ",n.location.aisle," / \u041f\u043e\u043b\u0438\u0446\u044f ",n.location.shelf," / \u0411\u043e\u043a\u0441 ",n.location.bin]}),(0,Et.jsx)("div",{className:"mt-2 flex gap-2",children:(0,Et.jsx)("button",{className:"rounded-md border px-2 py-1 text-xs",onClick:()=>alert("\u041d\u0430\u0434\u0440\u0443\u043a\u0443\u0432\u0430\u0442\u0438 \u0435\u0442\u0438\u043a\u0435\u0442\u043a\u0443 (\u043c\u043e\u043a)"),children:"\u0415\u0442\u0438\u043a\u0435\u0442\u043a\u0430"})})]})}),(0,Et.jsx)(po,{title:"\u0427\u0438\u0441\u0442\u043a\u0430 / \u0420\u0435\u043c\u043e\u043d\u0442",children:i?(0,Et.jsxs)("div",{className:"space-y-2",children:[(0,Et.jsxs)("select",{value:l.cleaning.status,onChange:e=>d(c(c({},l),{},{cleaning:c(c({},l.cleaning),{},{status:e.target.value})})),className:"w-full rounded border px-2 py-1 text-sm",children:[(0,Et.jsx)("option",{value:"clean",children:"\u0427\u0438\u0441\u0442\u0435"}),(0,Et.jsx)("option",{value:"wash",children:"\u041d\u0430 \u043c\u0438\u0439\u0446\u0456"}),(0,Et.jsx)("option",{value:"dry",children:"\u0421\u0443\u0448\u043a\u0430"}),(0,Et.jsx)("option",{value:"repair",children:"\u0420\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f"})]}),(0,Et.jsxs)("select",{value:l.state,onChange:e=>d(c(c({},l),{},{state:e.target.value})),className:"w-full rounded border px-2 py-1 text-sm",children:[(0,Et.jsx)("option",{value:"ok",children:"\u0412 \u043d\u0430\u044f\u0432\u043d\u043e\u0441\u0442\u0456"}),(0,Et.jsx)("option",{value:"fragile",children:"\u041a\u0440\u0438\u0445\u043a\u0435"}),(0,Et.jsx)("option",{value:"damaged",children:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043e"})]})]}):(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsxs)("div",{className:"text-sm",children:["\u0421\u0442\u0430\u0442\u0443\u0441: ",uo[n.cleaning.status].label]}),(0,Et.jsxs)("div",{className:"text-xs text-corp-text-muted",children:["\u041e\u0441\u0442\u0430\u043d\u043d\u0454 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044f: ",n.cleaning.last]})]})})]})]})]}),(0,Et.jsxs)("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,Et.jsx)(po,{title:"\u0423 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u0456 / \u0440\u0435\u0437\u0435\u0440\u0432\u0456",children:(0,Et.jsxs)("div",{className:"space-y-2 text-sm",children:[n.due_back.map(e=>(0,Et.jsxs)("div",{className:"flex items-center justify-between rounded-lg border px-2 py-1",children:[(0,Et.jsxs)("div",{children:["#",e.order_id," \xb7 ",e.customer," \xb7 ",e.qty," \u0448\u0442"]}),(0,Et.jsxs)("div",{className:"text-xs text-corp-text-muted",children:["\u0434\u043e ",e.date]})]},e.order_id)),0===n.due_back.length&&(0,Et.jsx)("div",{className:"text-sm text-corp-text-muted",children:"\u041f\u043e\u0440\u043e\u0436\u043d\u044c\u043e"})]})}),(0,Et.jsx)(po,{title:"\u0428\u0442\u0440\u0438\u0445\u2011\u043a\u043e\u0434\u0438 / \u043e\u0434\u0438\u043d\u0438\u0446\u0456",children:(0,Et.jsxs)("div",{className:"space-y-2",children:[n.barcodes.map(e=>(0,Et.jsxs)("div",{className:"flex items-center justify-between rounded-lg border px-2 py-1 text-sm",children:[(0,Et.jsx)("div",{children:e}),(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("button",{className:"rounded-md border px-2 py-0.5 text-xs",onClick:()=>alert("\u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0438\u0442\u0438 \u0441\u0442\u0430\u043d (\u043c\u043e\u043a)"),children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,Et.jsx)("button",{className:"rounded-md border px-2 py-0.5 text-xs",onClick:()=>alert("\u041f\u0435\u0440\u0435\u043c\u0456\u0441\u0442\u0438\u0442\u0438 \u043e\u0434\u0438\u043d\u0438\u0446\u044e (\u043c\u043e\u043a)"),children:"Move"})]})]},e)),0===n.barcodes.length&&(0,Et.jsx)("div",{className:"text-sm text-corp-text-muted",children:"\u041d\u0435\u043c\u0430\u0454 \u0434\u0430\u043d\u0438\u0445"})]})}),(0,Et.jsx)(po,{title:"\u0412\u0430\u0440\u0456\u0430\u043d\u0442\u0438 / \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0438",children:(0,Et.jsxs)("div",{className:"flex flex-wrap gap-2 text-sm",children:[n.variants&&n.variants.map(e=>(0,Et.jsx)("span",{className:"rounded-md border px-2 py-1",children:e.label},e.code)),(!n.variants||0===n.variants.length)&&(0,Et.jsx)("div",{className:"text-sm text-corp-text-muted",children:"\u041d\u0435\u043c\u0430\u0454 \u0432\u0430\u0440\u0456\u0430\u043d\u0442\u0456\u0432"})]})}),(0,Et.jsx)(po,{title:"\ud83d\udd28 \u0406\u0441\u0442\u043e\u0440\u0456\u044f \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u044c (".concat(u.length,")"),children:m?(0,Et.jsx)("div",{className:"text-sm text-slate-400",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."}):u.length>0?(0,Et.jsx)("div",{className:"max-h-48 space-y-2 overflow-y-auto text-sm",children:u.map(e=>{return(0,Et.jsx)("div",{className:"rounded-lg border p-2",children:(0,Et.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"font-medium text-corp-text-dark",children:e.damage_type}),(0,Et.jsxs)("div",{className:"text-xs text-corp-text-muted",children:[e.stage_label," \xb7 \u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f #",e.order_number]}),e.note&&(0,Et.jsx)("div",{className:"mt-1 text-xs text-corp-text-main",children:e.note})]}),(0,Et.jsxs)("div",{className:"text-right",children:[(0,Et.jsxs)("div",{className:"text-sm font-semibold ".concat("high"===e.severity?"text-red-600":"medium"===e.severity?"text-amber-600":"text-green-600"),children:["\u20b4",(t=e.fee,(Number(t)||0).toLocaleString("uk-UA",{maximumFractionDigits:2}))]}),(0,Et.jsx)("div",{className:"text-xs text-slate-400",children:new Date(e.created_at).toLocaleDateString("uk-UA")})]})]})},e.id);var t})}):(0,Et.jsx)("div",{className:"text-sm text-corp-text-muted",children:"\u2705 \u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u044c \u043d\u0435 \u0437\u0430\u0444\u0456\u043a\u0441\u043e\u0432\u0430\u043d\u043e"})})]})]})]})}function bo(){const[e,r]=(0,t.useState)([]),[n,s]=(0,t.useState)(!0),[a,i]=(0,t.useState)(""),[o,l]=(0,t.useState)("all"),[d,u]=(0,t.useState)("all"),[h,m]=(0,t.useState)("all"),[p,f]=(0,t.useState)({open:!1,item:null}),[x,g]=(0,t.useState)({open:!1,families:[],selectedFamily:null}),[b,y]=(0,t.useState)([]),[v,w]=(0,t.useState)(""),[N,j]=(0,t.useState)(null),[_,C]=(0,t.useState)(!1),S=ge();(0,t.useEffect)(()=>{(async()=>{try{s(!0),console.log("[Catalog] Loading from:",oo);let e="".concat(oo,"/api/catalog?include_reservations=true");a&&(e+="&search=".concat(encodeURIComponent(a))),console.log("[Catalog] Fetching:",e);const t=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},mode:"cors",credentials:"omit"});if(console.log("[Catalog] Response status:",t.status),!t.ok){const e=await t.text();throw console.error("[Catalog] Error response:",e),new Error("HTTP error! status: ".concat(t.status))}const n=await t.json();console.log("[Catalog] Loaded products:",n.length),r(n)}catch(e){console.error("[Catalog] Error loading catalog:",e),alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0443: ".concat(e.message))}finally{s(!1)}})()},[a]);const E=(0,t.useMemo)(()=>[...new Set(e.map(e=>e.category_name||e.cat).filter(Boolean))].sort(),[e]),A=(0,t.useMemo)(()=>e.filter(e=>{const t="all"===o||e.cat===o||e.category_name===o,r="all"===d||e.state===d,n="all"===h||e.cleaning.status===h;return t&&r&&n}),[e,o,d,h]),I=(0,t.useMemo)(()=>e.filter(e=>{var t;return"repair"===(null===(t=e.cleaning)||void 0===t?void 0:t.status)}).length,[e]),k=async()=>{try{const e=await fetch("".concat(oo,"/api/catalog/families")),t=await e.json();g({open:!0,families:t,selectedFamily:null})}catch(e){console.error("Error loading families:",e),g({open:!0,families:[],selectedFamily:null})}};return(0,Et.jsxs)("div",{className:"mx-auto max-w-7xl p-6",children:[(0,Et.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433 / \u0406\u043d\u0432\u0435\u043d\u0442\u0430\u0440"}),I>0&&(0,Et.jsxs)(ho,{tone:uo.repair.tone,children:["\ud83d\udd27 ",I," \u0432 \u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u0457"]})]}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsx)("button",{className:"rounded-full bg-blue-600 text-white px-3 py-1 text-sm font-medium hover:bg-blue-700 flex items-center gap-1",onClick:()=>C(!0),children:"\ud83d\udcf7 \u0421\u043a\u0430\u043d\u0443\u0432\u0430\u0442\u0438 SKU"}),(0,Et.jsx)("button",{className:"rounded-full bg-purple-500 text-white px-3 py-1 text-sm font-medium hover:bg-purple-600",onClick:k,children:"\ud83d\udd17 \u041a\u0435\u0440\u0443\u0432\u0430\u0442\u0438 \u043d\u0430\u0431\u043e\u0440\u0430\u043c\u0438"}),(0,Et.jsx)("button",{className:"rounded-full bg-slate-200 px-3 py-1 text-sm",onClick:()=>S("/"),children:"\u2190 \u041d\u0430\u0437\u0430\u0434"}),(0,Et.jsx)("button",{className:"rounded-full bg-slate-200 px-3 py-1 text-sm",onClick:()=>alert("\u0415\u043a\u0441\u043f\u043e\u0440\u0442 CSV (\u043c\u043e\u043a)"),children:"\u0415\u043a\u0441\u043f\u043e\u0440\u0442"}),(0,Et.jsx)("button",{className:"rounded-full bg-slate-200 px-3 py-1 text-sm",onClick:()=>alert("\u0406\u043c\u043f\u043e\u0440\u0442 CSV (\u043c\u043e\u043a)"),children:"\u0406\u043c\u043f\u043e\u0440\u0442"})]})]}),(0,Et.jsx)(io,{isOpen:_,onClose:()=>C(!1),onScan:e=>{console.log("[Catalog] Scanned:",e),i(e),C(!1)},title:"\u0421\u043a\u0430\u043d\u0443\u0432\u0430\u043d\u043d\u044f SKU \u0442\u043e\u0432\u0430\u0440\u0443"}),(0,Et.jsx)(fo,{q:a,setQ:i,cat:o,setCat:l,state:d,setState:u,clean:h,setClean:m,categories:E}),(0,Et.jsx)("div",{className:"mt-4",children:(0,Et.jsx)(xo,{rows:A,onOpen:e=>f({open:!0,item:e}),loading:n})}),(0,Et.jsx)(go,{open:p.open,item:p.item,onClose:()=>f({open:!1,item:null}),onSave:async(e,t)=>{try{console.log("[Catalog] Saving product:",e,t);const n=await fetch("".concat(oo,"/api/catalog/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},mode:"cors",credentials:"omit",body:JSON.stringify(t)});if(console.log("[Catalog] Save response status:",n.status),!n.ok){const e=await n.text();throw console.error("[Catalog] Save error:",e),new Error("HTTP error! status: ".concat(n.status))}const s=await fetch("".concat(oo,"/api/catalog?include_reservations=true"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},mode:"cors",credentials:"omit"}),a=await s.json();r(a);const i=a.find(t=>t.id===e);i&&f({open:!0,item:i}),alert("\u2705 \u0422\u043e\u0432\u0430\u0440 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e")}catch(n){throw console.error("[Catalog] Error saving product:",n),alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f: ".concat(n.message)),n}}}),x.open&&(0,Et.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Et.jsxs)("div",{className:"bg-white rounded-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col p-6",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Et.jsx)("h2",{className:"text-2xl font-bold",children:"\ud83d\udd17 \u041a\u0435\u0440\u0443\u0432\u0430\u043d\u043d\u044f \u043d\u0430\u0431\u043e\u0440\u0430\u043c\u0438"}),(0,Et.jsx)("button",{onClick:()=>g(c(c({},x),{},{open:!1})),className:"text-slate-400 hover:text-corp-text-main text-2xl",children:"\xd7"})]}),(0,Et.jsx)("button",{onClick:async()=>{const e=prompt("\u041d\u0430\u0437\u0432\u0430 \u043d\u0430\u0431\u043e\u0440\u0443:");if(!e)return;const t=prompt("\u041e\u043f\u0438\u0441 \u043d\u0430\u0431\u043e\u0440\u0443 (\u043e\u043f\u0446\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u043e):");try{if(!(await fetch("".concat(oo,"/api/catalog/families"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,description:t})})).ok)throw new Error("Failed to create family");alert("\u2705 \u041d\u0430\u0431\u0456\u0440 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e!"),k()}catch(r){console.error("Error creating family:",r),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f \u043d\u0430\u0431\u043e\u0440\u0443")}},className:"mb-4 px-4 py-2 bg-emerald-500 text-white rounded-lg font-medium hover:bg-emerald-600",children:"+ \u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u043d\u043e\u0432\u0438\u0439 \u043d\u0430\u0431\u0456\u0440"}),(0,Et.jsxs)("div",{className:"flex-1 overflow-auto",children:[(0,Et.jsx)("div",{className:"space-y-4 mb-6",children:0===x.families.length?(0,Et.jsx)("div",{className:"text-center text-corp-text-muted py-8",children:"\u041d\u0435\u043c\u0430\u0454 \u043d\u0430\u0431\u043e\u0440\u0456\u0432. \u0421\u0442\u0432\u043e\u0440\u0456\u0442\u044c \u043f\u0435\u0440\u0448\u0438\u0439 \u043d\u0430\u0431\u0456\u0440!"}):x.families.map(e=>(0,Et.jsxs)("div",{className:"border border-slate-200 rounded-lg p-4 bg-slate-50",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Et.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsxs)("button",{onClick:()=>(async e=>{if(0!==b.length)try{if(!(await fetch("".concat(oo,"/api/catalog/families/").concat(e,"/assign"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_ids:b})})).ok)throw new Error("Failed to assign products");alert("\u2705 ".concat(b.length," \u0442\u043e\u0432\u0430\u0440\u0456\u0432 \u043f\u0440\u0438\u0432'\u044f\u0437\u0430\u043d\u043e \u0434\u043e \u043d\u0430\u0431\u043e\u0440\u0443!")),y([]);const t=await fetch("".concat(oo,"/api/catalog?include_reservations=true")),n=await t.json();r(n),await k()}catch(t){console.error("Error assigning products:",t),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438\u0432'\u044f\u0437\u0443\u0432\u0430\u043d\u043d\u044f")}else alert("\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u0438 \u0434\u043b\u044f \u0437\u0432'\u044f\u0437\u0443\u0432\u0430\u043d\u043d\u044f")})(e.id),disabled:0===b.length,className:lo("px-3 py-1 rounded text-sm transition-colors",b.length>0?"bg-blue-500 text-white hover:bg-blue-600":"bg-slate-300 text-corp-text-muted cursor-not-allowed"),children:["\u041f\u0440\u0438\u0432'\u044f\u0437\u0430\u0442\u0438 \u043e\u0431\u0440\u0430\u043d\u0456 (",b.length,")"]}),(0,Et.jsx)("button",{onClick:async()=>{if(confirm('\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043d\u0430\u0431\u0456\u0440 "'.concat(e.name,'"?')))try{if(!(await fetch("".concat(oo,"/api/catalog/families/").concat(e.id),{method:"DELETE"})).ok)throw new Error("Failed to delete family");alert("\u2705 \u041d\u0430\u0431\u0456\u0440 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e!"),await k()}catch(t){console.error("Error deleting family:",t),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f \u043d\u0430\u0431\u043e\u0440\u0443")}},className:"px-3 py-1 rounded text-sm bg-rose-500 text-white hover:bg-rose-600 transition-colors",children:"\ud83d\uddd1\ufe0f \u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})]})]}),e.description&&(0,Et.jsx)("p",{className:"text-sm text-corp-text-main mb-2",children:e.description}),(0,Et.jsxs)("div",{className:"mt-3",children:[(0,Et.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-2",children:"\u0422\u043e\u0432\u0430\u0440\u0438 \u0432 \u043d\u0430\u0431\u043e\u0440\u0456:"}),(0,Et.jsx)("div",{className:lo("min-h-[100px] rounded-lg p-2 transition-colors",e.products&&e.products.length>0?"grid grid-cols-2 gap-2":"border-2 border-dashed border-slate-300 flex items-center justify-center"),onDragOver:e=>{e.preventDefault(),e.currentTarget.classList.add("bg-blue-50","border-blue-400")},onDragLeave:e=>{e.currentTarget.classList.remove("bg-blue-50","border-blue-400")},onDrop:async t=>{t.preventDefault(),t.currentTarget.classList.remove("bg-blue-50","border-blue-400");const r=t.dataTransfer.getData("productId");if(r)try{if(!(await fetch("".concat(oo,"/api/catalog/families/").concat(e.id,"/assign"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_ids:[parseInt(r)]})})).ok)throw new Error("Failed to assign product");const t=await fetch("".concat(oo,"/api/catalog/families")),n=await t.json();g(c(c({},x),{},{families:n})),alert("\u2705 \u0422\u043e\u0432\u0430\u0440 \u0434\u043e\u0434\u0430\u043d\u043e \u0434\u043e \u043d\u0430\u0431\u043e\u0440\u0443!")}catch(n){console.error("Error assigning product:",n),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0434\u043e\u0434\u0430\u0432\u0430\u043d\u043d\u044f \u0442\u043e\u0432\u0430\u0440\u0443")}},children:e.products&&e.products.length>0?e.products.map(e=>(0,Et.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-white rounded border border-slate-200 hover:shadow-sm transition-shadow",children:[e.cover?(0,Et.jsx)("img",{src:xs(e.cover),alt:e.name,className:"w-12 h-12 object-cover rounded bg-slate-100",onError:gs}):null,(0,Et.jsx)("div",{className:"w-12 h-12 bg-slate-100 rounded flex items-center justify-center text-2xl",style:{display:"none"},children:"\ud83d\udce6"}),(0,Et.jsxs)("div",{className:"flex-1 text-sm",children:[(0,Et.jsx)("div",{className:"font-medium text-corp-text-dark",children:e.name}),(0,Et.jsxs)("div",{className:"text-xs text-corp-text-muted",children:["SKU: ",e.sku]})]}),(0,Et.jsx)("button",{onClick:()=>(async e=>{try{if(!(await fetch("".concat(oo,"/api/catalog/products/").concat(e,"/remove-family"),{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to remove product");alert("\u2705 \u0422\u043e\u0432\u0430\u0440 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e \u0437 \u043d\u0430\u0431\u043e\u0440\u0443!");const t=await fetch("".concat(oo,"/api/catalog?include_reservations=true")),n=await t.json();r(n),await k()}catch(t){console.error("Error removing product:",t),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430")}})(e.product_id),className:"text-rose-500 hover:text-rose-700 hover:bg-rose-50 rounded-full w-6 h-6 flex items-center justify-center text-xl transition-colors",children:"\xd7"})]},e.product_id)):(0,Et.jsxs)("div",{className:"text-sm text-slate-400 text-center py-4",children:[(0,Et.jsx)("div",{className:"text-2xl mb-2",children:"\ud83d\udce6"}),(0,Et.jsx)("div",{children:"\u041f\u0435\u0440\u0435\u0442\u044f\u0433\u043d\u0456\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u0438 \u0441\u044e\u0434\u0438"}),(0,Et.jsx)("div",{className:"text-xs",children:'\u0430\u0431\u043e \u043e\u0431\u0435\u0440\u0456\u0442\u044c \u043d\u0438\u0436\u0447\u0435 \u0456 \u043d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c "\u041f\u0440\u0438\u0432\'\u044f\u0437\u0430\u0442\u0438"'})]})})]})]},e.id))}),(0,Et.jsxs)("div",{className:"border-t pt-4",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Et.jsx)("h3",{className:"font-semibold",children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u0438 \u0434\u043b\u044f \u043f\u0440\u0438\u0432'\u044f\u0437\u0443\u0432\u0430\u043d\u043d\u044f:"}),b.length>0&&(0,Et.jsxs)("button",{onClick:()=>y([]),className:"text-sm text-corp-text-muted hover:text-slate-700",children:["\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438 \u0432\u0438\u0431\u0456\u0440 (",b.length,")"]})]}),(0,Et.jsx)("div",{className:"mb-3",children:(0,Et.jsx)("input",{type:"text",value:v,onChange:e=>w(e.target.value),placeholder:"\ud83d\udd0d \u041f\u043e\u0448\u0443\u043a \u043f\u043e SKU \u0430\u0431\u043e \u043d\u0430\u0437\u0432\u0456...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,Et.jsx)("div",{className:"grid grid-cols-3 gap-2 max-h-64 overflow-auto bg-slate-50 p-3 rounded-lg",children:e.filter(e=>{var t,r;if(!v)return!0;const n=v.toLowerCase();return(null===(t=e.sku)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(r=e.name)||void 0===r?void 0:r.toLowerCase().includes(n))}).sort((e,t)=>(t.product_id||0)-(e.product_id||0)).map(e=>(0,Et.jsxs)("label",{className:lo("flex items-center gap-2 p-2 border rounded cursor-move transition-all relative",b.includes(e.product_id)?"bg-blue-50 border-blue-300 shadow-sm":"bg-white border-slate-200 hover:bg-slate-50 hover:shadow-md"),draggable:!0,onDragStart:t=>{t.dataTransfer.setData("productId",e.product_id.toString()),t.currentTarget.style.opacity="0.5"},onDragEnd:e=>{e.currentTarget.style.opacity="1"},children:[(0,Et.jsx)("input",{type:"checkbox",checked:b.includes(e.product_id),onChange:t=>{t.target.checked?y([...b,e.product_id]):y(b.filter(t=>t!==e.product_id))},className:"h-4 w-4 text-blue-600"}),e.cover?(0,Et.jsx)("img",{src:xs(e.cover),alt:e.name,className:"w-8 h-8 object-cover rounded bg-slate-100",onError:gs}):(0,Et.jsx)("div",{className:"w-8 h-8 bg-slate-100 rounded flex items-center justify-center text-xs",children:"\ud83d\udce6"}),(0,Et.jsxs)("div",{className:"text-xs flex-1 min-w-0",children:[(0,Et.jsx)("div",{className:"font-medium truncate",children:e.name}),(0,Et.jsx)("div",{className:"text-corp-text-muted",children:e.sku})]})]},e.product_id))})]})]})]})})]})}const yo="https://backrentalhub.farforrent.com.ua",vo=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")},wo=e=>(Number(e)||0).toLocaleString("uk-UA",{maximumFractionDigits:2});function No(e){let{tone:t="slate",children:r}=e;return(0,Et.jsx)("span",{className:{slate:"corp-badge corp-badge-neutral",green:"corp-badge corp-badge-success",amber:"corp-badge corp-badge-warning",red:"corp-badge corp-badge-error",blue:"corp-badge corp-badge-info",violet:"corp-badge corp-badge-primary"}[t],children:r})}function jo(e){let{tone:t="slate",onClick:r,children:n,disabled:s=!1}=e;return(0,Et.jsx)("button",{disabled:s,onClick:r,className:vo({slate:"corp-btn corp-btn-secondary",green:"corp-btn corp-btn-primary",red:"corp-btn corp-btn-secondary text-corp-error hover:bg-corp-error hover:text-white",blue:"corp-btn corp-btn-primary",yellow:"corp-btn corp-btn-gold"}[t],"disabled:opacity-50"),children:n})}function _o(e){let{title:t,right:r=null,children:n}=e;return(0,Et.jsxs)("div",{className:"corp-card",children:[(0,Et.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,Et.jsx)("h3",{className:"text-base font-semibold text-corp-text-dark",children:t}),r]}),n]})}const Co=e=>["prepayment","payment"].includes(e.type),So=e=>["rent","balance_due","damage","rent_accrual"].includes(e.type),Eo=e=>"deposit_hold"===e.type,Ao=e=>"deposit_release"===e.type,Io=e=>"deposit_writeoff"===e.type;function ko(e){const t=e.filter(Eo).reduce((e,t)=>e+(t.credit||0),0),r=e.filter(Ao).reduce((e,t)=>e+(t.amount||0),0),n=e.filter(Io).reduce((e,t)=>e+(t.amount||0),0);return Math.max(0,t-r-n)}function To(e){const t={};return e.forEach(e=>{const r=e.currency||"UAH";"deposit_hold"===e.type&&(t[r]=(t[r]||0)+(e.credit||0)),"deposit_release"!==e.type&&"deposit_writeoff"!==e.type||(t[r]=(t[r]||0)-(e.amount||0))}),Object.keys(t).forEach(e=>{t[e]<=0&&delete t[e]}),t}function Do(e){const t=e.filter(So).reduce((e,t)=>e+(t.debit||0),0),r=e.filter(Co).reduce((e,t)=>e+(t.credit||0),0);return Math.max(0,t-r)}function Ro(e){var r;let{orderId:n,rows:s,onAddPayment:a,onAddDeposit:i,onWriteoff:o,onReleaseDeposit:l,onAddDamage:d,onCollapse:u,onDelete:h,onRefund:m}=e;const p=s.filter(e=>e.order_id===n),f=ko(p),x=To(p),g=Do(p),[b,y]=(0,t.useState)(""),[v,w]=(0,t.useState)(!1),N=p.length>0&&p[0].expected_deposit||0,j="cancelled"===((null===(r=p[0])||void 0===r?void 0:r.order_status)||null),_=p.filter(Co).reduce((e,t)=>e+(t.credit||0),0),C=p.filter(e=>"refund"===e.type).reduce((e,t)=>e+(t.debit||0),0),S=C>0,E=p.filter(e=>"deposit_release"===e.type).reduce((e,t)=>e+(t.amount||0),0)>0&&0===f,A=(0,t.useMemo)(()=>{if(0===p.length)return{damage_fee:0,manager_notes:""};const e=p[0];return{damage_fee:e.damage_fee||0,manager_notes:e.manager_comment||""}},[p]),[I,k]=(0,t.useState)({amount:g>0?g:500,method:"cash",note:""}),[T,D]=(0,t.useState)({code:"UAH",amount:3e3}),[R,O]=(0,t.useState)({amount:0,note:""});(0,t.useEffect)(()=>{A.damage_fee>0&&O({amount:A.damage_fee,note:A.manager_notes})},[A.damage_fee,A.manager_notes]),(0,t.useEffect)(()=>{g>0&&k(e=>c(c({},e),{},{amount:g}))},[g]);return(0,Et.jsxs)(_o,{title:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f #".concat(n),right:(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)(jo,{tone:"slate",onClick:async()=>{try{window.open("".concat(yo,"/api/manager/finance/report/").concat(n,"/pdf"),"_blank")}catch(zd){alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0432\u0456\u0434\u043a\u0440\u0438\u0442\u0442\u044f PDF")}},children:"\ud83d\udda8\ufe0f \u0420\u043e\u0437\u0434\u0440\u0443\u043a\u0443\u0432\u0430\u0442\u0438"}),(0,Et.jsx)(jo,{tone:"blue",onClick:()=>w(!0),children:"\ud83d\udce7 Email"}),(0,Et.jsx)(jo,{tone:"red",onClick:()=>h(n),children:"\ud83d\uddd1\ufe0f \u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"}),(0,Et.jsx)(No,{tone:g>0?"amber":"green",children:g>0?"\u0411\u043e\u0440\u0433 \u20b4 ".concat(wo(g)):"\u0411\u043e\u0440\u0433\u0456\u0432 \u043d\u0435\u043c\u0430\u0454"}),(0,Et.jsx)("button",{onClick:u,className:"text-slate-400 hover:text-corp-text-main",children:"\u2715"})]}),children:[(0,Et.jsxs)("div",{className:"grid gap-4 md:grid-cols-5",children:[(0,Et.jsxs)("div",{className:"corp-stat-card",children:[(0,Et.jsx)("div",{className:"corp-stat-label",children:"\u041d\u0430\u0440\u0430\u0445\u043e\u0432\u0430\u043d\u043e"}),(0,Et.jsxs)("div",{className:"corp-stat-value text-corp-text-dark",children:["\u20b4 ",wo(p.filter(So).reduce((e,t)=>e+(t.debit||0),0))]})]}),(0,Et.jsxs)("div",{className:"corp-stat-card",children:[(0,Et.jsx)("div",{className:"corp-stat-label",children:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e"}),(0,Et.jsxs)("div",{className:"corp-stat-value text-corp-success",children:["\u20b4 ",wo(p.filter(Co).reduce((e,t)=>e+(t.credit||0),0))]})]}),(0,Et.jsxs)("div",{className:"corp-stat-card border-corp-primary bg-blue-50",children:[(0,Et.jsx)("div",{className:"corp-stat-label text-corp-primary",children:"\u041e\u0447\u0456\u043a\u0443\u0432\u0430\u043d\u0430 \u0437\u0430\u0441\u0442\u0430\u0432\u0430"}),(0,Et.jsxs)("div",{className:"text-lg font-semibold text-corp-primary",children:["\u20b4 ",wo(N)]}),(0,Et.jsx)("div",{className:"text-[10px] text-corp-primary opacity-70 mt-0.5",children:"\u0440\u043e\u0437\u0440\u0430\u0445\u0443\u043d\u043a\u043e\u0432\u0430"})]}),(0,Et.jsxs)("div",{className:"rounded-xl border border-emerald-300 bg-emerald-50 p-3",children:[(0,Et.jsx)("div",{className:"text-xs text-emerald-600 font-medium",children:"\u0424\u0430\u043a\u0442\u0438\u0447\u043d\u0430 \u0437\u0430\u0441\u0442\u0430\u0432\u0430"}),Object.keys(x).length>0?(0,Et.jsx)("div",{className:"space-y-1",children:Object.entries(x).map(e=>{let[t,r]=e;return r>0&&(0,Et.jsxs)("div",{className:"text-base font-semibold text-emerald-800",children:["UAH"===t?"\u20b4":"USD"===t?"$":"\u20ac"," ",wo(r)," ","UAH"!==t&&(0,Et.jsx)("span",{className:"text-xs text-emerald-600",children:t})]},t)})}):(0,Et.jsx)("div",{className:"text-lg font-semibold text-slate-400",children:"\u20b4 0"}),(0,Et.jsx)("div",{className:"text-[10px] text-emerald-500 mt-0.5",children:"\u043f\u0440\u0438\u0439\u043d\u044f\u0442\u043e \u0432\u0456\u0434 \u043a\u043b\u0456\u0454\u043d\u0442\u0430"})]}),(0,Et.jsxs)("div",{className:"rounded-xl border border-slate-200 p-3",children:[(0,Et.jsx)("div",{className:"text-xs text-corp-text-muted",children:"\u0414\u043e \u0441\u043f\u043b\u0430\u0442\u0438"}),(0,Et.jsxs)("div",{className:vo("text-xl font-semibold",g>0&&"text-rose-600"),children:["\u20b4 ",wo(g)]})]})]}),(0,Et.jsxs)("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[(0,Et.jsxs)(_o,{title:"\u041f\u0440\u0438\u0439\u043e\u043c \u043e\u043f\u043b\u0430\u0442\u0438 (\u0433\u043e\u0442\u0456\u0432\u043a\u0430 / WayForPay / \u0424\u041e\u041f)",right:(0,Et.jsx)(No,{tone:"green",children:"\u0432 \u043a\u0430\u0441\u0443"}),children:[(0,Et.jsxs)("div",{className:"grid gap-2 md:grid-cols-5",children:[(0,Et.jsxs)("select",{className:"rounded-xl border px-3 py-2",value:I.method,onChange:e=>k(c(c({},I),{},{method:e.target.value})),children:[(0,Et.jsx)("option",{value:"cash",children:"\u0413\u043e\u0442\u0456\u0432\u043a\u0430"}),(0,Et.jsx)("option",{value:"wayforpay",children:"WayForPay"}),(0,Et.jsx)("option",{value:"bank_transfer",children:"\u041f\u0435\u0440\u0435\u043a\u0430\u0437 \u043d\u0430 \u0424\u041e\u041f"}),(0,Et.jsx)("option",{value:"card",children:"\u041a\u0430\u0440\u0442\u0430"})]}),(0,Et.jsx)("input",{className:"rounded-xl border px-3 py-2",type:"number",value:I.amount,onChange:e=>k(c(c({},I),{},{amount:Number(e.target.value)})),placeholder:"\u0421\u0443\u043c\u0430"}),(0,Et.jsx)("input",{className:"md:col-span-3 rounded-xl border px-3 py-2",value:I.note,onChange:e=>k(c(c({},I),{},{note:e.target.value})),placeholder:"\u041f\u0440\u0438\u043c\u0456\u0442\u043a\u0430"})]}),(0,Et.jsx)("div",{className:"mt-3",children:(0,Et.jsx)(jo,{tone:"green",onClick:()=>a(n,I),children:"\u0417\u0430\u0440\u0430\u0445\u0443\u0432\u0430\u0442\u0438 \u043e\u043f\u043b\u0430\u0442\u0443"})})]}),(0,Et.jsxs)(_o,{title:"\u041f\u0440\u0438\u0439\u043e\u043c \u0437\u0430\u0441\u0442\u0430\u0432\u0438",right:(0,Et.jsx)(No,{tone:"blue",children:"\u0445\u043e\u043b\u0434"}),children:[(0,Et.jsxs)("div",{className:"grid gap-2 md:grid-cols-3",children:[(0,Et.jsxs)("select",{className:"rounded-xl border px-3 py-2",value:T.code,onChange:e=>D(c(c({},T),{},{code:e.target.value})),children:[(0,Et.jsx)("option",{value:"UAH",children:"UAH"}),(0,Et.jsx)("option",{value:"USD",children:"USD"}),(0,Et.jsx)("option",{value:"EUR",children:"EUR"})]}),(0,Et.jsx)("input",{className:"md:col-span-2 rounded-xl border px-3 py-2",type:"number",value:T.amount,onChange:e=>D(c(c({},T),{},{amount:Number(e.target.value)})),placeholder:"\u0421\u0443\u043c\u0430"})]}),(0,Et.jsx)("div",{className:"mt-3",children:(0,Et.jsx)(jo,{tone:"blue",onClick:()=>i(n,T),children:"\u041f\u0440\u0438\u0439\u043d\u044f\u0442\u0438 \u0437\u0430\u0441\u0442\u0430\u0432\u0443"})})]})]}),(0,Et.jsxs)("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[(0,Et.jsxs)(_o,{title:"\u0428\u043a\u043e\u0434\u0430 \u0432\u0456\u0434 \u0441\u043a\u043b\u0430\u0434\u0443/\u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f",right:(0,Et.jsx)(No,{tone:"amber",children:"\u0437 \u043a\u043e\u043c\u0456\u0440\u043d\u0438\u043a\u0430"}),children:[(0,Et.jsxs)("div",{className:"grid gap-2 md:grid-cols-5",children:[(0,Et.jsx)("input",{className:"rounded-xl border px-3 py-2",type:"number",value:R.amount,onChange:e=>O(c(c({},R),{},{amount:Number(e.target.value)})),placeholder:"\u0421\u0443\u043c\u0430 \u0437\u0431\u0438\u0442\u043a\u0456\u0432"}),(0,Et.jsx)("input",{className:"md:col-span-3 rounded-xl border px-3 py-2",value:R.note,onChange:e=>O(c(c({},R),{},{note:e.target.value})),placeholder:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440 / \u043a\u0435\u0439\u0441"}),(0,Et.jsx)(jo,{tone:"amber",onClick:()=>d(n,R),children:"\u041d\u0430\u0440\u0430\u0445\u0443\u0432\u0430\u0442\u0438 \u0437\u0431\u0438\u0442\u043a\u0438"})]}),(0,Et.jsx)("div",{className:"mt-2 text-xs text-corp-text-muted",children:"\u041f\u0456\u0441\u043b\u044f \u043d\u0430\u0440\u0430\u0445\u0443\u0432\u0430\u043d\u043d\u044f \u043c\u043e\u0436\u043d\u0430 \u0430\u0431\u043e \u0441\u043f\u0438\u0441\u0430\u0442\u0438 \u0447\u0430\u0441\u0442\u043a\u043e\u0432\u043e/\u043f\u043e\u0432\u043d\u0456\u0441\u0442\u044e \u0456\u0437 \u0437\u0430\u0441\u0442\u0430\u0432\u0438, \u0430\u0431\u043e \u0447\u0435\u043a\u0430\u0442\u0438 \u0434\u043e\u043f\u043b\u0430\u0442\u0443."})]}),(0,Et.jsxs)(_o,{title:"\u041e\u043f\u0435\u0440\u0430\u0446\u0456\u0457 \u0456\u0437 \u0437\u0430\u0441\u0442\u0430\u0432\u043e\u044e",children:[(0,Et.jsxs)("div",{className:"flex flex-wrap gap-2",children:[!j&&(0,Et.jsx)(jo,{tone:"red",onClick:()=>{if(Math.min(f,g)<=0)return alert("\u041d\u0435\u043c\u0430\u0454 \u0449\u043e \u0441\u043f\u0438\u0441\u0443\u0432\u0430\u0442\u0438");o(n,x,g)},children:"\u0421\u043f\u0438\u0441\u0430\u0442\u0438 \u0437 \u0437\u0430\u0441\u0442\u0430\u0432\u0438 (\u0434\u043e \u0441\u0443\u043c\u0438 \u0431\u043e\u0440\u0433\u0443)"}),E?(0,Et.jsx)(jo,{tone:"green",disabled:!0,children:"\u2713 \u0417\u0430\u0441\u0442\u0430\u0432\u0430 \u043f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0430"}):(0,Et.jsx)(jo,{tone:"yellow",onClick:()=>{if(f<=0)return alert("\u041d\u0435\u043c\u0430\u0454 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u0445\u043e\u043b\u0434\u0443");l(n,x)},children:"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0438 \u0437\u0430\u0441\u0442\u0430\u0432\u0443"}),j&&_>0&&(S?(0,Et.jsx)(jo,{tone:"green",disabled:!0,children:"\u2713 \u0413\u0440\u043e\u0448\u0456 \u043f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0456"}):(0,Et.jsxs)(jo,{tone:"red",onClick:()=>{confirm("\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0438 \u20b4".concat(wo(_)," \u043a\u043b\u0456\u0454\u043d\u0442\u0443?"))&&m(n,_)},children:["\ud83d\udcb0 \u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0438 \u20b4",wo(_)," \u043a\u043b\u0456\u0454\u043d\u0442\u0443"]}))]}),(0,Et.jsx)("div",{className:"mt-2 text-xs text-corp-text-muted",children:j&&_>0?S?(0,Et.jsxs)("span",{className:"text-emerald-600 font-medium",children:["\u2713 \u0413\u0440\u043e\u0448\u0456 \u043f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0456 \u043a\u043b\u0456\u0454\u043d\u0442\u0443 (\u20b4",wo(C),"). \u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u043f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0438 \u0432\u0441\u0456 \u0437\u0430\u0441\u0442\u0430\u0432\u0438."]}):(0,Et.jsxs)("span",{className:"text-rose-600 font-medium",children:["\u26a0\ufe0f \u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0441\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u043e! \u041d\u0435\u043e\u0431\u0445\u0456\u0434\u043d\u043e \u043f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0438 \u20b4",wo(_)," \u043a\u043b\u0456\u0454\u043d\u0442\u0443 \u0442\u0430 \u0432\u0441\u0456 \u0437\u0430\u0441\u0442\u0430\u0432\u0438."]}):"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u043f\u043e\u0432\u0435\u0440\u0442\u0430\u0454 \u0437\u0430\u043b\u0438\u0448\u043e\u043a \u0445\u043e\u043b\u0434\u0443. \u0421\u043f\u0438\u0441\u0430\u043d\u043d\u044f \u0441\u0442\u0432\u043e\u0440\u044e\u0454 \u043a\u0440\u0435\u0434\u0438\u0442\u043d\u0443 \u043f\u0440\u043e\u0432\u043e\u0434\u043a\u0443 \xabdeposit_writeoff\xbb \u0456 \u0437\u043c\u0435\u043d\u0448\u0443\u0454 \u0445\u043e\u043b\u0434."})]})]}),(0,Et.jsx)("div",{className:"mt-6",children:(0,Et.jsx)(_o,{title:"\u0416\u0443\u0440\u043d\u0430\u043b \u043f\u043e \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044e",children:(0,Et.jsx)("div",{className:"overflow-hidden rounded-xl border",children:(0,Et.jsxs)("table",{className:"min-w-full text-sm",children:[(0,Et.jsx)("thead",{className:"bg-slate-50 text-left text-corp-text-muted",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0414\u0430\u0442\u0430"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0422\u0438\u043f"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u041d\u0430\u0437\u0432\u0430"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u041c\u0435\u0442\u043e\u0434"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0414\u0435\u0431\u0435\u0442"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u041a\u0440\u0435\u0434\u0438\u0442"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0421\u0442\u0430\u0442\u0443\u0441"})]})}),(0,Et.jsx)("tbody",{children:p.map(e=>(0,Et.jsxs)("tr",{className:"border-t",children:[(0,Et.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:e.date}),(0,Et.jsx)("td",{className:"px-3 py-2",children:e.type}),(0,Et.jsx)("td",{className:"px-3 py-2",children:e.title}),(0,Et.jsx)("td",{className:"px-3 py-2",children:e.method||"\u2014"}),(0,Et.jsx)("td",{className:"px-3 py-2 text-rose-600",children:e.debit?"\u20b4 ".concat(wo(e.debit)):"\u2014"}),(0,Et.jsx)("td",{className:"px-3 py-2 text-emerald-700",children:e.credit?"\u20b4 ".concat(wo(e.credit)):e.amount?"\u20b4 ".concat(wo(e.amount)):"\u2014"}),(0,Et.jsx)("td",{className:"px-3 py-2",children:e.status})]},e.id))})]})})})}),v&&(0,Et.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Et.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full mx-4",children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0412\u0456\u0434\u043f\u0440\u0430\u0432\u0438\u0442\u0438 \u0444\u0456\u043d\u0430\u043d\u0441\u043e\u0432\u0438\u0439 \u0437\u0432\u0456\u0442 \u043d\u0430 email"}),(0,Et.jsx)("input",{type:"email",value:b,onChange:e=>y(e.target.value),placeholder:"example@email.com",className:"w-full rounded-xl border px-3 py-2 mb-4"}),(0,Et.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,Et.jsx)(jo,{tone:"slate",onClick:()=>w(!1),children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"}),(0,Et.jsx)(jo,{tone:"blue",onClick:async()=>{if(b)try{const e=await is.post("".concat(yo,"/api/manager/finance/report/").concat(n,"/email"),{email:b});alert(e.data.message+(e.data.note?"\n\n"+e.data.note:"")),w(!1)}catch(zd){alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043a\u0438 email")}else alert("\u0412\u0432\u0435\u0434\u0456\u0442\u044c email \u0434\u043b\u044f \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043a\u0438")},children:"\u0412\u0456\u0434\u043f\u0440\u0430\u0432\u0438\u0442\u0438"})]})]})})]})}function Oo(e){var t,r;let{orderId:n,rows:s,onClick:a,isExpanded:i}=e;const o=s.filter(e=>e.order_id===n),l=ko(o),c=To(o),d=Do(o),u=o.filter(So).reduce((e,t)=>e+(t.debit||0),0),h=o.filter(Co).reduce((e,t)=>e+(t.credit||0),0),m=(null===(t=o[0])||void 0===t?void 0:t.client_name)||"",p=o.length>0&&o[0].expected_deposit||0,f="cancelled"===((null===(r=o[0])||void 0===r?void 0:r.order_status)||null),x=Object.entries(c).filter(e=>{let[,t]=e;return t>0}).map(e=>{let[t,r]=e;return"".concat("UAH"===t?"\u20b4":"USD"===t?"$":"\u20ac").concat(wo(r))}).join(" + ");return(0,Et.jsx)("div",{onClick:a,className:vo("rounded-xl border p-4 cursor-pointer transition",i?"border-slate-400 bg-slate-50":"border-slate-200 hover:border-slate-300 hover:bg-slate-50"),children:(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsxs)("div",{className:"font-semibold text-lg",children:["\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f #",n,m&&(0,Et.jsxs)("span",{className:"text-corp-text-main font-normal ml-2",children:["\xb7 ",m]})]}),(0,Et.jsxs)("div",{className:"text-xs text-corp-text-muted mt-1",children:[o.length," \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0439 \xb7 \u041d\u0430\u0440\u0430\u0445\u043e\u0432\u0430\u043d\u043e: \u20b4",wo(u)," \xb7 \u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e: \u20b4",wo(h)]})]}),(0,Et.jsxs)("div",{className:"flex items-center gap-3",children:[l>0&&(0,Et.jsxs)("div",{className:"flex flex-col items-end",children:[(0,Et.jsxs)(No,{tone:"blue",children:["\u0417\u0430\u0441\u0442\u0430\u0432\u0430: ",x||"\u20b4".concat(wo(l))]}),p>0&&(0,Et.jsxs)("span",{className:"text-[10px] text-slate-400 mt-0.5",children:["\u043e\u0447\u0456\u043a\u0443\u0432\u0430\u043b\u043e\u0441\u044c \u20b4",wo(p)]})]}),f?(0,Et.jsx)(No,{tone:"red",children:"\u274c \u0421\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u043e - \u043f\u0435\u0440\u0435\u0432\u0456\u0440 \u0444\u0456\u043d\u0430\u043d\u0441\u0438"}):d>0?(0,Et.jsxs)(No,{tone:"amber",children:["\u0411\u043e\u0440\u0433 \u20b4",wo(d)]}):(0,Et.jsx)(No,{tone:"green",children:"\u2713 \u0417\u0430\u043a\u0440\u0438\u0442\u043e"}),(0,Et.jsx)("span",{className:"text-slate-400",children:i?"\u25bc":"\u25b6"})]})]})})}function Mo(e){let{rows:t}=e;return(0,Et.jsx)("div",{className:"overflow-hidden rounded-2xl border border-slate-200",children:(0,Et.jsxs)("table",{className:"min-w-full text-sm",children:[(0,Et.jsx)("thead",{className:"bg-slate-50 text-left text-corp-text-muted",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0414\u0430\u0442\u0430"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0422\u0438\u043f"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u041d\u0430\u0437\u0432\u0430"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u041c\u0435\u0442\u043e\u0434"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0414\u0435\u0431\u0435\u0442"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u041a\u0440\u0435\u0434\u0438\u0442"})]})}),(0,Et.jsx)("tbody",{children:t.map(e=>(0,Et.jsxs)("tr",{className:"border-t hover:bg-slate-50",children:[(0,Et.jsx)("td",{className:"px-3 py-2",children:e.date}),(0,Et.jsxs)("td",{className:"px-3 py-2",children:["#",e.order_id]}),(0,Et.jsx)("td",{className:"px-3 py-2",children:e.type}),(0,Et.jsx)("td",{className:"px-3 py-2",children:e.title}),(0,Et.jsx)("td",{className:"px-3 py-2",children:e.method||"\u2014"}),(0,Et.jsx)("td",{className:"px-3 py-2 text-rose-600",children:e.debit?"\u20b4 ".concat(wo(e.debit)):"\u2014"}),(0,Et.jsx)("td",{className:"px-3 py-2 text-emerald-700",children:e.credit?"\u20b4 ".concat(wo(e.credit)):e.amount?"\u20b4 ".concat(wo(e.amount)):"\u2014"})]},e.id))})]})})}function Po(e){let{rows:r}=e;const n=(0,t.useMemo)(()=>{const e=new Map;return r.forEach(t=>{const r=(t.date||(new Date).toISOString().slice(0,10)).slice(0,7),n=e.get(r)||{month:r,debit:0,credit:0,count:0};n.debit+=t.debit||0,n.credit+=t.credit||0,n.count+=1,e.set(r,n)}),Array.from(e.values()).sort((e,t)=>e.month<t.month?1:-1)},[r]);return(0,Et.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,Et.jsxs)("div",{className:"rounded-xl border p-3 flex items-center justify-between",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"font-semibold",children:e.month}),(0,Et.jsxs)("div",{className:"text-xs text-corp-text-muted",children:["\u0437\u0430\u043f\u0438\u0441\u0456\u0432: ",e.count]})]}),(0,Et.jsxs)("div",{className:"text-sm",children:[(0,Et.jsxs)("span",{className:"mr-4",children:["\u0414\u0435\u0431\u0435\u0442: \u20b4 ",wo(e.debit)]}),(0,Et.jsxs)("span",{children:["\u041a\u0440\u0435\u0434\u0438\u0442: \u20b4 ",wo(e.credit)]})]})]},e.month))})}function Lo(){const[e,r]=(0,t.useState)([]),[n,s]=(0,t.useState)(!0),[a,i]=(0,t.useState)("orders"),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(!1);(0,t.useEffect)(()=>{u()},[]);const u=async()=>{try{s(!0);const e=await is.get("".concat(yo,"/api/manager/finance/ledger"));r(e.data.map(e=>({id:e.id,date:e.date,order_id:e.order_id,type:e.type,title:e.title,method:e.payment_method,debit:e.debit||0,credit:e.credit||0,amount:e.amount||0,currency:e.currency||"UAH",status:e.status,counterparty:e.counterparty,client_name:e.client_name,expected_deposit:e.expected_deposit||0,manager_comment:e.manager_comment||"",damage_fee:e.damage_fee||0,order_status:e.order_status||null})))}catch(zd){console.error("Error loading transactions:",zd),alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0444\u0456\u043d\u0430\u043d\u0441\u043e\u0432\u0438\u0445 \u0434\u0430\u043d\u0438\u0445")}finally{s(!1)}},h=async(e,t)=>{try{const r={order_id:e,transaction_type:"payment",payment_method:t.method,amount:Number(t.amount||0),currency:"UAH",status:"completed",description:"\u041e\u043f\u043b\u0430\u0442\u0430 (".concat(t.method,")"),notes:t.note||""};await is.post("".concat(yo,"/api/manager/finance/transactions"),r),await u(),alert("\u041e\u043f\u043b\u0430\u0442\u0443 \u0437\u0430\u0440\u0430\u0445\u043e\u0432\u0430\u043d\u043e!")}catch(zd){console.error("Error adding payment:",zd),alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0440\u0430\u0445\u0443\u0432\u0430\u043d\u043d\u0456 \u043e\u043f\u043b\u0430\u0442\u0438")}},m=async(e,t)=>{try{const r={order_id:e,transaction_type:"deposit_hold",payment_method:"cash",amount:Number(t.amount||0),currency:t.code,status:"held",description:"\u0417\u0430\u0441\u0442\u0430\u0432\u0430 (".concat(t.code,")"),notes:""};await is.post("".concat(yo,"/api/manager/finance/transactions"),r),await u(),alert("\u0417\u0430\u0441\u0442\u0430\u0432\u0443 \u043f\u0440\u0438\u0439\u043d\u044f\u0442\u043e!")}catch(zd){console.error("Error adding deposit:",zd),alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u043f\u0440\u0438\u0439\u043c\u0430\u043d\u043d\u0456 \u0437\u0430\u0441\u0442\u0430\u0432\u0438")}},p=async(e,t,r)=>{try{let n=r;const s=Object.entries(t).filter(e=>{let[t,r]=e;return r>0});if(0===s.length)return void alert("\u041d\u0435\u043c\u0430\u0454 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u0445\u043e\u043b\u0434\u0443");const a=s.sort((e,t)=>"UAH"===e[0]?-1:"UAH"===t[0]?1:0),i=[];for(const[t,r]of a){if(n<=0)break;const s=Math.min(r,n),a="UAH"===t?"\u20b4":"USD"===t?"$":"\u20ac";await is.post("".concat(yo,"/api/manager/finance/transactions"),{order_id:e,transaction_type:"deposit_writeoff",amount:s,currency:t,status:"completed",description:"\u0421\u043f\u0438\u0441\u0430\u043d\u043d\u044f \u0456\u0437 \u0437\u0430\u0441\u0442\u0430\u0432\u0438",notes:"\u0421\u043f\u0438\u0441\u0430\u043d\u043e ".concat(a).concat(s)}),await is.post("".concat(yo,"/api/manager/finance/transactions"),{order_id:e,transaction_type:"payment",payment_method:"deposit",amount:s,currency:t,status:"completed",description:"\u041e\u043f\u043b\u0430\u0442\u0430 \u0437\u0430 \u0440\u0430\u0445\u0443\u043d\u043e\u043a \u0437\u0430\u0441\u0442\u0430\u0432\u0438"}),i.push("".concat(a).concat(s," ").concat(t)),n-=s}await u(),alert("\u0421\u043f\u0438\u0441\u0430\u043d\u043e \u0437 \u0437\u0430\u0441\u0442\u0430\u0432\u0438:\n".concat(i.join("\n")))}catch(zd){console.error("Error writeoff:",zd),alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0441\u043f\u0438\u0441\u0430\u043d\u043d\u0456")}},f=async(e,t)=>{try{const r=Object.entries(t).filter(e=>{let[t,r]=e;return r>0});if(0===r.length)return void alert("\u041d\u0435\u043c\u0430\u0454 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u0445\u043e\u043b\u0434\u0443");for(const[t,n]of r){const r="UAH"===t?"\u20b4":"USD"===t?"$":"\u20ac";await is.post("".concat(yo,"/api/manager/finance/transactions"),{order_id:e,transaction_type:"deposit_release",amount:n,currency:t,status:"completed",description:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u0437\u0430\u0441\u0442\u0430\u0432\u0438",notes:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043e ".concat(r).concat(n)})}await u(),alert("\u0417\u0430\u0441\u0442\u0430\u0432\u0443 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043e!\n".concat(r.map(e=>{let[t,r]=e;return"".concat("UAH"===t?"\u20b4":"USD"===t?"$":"\u20ac").concat(r)}).join(" + ")))}catch(zd){console.error("Error release:",zd),alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u0456")}},x=async(e,t)=>{try{await is.post("".concat(yo,"/api/manager/finance/transactions"),{order_id:e,transaction_type:"refund",amount:Number(t),currency:"UAH",status:"completed",description:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u043a\u043e\u0448\u0442\u0456\u0432 (\u0441\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u0435 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f)",notes:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043e \u20b4".concat(t," \u0447\u0435\u0440\u0435\u0437 \u0441\u043a\u0430\u0441\u0443\u0432\u0430\u043d\u043d\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f")}),await u(),alert("\u2705 \u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043e \u20b4".concat(t," \u043a\u043b\u0456\u0454\u043d\u0442\u0443!"))}catch(zd){console.error("Error refund:",zd),alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u0456 \u043a\u043e\u0448\u0442\u0456\u0432")}},g=async(e,t)=>{try{await is.post("".concat(yo,"/api/manager/finance/transactions"),{order_id:e,transaction_type:"damage",amount:Number(t.amount||0),currency:"UAH",status:"unpaid",description:"\u0428\u043a\u043e\u0434\u0430: ".concat(t.note||"")}),await u(),alert("\u0417\u0431\u0438\u0442\u043a\u0438 \u043d\u0430\u0440\u0430\u0445\u043e\u0432\u0430\u043d\u043e!")}catch(zd){console.error("Error adding damage:",zd),alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u043d\u0430\u0440\u0430\u0445\u0443\u0432\u0430\u043d\u043d\u0456 \u0437\u0431\u0438\u0442\u043a\u0456\u0432")}},b=async e=>{if(window.confirm("\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f #".concat(e,"? \u0426\u0435 \u0442\u0430\u043a\u043e\u0436 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0456 \u043f\u043e\u0432'\u044f\u0437\u0430\u043d\u0456 \u043a\u0430\u0440\u0442\u043a\u0438 (Issue/Return).")))try{await is.delete("".concat(yo,"/api/orders/").concat(e)),await u(),l(null),alert("\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e!")}catch(zd){console.error("Error deleting order:",zd),alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f")}},y=(0,t.useMemo)(()=>e.sort((e,t)=>(t.date||"").localeCompare(e.date||"")),[e]),v=(0,t.useMemo)(()=>{const t=new Set(e.map(e=>e.order_id));return Array.from(t).sort((e,t)=>t-e)},[e]);return n?(0,Et.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,Et.jsx)("div",{className:"text-xl",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})}):(0,Et.jsxs)("div",{className:"min-h-screen bg-corp-bg-main",children:[(0,Et.jsx)(It,{cabinetName:"\u0424\u0456\u043d\u0430\u043d\u0441\u043e\u0432\u0438\u0439 \u043a\u0430\u0431\u0456\u043d\u0435\u0442",showBackButton:!0}),(0,Et.jsxs)("div",{className:"mx-auto max-w-7xl p-6 space-y-6",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsx)("h2",{className:"text-xl font-semibold text-corp-text-dark",children:"\u0424\u0456\u043d\u0430\u043d\u0441\u043e\u0432\u0456 \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u0457"}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsx)("button",{onClick:()=>d(!0),className:"corp-btn corp-btn-primary flex items-center gap-1",children:"\ud83d\udcf7 \u0421\u043a\u0430\u043d\u0443\u0432\u0430\u0442\u0438"}),["orders","ledger","monthly"].map(e=>(0,Et.jsx)("button",{onClick:()=>{i(e),l(null)},className:vo("corp-btn",a===e?"corp-btn-primary":"corp-btn-secondary"),children:"orders"===e?"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f":"ledger"===e?"\u0416\u0443\u0440\u043d\u0430\u043b":"\u0410\u0440\u0445\u0456\u0432"},e))]})]}),(0,Et.jsx)(io,{isOpen:c,onClose:()=>d(!1),onScan:e=>{console.log("[FinanceCabinet] Scanned:",e);const t=parseInt(e.replace(/[^0-9]/g,""));t&&!isNaN(t)?v.includes(t)?(l(t),setTimeout(()=>{const e=document.querySelector('[data-order-id="'.concat(t,'"]'));e&&e.scrollIntoView({behavior:"smooth",block:"center"})},100)):alert("\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f #".concat(t," \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0443 \u0444\u0456\u043d\u0430\u043d\u0441\u043e\u0432\u043e\u043c\u0443 \u043a\u0430\u0431\u0456\u043d\u0435\u0442\u0456")):alert("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0440\u043e\u0437\u043f\u0456\u0437\u043d\u0430\u0442\u0438 \u043d\u043e\u043c\u0435\u0440 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0437 \u043a\u043e\u0434\u0443: ".concat(e))},title:"\u0421\u043a\u0430\u043d\u0443\u0432\u0430\u043d\u043d\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),"orders"===a&&(0,Et.jsxs)("div",{className:"space-y-4",children:[(0,Et.jsx)(_o,{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c (".concat(v.length,")"),right:(0,Et.jsx)(No,{tone:"slate",children:"\u041a\u043b\u0456\u043a\u043d\u0438 \u043d\u0430 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0434\u043b\u044f \u0434\u0435\u0442\u0430\u043b\u0435\u0439"}),children:(0,Et.jsx)("div",{className:"text-xs text-corp-text-muted mb-3",children:"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u043e \u0432\u0441\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0437 \u0444\u0456\u043d\u0430\u043d\u0441\u043e\u0432\u0438\u043c\u0438 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u044f\u043c\u0438"})}),v.map(e=>(0,Et.jsxs)("div",{"data-order-id":e,children:[(0,Et.jsx)(Oo,{orderId:e,rows:y,onClick:()=>l(o===e?null:e),isExpanded:o===e}),o===e&&(0,Et.jsx)("div",{className:"mt-4",children:(0,Et.jsx)(Ro,{orderId:e,rows:y,onAddPayment:h,onAddDeposit:m,onWriteoff:p,onReleaseDeposit:f,onAddDamage:g,onRefund:x,onCollapse:()=>l(null),onDelete:b})})]},e)),0===v.length&&(0,Et.jsxs)("div",{className:"text-center py-12 text-corp-text-muted",children:[(0,Et.jsx)("div",{className:"text-lg",children:"\u041d\u0435\u043c\u0430\u0454 \u0444\u0456\u043d\u0430\u043d\u0441\u043e\u0432\u0438\u0445 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0439"}),(0,Et.jsx)("div",{className:"text-sm mt-2",children:"\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0457 \u0437'\u044f\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u043f\u0456\u0441\u043b\u044f \u043f\u0440\u0438\u0439\u043d\u044f\u0442\u0442\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c"})]})]}),"ledger"===a&&(0,Et.jsx)(_o,{title:"\u041f\u043e\u0432\u043d\u0438\u0439 \u0436\u0443\u0440\u043d\u0430\u043b \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0439",children:(0,Et.jsx)(Mo,{rows:y})}),"monthly"===a&&(0,Et.jsx)(_o,{title:"\u041c\u0456\u0441\u044f\u0447\u043d\u0456 \u043f\u0456\u0434\u0441\u0443\u043c\u043a\u0438 \u0442\u0430 \u0430\u0440\u0445\u0456\u0432",children:(0,Et.jsx)(Po,{rows:y})})]})]})}let Bo=0;const Fo=new Map,Uo=e=>{if(Fo.has(e))return;const t=setTimeout(()=>{Fo.delete(e),Wo({type:"REMOVE_TOAST",toastId:e})},1e6);Fo.set(e,t)},zo=(e,t)=>{switch(t.type){case"ADD_TOAST":return c(c({},e),{},{toasts:[t.toast,...e.toasts].slice(0,1)});case"UPDATE_TOAST":return c(c({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?c(c({},e),t.toast):e)});case"DISMISS_TOAST":{const{toastId:r}=t;return r?Uo(r):e.toasts.forEach(e=>{Uo(e.id)}),c(c({},e),{},{toasts:e.toasts.map(e=>e.id===r||void 0===r?c(c({},e),{},{open:!1}):e)})}case"REMOVE_TOAST":return void 0===t.toastId?c(c({},e),{},{toasts:[]}):c(c({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)})}},Ho=[];let Vo={toasts:[]};function Wo(e){Vo=zo(Vo,e),Ho.forEach(e=>{e(Vo)})}function qo(e){let t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));const r=(Bo=(Bo+1)%Number.MAX_SAFE_INTEGER,Bo.toString()),n=()=>Wo({type:"DISMISS_TOAST",toastId:r});return Wo({type:"ADD_TOAST",toast:c(c({},t),{},{id:r,open:!0,onOpenChange:e=>{e||n()}})}),{id:r,dismiss:n,update:e=>Wo({type:"UPDATE_TOAST",toast:c(c({},e),{},{id:r})})}}function Go(){const[e,r]=t.useState(Vo);return t.useEffect(()=>(Ho.push(r),()=>{const e=Ho.indexOf(r);e>-1&&Ho.splice(e,1)}),[e]),c(c({},e),{},{toast:qo,dismiss:e=>Wo({type:"DISMISS_TOAST",toastId:e})})}const Yo=e=>{let{title:t,value:r,note:n,tone:s}=e;return(0,Et.jsxs)("div",{className:"px-4 py-3 border-b md:border-b-0 md:border-r border-slate-200 last:border-r-0 ".concat(s?{ok:"bg-emerald-50",warn:"bg-amber-50",info:"bg-slate-50"}[s]:""),children:[(0,Et.jsx)("div",{className:"text-xs text-corp-text-muted",children:t}),(0,Et.jsx)("div",{className:"text-lg font-semibold tracking-tight tabular-nums",children:r}),n&&(0,Et.jsx)("div",{className:"text-xs text-corp-text-muted mt-0.5",children:n})]})},Xo=e=>{let{title:t,right:r}=e;return(0,Et.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-200 bg-white",children:[(0,Et.jsx)("h3",{className:"text-base font-semibold",children:t}),r]})},Qo=e=>{let{label:t,children:r}=e;return(0,Et.jsxs)("label",{className:"flex flex-col gap-1 text-sm",children:[(0,Et.jsx)("span",{className:"text-corp-text-main",children:t}),r]})},Ko=e=>{let{value:t,onChange:r}=e;return(0,Et.jsxs)("div",{className:"inline-flex items-center rounded-lg border border-slate-200 bg-white",children:[(0,Et.jsx)("button",{onClick:()=>r(Math.max(0,t-1)),className:"h-8 w-8 text-corp-text-muted hover:bg-slate-50",children:"\u2212"}),(0,Et.jsx)("input",{value:t,readOnly:!0,className:"w-12 text-center outline-none tabular-nums text-sm"}),(0,Et.jsx)("button",{onClick:()=>r(t+1),className:"h-8 w-8 text-corp-text-muted hover:bg-slate-50",children:"+"})]})},Zo=e=>{let{label:t,value:r,emphasize:n}=e;return(0,Et.jsxs)("div",{className:"rounded-xl border ".concat(n?"border-teal-300 bg-teal-50":"border-slate-200 bg-white"," p-4"),children:[(0,Et.jsx)("div",{className:"text-xs text-corp-text-muted",children:t}),(0,Et.jsx)("div",{className:"text-lg font-semibold tabular-nums",children:r})]})},Jo=e=>{let{value:t}=e;const[r,n,s]={draft:["bg-slate-100","text-slate-700","\u0427\u0435\u0440\u043d\u0435\u0442\u043a\u0430"],new:["bg-sky-100","text-sky-800","\u041d\u043e\u0432\u0435"],in_stock:["bg-emerald-100","text-emerald-800","\u0412 \u043d\u0430\u044f\u0432\u043d\u043e\u0441\u0442\u0456"],card:["bg-sky-100","text-sky-800","\u043a\u0430\u0440\u0442\u043a\u0430"],hold:["bg-slate-100","text-slate-700","\u0445\u043e\u043b\u0434"],high:["bg-amber-100","text-amber-800","\u0432\u0438\u0441\u043e\u043a\u0438\u0439"],medium:["bg-sky-100","text-sky-800","\u0441\u0435\u0440\u0435\u0434\u043d\u0456\u0439"],low:["bg-slate-100","text-slate-700","\u043d\u0438\u0437\u044c\u043a\u0438\u0439"]}[t]||["bg-slate-100","text-slate-700",t];return(0,Et.jsx)("span",{className:"rounded-full px-2.5 py-1 text-xs font-semibold ".concat(r," ").concat(n),children:s})},$o=()=>{const e=ge(),{toast:r}=Go(),[n,s]=(0,t.useState)(""),[a,i]=(0,t.useState)(""),[o,l]=(0,t.useState)(""),[c,d]=(0,t.useState)("\u0424\u041e\u041f/\u041a\u043e\u043c\u043f\u0430\u043d\u0456\u044f"),[u,h]=(0,t.useState)(0),[m,p]=(0,t.useState)("\u0412\u0456\u043a\u0442\u043e\u0440\u0456\u044f"),[f,x]=(0,t.useState)(""),[g,b]=(0,t.useState)("11:30\u201312:00"),[y,v]=(0,t.useState)(""),[w,N]=(0,t.useState)("\u0434\u043e 17:00"),[j,_]=(0,t.useState)(""),[C,S]=(0,t.useState)([{sku:"",name:"",qty:1,price:0,depositTier:"medium"}]),[E,A]=(0,t.useState)("pickup"),[I,k]=(0,t.useState)(""),[T,D]=(0,t.useState)(""),[R,O]=(0,t.useState)(0),[M,P]=(0,t.useState)("\u041a\u0430\u0440\u0442\u043a\u0430 (\u0445\u043e\u043b\u0434)"),[L,B]=(0,t.useState)("\u041f\u0456\u0441\u043b\u044f \u043f\u0440\u0438\u0439\u043c\u0430\u043d\u043d\u044f"),[F,U]=(0,t.useState)(""),[z,H]=(0,t.useState)([]),[V,W]=(0,t.useState)(!1),[q,G]=(0,t.useState)(!1),[Y,X]=(0,t.useState)(""),Q="https://backrentalhub.farforrent.com.ua";(0,t.useEffect)(()=>{K()},[]);const K=async()=>{try{W(!0);const e=await is.get("".concat(Q,"/api/inventory"));H(e.data)}catch(e){console.error("Error loading inventory:",e),r({title:"\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0456\u043d\u0432\u0435\u043d\u0442\u0430\u0440",variant:"destructive"})}finally{W(!1)}},Z=e=>z.find(t=>t.article.toLowerCase()===e.toLowerCase()||t.id.toLowerCase()===e.toLowerCase()),J=z.filter(e=>e.name.toLowerCase().includes(Y.toLowerCase())||e.article.toLowerCase().includes(Y.toLowerCase())||e.category.toLowerCase().includes(Y.toLowerCase())),$=(e,t,r)=>{const n=[...C];n[e][t]=r,S(n)},ee=async()=>{if(!n||!a)return void r({title:"\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u0456\u043c\u02bc\u044f \u0442\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d \u043a\u043b\u0456\u0454\u043d\u0442\u0430",variant:"destructive"});if(!f||!y)return void r({title:"\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0434\u0430\u0442\u0438 \u0432\u0438\u0434\u0430\u0447\u0456 \u0442\u0430 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f",variant:"destructive"});const t=C.filter(e=>e.name&&e.price>0);if(0!==t.length)try{const s=re||1,i={client_name:n,client_phone:a,client_email:o||void 0,issue_date:f,return_date:y,manager_comment:j||void 0,discount_percent:u||0,items:t.map(e=>{const t=e.price*e.qty*s,r=2*e.price,n=r*e.qty;return{inventory_id:e.sku||"TEMP-".concat(Date.now()),name:e.name,article:e.sku||"CUSTOM",quantity:e.qty,price_per_day:e.price,deposit:r,total_rental:t,total_deposit:n}})},l=await is.post("".concat(Q,"/api/orders"),i);r({title:"\u2705 \u0423\u0441\u043f\u0456\u0445",description:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f #".concat(l.data.order_number," \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e")}),setTimeout(()=>e("/"),1e3)}catch(c){var s,i,l;console.error("Error creating order:",c);const e=(null===(s=c.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.detail)||("string"===typeof(null===(l=c.response)||void 0===l?void 0:l.data)?c.response.data:"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0441\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f");r({title:"\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:e,variant:"destructive"})}else r({title:"\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:"\u0414\u043e\u0434\u0430\u0439\u0442\u0435 \u0445\u043e\u0447\u0430 \u0431 \u043e\u0434\u043d\u0443 \u043f\u043e\u0437\u0438\u0446\u0456\u044e",variant:"destructive"})},te=C.reduce((e,t)=>e+t.qty*t.price,0),re=(()=>{if(!f||!y)return 0;const e=new Date(f),t=new Date(y),r=Math.abs(t-e);return Math.ceil(r/864e5)||1})(),ne=te*re,se=1.5*ne;return(0,t.useEffect)(()=>{O(se)},[se]),(0,Et.jsxs)("div",{className:"min-h-screen bg-white text-corp-text-dark",children:[(0,Et.jsx)("header",{className:"sticky top-0 z-30 border-b border-slate-200 bg-white/90 backdrop-blur supports-[backdrop-filter]:bg-white/70",children:(0,Et.jsxs)("div",{className:"mx-auto max-w-7xl px-6 py-3 flex items-center gap-4",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("div",{className:"h-8 w-8 rounded-full border border-slate-300 grid place-content-center font-semibold text-sm",children:"FD"}),(0,Et.jsx)("span",{className:"text-lg font-semibold tracking-tight",children:"\u041d\u043e\u0432\u0435 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"})]}),(0,Et.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,Et.jsx)("button",{className:"h-9 rounded-xl border border-slate-200 px-3 text-sm hover:shadow",children:"\u0427\u0435\u0440\u043d\u0435\u0442\u043a\u0430"}),(0,Et.jsx)("button",{onClick:ee,className:"h-9 rounded-xl bg-teal-600 px-3 text-sm text-white hover:bg-teal-700",children:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"})]})]})}),(0,Et.jsxs)("div",{className:"mx-auto max-w-7xl px-6 py-6 grid gap-6",children:[(0,Et.jsx)("section",{className:"rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:(0,Et.jsxs)("div",{className:"grid md:grid-cols-4 gap-0",children:[(0,Et.jsx)(Yo,{title:"\u0421\u0442\u0430\u0442\u0443\u0441",value:"\u0427\u0435\u0440\u043d\u0435\u0442\u043a\u0430",note:"\u0431\u0443\u0434\u0435 #\u0430\u0432\u0442\u043e",tone:"info"}),(0,Et.jsx)(Yo,{title:"\u041a\u043b\u0456\u0454\u043d\u0442",value:n||"\u2014",note:n?a:"\u0434\u043e\u0434\u0430\u0439\u0442\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442"}),(0,Et.jsx)(Yo,{title:"\u041e\u0440\u0435\u043d\u0434\u0430 (\u043e\u0446\u0456\u043d\u043e\u0447\u043d\u043e)",value:"\u20b4 ".concat(Math.round(ne).toLocaleString("uk-UA")),note:re>0?"".concat(re," ").concat(1===re?"\u0434\u043e\u0431\u0430":re<5?"\u0434\u043e\u0431\u0438":"\u0434\u0456\u0431"):"\u0431\u0435\u0437 \u0437\u043d\u0438\u0436\u043e\u043a"}),(0,Et.jsx)(Yo,{title:"\u0417\u0430\u0441\u0442\u0430\u0432\u0430 (\u043e\u0446\u0456\u043d\u043e\u0447\u043d\u043e)",value:"\u20b4 ".concat(Math.round(se).toLocaleString("uk-UA")),note:"\u0430\u0432\u0442\u043e\u043f\u0456\u0434\u0431\u0456\u0440"})]})}),(0,Et.jsxs)("main",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Et.jsxs)("section",{className:"lg:col-span-2 grid gap-6",children:[(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[(0,Et.jsx)(Xo,{title:"\u041a\u043b\u0456\u0454\u043d\u0442",right:(0,Et.jsx)("button",{className:"h-8 rounded-xl border border-slate-200 px-3 text-sm hover:shadow",children:"\u0406\u043c\u043f\u043e\u0440\u0442 \u0437 CRM"})}),(0,Et.jsxs)("div",{className:"grid md:grid-cols-3 gap-4 p-4 text-sm",children:[(0,Et.jsx)(Qo,{label:"\u0406\u043c\u02bc\u044f / \u041a\u043e\u043c\u043f\u0430\u043d\u0456\u044f",children:(0,Et.jsx)("input",{placeholder:"\u041d\u0430\u043f\u0440., Daria Studio",value:n,onChange:e=>s(e.target.value),className:"w-full rounded-md border border-slate-200 px-2 py-2 outline-none focus:ring-2 focus:ring-teal-400"})}),(0,Et.jsx)(Qo,{label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",children:(0,Et.jsx)("input",{placeholder:"+380\u2026",value:a,onChange:e=>i(e.target.value),className:"w-full rounded-md border border-slate-200 px-2 py-2 outline-none focus:ring-2 focus:ring-teal-400"})}),(0,Et.jsx)(Qo,{label:"Email",children:(0,Et.jsx)("input",{placeholder:"mail@client.ua",value:o,onChange:e=>l(e.target.value),className:"w-full rounded-md border border-slate-200 px-2 py-2 outline-none focus:ring-2 focus:ring-teal-400"})}),(0,Et.jsx)(Qo,{label:"\u0422\u0438\u043f \u043a\u043b\u0456\u0454\u043d\u0442\u0430",children:(0,Et.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"w-full rounded-md border border-slate-200 px-2 py-2 outline-none focus:ring-2 focus:ring-teal-400",children:[(0,Et.jsx)("option",{children:"\u0424\u041e\u041f/\u041a\u043e\u043c\u043f\u0430\u043d\u0456\u044f"}),(0,Et.jsx)("option",{children:"\u0424\u0456\u0437\u0438\u0447\u043d\u0430 \u043e\u0441\u043e\u0431\u0430"})]})}),(0,Et.jsx)(Qo,{label:"\u0417\u043d\u0438\u0436\u043a\u0430, %",children:(0,Et.jsx)("input",{value:u,onChange:e=>h(parseFloat(e.target.value)||0),type:"number",className:"w-full rounded-md border border-slate-200 px-2 py-2 outline-none text-right tabular-nums focus:ring-2 focus:ring-teal-400"})}),(0,Et.jsx)(Qo,{label:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440",children:(0,Et.jsxs)("select",{value:m,onChange:e=>p(e.target.value),className:"w-full rounded-md border border-slate-200 px-2 py-2 outline-none focus:ring-2 focus:ring-teal-400",children:[(0,Et.jsx)("option",{children:"\u0412\u0456\u043a\u0442\u043e\u0440\u0456\u044f"}),(0,Et.jsx)("option",{children:"\u0411\u043e\u0433\u0434\u0430\u043d"})]})})]})]}),(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[(0,Et.jsx)(Xo,{title:"\u0413\u0440\u0430\u0444\u0456\u043a: \u0432\u0438\u0434\u0430\u0447\u0430 / \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f"}),(0,Et.jsxs)("div",{className:"grid md:grid-cols-4 gap-4 p-4 text-sm",children:[(0,Et.jsx)(Qo,{label:"\u0414\u0430\u0442\u0430 \u0432\u0438\u0434\u0430\u0447\u0456",children:(0,Et.jsx)("input",{type:"date",value:f,onChange:e=>x(e.target.value),className:"w-full rounded-md border border-slate-200 px-2 py-2 outline-none focus:ring-2 focus:ring-teal-400"})}),(0,Et.jsx)(Qo,{label:"\u0427\u0430\u0441 \u0432\u0456\u043a\u043d\u0430 \u0432\u0438\u0434\u0430\u0447\u0456",children:(0,Et.jsxs)("select",{value:g,onChange:e=>b(e.target.value),className:"w-full rounded-md border border-slate-200 px-2 py-2 outline-none focus:ring-2 focus:ring-teal-400",children:[(0,Et.jsx)("option",{children:"11:30\u201312:00"}),(0,Et.jsx)("option",{children:"12:00\u201312:30"}),(0,Et.jsx)("option",{children:"16:30\u201317:00"})]})}),(0,Et.jsx)(Qo,{label:"\u0414\u0430\u0442\u0430 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f",children:(0,Et.jsx)("input",{type:"date",value:y,onChange:e=>v(e.target.value),className:"w-full rounded-md border border-slate-200 px-2 py-2 outline-none focus:ring-2 focus:ring-teal-400"})}),(0,Et.jsx)(Qo,{label:"\u0427\u0430\u0441 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f",children:(0,Et.jsxs)("select",{value:w,onChange:e=>N(e.target.value),className:"w-full rounded-md border border-slate-200 px-2 py-2 outline-none focus:ring-2 focus:ring-teal-400",children:[(0,Et.jsx)("option",{children:"\u0434\u043e 17:00"}),(0,Et.jsx)("option",{children:"\u0434\u043e 16:00"})]})})]}),(0,Et.jsx)("div",{className:"px-4 pb-4 text-xs text-corp-text-muted",children:"\u041f\u0440\u0430\u0432\u0438\u043b\u0430 \u043f\u0456\u0434\u0440\u0430\u0445\u0443\u043d\u043a\u0443 \u0434\u0456\u0431 \u0437\u0430\u0441\u0442\u043e\u0441\u043e\u0432\u0443\u044e\u0442\u044c\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u043d\u043e (T+1, T+2, \u0432\u0438\u0445\u0456\u0434\u043d\u0456 \u0442\u043e\u0449\u043e)."})]}),(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[(0,Et.jsx)(Xo,{title:"\u041f\u043e\u0437\u0438\u0446\u0456\u0457 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",right:(0,Et.jsx)("div",{className:"flex gap-2",children:(0,Et.jsxs)("button",{className:"h-8 rounded-xl border border-slate-200 px-3 text-sm hover:shadow",onClick:()=>G(!0),children:["\u0412\u0438\u0431\u0440\u0430\u0442\u0438 \u0437 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0443 (",z.length,")"]})})}),(0,Et.jsx)("div",{className:"overflow-x-auto",children:(0,Et.jsxs)("table",{className:"w-full text-sm",children:[(0,Et.jsx)("thead",{className:"bg-slate-50 text-corp-text-main",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-4 py-2 text-left font-medium",children:"SKU"}),(0,Et.jsx)("th",{className:"px-4 py-2 text-left font-medium",children:"\u041d\u0430\u0437\u0432\u0430"}),(0,Et.jsx)("th",{className:"px-4 py-2 text-left font-medium",children:"\u041a-\u0441\u0442\u044c"}),(0,Et.jsx)("th",{className:"px-4 py-2 text-left font-medium",children:"\u0426\u0456\u043d\u0430/\u0434\u043e\u0431\u0430"}),(0,Et.jsx)("th",{className:"px-4 py-2 text-left font-medium",children:"\u0414\u0435\u043f\u043e\u0437\u0438\u0442-\u0442\u0456\u0440"}),(0,Et.jsx)("th",{className:"px-4 py-2 text-left font-medium",children:"\u041d\u0430\u044f\u0432\u043d\u0456\u0441\u0442\u044c"}),(0,Et.jsx)("th",{className:"px-4 py-2 text-left font-medium",children:"\u0414\u0456\u0457"})]})}),(0,Et.jsx)("tbody",{className:"divide-y divide-slate-200",children:C.map((e,t)=>(0,Et.jsxs)("tr",{className:"hover:bg-slate-50/70",children:[(0,Et.jsx)("td",{className:"px-4 py-2",children:(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("input",{placeholder:"SKU\u2026",value:e.sku,onChange:e=>(async(e,t)=>{if($(e,"sku",t),t.length>=3)try{const r=await is.get("".concat(Q,"/api/inventory?search=").concat(t));if(r.data&&r.data.length>0){const n=r.data.find(e=>e.article&&e.article.toLowerCase()===t.toLowerCase());if(n)return $(e,"name",n.name),$(e,"price",n.price_per_day),void $(e,"depositTier",n.deposit_tier||"medium")}const n=Z(t);n&&($(e,"name",n.name),$(e,"price",n.price_per_day),$(e,"depositTier",n.deposit_tier||"medium"))}catch(r){console.error("Error searching inventory:",r);const n=Z(t);n&&($(e,"name",n.name),$(e,"price",n.price_per_day),$(e,"depositTier",n.deposit_tier||"medium"))}})(t,e.target.value),list:"inventory-list-".concat(t),className:"w-32 rounded-md border border-slate-200 px-2 py-1 outline-none focus:ring-2 focus:ring-teal-400"}),(0,Et.jsx)("datalist",{id:"inventory-list-".concat(t),children:z.map(e=>(0,Et.jsxs)("option",{value:e.article,children:[e.name," - \u20b4",e.price_per_day,"/\u0434\u0435\u043d\u044c"]},e.id))})]})}),(0,Et.jsx)("td",{className:"px-4 py-2",children:(0,Et.jsx)("input",{placeholder:"\u041d\u0430\u0437\u0432\u0430 \u0442\u043e\u0432\u0430\u0440\u0443 (\u0430\u0432\u0442\u043e\u043f\u0456\u0434\u0442\u044f\u0433\u043d\u0435\u0442\u044c\u0441\u044f)",value:e.name,onChange:e=>$(t,"name",e.target.value),className:"w-full min-w-[300px] rounded-md border border-slate-200 px-2 py-1 outline-none focus:ring-2 focus:ring-teal-400"})}),(0,Et.jsx)("td",{className:"px-4 py-2",children:(0,Et.jsx)(Ko,{value:e.qty,onChange:e=>$(t,"qty",e)})}),(0,Et.jsx)("td",{className:"px-4 py-2",children:(0,Et.jsx)("input",{value:e.price,type:"number",onChange:e=>$(t,"price",parseFloat(e.target.value)||0),className:"w-24 text-right tabular-nums rounded-md border border-slate-200 px-2 py-1 outline-none focus:ring-2 focus:ring-teal-400"})}),(0,Et.jsx)("td",{className:"px-4 py-2",children:(0,Et.jsxs)("select",{value:e.depositTier,onChange:e=>$(t,"depositTier",e.target.value),className:"w-32 rounded-md border border-slate-200 px-2 py-1 outline-none focus:ring-2 focus:ring-teal-400",children:[(0,Et.jsx)("option",{children:"low"}),(0,Et.jsx)("option",{children:"medium"}),(0,Et.jsx)("option",{children:"high"})]})}),(0,Et.jsx)("td",{className:"px-4 py-2",children:(0,Et.jsx)(Jo,{value:"in_stock"})}),(0,Et.jsx)("td",{className:"px-4 py-2",children:(0,Et.jsx)("div",{className:"flex gap-2",children:(0,Et.jsx)("button",{onClick:()=>{return e=t,void S(C.filter((t,r)=>r!==e));var e},className:"h-8 rounded-xl border border-slate-200 px-3 text-sm hover:shadow",children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})})})]},t))})]})}),(0,Et.jsxs)("div",{className:"px-4 py-3 border-t border-slate-200 bg-white flex items-center justify-between",children:[(0,Et.jsx)("button",{onClick:()=>{S([...C,{sku:"",name:"",qty:1,price:0,depositTier:"medium"}])},className:"h-8 rounded-xl border border-slate-200 px-3 text-sm hover:shadow",children:"+ \u0414\u043e\u0434\u0430\u0442\u0438 \u043f\u043e\u0437\u0438\u0446\u0456\u044e"}),(0,Et.jsxs)("div",{className:"text-sm text-corp-text-main",children:["\u0420\u0435\u0437\u0435\u0440\u0432 \u043f\u043e \u0441\u043a\u043b\u0430\u0434\u0443: ",(0,Et.jsx)("span",{className:"font-medium",children:"OK"})," \u2022 \u041a\u043e\u043d\u0444\u043b\u0456\u043a\u0442\u0438: ",(0,Et.jsx)("span",{className:"font-medium text-amber-700",children:"0"})]})]})]}),(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[(0,Et.jsx)(Xo,{title:"\u0420\u043e\u0437\u0440\u0430\u0445\u0443\u043d\u043e\u043a",right:(0,Et.jsx)("button",{className:"h-8 rounded-xl border border-slate-200 px-3 text-sm hover:shadow",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u044f\u043a \u043e\u0444\u0435\u0440\u0442\u0443"})}),(0,Et.jsxs)("div",{className:"grid md:grid-cols-4 gap-4 p-4",children:[(0,Et.jsx)(Zo,{label:"\u041e\u0440\u0435\u043d\u0434\u0430 (\u043f\u0435\u0440\u0456\u043e\u0434)",value:"\u20b4 ".concat(Math.round(ne).toLocaleString("uk-UA"))}),(0,Et.jsx)(Zo,{label:"\u0417\u0430\u0441\u0442\u0430\u0432\u0430 (\u043e\u0446\u0456\u043d\u043e\u0447\u043d\u043e)",value:"\u20b4 ".concat(Math.round(se).toLocaleString("uk-UA"))}),(0,Et.jsx)(Zo,{label:"\u041f\u0435\u0440\u0435\u0434\u043f\u043b\u0430\u0442\u0430",value:"\u20b4 0"}),(0,Et.jsx)(Zo,{label:"\u0414\u043e \u043e\u043f\u043b\u0430\u0442\u0438 \u0437\u0430\u0440\u0430\u0437",value:"\u20b4 ".concat(Math.round(ne).toLocaleString("uk-UA")),emphasize:!0})]}),(0,Et.jsx)("div",{className:"overflow-x-auto",children:(0,Et.jsxs)("table",{className:"w-full text-sm",children:[(0,Et.jsx)("thead",{className:"bg-slate-50 text-corp-text-main",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-4 py-2 text-left font-medium",children:"\u0421\u0442\u0430\u0442\u0442\u044f"}),(0,Et.jsx)("th",{className:"px-4 py-2 text-left font-medium",children:"\u0421\u0443\u043c\u0430"}),(0,Et.jsx)("th",{className:"px-4 py-2 text-left font-medium",children:"\u0414\u0456\u0457"})]})}),(0,Et.jsxs)("tbody",{className:"divide-y divide-slate-200",children:[(0,Et.jsxs)("tr",{className:"hover:bg-slate-50/70",children:[(0,Et.jsxs)("td",{className:"px-4 py-2",children:["\u041e\u0440\u0435\u043d\u0434\u0430 (",re," ",1===re?"\u0434\u043e\u0431\u0430":re<5?"\u0434\u043e\u0431\u0438":"\u0434\u0456\u0431",")"]}),(0,Et.jsxs)("td",{className:"px-4 py-2 tabular-nums",children:["\u20b4 ",Math.round(ne).toLocaleString("uk-UA")]}),(0,Et.jsx)("td",{className:"px-4 py-2",children:(0,Et.jsx)("button",{className:"h-8 rounded-xl border border-slate-200 px-3 text-sm hover:shadow",children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"})})]}),(0,Et.jsxs)("tr",{className:"hover:bg-slate-50/70",children:[(0,Et.jsx)("td",{className:"px-4 py-2",children:"\u041f\u043e\u0441\u043b\u0443\u0433\u0438 (\u043c\u0438\u0442\u0442\u044f/\u0441\u0443\u0448\u043a\u0430)"}),(0,Et.jsx)("td",{className:"px-4 py-2 tabular-nums",children:"\u20b4 0"}),(0,Et.jsx)("td",{className:"px-4 py-2",children:(0,Et.jsx)("button",{className:"h-8 rounded-xl border border-slate-200 px-3 text-sm hover:shadow",children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"})})]}),(0,Et.jsxs)("tr",{className:"hover:bg-slate-50/70",children:[(0,Et.jsx)("td",{className:"px-4 py-2",children:"\u0417\u043d\u0438\u0436\u043a\u0430"}),(0,Et.jsx)("td",{className:"px-4 py-2 tabular-nums",children:"\u20b4 0"}),(0,Et.jsx)("td",{className:"px-4 py-2",children:(0,Et.jsx)("button",{className:"h-8 rounded-xl border border-slate-200 px-3 text-sm hover:shadow",children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"})})]})]})]})}),(0,Et.jsxs)("div",{className:"px-4 py-3 border-t border-slate-200 bg-white flex flex-wrap items-center justify-between gap-3",children:[(0,Et.jsxs)("div",{className:"text-sm text-corp-text-main",children:["\u041c\u0435\u0442\u043e\u0434: ",(0,Et.jsx)(Jo,{value:"card"})," \u2022 \u041c\u043e\u0436\u043d\u0430 \u0437\u0440\u043e\u0431\u0438\u0442\u0438 ",(0,Et.jsx)(Jo,{value:"hold"})," \u043d\u0430 \u0437\u0430\u0441\u0442\u0430\u0432\u0443"]}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsx)("button",{className:"h-9 rounded-xl border border-slate-200 px-3 text-sm hover:shadow",children:"\u0420\u0430\u0445\u0443\u043d\u043e\u043a/\u0456\u043d\u0432\u043e\u0439\u0441"}),(0,Et.jsx)("button",{className:"h-9 rounded-xl bg-teal-600 px-3 text-sm text-white hover:bg-teal-700",children:"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u0438 \u0437\u0430\u0440\u0430\u0437"})]})]})]}),(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 p-4 shadow-sm",children:[(0,Et.jsx)("h3",{className:"text-base font-semibold mb-3",children:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440 \u0434\u043e \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),(0,Et.jsx)("textarea",{value:j,onChange:e=>_(e.target.value),className:"corp-input",rows:4,placeholder:"\u0422\u0435\u043a\u0441\u0442 \u0434\u043b\u044f \u0441\u043a\u043b\u0430\u0434\u0443 / \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430\u2026"}),(0,Et.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,Et.jsx)("button",{className:"h-8 rounded-xl border border-slate-200 px-3 text-sm hover:shadow",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"}),(0,Et.jsx)("button",{className:"h-8 rounded-xl border border-slate-200 px-3 text-sm hover:shadow",children:"\u041f\u0440\u0438\u043a\u0440\u0456\u043f\u0438\u0442\u0438 \u0444\u0430\u0439\u043b"})]})]}),(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 p-4 shadow-sm flex flex-wrap items-center justify-between gap-3",children:[(0,Et.jsxs)("div",{className:"text-sm text-corp-text-main",children:["\u0421\u0442\u0430\u0442\u0443\u0441: ",(0,Et.jsx)(Jo,{value:"draft"})," \u2192 \u043f\u0456\u0441\u043b\u044f \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f \u0441\u0442\u0430\u043d\u0435 ",(0,Et.jsx)(Jo,{value:"new"})]}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsx)("button",{className:"h-9 rounded-xl border border-slate-200 px-3 text-sm hover:shadow",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0447\u0435\u0440\u043d\u0435\u0442\u043a\u0443"}),(0,Et.jsx)("button",{className:"h-9 rounded-xl border border-slate-200 px-3 text-sm hover:shadow",children:"\u041f\u043e\u043f\u0435\u0440\u0435\u0434\u043d\u0456\u0439 \u043f\u0435\u0440\u0435\u0433\u043b\u044f\u0434"}),(0,Et.jsx)("button",{onClick:ee,className:"h-9 rounded-xl bg-teal-600 px-3 text-sm text-white hover:bg-teal-700",children:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"})]})]}),(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[(0,Et.jsx)(Xo,{title:"\u0406\u0441\u0442\u043e\u0440\u0456\u044f \u043f\u043e\u0434\u0456\u0439"}),(0,Et.jsx)("ul",{className:"p-4 space-y-2 text-sm",children:(0,Et.jsxs)("li",{className:"flex gap-3",children:[(0,Et.jsx)("span",{className:"w-14 shrink-0 tabular-nums text-corp-text-muted",children:(new Date).toLocaleTimeString("uk-UA",{hour:"2-digit",minute:"2-digit"})}),(0,Et.jsx)("span",{children:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e \u0447\u0435\u0440\u043d\u0435\u0442\u043a\u0443"})]})})]})]}),(0,Et.jsxs)("aside",{className:"grid gap-6",children:[(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[(0,Et.jsx)(Xo,{title:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 / \u0441\u0430\u043c\u043e\u0432\u0438\u0432\u0456\u0437"}),(0,Et.jsxs)("div",{className:"p-4 grid gap-3 text-sm",children:[(0,Et.jsxs)("label",{className:"flex items-center gap-2",children:[(0,Et.jsx)("input",{type:"radio",name:"delivery",checked:"pickup"===E,onChange:()=>A("pickup")})," \u0421\u0430\u043c\u043e\u0432\u0438\u0432\u0456\u0437"]}),(0,Et.jsxs)("label",{className:"flex items-center gap-2",children:[(0,Et.jsx)("input",{type:"radio",name:"delivery",checked:"delivery"===E,onChange:()=>A("delivery")})," \u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 (\u041d\u043e\u0432\u0430 \u041f\u043e\u0448\u0442\u0430/\u043a\u0443\u0440\u02bc\u0454\u0440)"]}),(0,Et.jsx)(Qo,{label:"\u0410\u0434\u0440\u0435\u0441\u0430/\u0432\u0456\u0434\u0434\u0456\u043b\u0435\u043d\u043d\u044f",children:(0,Et.jsx)("input",{placeholder:"\u0432\u0443\u043b. \u041f\u0440\u0438\u043a\u043b\u0430\u0434\u043d\u0430, 1 / \u0412\u041f \u2116\u2026",value:I,onChange:e=>k(e.target.value),className:"w-full rounded-md border border-slate-200 px-2 py-2 outline-none focus:ring-2 focus:ring-teal-400"})}),(0,Et.jsx)(Qo,{label:"\u0406\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0456\u0457 \u0434\u043b\u044f \u0441\u043a\u043b\u0430\u0434\u0443",children:(0,Et.jsx)("input",{placeholder:"\u041b\u0456\u0444\u0442/\u0440\u0430\u043c\u043f\u0430/\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0438\u2026",value:T,onChange:e=>D(e.target.value),className:"w-full rounded-md border border-slate-200 px-2 py-2 outline-none focus:ring-2 focus:ring-teal-400"})})]})]}),(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[(0,Et.jsx)(Xo,{title:"\u0417\u0430\u0441\u0442\u0430\u0432\u0430 (\u043f\u043e\u043f\u0435\u0440\u0435\u0434\u043d\u0456\u0439 \u0440\u043e\u0437\u0440\u0430\u0445\u0443\u043d\u043e\u043a)"}),(0,Et.jsxs)("div",{className:"grid grid-cols-2 gap-4 p-4 text-sm",children:[(0,Et.jsx)(Qo,{label:"\u0420\u043e\u0437\u043c\u0456\u0440 \u0437\u0430\u0441\u0442\u0430\u0432\u0438 (\u0441\u0443\u043c\u0430\u0440\u043d\u043e)",children:(0,Et.jsx)("input",{value:Math.round(R),onChange:e=>O(parseFloat(e.target.value)||0),type:"number",className:"w-full rounded-md border border-slate-200 px-2 py-2 outline-none text-right tabular-nums focus:ring-2 focus:ring-teal-400"})}),(0,Et.jsx)(Qo,{label:"\u041c\u0435\u0442\u043e\u0434",children:(0,Et.jsxs)("select",{value:M,onChange:e=>P(e.target.value),className:"w-full rounded-md border border-slate-200 px-2 py-2 outline-none focus:ring-2 focus:ring-teal-400",children:[(0,Et.jsx)("option",{children:"\u041a\u0430\u0440\u0442\u043a\u0430 (\u0445\u043e\u043b\u0434)"}),(0,Et.jsx)("option",{children:"\u0413\u043e\u0442\u0456\u0432\u043a\u0430"})]})}),(0,Et.jsx)(Qo,{label:"\u0410\u0432\u0442\u043e\u0437\u0432\u0456\u043b\u044c\u043d\u0435\u043d\u043d\u044f",children:(0,Et.jsxs)("select",{value:L,onChange:e=>B(e.target.value),className:"w-full rounded-md border border-slate-200 px-2 py-2 outline-none focus:ring-2 focus:ring-teal-400",children:[(0,Et.jsx)("option",{children:"\u041f\u0456\u0441\u043b\u044f \u043f\u0440\u0438\u0439\u043c\u0430\u043d\u043d\u044f"}),(0,Et.jsx)("option",{children:"+24 \u0433\u043e\u0434"})]})}),(0,Et.jsx)(Qo,{label:"\u041f\u0440\u0438\u043c\u0456\u0442\u043a\u0430 \u0434\u043e \u0437\u0430\u0441\u0442\u0430\u0432\u0438",children:(0,Et.jsx)("input",{placeholder:"\u041d\u0430\u043f\u0440., \u043f\u0456\u0434\u0432\u0438\u0449\u0435\u043d\u0438\u0439 \u0440\u0438\u0437\u0438\u043a \u0441\u043a\u043b\u043e",value:F,onChange:e=>U(e.target.value),className:"w-full rounded-md border border-slate-200 px-2 py-2 outline-none focus:ring-2 focus:ring-teal-400"})})]})]}),(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 p-4 shadow-sm",children:[(0,Et.jsx)("h3",{className:"text-base font-semibold mb-3",children:"\u0410\u0432\u0442\u043e\u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f \u0441\u043a\u043b\u0430\u0434\u0443"}),(0,Et.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,Et.jsxs)("li",{className:"flex items-center justify-between rounded-xl border border-slate-200 bg-white px-3 py-2",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)(Jo,{value:"high"}),(0,Et.jsx)("span",{children:"\u0417\u0456\u0431\u0440\u0430\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"})]}),(0,Et.jsx)("div",{className:"text-corp-text-muted text-xs",children:"\u0443 \u0434\u0435\u043d\u044c \u0432\u0438\u0434\u0430\u0447\u0456 09:00"})]}),(0,Et.jsxs)("li",{className:"flex items-center justify-between rounded-xl border border-slate-200 bg-white px-3 py-2",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)(Jo,{value:"medium"}),(0,Et.jsx)("span",{children:"\u041f\u0456\u0434\u0433\u043e\u0442\u0443\u0432\u0430\u0442\u0438 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f"})]}),(0,Et.jsx)("div",{className:"text-corp-text-muted text-xs",children:"\u0437\u0430 \u0434\u0435\u043d\u044c \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456"})]})]}),(0,Et.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,Et.jsx)("button",{className:"h-8 rounded-xl border border-slate-200 px-3 text-sm hover:shadow",children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u0430\u0434\u0430\u0447\u0443"}),(0,Et.jsx)("button",{className:"h-8 rounded-xl border border-slate-200 px-3 text-sm hover:shadow",children:"\u0412\u0456\u0434\u043a\u0440\u0438\u0442\u0438 \u0432 \u0437\u0430\u0434\u0430\u0447\u0430\u0445"})]})]}),(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 p-4 shadow-sm",children:[(0,Et.jsx)("h3",{className:"text-base font-semibold mb-3",children:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438"}),(0,Et.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,Et.jsxs)("li",{className:"rounded-xl border border-slate-200 bg-white px-3 py-2",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,Et.jsx)(Jo,{value:"draft"}),(0,Et.jsx)("span",{children:"\u041e\u0444\u0435\u0440\u0442\u0430/\u0440\u0430\u0445\u0443\u043d\u043e\u043a"})]}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsx)("button",{className:"h-7 rounded-lg border border-slate-200 px-2 text-xs hover:shadow",children:"\u0417\u0433\u0435\u043d\u0435\u0440\u0443\u0432\u0430\u0442\u0438"}),(0,Et.jsx)("button",{className:"h-7 rounded-lg border border-slate-200 px-2 text-xs hover:shadow",children:"\u041f\u0456\u0434\u043f\u0438\u0441\u0430\u0442\u0438"})]})]}),(0,Et.jsxs)("li",{className:"rounded-xl border border-slate-200 bg-white px-3 py-2",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,Et.jsx)(Jo,{value:"draft"}),(0,Et.jsx)("span",{children:"\u0414\u043e\u0433\u043e\u0432\u0456\u0440"})]}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsx)("button",{className:"h-7 rounded-lg border border-slate-200 px-2 text-xs hover:shadow",children:"\u0417\u0433\u0435\u043d\u0435\u0440\u0443\u0432\u0430\u0442\u0438"}),(0,Et.jsx)("button",{className:"h-7 rounded-lg border border-slate-200 px-2 text-xs hover:shadow",children:"\u041f\u0456\u0434\u043f\u0438\u0441\u0430\u0442\u0438"})]})]})]})]})]})]})]}),(0,Et.jsx)("footer",{className:"border-t border-slate-200 py-6 text-center text-corp-text-muted text-sm",children:"\xa9 FarforRent \u2022 new order"}),q&&(0,Et.jsx)("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/30 p-4 overflow-y-auto",children:(0,Et.jsxs)("div",{className:"w-full max-w-4xl overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-2xl",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-200 px-5 py-4",children:[(0,Et.jsx)("h2",{className:"text-lg font-semibold",children:"\u0412\u0438\u0431\u0440\u0430\u0442\u0438 \u0442\u043e\u0432\u0430\u0440 \u0437 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0443"}),(0,Et.jsx)("button",{className:"h-9 rounded-xl border border-slate-200 px-3 text-sm hover:shadow",onClick:()=>{G(!1),X("")},children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]}),(0,Et.jsxs)("div",{className:"p-5",children:[(0,Et.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0448\u0443\u043a \u043f\u043e \u043d\u0430\u0437\u0432\u0456, SKU \u0430\u0431\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457...",value:Y,onChange:e=>X(e.target.value),className:"w-full rounded-xl border border-slate-200 px-4 py-3 text-sm outline-none focus:ring-2 focus:ring-teal-400 mb-4"}),V?(0,Et.jsx)("div",{className:"text-center py-8 text-corp-text-muted",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."}):(0,Et.jsx)("div",{className:"max-h-96 overflow-y-auto",children:(0,Et.jsxs)("table",{className:"w-full text-sm",children:[(0,Et.jsx)("thead",{className:"bg-slate-50 text-corp-text-main sticky top-0",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"SKU"}),(0,Et.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"\u041d\u0430\u0437\u0432\u0430"}),(0,Et.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f"}),(0,Et.jsx)("th",{className:"px-4 py-3 text-right font-medium",children:"\u0426\u0456\u043d\u0430/\u0434\u043e\u0431\u0430"}),(0,Et.jsx)("th",{className:"px-4 py-3 text-right font-medium",children:"\u041d\u0430\u044f\u0432\u043d\u0456\u0441\u0442\u044c"}),(0,Et.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"\u0414\u0456\u044f"})]})}),(0,Et.jsx)("tbody",{className:"divide-y divide-slate-200",children:0===J.length?(0,Et.jsx)("tr",{children:(0,Et.jsx)("td",{colSpan:6,className:"px-4 py-8 text-center text-corp-text-muted",children:Y?"\u041d\u0456\u0447\u043e\u0433\u043e \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e":"\u0406\u043d\u0432\u0435\u043d\u0442\u0430\u0440 \u043f\u043e\u0440\u043e\u0436\u043d\u0456\u0439"})}):J.map(e=>(0,Et.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,Et.jsx)("td",{className:"px-4 py-3 font-mono text-xs",children:e.article}),(0,Et.jsx)("td",{className:"px-4 py-3",children:e.name}),(0,Et.jsx)("td",{className:"px-4 py-3 text-corp-text-main",children:e.category}),(0,Et.jsxs)("td",{className:"px-4 py-3 text-right tabular-nums",children:["\u20b4 ",e.price_per_day]}),(0,Et.jsx)("td",{className:"px-4 py-3 text-right",children:(0,Et.jsxs)("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium ".concat(e.quantity_available>0?"bg-emerald-100 text-emerald-800":"bg-slate-100 text-corp-text-main"),children:[e.quantity_available,"/",e.quantity_total]})}),(0,Et.jsx)("td",{className:"px-4 py-3",children:(0,Et.jsx)("button",{onClick:()=>(e=>{const t={sku:e.article,name:e.name,qty:1,price:e.price_per_day,depositTier:e.deposit_tier||"medium"},r=C[C.length-1];if(!r||r.sku||r.name)S([...C,t]);else{const e=[...C];e[C.length-1]=t,S(e)}G(!1),X("")})(e),className:"h-8 rounded-xl bg-teal-600 px-3 text-sm text-white hover:bg-teal-700",children:"\u0414\u043e\u0434\u0430\u0442\u0438"})})]},e.id))})]})})]})]})})]})},el="https://backrentalhub.farforrent.com.ua";function tl(){console.log("\ud83d\udd04 NewOrderView component loaded - VERSION 2024-11-28-v3-FINAL - NO checkConflicts function exists!");const{id:e}=be(),r=e,[n,s]=(ge(),(0,t.useState)(null)),[a,i]=(0,t.useState)(null),[o,l]=(0,t.useState)(null),[d,u]=(0,t.useState)(!0),[h,m]=(0,t.useState)(""),[p,f]=(0,t.useState)(""),[x,g]=(0,t.useState)("11:30\u201312:00"),[b,y]=(0,t.useState)("\u0434\u043e 17:00"),[v,w]=(0,t.useState)(1),[N,j]=(0,t.useState)(0),[_,C]=(0,t.useState)(""),[S,E]=(0,t.useState)(""),[A,I]=(0,t.useState)(!1),[k,T]=(0,t.useState)(!1),[D,R]=(0,t.useState)(""),[O,M]=(0,t.useState)([]),[P,L]=(0,t.useState)(!1),[B,F]=(0,t.useState)([]),[U,z]=(0,t.useState)([]),[H,V]=(0,t.useState)(!1),[W,q]=(0,t.useState)({});(0,t.useEffect)(()=>{if(!r)return;(async()=>{try{console.log("[NewOrderView] \u041f\u0435\u0440\u0435\u0432\u0456\u0440\u043a\u0430 \u0447\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0432 DecorOrder...");const e=await fetch("".concat(el,"/api/decor-orders/").concat(r));if(e.ok){const t=await e.json();console.log("[NewOrderView] \u2705 \u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043e \u0437 DecorOrder (\u043f\u0440\u0438\u0439\u043d\u044f\u0442\u0435 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f)"),console.log("[NewOrderView] \ud83d\udcc5 \u0414\u0430\u0442\u0438 \u0437 DecorOrder API:",{issue_date:t.issue_date,return_date:t.return_date,rent_date:t.rent_date,rent_return_date:t.rent_return_date});const n=t.issue_date||t.rent_date||"",a=t.return_date||t.rent_return_date||"";s(c(c({},t),{},{order_number:t.order_number||r,issue_date:n,return_date:a,manager_comment:t.manager_notes||t.manager_comment})),F(t.items||[]),m(n),f(a),g(t.issue_time||"11:30\u201312:00"),y(t.return_time||"\u0434\u043e 17:00"),console.log("[NewOrderView] \ud83d\udcc5 \u0412\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e \u0441\u0442\u0435\u0439\u0442 \u0434\u0430\u0442:",{issueDate:n,returnDate:a}),C(t.manager_notes||t.manager_comment||""),i(t.status),w(t.rental_days||1),console.log("[NewOrderView] \u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043e rental_days:",t.rental_days||1),void 0!==t.discount&&(j(t.discount),console.log("[NewOrderView] \u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043e discount:",t.discount)),u(!1)}else{console.log("[NewOrderView] \u26a0\ufe0f \u041d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0432 DecorOrder, \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0437 OpenCart...");const e=await fetch("".concat(el,"/api/orders/").concat(r));if(!e.ok)throw new Error("\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e");const t=await e.json();if(console.log("[NewOrderView] \u2705 \u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043e \u0437 OpenCart (\u043d\u043e\u0432\u0435 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f)"),console.log("[NewOrderView] \ud83d\udcc5 \u0414\u0430\u0442\u0438 \u0437 API:",{issue_date:t.issue_date,return_date:t.return_date}),s(t),F(t.items||[]),m(t.issue_date||""),f(t.return_date||""),console.log("[NewOrderView] \ud83d\udcc5 \u0412\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e \u0441\u0442\u0435\u0439\u0442 \u0434\u0430\u0442:",{issueDate:t.issue_date||"",returnDate:t.return_date||""}),C(t.manager_comment||""),w(1),t.client_id)try{const e=await fetch("".concat(el,"/api/orders/customer/").concat(t.client_id,"/stats"));if(e.ok){const t=await e.json();l(t)}}catch(zd){console.error("Error loading stats:",zd)}u(!1)}}catch(e){console.error("[NewOrderView] \u274c Error loading order:",e),u(!1)}})()},[r]),(0,t.useEffect)(()=>{if(!h||!p||0===B.length)return z([]),void q({});(async()=>{V(!0);try{const t={start_date:h,end_date:p,items:B.map(e=>({product_id:parseInt(e.inventory_id||e.product_id),sku:e.article||e.sku,quantity:e.quantity}))},r=await fetch("".concat(el,"/api/orders/check-availability"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(r.ok){var e;const t=await r.json(),n={};t.items&&t.items.forEach(e=>{n[e.product_id]={total:e.total_quantity||0,reserved:e.reserved_quantity||0,available:e.available_quantity||0}}),q(n);const s=(null===(e=t.items)||void 0===e?void 0:e.map(e=>{let t=null,r="warning";return 0===e.total_quantity?(t="out_of_stock",r="error"):e.available_quantity<e.requested_quantity?(t="insufficient",r="error"):e.has_tight_schedule?(t="tight_schedule",r="warning"):e.available_quantity<.2*e.total_quantity&&(t="low_stock",r="warning"),t?c(c({},e),{},{type:t,level:r,available:e.available_quantity,in_rent:e.reserved_quantity||0,requested:e.requested_quantity}):null}).filter(Boolean))||[];z(s)}}catch(t){console.error("Error checking availability:",t)}finally{V(!1)}})()},[h,p,B]);const G=async e=>{try{console.log("[SAVE ITEMS] \u0417\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f \u0442\u043e\u0432\u0430\u0440\u0456\u0432...",e.length);const n=await fetch("".concat(el,"/api/decor-orders/").concat(r,"/items"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e})});if(n.ok){const e=await n.json();console.log("[SAVE ITEMS] \u2705 \u0422\u043e\u0432\u0430\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e",e),console.log("[SAVE ITEMS] \ud83d\udd04 \u041f\u0435\u0440\u0435\u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f...");const a=await fetch("".concat(el,"/api/decor-orders/").concat(r));if(a.ok){var t;const e=await a.json();console.log("[SAVE ITEMS] \u2705 \u041e\u0442\u0440\u0438\u043c\u0430\u043d\u043e \u0441\u0432\u0456\u0436\u0456 \u0434\u0430\u043d\u0456:",null===(t=e.items)||void 0===t?void 0:t.length,"\u0442\u043e\u0432\u0430\u0440\u0456\u0432"),e.items&&(F(e.items),console.log("[SAVE ITEMS] \u2705 Items \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e \u0437 \u0441\u0435\u0440\u0432\u0435\u0440\u0430")),s(e)}return!0}return console.error("[SAVE ITEMS] \u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f"),!1}catch(n){return console.error("[SAVE ITEMS] \u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430:",n),!1}},Y=async()=>{I(!0);try{const e=a?"".concat(el,"/api/decor-orders/").concat(r):"".concat(el,"/api/orders/").concat(r);console.log("[SAVE] \u0417\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f \u0447\u0435\u0440\u0435\u0437: ".concat(e));const t=await fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({rental_start_date:h,rental_end_date:p,issue_time:x,return_time:b,notes:_,rental_days:v,discount:N,total_amount:X.totalWithDiscount,deposit_amount:X.depositToHold,total_loss_value:X.totalLossValue})});if(t.ok){const e=await t.json();console.log("[SAVE] \u2705 \u0412\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u044c \u0432\u0456\u0434 \u0441\u0435\u0440\u0432\u0435\u0440\u0430:",e);const r=e.issue_date||e.rent_date||h,n=e.return_date||e.rent_return_date||p,a=e.notes||e.manager_notes||e.manager_comment||_;s(c(c({},e),{},{issue_date:r,return_date:n,manager_comment:a})),m(r),f(n),C(a),w(e.rental_days||v),j(e.discount||N),console.log("[SAVE] \u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e \u0434\u0430\u043d\u0456:",{issue_date:r,return_date:n,rental_days:e.rental_days||v,discount:e.discount||N}),e.items&&e.items.length>0&&(console.log("[SAVE] \u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044f items \u0437 \u0441\u0435\u0440\u0432\u0435\u0440\u0430:",e.items.length),F(e.items)),alert("\u2705 \u0414\u0430\u043d\u0456 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e"),window.location.reload()}else{const e=await t.text();console.error("[SAVE] \u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430:",e),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f")}}catch(e){console.error("[SAVE] \u274c Exception:",e),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f")}finally{I(!1)}},X=(0,t.useMemo)(()=>{if(!B||0===B.length)return{totalRent:0,totalLossValue:0,depositToHold:0,totalWithDiscount:0,discountAmount:0};const e=B.reduce((e,t)=>e+t.price_per_day*t.quantity*v,0),t=B.reduce((e,t)=>e+t.deposit*t.quantity,0),r=e*N/100;return{totalRent:e,totalLossValue:t,depositToHold:t/2,totalWithDiscount:e-r,discountAmount:r}},[B,v,N]);return d?(0,Et.jsx)("div",{className:"min-h-screen bg-white grid place-content-center",children:(0,Et.jsx)("div",{className:"text-corp-text-muted",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})}):n?(0,Et.jsxs)("div",{className:"min-h-screen bg-white text-corp-text-dark",children:[(0,Et.jsx)(sl,{order:n,customerStats:o}),(0,Et.jsxs)("div",{className:"mx-auto max-w-7xl px-6 py-6 grid gap-6",children:[(0,Et.jsx)(il,{orderId:n.order_number}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Et.jsxs)("section",{className:"lg:col-span-2 grid gap-6",children:[(0,Et.jsx)(ol,{title:"\u041a\u043b\u0456\u0454\u043d\u0442",children:(0,Et.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,Et.jsx)(ll,{label:"\u0406\u043c'\u044f",children:(0,Et.jsx)("input",{value:n.client_name,readOnly:!0,disabled:!0,className:"w-full rounded-md border border-slate-200 bg-slate-50 px-3 py-2"})}),(0,Et.jsx)(ll,{label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",children:(0,Et.jsx)("input",{value:n.client_phone,readOnly:!0,disabled:!0,className:"w-full rounded-md border border-slate-200 bg-slate-50 px-3 py-2"})}),(0,Et.jsx)(ll,{label:"Email",children:(0,Et.jsx)("input",{value:n.client_email||"\u041d\u0435 \u0432\u043a\u0430\u0437\u0430\u043d\u043e",readOnly:!0,disabled:!0,className:"w-full rounded-md border border-slate-200 bg-slate-50 px-3 py-2"})}),o&&(0,Et.jsx)(ll,{label:"\u0421\u0442\u0430\u0442\u0443\u0441 \u043a\u043b\u0456\u0454\u043d\u0442\u0430",children:(0,Et.jsxs)("div",{className:"flex items-center gap-2 h-10",children:[(0,Et.jsx)(al,{tier:o.tier}),(0,Et.jsxs)("span",{className:"text-xs text-corp-text-muted",children:["(",o.order_count," \u0437\u0430\u043c.)"]})]})})]})}),(0,Et.jsxs)(ol,{title:"\u0414\u0430\u0442\u0438 \u043e\u0440\u0435\u043d\u0434\u0438 \u0442\u0430 \u0442\u0440\u0438\u0432\u0430\u043b\u0456\u0441\u0442\u044c",children:[(0,Et.jsxs)("div",{className:"grid md:grid-cols-6 gap-4",children:[(0,Et.jsx)(ll,{label:"\u0414\u0430\u0442\u0430 \u0432\u0438\u0434\u0430\u0447\u0456",children:(0,Et.jsx)("input",{type:"date",value:h,onChange:e=>m(e.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 outline-none"})}),(0,Et.jsx)(ll,{label:"\u0427\u0430\u0441 \u0432\u0438\u0434\u0430\u0447\u0456",children:(0,Et.jsxs)("select",{value:x,onChange:e=>g(e.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 outline-none",children:[(0,Et.jsx)("option",{children:"11:30\u201312:00"}),(0,Et.jsx)("option",{children:"12:00\u201312:30"}),(0,Et.jsx)("option",{children:"16:30\u201317:00"})]})}),(0,Et.jsx)(ll,{label:"\u0414\u0430\u0442\u0430 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f",children:(0,Et.jsx)("input",{type:"date",value:p,onChange:e=>f(e.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 outline-none"})}),(0,Et.jsx)(ll,{label:"\u0427\u0430\u0441 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f",children:(0,Et.jsxs)("select",{value:b,onChange:e=>y(e.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 outline-none",children:[(0,Et.jsx)("option",{children:"\u0434\u043e 17:00"}),(0,Et.jsx)("option",{children:"\u0434\u043e 16:00"})]})}),(0,Et.jsx)(ll,{label:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0434\u0456\u0431 \u043e\u0440\u0435\u043d\u0434\u0438",children:(0,Et.jsx)("input",{type:"number",min:"1",value:v,onChange:e=>w(parseInt(e.target.value)||1),className:"w-full rounded-md border border-slate-200 px-3 py-2 outline-none"})}),(0,Et.jsx)("div",{className:"grid items-end",children:(0,Et.jsx)("button",{onClick:Y,disabled:A,className:"h-10 rounded-xl bg-teal-600 text-white px-4 text-sm hover:bg-teal-700 disabled:opacity-50",children:A?"\u23f3 \u0417\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f...":"\ud83d\udcbe \u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]}),(0,Et.jsx)("div",{className:"mt-3 text-xs text-corp-text-muted",children:"\u041e\u0440\u0435\u043d\u0434\u0430 \u0440\u0430\u0445\u0443\u0454\u0442\u044c\u0441\u044f \u0437\u0430 \u043a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044e \u0434\u0456\u0431, \u0432\u043a\u0430\u0437\u0430\u043d\u043e\u044e \u0432\u0438\u0449\u0435 (\u043c\u043e\u0436\u043d\u0430 \u0437\u043c\u0456\u043d\u044e\u0432\u0430\u0442\u0438 \u043e\u043a\u0440\u0435\u043c\u043e \u0432\u0456\u0434 \u0434\u0430\u0442)"})]}),(0,Et.jsx)(ol,{title:U.length>0?"\u26a0\ufe0f \u041a\u043e\u043d\u0444\u043b\u0456\u043a\u0442\u0438 \u043d\u0430\u044f\u0432\u043d\u043e\u0441\u0442\u0456 (".concat(U.length,")"):"\u2705 \u041a\u043e\u043d\u0444\u043b\u0456\u043a\u0442\u0438 \u043d\u0430\u044f\u0432\u043d\u043e\u0441\u0442\u0456",children:H?(0,Et.jsx)("div",{className:"p-4 text-center text-blue-600",children:(0,Et.jsx)("span",{className:"animate-pulse",children:"\u041f\u0435\u0440\u0435\u0432\u0456\u0440\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0456..."})}):U.length>0?(0,Et.jsx)(nl,{conflicts:U}):h&&p&&B.length>0?(0,Et.jsx)("div",{className:"p-4 text-center text-emerald-600",children:"\u2705 \u0412\u0441\u0456 \u0442\u043e\u0432\u0430\u0440\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0456 \u043d\u0430 \u0432\u043a\u0430\u0437\u0430\u043d\u0456 \u0434\u0430\u0442\u0438"}):(0,Et.jsx)("div",{className:"p-4 text-center text-slate-400",children:"\u0414\u043e\u0434\u0430\u0439\u0442\u0435 \u0442\u043e\u0432\u0430\u0440\u0438 \u0442\u0430 \u0432\u043a\u0430\u0436\u0456\u0442\u044c \u0434\u0430\u0442\u0438 \u043e\u0440\u0435\u043d\u0434\u0438 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u043a\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0456"})}),(0,Et.jsx)(ol,{title:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0442\u043e\u0432\u0430\u0440\u0438 (\u043f\u043e\u0448\u0443\u043a \u043f\u043e SKU)",children:(0,Et.jsx)(rl,{searchQuery:D,onSearchChange:async e=>{if(R(e),e.length<2)M([]);else{L(!0);try{const t=await fetch("".concat(el,"/api/orders/inventory/search?query=").concat(encodeURIComponent(e),"&limit=9999"));if(t.ok){const e=((await t.json()).products||[]).map(e=>({product_id:e.product_id,sku:e.sku,name:e.name,price_per_day:e.price||0,damage_cost:0,deposit:0,image_url:e.image,available_quantity:e.available_quantity||0}));M(e)}}catch(t){console.error("Search error:",t)}finally{L(!1)}}},searchResults:O,searching:P,onAddItem:async e=>{let t;t=B.find(t=>t.inventory_id===e.product_id.toString())?B.map(t=>t.inventory_id===e.product_id.toString()?c(c({},t),{},{quantity:t.quantity+1}):t):[...B,{inventory_id:e.product_id.toString(),article:e.sku,name:e.name,quantity:1,price_per_day:e.price_per_day,damage_cost:e.damage_cost,deposit:e.deposit,total_rental:e.price_per_day*v,total_deposit:e.deposit}],F(t),R(""),M([]),await G(t)}})}),(0,Et.jsx)(ol,{title:"\u041f\u043e\u0437\u0438\u0446\u0456\u0457 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",children:(0,Et.jsx)(dl,{items:B,onUpdateQuantity:async(e,t)=>{if(t<1)return;const r=B.map(r=>{if(r.inventory_id===e){const e=r.damage_cost||r.deposit/r.quantity;return c(c({},r),{},{quantity:t,deposit:e*t,total_deposit:e*t})}return r});F(r),await G(r)},onRemove:async e=>{const t=B.filter(t=>t.inventory_id!==e);F(t),await G(t)},availability:W})}),(0,Et.jsx)(ol,{title:"\u0417\u043d\u0438\u0436\u043a\u0430",children:(0,Et.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,Et.jsx)(ll,{label:"\u0417\u043d\u0438\u0436\u043a\u0430 (%)",children:(0,Et.jsx)("input",{type:"number",min:"0",max:"100",value:N,onChange:e=>j(parseFloat(e.target.value)||0),className:"w-full rounded-md border border-slate-200 px-3 py-2 outline-none"})}),(0,Et.jsx)("div",{className:"grid items-end",children:(0,Et.jsxs)("div",{className:"text-sm",children:[(0,Et.jsx)("span",{className:"text-corp-text-main",children:"\u0415\u043a\u043e\u043d\u043e\u043c\u0456\u044f: "}),(0,Et.jsxs)("b",{className:"text-emerald-600",children:["\u20b4 ",X.discountAmount.toLocaleString("uk-UA")]})]})})]})}),(0,Et.jsx)(ol,{title:"\u041d\u043e\u0442\u0430\u0442\u043a\u0438 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 (\u0432\u043d\u0443\u0442\u0440\u0456\u0448\u043d\u0456)",children:(0,Et.jsx)("textarea",{rows:2,value:_,onChange:e=>C(e.target.value),className:"w-full rounded-xl border border-slate-200 px-3 py-2 outline-none",placeholder:"\u0412\u043d\u0443\u0442\u0440\u0456\u0448\u043d\u0456 \u043d\u043e\u0442\u0430\u0442\u043a\u0438 \u0434\u043b\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u0438..."})}),(0,Et.jsx)(pl,{order:n,orderId:r,onSave:Y,saving:A,decorOrderStatus:a})]}),(0,Et.jsxs)("aside",{className:"grid gap-6",children:[(0,Et.jsx)(ul,{calculations:X,rentalDays:v,discount:N}),(0,Et.jsx)(ml,{order:n})]})]})]})]}):(0,Et.jsx)("div",{className:"min-h-screen bg-white grid place-content-center",children:(0,Et.jsx)("div",{className:"text-corp-text-muted",children:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e"})})}function rl(e){let{searchQuery:t,onSearchChange:r,searchResults:n,searching:s,onAddItem:a}=e;return(0,Et.jsxs)("div",{className:"grid gap-3",children:[(0,Et.jsxs)("div",{className:"relative",children:[(0,Et.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c SKU \u0430\u0431\u043e \u043d\u0430\u0437\u0432\u0443 \u0442\u043e\u0432\u0430\u0440\u0443...",className:"w-full rounded-md border border-slate-200 px-3 py-2 outline-none"}),s&&(0,Et.jsx)("div",{className:"absolute right-3 top-2.5 text-slate-400",children:"\u041f\u043e\u0448\u0443\u043a..."})]}),n.length>0&&(0,Et.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3",children:n.map(e=>(0,Et.jsxs)("div",{className:"corp-stat-card hover:border-teal-300 transition",children:[(0,Et.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-sm font-medium",children:e.name}),(0,Et.jsxs)("div",{className:"text-xs text-corp-text-muted",children:["SKU: ",e.sku]})]}),(0,Et.jsxs)("div",{className:"text-right",children:[(0,Et.jsxs)("div",{className:"text-sm font-medium",children:["\u20b4 ",e.price_per_day.toLocaleString("uk-UA"),"/\u0434"]}),(0,Et.jsxs)("div",{className:"text-xs text-corp-text-muted",children:["\u0417\u0430\u0441\u0442\u0430\u0432\u0430: \u20b4",e.deposit.toLocaleString("uk-UA")]})]})]}),(0,Et.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,Et.jsxs)("div",{className:"text-xs text-corp-text-muted",children:["\u041d\u0430 \u0441\u043a\u043b\u0430\u0434\u0456: ",e.total_quantity," \u0448\u0442"]}),(0,Et.jsx)("button",{onClick:()=>a(e),className:"h-8 rounded-xl bg-teal-600 text-white px-3 text-xs hover:bg-teal-700",children:"+ \u0414\u043e\u0434\u0430\u0442\u0438"})]})]},e.product_id))}),t.length>=2&&0===n.length&&!s&&(0,Et.jsx)("div",{className:"text-center py-4 text-corp-text-muted text-sm",children:"\u0422\u043e\u0432\u0430\u0440\u0456\u0432 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]})}function nl(e){let{conflicts:t}=e;return(0,Et.jsx)("div",{className:"overflow-auto rounded-xl border border-slate-200",children:(0,Et.jsxs)("table",{className:"w-full text-sm",children:[(0,Et.jsx)("thead",{className:"bg-slate-50 text-corp-text-main",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-3 py-2 text-left font-medium",children:"SKU / \u041d\u0430\u0437\u0432\u0430"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-left font-medium",children:"\u0422\u0438\u043f \u043a\u043e\u043d\u0444\u043b\u0456\u043a\u0442\u0443"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-left font-medium",children:"\u0414\u0435\u0442\u0430\u043b\u044c"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right font-medium",children:"\u0412\u0441\u044c\u043e\u0433\u043e"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right font-medium",children:"\u0412 \u043e\u0440\u0435\u043d\u0434\u0456"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right font-medium",children:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u043e"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right font-medium",children:"\u0417\u0430\u043f\u0438\u0442\u0430\u043d\u043e"})]})}),(0,Et.jsx)("tbody",{className:"divide-y divide-slate-200",children:t.map((e,t)=>(0,Et.jsxs)("tr",{className:"error"===e.level?"bg-rose-50":"bg-amber-50",children:[(0,Et.jsxs)("td",{className:"px-3 py-2",children:[(0,Et.jsx)("div",{className:"font-mono text-xs font-semibold text-corp-text-dark",children:e.sku||"N/A"}),(0,Et.jsx)("div",{className:"text-xs text-corp-text-main mt-0.5",children:e.product_name||e.name||"\u041d\u0435\u0432\u0456\u0434\u043e\u043c\u0438\u0439 \u0442\u043e\u0432\u0430\u0440"})]}),(0,Et.jsx)("td",{className:"px-3 py-2",children:(0,Et.jsxs)(cl,{tone:"error"===e.level?"rose":"amber",children:["out_of_stock"===e.type&&"\ud83d\udd34 \u041d\u0435\u043c\u0430\u0454 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0456","insufficient"===e.type&&"\u274c \u041d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e","tight_schedule"===e.type&&"\u26a0\ufe0f \u0429\u0456\u043b\u044c\u043d\u0438\u0439 \u0433\u0440\u0430\u0444\u0456\u043a","low_stock"===e.type&&"\ud83d\udce6 \u041c\u0430\u043b\u0438\u0439 \u0437\u0430\u043f\u0430\u0441",!["out_of_stock","insufficient","tight_schedule","low_stock"].includes(e.type)&&e.type]})}),(0,Et.jsxs)("td",{className:"px-3 py-2 text-corp-text-main",children:["out_of_stock"===e.type&&"\u0422\u043e\u0432\u0430\u0440 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456\u0439 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0456 (\u0437\u0430\u0433\u0430\u043b\u044c\u043d\u0430 \u043a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c = 0)","insufficient"===e.type&&"\u0422\u043e\u0432\u0430\u0440 \u0437\u0430\u0440\u0435\u0437\u0435\u0440\u0432\u043e\u0432\u0430\u043d\u0438\u0439 \u043d\u0430 \u0446\u0456 \u0434\u0430\u0442\u0438 \u0456\u043d\u0448\u0438\u043c\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f\u043c\u0438","tight_schedule"===e.type&&"\u0422\u043e\u0432\u0430\u0440 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0438\u0439, \u0430\u043b\u0435 \u0454 \u0431\u043b\u0438\u0437\u044c\u043a\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0437 \u0440\u0438\u0437\u0438\u043a\u043e\u043c \u0437\u0430\u0442\u0440\u0438\u043c\u043a\u0438","low_stock"===e.type&&"\u0422\u043e\u0432\u0430\u0440 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0438\u0439, \u0430\u043b\u0435 \u0437\u0430\u043b\u0438\u0448\u043e\u043a \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u043e \u043c\u0430\u043b\u0438\u0439 (".concat(e.available_quantity," \u0437 ").concat(e.total_quantity," \u0448\u0442)"),void 0!==e.available_quantity&&void 0!==e.requested_quantity&&e.available_quantity<e.requested_quantity&&(0,Et.jsxs)("div",{className:"text-xs text-rose-600 mt-1",children:["\u0411\u0440\u0430\u043a\u0443\u0454: ",e.requested_quantity-e.available_quantity," \u0448\u0442"]}),e.nearby_orders&&e.nearby_orders.length>0&&(0,Et.jsxs)("div",{className:"text-xs text-corp-text-main mt-2 space-y-1",children:[(0,Et.jsx)("div",{className:"font-semibold",children:e.is_available?"\u26a0\ufe0f \u0411\u043b\u0438\u0437\u044c\u043a\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f (\u0440\u0438\u0437\u0438\u043a):":"\ud83d\udd12 \u0422\u043e\u0432\u0430\u0440 \u0437\u0430\u0439\u043d\u044f\u0442\u0438\u0439 \u0432 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f\u0445:"}),e.nearby_orders.map((e,t)=>(0,Et.jsxs)("div",{className:"pl-2",children:["\u2022 ",(0,Et.jsx)("span",{className:"font-mono",children:e.order_number})," ",(0,Et.jsxs)("span",{className:"issued"===e.status||"on_rent"===e.status?"text-rose-600 font-semibold":"text-blue-600",children:["(",e.status,")"]})," ",e.rental_start_date," \u2192 ",e.rental_end_date," ","[",e.quantity," \u0448\u0442]",null!==e.days_gap&&e.days_gap>=0&&e.days_gap<=1&&(0,Et.jsxs)("span",{className:"text-amber-600 font-semibold ml-1",children:["(\u2194 ",e.days_gap," \u0434\u043d. \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456)"]})]},t))]})]}),(0,Et.jsx)("td",{className:"px-3 py-2 text-right tabular-nums",children:(0,Et.jsx)("span",{className:"font-medium",children:void 0!==e.total_quantity?e.total_quantity:"?"})}),(0,Et.jsx)("td",{className:"px-3 py-2 text-right tabular-nums text-rose-600",children:void 0!==e.in_rent?e.in_rent:"?"}),(0,Et.jsx)("td",{className:"px-3 py-2 text-right tabular-nums",children:(0,Et.jsx)("span",{className:0===e.available?"font-bold text-rose-600":"font-medium text-emerald-600",children:void 0!==e.available?e.available:"?"})}),(0,Et.jsx)("td",{className:"px-3 py-2 text-right tabular-nums font-bold",children:void 0!==e.requested?e.requested:"?"})]},t))})]})})}function sl(e){let{order:t,customerStats:r}=e;return(0,Et.jsx)("header",{className:"sticky top-0 z-30 border-b border-slate-200 bg-white/90 backdrop-blur",children:(0,Et.jsxs)("div",{className:"mx-auto max-w-7xl px-6 py-4 flex flex-wrap items-center gap-4",children:[(0,Et.jsxs)("h1",{className:"text-lg font-semibold",children:["\u041d\u043e\u0432\u0435 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u2022 #",t.order_number]}),(0,Et.jsxs)("div",{className:"text-sm text-corp-text-main",children:["\u041a\u043b\u0456\u0454\u043d\u0442: ",(0,Et.jsx)("b",{children:t.client_name})]}),r&&(0,Et.jsx)(al,{tier:r.tier,count:r.order_count}),(0,Et.jsx)("div",{className:"ml-auto flex items-center gap-3 text-sm",children:(0,Et.jsx)(cl,{tone:"slate",children:"\u0421\u0442\u0430\u0442\u0443\u0441: \u0412 \u043e\u0431\u0440\u043e\u0431\u0446\u0456"})})]})})}function al(e){let{tier:t,count:r}=e;const n={novice:{label:"\u041d\u043e\u0432\u0430\u0447\u043e\u043a",bg:"bg-slate-100 text-slate-700"},regular:{label:"\u041f\u043e\u0441\u0442\u0456\u0439\u043d\u0438\u0439",bg:"bg-blue-100 text-blue-700"},silver:{label:"\u0421\u0440\u0456\u0431\u043d\u0438\u0439",bg:"bg-slate-200 text-corp-text-dark"},gold:{label:"\u0417\u043e\u043b\u043e\u0442\u0438\u0439",bg:"bg-amber-100 text-amber-700"},platinum:{label:"\u041f\u043b\u0430\u0442\u0438\u043d\u0430",bg:"bg-purple-100 text-purple-700"}},{label:s,bg:a}=n[t]||n.novice;return(0,Et.jsxs)("span",{className:"rounded-full px-2.5 py-1 text-xs font-medium ".concat(a),children:[s," ",void 0!==r&&"(".concat(r,")")]})}function il(e){let{orderId:t}=e;return(0,Et.jsx)("nav",{className:"text-sm text-corp-text-muted",children:(0,Et.jsxs)("ol",{className:"flex items-center gap-2",children:[(0,Et.jsx)("li",{children:(0,Et.jsx)("a",{href:"/",className:"hover:text-corp-text-dark",children:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"})}),(0,Et.jsx)("li",{children:"\u203a"}),(0,Et.jsx)("li",{children:"\u0412\u0445\u0456\u0434\u043d\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),(0,Et.jsx)("li",{children:"\u203a"}),(0,Et.jsxs)("li",{className:"text-corp-text-dark",children:["#",t]})]})})}function ol(e){let{title:t,children:r,right:n}=e;return(0,Et.jsxs)("section",{className:"rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-200 bg-white px-4 py-3",children:[(0,Et.jsx)("h3",{className:"text-base font-semibold",children:t}),n]}),(0,Et.jsx)("div",{className:"p-4",children:r})]})}function ll(e){let{label:t,children:r}=e;return(0,Et.jsxs)("label",{className:"flex flex-col gap-1 text-sm",children:[(0,Et.jsx)("span",{className:"text-corp-text-main",children:t}),r]})}function cl(e){let{children:t,tone:r="slate"}=e;return(0,Et.jsx)("span",{className:"rounded-full px-2.5 py-1 text-xs font-medium ".concat({slate:"bg-slate-100 text-corp-text-dark",amber:"bg-amber-100 text-amber-800",rose:"bg-rose-100 text-rose-800",emerald:"bg-emerald-100 text-emerald-800"}[r]),children:t})}function dl(e){let{items:t,onUpdateQuantity:r,onRemove:n,availability:s}=e;return(0,Et.jsx)("div",{className:"overflow-auto rounded-xl border border-slate-200",children:(0,Et.jsxs)("table",{className:"w-full text-sm",children:[(0,Et.jsx)("thead",{className:"bg-slate-50 text-corp-text-main",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-3 py-2 text-left font-medium",children:"\u0424\u043e\u0442\u043e"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-left font-medium",children:"\u041d\u0430\u0437\u0432\u0430"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-left font-medium",children:"SKU"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right font-medium",children:"\u0426\u0456\u043d\u0430/\u0434"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right font-medium",children:"\u0417\u0431\u0438\u0442\u043e\u043a"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right font-medium",children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"}),(0,Et.jsx)("th",{className:"px-3 py-2"})]})}),(0,Et.jsxs)("tbody",{className:"divide-y divide-slate-200",children:[0===t.length&&(0,Et.jsx)("tr",{children:(0,Et.jsx)("td",{colSpan:7,className:"px-3 py-6 text-center text-corp-text-muted",children:"\u0414\u043e\u0434\u0430\u0439\u0442\u0435 \u0442\u043e\u0432\u0430\u0440\u0438 \u0447\u0435\u0440\u0435\u0437 \u043f\u043e\u0448\u0443\u043a \u0432\u0438\u0449\u0435"})}),t.map((e,t)=>{var s,a,i;const o=xs(e.image);return(0,Et.jsxs)("tr",{children:[(0,Et.jsxs)("td",{className:"px-3 py-2",children:[o?(0,Et.jsx)("img",{src:o,alt:e.name,className:"w-16 h-16 rounded-lg border border-slate-200 object-cover",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="grid"}}):null,(0,Et.jsx)("div",{className:"w-16 h-16 rounded-lg border border-slate-200 bg-slate-50 grid place-content-center text-xs text-slate-400",style:{display:o?"none":"grid"},children:"\ud83d\udce6"})]}),(0,Et.jsx)("td",{className:"px-3 py-2 font-medium",children:e.name}),(0,Et.jsx)("td",{className:"px-3 py-2 font-mono text-xs text-corp-text-main",children:e.article||e.sku||"-"}),(0,Et.jsxs)("td",{className:"px-3 py-2 text-right tabular-nums",children:["\u20b4 ",(null===(s=e.price_per_day)||void 0===s?void 0:s.toLocaleString("uk-UA"))||"0"]}),(0,Et.jsxs)("td",{className:"px-3 py-2 text-right tabular-nums text-corp-text-muted",children:["\u20b4 ",(null===(a=e.damage_cost)||void 0===a?void 0:a.toLocaleString("uk-UA"))||(null===(i=e.price_per_day)||void 0===i?void 0:i.toLocaleString("uk-UA"))||"0"]}),(0,Et.jsx)("td",{className:"px-3 py-2",children:(0,Et.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,Et.jsx)("button",{onClick:()=>r(e.inventory_id,e.quantity-1),className:"h-7 w-7 rounded-lg border hover:bg-slate-50",disabled:e.quantity<=1,children:"-"}),(0,Et.jsx)("input",{value:e.quantity,onChange:t=>r(e.inventory_id,parseInt(t.target.value)||1),className:"w-14 rounded-md border border-slate-200 px-2 py-1 text-right tabular-nums outline-none"}),(0,Et.jsx)("button",{onClick:()=>r(e.inventory_id,e.quantity+1),className:"h-7 w-7 rounded-lg border hover:bg-slate-50",children:"+"})]})}),(0,Et.jsx)("td",{className:"px-3 py-2 text-right",children:(0,Et.jsx)("button",{onClick:()=>n(e.inventory_id),className:"h-7 rounded-lg border px-2 text-xs hover:bg-rose-50 hover:text-rose-700",children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})})]},t)})]})]})})}function ul(e){let{calculations:t,rentalDays:r,discount:n}=e;return(0,Et.jsx)(ol,{title:"\u041f\u0456\u0434\u0441\u0443\u043c\u043e\u043a",children:(0,Et.jsxs)("div",{className:"grid gap-3 text-sm",children:[(0,Et.jsx)(hl,{k:"\u0414\u0456\u0431 \u043e\u0440\u0435\u043d\u0434\u0438",v:(0,Et.jsx)("b",{className:"tabular-nums",children:r})}),(0,Et.jsx)(hl,{k:"\u041e\u0440\u0435\u043d\u0434\u0430 (\u0431\u0435\u0437 \u0437\u043d\u0438\u0436\u043a\u0438)",v:"\u20b4 ".concat(t.totalRent.toLocaleString("uk-UA"))}),n>0&&(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsx)(hl,{k:"\u0417\u043d\u0438\u0436\u043a\u0430 (".concat(n,"%)"),v:(0,Et.jsxs)("span",{className:"text-emerald-600",children:["-\u20b4 ",t.discountAmount.toLocaleString("uk-UA")]})}),(0,Et.jsx)(hl,{k:"\u041e\u0440\u0435\u043d\u0434\u0430 \u0437\u0456 \u0437\u043d\u0438\u0436\u043a\u043e\u044e",v:(0,Et.jsxs)("b",{children:["\u20b4 ",t.totalWithDiscount.toLocaleString("uk-UA")]})})]}),(0,Et.jsx)("div",{className:"border-t border-slate-200"}),(0,Et.jsx)(hl,{k:(0,Et.jsx)("span",{className:"text-corp-text-muted text-xs",children:"\u041f\u043e\u0432\u043d\u0430 \u0432\u0430\u0440\u0442\u0456\u0441\u0442\u044c \u0432\u0442\u0440\u0430\u0442\u0438 \u0434\u0435\u043a\u043e\u0440\u0443 (\u0437\u0431\u0438\u0442\u043e\u043a)"}),v:(0,Et.jsxs)("span",{className:"text-rose-600",children:["\u20b4 ",t.totalLossValue.toLocaleString("uk-UA")]})}),(0,Et.jsx)(hl,{k:"\u0417\u0430\u0441\u0442\u0430\u0432\u0430 \u0434\u043e \u043e\u043f\u043b\u0430\u0442\u0438 (\u0445\u043e\u043b\u0434)",v:(0,Et.jsxs)("span",{className:"text-amber-700 font-medium",children:["\u20b4 ",t.depositToHold.toLocaleString("uk-UA")]})}),(0,Et.jsx)("div",{className:"border-t border-slate-300"}),(0,Et.jsx)(hl,{k:(0,Et.jsx)("b",{className:"text-base",children:"\u0414\u043e \u043e\u043f\u043b\u0430\u0442\u0438 \u0437\u0430\u0440\u0430\u0437"}),v:(0,Et.jsxs)("b",{className:"text-lg text-emerald-700",children:["\u20b4 ",(t.totalWithDiscount+t.depositToHold).toLocaleString("uk-UA")]})})]})})}function hl(e){let{k:t,v:r}=e;return(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsx)("div",{className:"text-corp-text-main",children:t}),(0,Et.jsx)("div",{className:"text-corp-text-dark",children:r})]})}function ml(e){let{order:t}=e;const r=!!t.client_name,n=!!t.issue_date&&!!t.return_date,s=t.items&&t.items.length>0,a=[["\u041a\u043b\u0456\u0454\u043d\u0442 \u0432\u043a\u0430\u0437\u0430\u043d\u0438\u0439",r],["\u0414\u0430\u0442\u0438 \u0432\u0438\u0434\u0430\u0447\u0456/\u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u0437\u0430\u043f\u043e\u0432\u043d\u0435\u043d\u0456",n],["\u041f\u043e\u0437\u0438\u0446\u0456\u0457 \u0434\u043e\u0434\u0430\u043d\u0456",s],["\u0413\u043e\u0442\u043e\u0432\u043e \u0434\u043e \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f",r&&n&&s]];return(0,Et.jsx)(ol,{title:"\u0427\u0435\u043a\u043b\u0456\u0441\u0442",children:(0,Et.jsx)("ul",{className:"grid gap-2 text-sm",children:a.map((e,t)=>{let[r,n]=e;return(0,Et.jsxs)("li",{className:"flex items-center gap-2",children:[(0,Et.jsx)("span",{className:"h-2.5 w-2.5 rounded-full ".concat(n?"bg-emerald-500":"bg-slate-300")}),(0,Et.jsx)("span",{children:r})]},t)})})})}function pl(e){let{order:r,orderId:n,onSave:s,saving:a,decorOrderStatus:i}=e;const[o,l]=t.useState(!1),[c,d]=t.useState(!1),[u,h]=t.useState(!1),m=ge(),p=async()=>{const e=prompt("\u042f\u043a\u0456 \u0437\u043c\u0456\u043d\u0438 \u0431\u0443\u043b\u0438 \u0432\u043d\u0435\u0441\u0435\u043d\u0456? (\u0447\u0435\u0440\u0435\u0437 \u043a\u043e\u043c\u0443)\n\u041d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434: \u0414\u0430\u0442\u0430 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u0437\u043c\u0456\u043d\u0435\u043d\u0430, \u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0441\u0442\u0456\u043b\u044c\u0446\u0456\u0432 +2");d(!0);try{console.log("\ud83d\udcdd \u0417\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f \u0437\u043c\u0456\u043d \u043f\u0435\u0440\u0435\u0434 \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043a\u043e\u044e email..."),await s(),console.log("\u2705 \u0417\u043c\u0456\u043d\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e, \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043a\u0430 email..."),console.log("[EMAIL] \u0412\u0456\u0434\u043f\u0440\u0430\u0432\u043a\u0430 email \u0434\u043b\u044f order_id:",n);const t=await fetch("".concat("https://backrentalhub.farforrent.com.ua","/api/decor-orders/").concat(n,"/send-confirmation-email"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({changes:e?e.split(",").map(e=>e.trim()):[]})}),a=await t.json();t.ok?(alert("\u2705 Email \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e!\n\n\u0417\u043c\u0456\u043d\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e \u0442\u0430 \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u043a\u043b\u0456\u0454\u043d\u0442\u0443 \u043d\u0430 ".concat(r.client_email)),window.location.reload()):alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430: ".concat(a.detail||"\u041d\u0435\u0432\u0456\u0434\u043e\u043c\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430"))}catch(t){console.error("Error sending email:",t),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430: ".concat(t.message||"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u0438\u0442\u0438 email"))}finally{d(!1)}},f=async()=>{if(console.log("[MOVE TO PREP] Starting - no conflict check"),confirm("\u0412\u0456\u0434\u043f\u0440\u0430\u0432\u0438\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u043d\u0430 \u0437\u0431\u0456\u0440? \u041a\u043e\u043c\u0456\u0440\u043d\u0438\u043a\u0438 \u0437\u043c\u043e\u0436\u0443\u0442\u044c \u043f\u043e\u0447\u0430\u0442\u0438 \u0437\u0431\u0438\u0440\u0430\u0442\u0438 \u0442\u043e\u0432\u0430\u0440\u0438.")){h(!0);try{console.log("[MOVE TO PREP] \u0412\u0456\u0434\u043f\u0440\u0430\u0432\u043a\u0430 \u043d\u0430 \u0437\u0431\u0456\u0440 order_id:",n);const e=await fetch("".concat("https://backrentalhub.farforrent.com.ua","/api/decor-orders/").concat(n,"/move-to-preparation"),{method:"POST",headers:{"Content-Type":"application/json"}}),t=await e.json();e.ok?(alert("\u2705 \u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u043d\u0430 \u0437\u0431\u0456\u0440!\n\n\u2022 \u041a\u043b\u0456\u0454\u043d\u0442 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u043d\u043e \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u0438\u0439\n\u2022 \u041a\u043e\u043c\u0456\u0440\u043d\u0438\u043a\u0438 \u043c\u043e\u0436\u0443\u0442\u044c \u043f\u043e\u0447\u0430\u0442\u0438 \u043f\u0456\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0443"),console.log("[MOVE TO PREP] \u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u0434\u043e \u0441\u043f\u0438\u0441\u043a\u0443 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c"),m("/orders")):alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430: ".concat(t.detail||"\u041d\u0435\u0432\u0456\u0434\u043e\u043c\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430","\n\n\u042f\u043a\u0449\u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0437 \u043d\u0430\u044f\u0432\u043d\u0456\u0441\u0442\u044e - \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435 \u043a\u043e\u043d\u0444\u043b\u0456\u043a\u0442\u0438 \u0442\u0430 \u0437\u0431\u0435\u0440\u0435\u0436\u0456\u0442\u044c \u0437\u043c\u0456\u043d\u0438."))}catch(e){console.error("[MOVE TO PREP] Error:",e),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043a\u0438 \u043d\u0430 \u0437\u0431\u0456\u0440: ".concat(e.message))}finally{h(!1)}}},x=async()=>{const e=prompt("\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0432\u0456\u0434\u043c\u043e\u0432\u0438 \u043a\u043b\u0456\u0454\u043d\u0442\u0430 (\u043e\u043f\u0446\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u043e):");if(null!==e&&confirm("\u26a0\ufe0f \u041a\u043b\u0456\u0454\u043d\u0442 \u0432\u0456\u0434\u043c\u043e\u0432\u0438\u0432\u0441\u044f \u0432\u0456\u0434 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f?\n\n\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0431\u0443\u0434\u0435 \u0441\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u043e \u0456 \u0442\u043e\u0432\u0430\u0440\u0438 \u0440\u043e\u0437\u043c\u043e\u0440\u043e\u0436\u0435\u043d\u043e."))try{const t=await fetch("".concat(el,"/api/decor-orders/").concat(r.order_id,"/cancel-by-client"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:e||"\u041a\u043b\u0456\u0454\u043d\u0442 \u0432\u0456\u0434\u043c\u043e\u0432\u0438\u0432\u0441\u044f \u0431\u0435\u0437 \u043f\u043e\u044f\u0441\u043d\u0435\u043d\u044c"})}),n=await t.json();t.ok?(alert("\u2705 \u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0441\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u043e. \u0422\u043e\u0432\u0430\u0440\u0438 \u0440\u043e\u0437\u043c\u043e\u0440\u043e\u0436\u0435\u043d\u043e."),m("/orders")):alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430: ".concat(n.detail||"\u041d\u0435\u0432\u0456\u0434\u043e\u043c\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430"))}catch(t){console.error("Error cancelling order:",t),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430: ".concat(t.message))}};return"awaiting_customer"===i?(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2 rounded-lg bg-amber-50 p-3 text-sm text-amber-800",children:[(0,Et.jsx)("span",{children:"\u23f3"}),(0,Et.jsx)("span",{children:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u043f\u0440\u0438\u0439\u043d\u044f\u0442\u043e. \u041e\u0447\u0456\u043a\u0443\u0454 \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f \u043a\u043b\u0456\u0454\u043d\u0442\u0430."})]}),r.client_confirmed&&(0,Et.jsxs)("div",{className:"flex items-center gap-2 rounded-lg bg-green-50 border border-green-200 p-3 text-sm text-green-800",children:[(0,Et.jsx)("span",{children:"\u2705"}),(0,Et.jsxs)("span",{children:[(0,Et.jsx)("strong",{children:"\u041a\u043b\u0456\u0454\u043d\u0442 \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0432 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f!"})," \u041c\u043e\u0436\u0435\u0442\u0435 \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u0438\u0442\u0438 \u043d\u0430 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u044e."]})]}),(0,Et.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,Et.jsx)("div",{className:"text-sm text-corp-text-main",children:"\u0412\u043d\u0435\u0441\u0456\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u0456\u0434\u043d\u0456 \u0437\u043c\u0456\u043d\u0438, \u0437\u0431\u0435\u0440\u0435\u0436\u0456\u0442\u044c, \u0442\u0430 \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u0442\u0435 email \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f \u043a\u043b\u0456\u0454\u043d\u0442\u0443."}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsx)("button",{onClick:s,disabled:a||c||u,className:"h-10 rounded-xl border border-slate-200 px-4 text-sm hover:bg-slate-50 disabled:opacity-50",children:a?"\u23f3 \u0417\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f...":"\ud83d\udcbe \u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u043c\u0456\u043d\u0438"}),(0,Et.jsx)("button",{onClick:x,disabled:c||a||u,className:"h-10 rounded-xl border-2 border-rose-300 px-4 text-sm text-rose-600 hover:bg-rose-50 disabled:opacity-50",children:"\ud83d\udeab \u041a\u043b\u0456\u0454\u043d\u0442 \u0432\u0456\u0434\u043c\u043e\u0432\u0438\u0432\u0441\u044f"}),(0,Et.jsx)("button",{onClick:p,disabled:c||a||u,className:"h-10 rounded-xl bg-blue-600 px-4 text-sm text-white hover:bg-blue-700 disabled:opacity-50",children:c?"\u23f3 \u0412\u0456\u0434\u043f\u0440\u0430\u0432\u043a\u0430...":"\ud83d\udce7 \u0412\u0456\u0434\u043f\u0440\u0430\u0432\u0438\u0442\u0438 email"}),(0,Et.jsx)("button",{onClick:f,disabled:u||a||c,className:"h-10 rounded-xl bg-emerald-600 px-4 text-sm text-white hover:bg-emerald-700 disabled:opacity-50",children:u?"\u23f3 \u0412\u0456\u0434\u043f\u0440\u0430\u0432\u043a\u0430...":"\ud83d\udce6 \u0412\u0456\u0434\u043f\u0440\u0430\u0432\u0438\u0442\u0438 \u043d\u0430 \u0437\u0431\u0456\u0440"})]})]})]}):(0,Et.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,Et.jsx)("div",{className:"text-sm text-corp-text-main",children:"\u0426\u0435 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e \u043a\u043b\u0456\u0454\u043d\u0442\u043e\u043c. \u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435 \u0434\u0430\u0442\u0438, \u043a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u0456\u0432 \u0456 \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0456\u0442\u044c \u0431\u0440\u043e\u043d\u044c."}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsx)("button",{onClick:s,disabled:a||o,className:"h-10 rounded-xl border border-slate-200 px-4 text-sm hover:bg-slate-50 disabled:opacity-50",children:a?"\u23f3 \u0417\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f...":"\ud83d\udcbe \u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"}),(0,Et.jsx)("button",{onClick:x,disabled:o||a,className:"h-10 rounded-xl border-2 border-rose-300 px-4 text-sm text-rose-600 hover:bg-rose-50 disabled:opacity-50",children:"\ud83d\udeab \u041a\u043b\u0456\u0454\u043d\u0442 \u0432\u0456\u0434\u043c\u043e\u0432\u0438\u0432\u0441\u044f"}),(0,Et.jsx)("button",{onClick:async()=>{const e=prompt("\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u0432\u0456\u0434\u0445\u0438\u043b\u0435\u043d\u043d\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f:\n(\u0446\u044f \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f \u0431\u0443\u0434\u0435 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0430 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0456)");if(e&&confirm("\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438 \u0432\u0456\u0434\u0445\u0438\u043b\u0435\u043d\u043d\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f?\n\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0431\u0443\u0434\u0435 \u043f\u043e\u043c\u0456\u0447\u0435\u043d\u043e \u044f\u043a \u0432\u0456\u0434\u0445\u0438\u043b\u0435\u043d\u0435."))try{const t=await fetch("".concat(el,"/api/orders/").concat(r.order_number,"/decline"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:e,declined_by:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"})}),n=await t.json();t.ok?(alert("\u2705 \u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f #".concat(r.order_number," \u0432\u0456\u0434\u0445\u0438\u043b\u0435\u043d\u043e\n\n\u041f\u0440\u0438\u0447\u0438\u043d\u0430: ").concat(e,"\n\n\u041a\u043b\u0456\u0454\u043d\u0442 \u0431\u0443\u0434\u0435 \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439.")),m("/")):alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430: ".concat(n.detail||"\u041d\u0435\u0432\u0456\u0434\u043e\u043c\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430"))}catch(t){console.error("Error declining order:",t),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0432\u0456\u0434\u0445\u0438\u043b\u0435\u043d\u043d\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f")}},disabled:o,className:"h-10 rounded-xl border border-slate-200 px-4 text-sm hover:bg-slate-50 disabled:opacity-50",children:"\u274c \u0412\u0456\u0434\u0445\u0438\u043b\u0438\u0442\u0438"}),(0,Et.jsx)("button",{onClick:async()=>{if(confirm("\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438 \u043f\u0440\u0438\u0439\u043d\u044f\u0442\u0442\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f? \u0411\u0443\u0434\u0435 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e \u043a\u0430\u0440\u0442\u043a\u0438 \u0432\u0438\u0434\u0430\u0447\u0456 \u0442\u0430 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f.")){console.log("[NewOrder] Accepting order:",{order_number:r.order_number,order_id:r.order_id,url:"".concat("https://backrentalhub.farforrent.com.ua","/api/orders/").concat(r.order_number,"/accept")}),l(!0);try{const e=await fetch("".concat("https://backrentalhub.farforrent.com.ua","/api/orders/").concat(r.order_number,"/accept"),{method:"POST",headers:{"Content-Type":"application/json"}}),t=await e.json();e.ok?(alert("\u2705 \u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u043f\u0440\u0438\u0439\u043d\u044f\u0442\u043e!\n\n\ud83d\udccb \u0421\u0442\u0430\u0442\u0443\u0441: \u041e\u0447\u0456\u043a\u0443\u0454 \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f \u043a\u043b\u0456\u0454\u043d\u0442\u0430\n\ud83d\udccb \u041a\u0430\u0440\u0442\u043a\u0430 \u0432\u0438\u0434\u0430\u0447\u0456 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u0430\n\ud83d\udccb \u041a\u0430\u0440\u0442\u043a\u0430 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u0430\n\n\u0422\u0435\u043f\u0435\u0440 \u043c\u043e\u0436\u043d\u0430 \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u0438\u0442\u0438 email \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f \u043a\u043b\u0456\u0454\u043d\u0442\u0443"),window.location.reload()):alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430: ".concat(t.detail||"\u041d\u0435\u0432\u0456\u0434\u043e\u043c\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430"))}catch(e){console.error("Error accepting order:",e),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438\u0439\u043d\u044f\u0442\u0442\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f")}finally{l(!1)}}},disabled:o||a,className:"h-10 rounded-xl bg-slate-900 px-4 text-sm text-white hover:bg-slate-800 disabled:opacity-50",children:o?"\u23f3 \u041f\u0440\u0438\u0439\u043d\u044f\u0442\u0442\u044f...":"\u2713 \u041f\u0440\u0438\u0439\u043d\u044f\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"})]})]})}const fl="https://backrentalhub.farforrent.com.ua",xl=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")},gl=e=>(Number(e)||0).toLocaleString("uk-UA",{maximumFractionDigits:2}),bl=()=>(new Date).toISOString().slice(0,10),yl=()=>(new Date).toISOString();function vl(e){let{tone:t="slate",children:r}=e;return(0,Et.jsx)("span",{className:xl("inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-xs",{slate:"corp-badge corp-badge-neutral",green:"corp-badge corp-badge-success",amber:"corp-badge corp-badge-warning",red:"corp-badge corp-badge-error",blue:"corp-badge corp-badge-info",violet:"corp-badge corp-badge-primary"}[t]),children:r})}function wl(e){let{tone:t="slate",onClick:r,children:n,disabled:s=!1}=e;return(0,Et.jsx)("button",{disabled:s,onClick:r,className:xl("rounded-full px-3 py-1 text-sm transition disabled:opacity-50 disabled:pointer-events-none",{slate:"corp-btn corp-btn-secondary",green:"corp-btn corp-btn-primary",red:"bg-rose-600 hover:bg-rose-700 text-white",blue:"corp-btn corp-btn-primary",yellow:"bg-amber-500 hover:bg-amber-600 text-corp-text-dark"}[t]),children:n})}function Nl(e){let{title:t,right:r=null,children:n}=e;return(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[(0,Et.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,Et.jsx)("h3",{className:"text-base font-semibold text-corp-text-dark",children:t}),r]}),n]})}function jl(e){var t;let r,n,{order:s}=e;if(s.decor_status)r=s.decor_status,n="issued"===r?"green":"ready_for_issue"===r?"blue":"amber";else{r={2:"processing",3:"ready_for_issue",5:"issued"}[s.order_status_id]||"processing",n="issued"===r?"green":"ready_for_issue"===r?"blue":"amber"}return(0,Et.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Et.jsxs)("div",{className:"text-2xl font-bold",children:["\u0412\u0438\u0434\u0430\u0447\u0430 \xb7 #",s.order_id]}),(0,Et.jsx)(vl,{tone:n,children:r})]}),(0,Et.jsxs)("div",{className:"flex flex-col items-end text-sm text-corp-text-main",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsxs)("span",{children:["\u0414\u0430\u0442\u0430 \u0432\u0438\u0434\u0430\u0447\u0456: ",(0,Et.jsx)("b",{children:s.rent_issue_date||bl()})]}),(0,Et.jsx)("span",{className:"mx-1",children:"\xb7"}),(0,Et.jsxs)("span",{children:["\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f: ",(0,Et.jsx)("b",{children:s.rent_return_date||bl()})]})]}),(0,Et.jsx)("div",{className:"mt-1",children:(0,Et.jsxs)(vl,{tone:"slate",children:["\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0432\u0456\u0434: ",(null===(t=s.date_added)||void 0===t?void 0:t.slice(0,10))||"\u2014"]})})]})]})}function _l(e){let{order:t}=e;return(0,Et.jsx)(Nl,{title:"\u041a\u043b\u0456\u0454\u043d\u0442",children:(0,Et.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted text-xs",children:"\u0406\u043c\u02bc\u044f"}),(0,Et.jsxs)("div",{className:"font-medium",title:"".concat(t.firstname," ").concat(t.lastname),children:[t.firstname," ",t.lastname]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted text-xs",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,Et.jsx)("div",{className:"font-medium",title:t.telephone,children:t.telephone})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted text-xs",children:"Email"}),(0,Et.jsx)("div",{className:"font-medium break-words",title:t.email,children:t.email})]})]})})}function Cl(e){let{order:t}=e;const r=parseFloat(t.total||0),n=parseFloat(t.prepayment||0),s=parseFloat(t.deposit||0),a=Math.max(0,r-n);return(0,Et.jsx)(Nl,{title:"\u0424\u0456\u043d\u0430\u043d\u0441\u0438",right:(0,Et.jsx)(vl,{tone:a>0?"amber":"green",children:a>0?"\u0417\u0430\u043b\u0438\u0448\u043e\u043a \u20b4 ".concat(gl(a)):"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e"}),children:(0,Et.jsxs)("div",{className:"grid gap-2 md:grid-cols-4 text-sm",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted",children:"\u0421\u0443\u043c\u0430 \u043e\u0440\u0435\u043d\u0434\u0438"}),(0,Et.jsxs)("div",{className:"font-semibold",children:["\u20b4 ",gl(r)]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted",children:"\u041f\u0435\u0440\u0435\u0434\u043f\u043b\u0430\u0442\u0430"}),(0,Et.jsxs)("div",{className:"font-semibold",children:["\u20b4 ",gl(n)]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted",children:"\u0425\u043e\u043b\u0434 \u0437\u0430\u0441\u0442\u0430\u0432\u0438"}),(0,Et.jsxs)("div",{className:"font-semibold",children:["\u20b4 ",gl(s)]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted",children:"\u0414\u043e \u0441\u043f\u043b\u0430\u0442\u0438"}),(0,Et.jsxs)("div",{className:"font-semibold",children:["\u20b4 ",gl(a)]})]})]})})}function Sl(e){let{state:t,zone:r}=e;const n={wash:{tone:"blue",text:"\u041c\u0438\u0439\u043a\u0430"},shelf:{tone:"slate",text:"\u041f\u043e\u043b\u0438\u0446\u044f"},restore:{tone:"violet",text:"\u0420\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f"},intake:{tone:"amber",text:"\u041f\u0440\u0438\u0439\u043c\u0430\u043d\u043d\u044f"},unknown:{tone:"amber",text:"\u041d\u0435\u0432\u0456\u0434\u043e\u043c\u043e"}},s=n[t]||n.unknown;return(0,Et.jsxs)(vl,{tone:s.tone,children:[s.text,": ",r||"\u2014"]})}function El(e){var t,r,n;let{it:s,onScan:a,onPick:i,onOpenDamage:o}=e;const l=s.qty-s.picked_qty,c=s.picked_qty>s.qty,d=l>0&&s.available-(s.reserved||0)<s.qty,u=((null===(t=s.pre_damage)||void 0===t?void 0:t.length)||0)>0,h=xs(s.image)||"https://picsum.photos/seed/".concat(s.inventory_id,"/60/40");return(0,Et.jsxs)("tr",{className:xl("border-t",l>0&&"bg-amber-50"),children:[(0,Et.jsx)("td",{className:"px-3 py-2",children:(0,Et.jsx)("img",{src:h,alt:s.name,className:"h-10 w-14 rounded object-cover cursor-pointer hover:ring-2 hover:ring-blue-500 transition",onClick:()=>{window.open("/catalog?product=".concat(s.inventory_id),"_blank")},title:"\u041d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c \u0449\u043e\u0431 \u0432\u0456\u0434\u043a\u0440\u0438\u0442\u0438 \u043a\u0430\u0440\u0442\u043a\u0443 \u0442\u043e\u0432\u0430\u0440\u0443"})}),(0,Et.jsx)("td",{className:"px-3 py-2 text-xs text-corp-text-muted",children:s.sku}),(0,Et.jsxs)("td",{className:"px-3 py-2 font-medium",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("span",{children:s.name}),(0,Et.jsx)("button",{title:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f",onClick:()=>o(s.id),className:"rounded-md border px-2 py-0.5 text-xs hover:bg-slate-50",children:"\ud83d\udcf7 +"}),u&&(0,Et.jsxs)(vl,{tone:"amber",children:[s.pre_damage.length," \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u044c"]})]}),(0,Et.jsxs)("div",{className:"mt-1 text-xs text-corp-text-muted flex flex-wrap gap-2",children:[(0,Et.jsx)(Sl,{state:null===(r=s.location)||void 0===r?void 0:r.state,zone:null===(n=s.location)||void 0===n?void 0:n.zone}),d&&(0,Et.jsx)(vl,{tone:"red",children:"\u041a\u043e\u043d\u0444\u043b\u0456\u043a\u0442 \u0440\u0435\u0437\u0435\u0440\u0432\u0443"})]})]}),(0,Et.jsxs)("td",{className:"px-3 py-2 text-right tabular-nums text-corp-text-main",children:["\u20b4 ",(s.damage_cost||0).toLocaleString("uk-UA")]}),(0,Et.jsxs)("td",{className:"px-3 py-2 text-right tabular-nums font-medium text-amber-700",children:["\u20b4 ",(s.deposit||0).toLocaleString("uk-UA")]}),(0,Et.jsx)("td",{className:"px-3 py-2",children:s.available}),(0,Et.jsx)("td",{className:"px-3 py-2",children:s.reserved||0}),(0,Et.jsx)("td",{className:"px-3 py-2",children:s.in_rent||0}),(0,Et.jsx)("td",{className:"px-3 py-2",children:s.in_restore||0}),(0,Et.jsxs)("td",{className:"px-3 py-2",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("button",{onClick:()=>i(s.id,Math.max(0,s.picked_qty-1)),className:"h-7 w-7 rounded-lg border hover:bg-slate-50",children:"-"}),(0,Et.jsx)("div",{className:xl("w-10 text-center font-semibold",c&&"text-rose-600"),children:s.picked_qty}),(0,Et.jsx)("button",{onClick:()=>i(s.id,s.picked_qty+1),className:"h-7 w-7 rounded-lg border hover:bg-slate-50",children:"+"})]}),(0,Et.jsxs)("div",{className:"text-xs text-corp-text-muted",children:["\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u043e: ",s.qty]})]}),(0,Et.jsx)("td",{className:"px-3 py-2",children:s.serials&&0!==s.serials.length?(0,Et.jsx)("div",{className:"flex flex-wrap gap-1",children:s.serials.map(e=>(0,Et.jsx)("button",{onClick:()=>a(s.id,e),className:xl("rounded-md border px-2 py-0.5 text-xs",s.scanned.includes(e)?"border-emerald-300 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white hover:bg-slate-50"),children:e},e))}):(0,Et.jsx)("span",{className:"text-xs text-corp-text-muted",children:"\u0431\u0435\u0437\u0441\u0435\u0440\u0456\u0439\u043d\u0438\u0439"})}),(0,Et.jsx)("td",{className:"px-3 py-2 text-sm",children:s.pack||"\u2014"})]})}function Al(e){let{items:t,onScan:r,onPick:n,onOpenDamage:s}=e;return(0,Et.jsx)(Nl,{title:"\u041f\u043e\u0437\u0438\u0446\u0456\u0457 \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456",children:(0,Et.jsx)("div",{className:"overflow-hidden rounded-xl border",children:(0,Et.jsxs)("table",{className:"min-w-full text-sm",children:[(0,Et.jsx)("thead",{className:"bg-slate-50 text-left text-corp-text-muted",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0424\u043e\u0442\u043e"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"SKU"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u041d\u0430\u0437\u0432\u0430 / \u043b\u043e\u043a\u0430\u0446\u0456\u044f"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0417\u0431\u0438\u0442\u043e\u043a"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0417\u0430\u0441\u0442\u0430\u0432\u0430"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0412 \u043d\u0430\u044f\u0432\u043d."}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0420\u0435\u0437\u0435\u0440\u0432"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0412 \u043e\u0440\u0435\u043d\u0434\u0456"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0412 \u0440\u0435\u0441\u0442\u0430\u0432\u0440."}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0423\u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442."}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0421\u043a\u0430\u043d \u0441\u0435\u0440\u0456\u0439"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u041f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f"})]})}),(0,Et.jsx)("tbody",{children:t.map(e=>(0,Et.jsx)(El,{it:e,onScan:r,onPick:n,onOpenDamage:s},e.id))})]})})})}function Il(e){let{check:t,setCheck:r}=e;return(0,Et.jsx)(Nl,{title:"\u0427\u0435\u043a\u043b\u0456\u0441\u0442 \u043f\u0435\u0440\u0435\u0434 \u0432\u0438\u0434\u0430\u0447\u043e\u044e",right:(0,Et.jsx)(vl,{tone:t.photos_before&&t.docs_printed?"green":"amber",children:t.photos_before&&t.docs_printed?"\u0433\u043e\u0442\u043e\u0432\u043e":"\u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0456"}),children:(0,Et.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,Et.jsxs)("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[(0,Et.jsx)("input",{type:"checkbox",checked:t.stretch,onChange:e=>r(c(c({},t),{},{stretch:e.target.checked}))})," \u0421\u0442\u0440\u0435\u0439\u0447\u0443\u0432\u0430\u043d\u043d\u044f"]}),(0,Et.jsxs)("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[(0,Et.jsx)("input",{type:"checkbox",checked:t.labels,onChange:e=>r(c(c({},t),{},{labels:e.target.checked}))})," \u041c\u0430\u0440\u043a\u0443\u0432\u0430\u043d\u043d\u044f/\u0441\u0442\u0456\u043a\u0435\u0440\u0438"]}),(0,Et.jsxs)("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[(0,Et.jsx)("input",{type:"checkbox",checked:t.photos_before,onChange:e=>r(c(c({},t),{},{photos_before:e.target.checked}))})," \u0424\u043e\u0442\u043e \u0441\u0442\u0430\u043d\u0443 (\u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456)"]}),(0,Et.jsxs)("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[(0,Et.jsx)("input",{type:"checkbox",checked:t.docs_printed,onChange:e=>r(c(c({},t),{},{docs_printed:e.target.checked}))})," \u0420\u043e\u0437\u0434\u0440\u0443\u043a\u043e\u0432\u0430\u043d\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438"]})]})})}function kl(e){let{orderId:t,docs:r,setDocs:n}=e;return(0,Et.jsx)(Nl,{title:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438",children:(0,Et.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[(0,Et.jsx)(wl,{tone:"blue",onClick:async()=>{try{window.open("".concat(fl,"/api/pdf/pick-list/").concat(t),"_blank"),n(c(c({},r),{},{waybill:!0}))}catch(zd){alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f pick-list")}},children:"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430 (PDF)"}),(0,Et.jsx)(wl,{tone:"blue",onClick:async()=>{try{window.open("".concat(fl,"/api/pdf/invoice/").concat(t),"_blank"),n(c(c({},r),{},{act:!0}))}catch(zd){alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0440\u0430\u0445\u0443\u043d\u043a\u0443")}},children:"\u0420\u0430\u0445\u0443\u043d\u043e\u043a (PDF)"}),(0,Et.jsxs)(vl,{tone:r.waybill?"green":"slate",children:["\u043d\u0430\u043a\u043b\u0430\u0434\u043d\u0430: ",r.waybill?"\u0433\u043e\u0442\u043e\u0432\u0430":"\u2014"]}),(0,Et.jsxs)(vl,{tone:r.act?"green":"slate",children:["\u0440\u0430\u0445\u0443\u043d\u043e\u043a: ",r.act?"\u0433\u043e\u0442\u043e\u0432\u0438\u0439":"\u2014"]})]})})}function Tl(e){let{notes:t,setNotes:r}=e;return(0,Et.jsx)(Nl,{title:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0456",children:(0,Et.jsx)("textarea",{value:t||"",onChange:e=>r(e.target.value),className:"w-full rounded-xl border p-3 text-sm",rows:3,placeholder:"\u0421\u043b\u0443\u0436\u0431\u043e\u0432\u0430 \u043d\u043e\u0442\u0430\u0442\u043a\u0430"})})}function Dl(e){let{events:t}=e;return(0,Et.jsx)(Nl,{title:"\u0422\u0430\u0439\u043c\u043b\u0430\u0439\u043d",children:(0,Et.jsx)("ol",{className:"space-y-2 text-sm max-h-60 overflow-auto",children:t.map((e,t)=>(0,Et.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Et.jsx)("div",{className:xl("mt-1 h-2 w-2 rounded-full flex-shrink-0","green"===e.tone?"bg-emerald-500":"red"===e.tone?"bg-rose-500":"bg-blue-500")}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"font-medium",children:e.title}),(0,Et.jsx)("div",{className:"text-xs text-corp-text-muted",children:e.when})]})]},t))})})}function Rl(){var e;const{orderId:r}=be(),n=ge(),{toast:s}=Go(),[a,i]=(0,t.useState)(null),[o,l]=(0,t.useState)(!0),[d,u]=(0,t.useState)([]),[h,m]=(0,t.useState)(""),[p,f]=(0,t.useState)({stretch:!1,labels:!1,photos_before:!1,docs_printed:!1}),[x,g]=(0,t.useState)({waybill:!1,act:!1}),[b,y]=(0,t.useState)([]),[v,w]=(0,t.useState)({open:!1,item_id:null,kind:"\u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0430",severity:"low",note:"",photoName:""});(0,t.useEffect)(()=>{N()},[r]);const N=async()=>{try{var e,t;let s,a;l(!0);try{s=await is.get("".concat(fl,"/api/decor-orders/").concat(r)),a=s.data,console.log("[Issue] Order loaded from decor_orders:",a)}catch(n){console.log("[Issue] Not in decor_orders, trying OpenCart..."),s=await is.get("".concat(fl,"/api/orders/").concat(r)),a=s.data,console.log("[Issue] Order loaded from OpenCart:",a)}const o={order_id:a.id||a.order_id,order_status_id:a.order_status_id||19,decor_status:a.status,firstname:(null===(e=a.client_name)||void 0===e?void 0:e.split(" ")[0])||"",lastname:(null===(t=a.client_name)||void 0===t?void 0:t.split(" ").slice(1).join(" "))||"",telephone:a.client_phone||"",email:a.client_email||"",total:a.total_rental||0,prepayment:0,deposit:a.deposit_held||a.total_deposit||0,rent_issue_date:a.rent_date||a.issue_date||bl(),rent_return_date:a.rent_return_date||a.return_date||bl(),date_added:a.created_at||yl(),manager_comment:a.notes||a.manager_comment||""};i(o),m(a.notes||a.manager_comment||"");const c=(a.items||[]).map((e,t)=>{var r,n;const s=parseInt(e.quantity||e.qty)||0,a=e.serials||[];return{id:e.id||e.order_product_id||e.inventory_id||t,sku:e.article||e.sku||e.model||"",name:e.name||e.product_name||"",image:e.image||"",qty:s,picked_qty:e.picked_qty||0,available:parseInt(e.available_qty||e.available)||0,reserved:parseInt(e.reserved_qty||e.reserved)||0,in_rent:parseInt(e.in_rent_qty||e.in_rent)||0,in_restore:parseInt(e.in_restore_qty||e.in_restore)||0,serials:a,scanned:[],pack:e.pack||"",location:{zone:(null===(r=e.location)||void 0===r?void 0:r.zone)||"",state:(null===(n=e.location)||void 0===n?void 0:n.state)||"shelf"},pre_damage:e.pre_damage||[]}});console.log("Transformed items:",c),u(c),y([{title:"\u041a\u0430\u0440\u0442\u043a\u0443 \u0432\u0438\u0434\u0430\u0447\u0456 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e",when:o.date_added||yl(),tone:"blue"}])}catch(zd){console.error("Error loading order:",zd),s({title:"\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",variant:"destructive"})}finally{l(!1)}},j=(0,t.useMemo)(()=>d.every(e=>e.picked_qty>=e.qty),[d]),_=(0,t.useMemo)(()=>d.every(e=>0===e.serials.length||e.scanned.length>=e.qty),[d]),C=(0,t.useMemo)(()=>p.photos_before&&p.docs_printed,[p]),S=j&&_&&C,E=a&&3===a.order_status_id,A=!!a&&(2===a.order_status_id||19===a.order_status_id),I=!!a&&3===a.order_status_id,k=!!a&&(5===a.order_status_id||24===a.order_status_id);console.log("[Issue] Button states:",{order_status_id:null===a||void 0===a?void 0:a.order_status_id,isProcessing:A,isReadyForIssue:I,isIssued:k,canMarkReady:S,canIssue:E});const T=async()=>{try{const e="issue_".concat(r);await is.put("".concat(fl,"/api/issue-cards/").concat(e),{items:d.map(e=>({id:e.id,sku:e.sku,name:e.name,qty:e.qty,picked_qty:e.picked_qty,scanned:e.scanned,location_zone:e.location_zone,location_state:e.location_state})),checklist:p,manager_notes:h}),s({title:"\u2705 \u0423\u0441\u043f\u0456\u0445",description:"\u041f\u0440\u043e\u0433\u0440\u0435\u0441 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0443\u0432\u0430\u043d\u043d\u044f \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e"})}catch(zd){console.error("Error saving progress:",zd),s({title:"\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u043f\u0440\u043e\u0433\u0440\u0435\u0441",variant:"destructive"})}};return o?(0,Et.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,Et.jsx)("div",{className:"text-xl",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})}):a?(0,Et.jsxs)("div",{className:"mx-auto max-w-7xl p-6 space-y-6",children:[(0,Et.jsx)(jl,{order:a}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[(0,Et.jsx)(_l,{order:a}),(0,Et.jsx)(Cl,{order:a}),(0,Et.jsx)(Dl,{events:b})]}),(0,Et.jsx)(Al,{items:d,onScan:(e,t)=>u(r=>r.map(r=>{if(r.id!==e)return r;const n=r.scanned.includes(t)?r.scanned.filter(e=>e!==t):[...r.scanned,t];return c(c({},r),{},{scanned:n})})),onPick:(e,t)=>u(r=>r.map(r=>r.id===e?c(c({},r),{},{picked_qty:t}):r)),onOpenDamage:e=>w({open:!0,item_id:e,kind:"\u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0430",severity:"low",note:"",photoName:""})}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:[(0,Et.jsx)(Il,{check:p,setCheck:f}),(0,Et.jsx)(kl,{orderId:r,docs:x,setDocs:g})]}),(0,Et.jsx)(Tl,{notes:h,setNotes:m}),(0,Et.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-slate-200 bg-white p-4",children:[(0,Et.jsxs)("div",{className:"text-sm text-corp-text-main",children:["\u0421\u0442\u0430\u0442\u0443\u0441: ",(0,Et.jsx)("b",{children:k?"issued":I?"ready_for_issue":"processing"})," \xb7",(0,Et.jsxs)("span",{className:"ml-2",children:["\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u043e\u0432\u0430\u043d\u043e: ",d.reduce((e,t)=>e+t.picked_qty,0),"/",d.reduce((e,t)=>e+t.qty,0)]})," \xb7",(0,Et.jsxs)("span",{className:"ml-2",children:["\u0421\u0435\u0440\u0456\u0439 \u0432\u0456\u0434\u0441\u043a\u0430\u043d\u043e\u0432\u0430\u043d\u043e: ",d.reduce((e,t)=>{var r;return e+((null===(r=t.scanned)||void 0===r?void 0:r.length)||0)},0)]})]}),(0,Et.jsxs)("div",{className:"flex flex-wrap gap-2",children:[!k&&(0,Et.jsx)(wl,{tone:"slate",onClick:T,children:"\ud83d\udcbe \u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u043f\u0440\u043e\u0433\u0440\u0435\u0441"}),A&&(0,Et.jsx)(wl,{tone:"yellow",onClick:async()=>{try{await T();const e=(await is.get("".concat(fl,"/api/issue-cards?order_id=").concat(r))).data;if(0===e.length)return void s({title:"\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:"Issue card \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0434\u043b\u044f \u0446\u044c\u043e\u0433\u043e \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",variant:"destructive"});const t=e[0];await is.put("".concat(fl,"/api/issue-cards/").concat(t.id),{status:"ready",prepared_by:"Warehouse Staff"}),i(e=>c(c({},e),{},{order_status_id:3,decor_status:"ready_for_issue"})),y(e=>[{title:"\u0423\u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u043e\u0432\u0430\u043d\u043e \u0456 \u0433\u043e\u0442\u043e\u0432\u043e \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456",when:yl(),tone:"blue"},...e]),s({title:"\u2705 \u0423\u0441\u043f\u0456\u0445",description:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0433\u043e\u0442\u043e\u0432\u0435 \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456"})}catch(zd){console.error("Error marking ready:",zd),s({title:"\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u043e\u043d\u043e\u0432\u0438\u0442\u0438 \u0441\u0442\u0430\u0442\u0443\u0441",variant:"destructive"})}},disabled:!S,children:"\u2705 \u0413\u043e\u0442\u043e\u0432\u043e \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456"}),I&&(0,Et.jsx)(wl,{tone:"green",onClick:async()=>{try{const e="issue_".concat(r),t={issued_by:"Manager",issue_notes:h||""};await is.post("".concat(fl,"/api/issue-cards/").concat(e,"/complete"),t),i(e=>c(c({},e),{},{order_status_id:24})),y(e=>[{title:"\u0412\u0438\u0434\u0430\u043d\u043e \u043a\u043b\u0456\u0454\u043d\u0442\u0443",when:yl(),tone:"green"},...e]),s({title:"\u2705 \u0423\u0441\u043f\u0456\u0445",description:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0432\u0438\u0434\u0430\u043d\u043e \u043a\u043b\u0456\u0454\u043d\u0442\u0443. Return Card \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e."}),setTimeout(()=>n("/"),2e3)}catch(zd){var e,t;console.error("Error marking issued:",zd),s({title:"\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:(null===(e=zd.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438 \u0432\u0438\u0434\u0430\u0447\u0443",variant:"destructive"})}},children:"\ud83d\ude9a \u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438 \u0432\u0438\u0434\u0430\u0447\u0443"}),k&&(0,Et.jsx)(vl,{tone:"green",children:"\u2705 \u0412\u0438\u0434\u0430\u043d\u043e \u043a\u043b\u0456\u0454\u043d\u0442\u0443"}),(0,Et.jsx)(wl,{tone:"blue",onClick:()=>window.print(),children:"\u0414\u0440\u0443\u043a"}),(0,Et.jsx)(wl,{tone:"slate",onClick:()=>n("/"),children:"\u041d\u0430\u0437\u0430\u0434"})]})]}),v.open&&(0,Et.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:(0,Et.jsxs)("div",{className:"w-full max-w-xl rounded-2xl border border-slate-200 bg-white p-4 shadow-xl",children:[(0,Et.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,Et.jsxs)("h3",{className:"text-base font-semibold",children:["\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f \xb7 ",(null===(e=d.find(e=>e.id===v.item_id))||void 0===e?void 0:e.name)||"\u2014"]}),(0,Et.jsx)("button",{onClick:()=>w(e=>c(c({},e),{},{open:!1})),className:"text-corp-text-muted hover:text-slate-700",children:"\u2715"})]}),(0,Et.jsxs)("div",{className:"grid gap-3 text-sm",children:[(0,Et.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted mb-1",children:"\u0422\u0438\u043f"}),(0,Et.jsxs)("select",{className:"w-full rounded-xl border px-3 py-2",value:v.kind,onChange:e=>w(t=>c(c({},t),{},{kind:e.target.value})),children:[(0,Et.jsx)("option",{children:"\u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0430"}),(0,Et.jsx)("option",{children:"\u0441\u043a\u043e\u043b"}),(0,Et.jsx)("option",{children:"\u043f\u043b\u044f\u043c\u0430"}),(0,Et.jsx)("option",{children:"\u0432\u043c\u02bc\u044f\u0442\u0438\u043d\u0430"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted mb-1",children:"\u0420\u0456\u0432\u0435\u043d\u044c"}),(0,Et.jsxs)("select",{className:"w-full rounded-xl border px-3 py-2",value:v.severity,onChange:e=>w(t=>c(c({},t),{},{severity:e.target.value})),children:[(0,Et.jsx)("option",{value:"low",children:"\u043d\u0438\u0437\u044c\u043a\u0438\u0439"}),(0,Et.jsx)("option",{value:"mid",children:"\u0441\u0435\u0440\u0435\u0434\u043d\u0456\u0439"}),(0,Et.jsx)("option",{value:"high",children:"\u0432\u0438\u0441\u043e\u043a\u0438\u0439"})]})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted mb-1",children:"\u041d\u043e\u0442\u0430\u0442\u043a\u0430"}),(0,Et.jsx)("input",{className:"w-full rounded-xl border px-3 py-2",value:v.note,onChange:e=>w(t=>c(c({},t),{},{note:e.target.value})),placeholder:"\u041e\u043f\u0438\u0448\u0456\u0442\u044c \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f\u2026"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted mb-1",children:"\u0424\u043e\u0442\u043e"}),(0,Et.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];w(e=>c(c({},e),{},{photoName:r?r.name:""}))},className:"w-full rounded-xl border px-3 py-2"}),v.photoName&&(0,Et.jsxs)("div",{className:"mt-1 text-xs text-corp-text-muted",children:["\u041e\u0431\u0440\u0430\u043d\u043e: ",v.photoName]})]}),(0,Et.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,Et.jsx)(wl,{tone:"slate",onClick:()=>w(e=>c(c({},e),{},{open:!1})),children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"}),(0,Et.jsx)(wl,{tone:"green",onClick:()=>{const e=v.item_id;if(!e)return void alert("\u041d\u0435\u043c\u0430\u0454 \u043f\u043e\u0437\u0438\u0446\u0456\u0457");const t="pd-"+Math.floor(9e4*Math.random()+100);u(r=>r.map(r=>r.id===e?c(c({},r),{},{pre_damage:[...r.pre_damage||[],{id:t,kind:v.kind,severity:v.severity,note:v.note,at:yl(),photoName:v.photoName}]}):r)),w({open:!1,item_id:null,kind:"\u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0430",severity:"low",note:"",photoName:""}),s({title:"\u2705 \u0423\u0441\u043f\u0456\u0445",description:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f \u0437\u0430\u0444\u0456\u043a\u0441\u043e\u0432\u0430\u043d\u043e"})},children:"\u0417\u0430\u0444\u0456\u043a\u0441\u0443\u0432\u0430\u0442\u0438"})]})]}),(0,Et.jsx)("div",{className:"mt-4",children:(0,Et.jsx)(Nl,{title:"\u0406\u0441\u0442\u043e\u0440\u0456\u044f \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u044c \u043f\u043e \u043f\u043e\u0437\u0438\u0446\u0456\u0457",children:(0,Et.jsx)("div",{className:"max-h-40 overflow-auto text-sm",children:(e=>{const t=d.find(e=>e.id===v.item_id);return t&&0!==((null===(e=t.pre_damage)||void 0===e?void 0:e.length)||0)?(0,Et.jsx)("ul",{className:"space-y-1",children:t.pre_damage.map(e=>{var t;return(0,Et.jsxs)("li",{className:"text-xs border-b pb-1",children:[(0,Et.jsx)(vl,{tone:"amber",children:e.kind})," \xb7 ",(0,Et.jsx)(vl,{tone:"high"===e.severity?"red":"mid"===e.severity?"amber":"slate",children:e.severity})," \xb7 ",e.note||"\u2014",(0,Et.jsxs)("div",{className:"text-slate-400 mt-0.5",children:[null===(t=e.at)||void 0===t?void 0:t.slice(0,16)," ",e.photoName?"\xb7 \ud83d\udcf7 ".concat(e.photoName):""]})]},e.id)})}):(0,Et.jsx)("div",{className:"text-corp-text-muted",children:"\u041f\u043e\u043a\u0438 \u043d\u0435\u043c\u0430\u0454 \u0437\u0430\u043f\u0438\u0441\u0456\u0432"})})()})})})]})}),(0,Et.jsx)("div",{className:"text-xs text-corp-text-muted text-center",children:"\u041f\u0456\u0434\u0441\u0432\u0456\u0442\u043a\u0430: \u0440\u044f\u0434\u043a\u0438 \u0436\u043e\u0432\u0442\u043e\u0433\u043e \u043a\u043e\u043b\u044c\u043e\u0440\u0443 \u2014 \u0449\u0435 \u043d\u0435\u0443\u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u043e\u0432\u0430\u043d\u0456; \u0441\u0435\u0440\u0456\u0439\u043d\u0456 \u043d\u043e\u043c\u0435\u0440\u0438 \u043a\u043b\u0456\u043a\u0430\u0431\u0435\u043b\u044c\u043d\u0456 \u0434\u043b\u044f \u0441\u043a\u0430\u043d/\u0430\u043d\u0441\u043a\u0430\u043d."})]}):(0,Et.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,Et.jsx)("div",{className:"text-xl",children:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e"})})}var Ol,Ml=Object.defineProperty,Pl=Object.getOwnPropertySymbols,Ll=Object.prototype.hasOwnProperty,Bl=Object.prototype.propertyIsEnumerable,Fl=(e,t,r)=>t in e?Ml(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ul=(e,t)=>{for(var r in t||(t={}))Ll.call(t,r)&&Fl(e,r,t[r]);if(Pl)for(var r of Pl(t))Bl.call(t,r)&&Fl(e,r,t[r]);return e},zl=(e,t)=>{var r={};for(var n in e)Ll.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Pl)for(var n of Pl(e))t.indexOf(n)<0&&Bl.call(e,n)&&(r[n]=e[n]);return r};(e=>{const t=class t{constructor(e,r,n,a){if(this.version=e,this.errorCorrectionLevel=r,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(a<-1||a>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let i=[];for(let t=0;t<this.size;t++)i.push(!1);for(let t=0;t<this.size;t++)this.modules.push(i.slice()),this.isFunction.push(i.slice());this.drawFunctionPatterns();const o=this.addEccAndInterleave(n);if(this.drawCodewords(o),-1==a){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const r=this.getPenaltyScore();r<e&&(a=t,e=r),this.applyMask(t)}}s(0<=a&&a<=7),this.mask=a,this.applyMask(a),this.drawFormatBits(a),this.isFunction=[]}static encodeText(r,n){const s=e.QrSegment.makeSegments(r);return t.encodeSegments(s,n)}static encodeBinary(r,n){const s=e.QrSegment.makeBytes(r);return t.encodeSegments([s],n)}static encodeSegments(e,n){let a,o,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!(t.MIN_VERSION<=l&&l<=c&&c<=t.MAX_VERSION)||d<-1||d>7)throw new RangeError("Invalid value");for(a=l;;a++){const r=8*t.getNumDataCodewords(a,n),s=i.getTotalBits(e,a);if(s<=r){o=s;break}if(a>=c)throw new RangeError("Data too long")}for(const r of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])u&&o<=8*t.getNumDataCodewords(a,r)&&(n=r);let h=[];for(const t of e){r(t.mode.modeBits,4,h),r(t.numChars,t.mode.numCharCountBits(a),h);for(const e of t.getData())h.push(e)}s(h.length==o);const m=8*t.getNumDataCodewords(a,n);s(h.length<=m),r(0,Math.min(4,m-h.length),h),r(0,(8-h.length%8)%8,h),s(h.length%8==0);for(let t=236;h.length<m;t^=253)r(t,8,h);let p=[];for(;8*p.length<h.length;)p.push(0);return h.forEach((e,t)=>p[t>>>3]|=e<<7-(7&t)),new t(a,n,p,d)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let r=0;r<this.size;r++)this.setFunctionModule(6,r,r%2==0),this.setFunctionModule(r,6,r%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let r=0;r<t;r++)for(let n=0;n<t;n++)0==r&&0==n||0==r&&n==t-1||r==t-1&&0==n||this.drawAlignmentPattern(e[r],e[n]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let r=t;for(let n=0;n<10;n++)r=r<<1^1335*(r>>>9);const a=21522^(t<<10|r);s(a>>>15==0);for(let s=0;s<=5;s++)this.setFunctionModule(8,s,n(a,s));this.setFunctionModule(8,7,n(a,6)),this.setFunctionModule(8,8,n(a,7)),this.setFunctionModule(7,8,n(a,8));for(let s=9;s<15;s++)this.setFunctionModule(14-s,8,n(a,s));for(let s=0;s<8;s++)this.setFunctionModule(this.size-1-s,8,n(a,s));for(let s=8;s<15;s++)this.setFunctionModule(8,this.size-15+s,n(a,s));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let r=0;r<12;r++)e=e<<1^7973*(e>>>11);const t=this.version<<12|e;s(t>>>18==0);for(let r=0;r<18;r++){const e=n(t,r),s=this.size-11+r%3,a=Math.floor(r/3);this.setFunctionModule(s,a,e),this.setFunctionModule(a,s,e)}}drawFinderPattern(e,t){for(let r=-4;r<=4;r++)for(let n=-4;n<=4;n++){const s=Math.max(Math.abs(n),Math.abs(r)),a=e+n,i=t+r;0<=a&&a<this.size&&0<=i&&i<this.size&&this.setFunctionModule(a,i,2!=s&&4!=s)}}drawAlignmentPattern(e,t){for(let r=-2;r<=2;r++)for(let n=-2;n<=2;n++)this.setFunctionModule(e+n,t+r,1!=Math.max(Math.abs(n),Math.abs(r)))}setFunctionModule(e,t,r){this.modules[t][e]=r,this.isFunction[t][e]=!0}addEccAndInterleave(e){const r=this.version,n=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(r,n))throw new RangeError("Invalid argument");const a=t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][r],i=t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][r],o=Math.floor(t.getNumRawDataModules(r)/8),l=a-o%a,c=Math.floor(o/a);let d=[];const u=t.reedSolomonComputeDivisor(i);for(let s=0,m=0;s<a;s++){let r=e.slice(m,m+c-i+(s<l?0:1));m+=r.length;const n=t.reedSolomonComputeRemainder(r,u);s<l&&r.push(0),d.push(r.concat(n))}let h=[];for(let t=0;t<d[0].length;t++)d.forEach((e,r)=>{(t!=c-i||r>=l)&&h.push(e[t])});return s(h.length==o),h}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let r=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let s=0;s<this.size;s++)for(let a=0;a<2;a++){const i=t-a,o=0==(t+1&2)?this.size-1-s:s;!this.isFunction[o][i]&&r<8*e.length&&(this.modules[o][i]=n(e[r>>>3],7-(7&r)),r++)}}s(r==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let r=0;r<this.size;r++){let n;switch(e){case 0:n=(r+t)%2==0;break;case 1:n=t%2==0;break;case 2:n=r%3==0;break;case 3:n=(r+t)%3==0;break;case 4:n=(Math.floor(r/3)+Math.floor(t/2))%2==0;break;case 5:n=r*t%2+r*t%3==0;break;case 6:n=(r*t%2+r*t%3)%2==0;break;case 7:n=((r+t)%2+r*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][r]&&n&&(this.modules[t][r]=!this.modules[t][r])}}getPenaltyScore(){let e=0;for(let s=0;s<this.size;s++){let r=!1,n=0,a=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[s][i]==r?(n++,5==n?e+=t.PENALTY_N1:n>5&&e++):(this.finderPenaltyAddHistory(n,a),r||(e+=this.finderPenaltyCountPatterns(a)*t.PENALTY_N3),r=this.modules[s][i],n=1);e+=this.finderPenaltyTerminateAndCount(r,n,a)*t.PENALTY_N3}for(let s=0;s<this.size;s++){let r=!1,n=0,a=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[i][s]==r?(n++,5==n?e+=t.PENALTY_N1:n>5&&e++):(this.finderPenaltyAddHistory(n,a),r||(e+=this.finderPenaltyCountPatterns(a)*t.PENALTY_N3),r=this.modules[i][s],n=1);e+=this.finderPenaltyTerminateAndCount(r,n,a)*t.PENALTY_N3}for(let s=0;s<this.size-1;s++)for(let r=0;r<this.size-1;r++){const n=this.modules[s][r];n==this.modules[s][r+1]&&n==this.modules[s+1][r]&&n==this.modules[s+1][r+1]&&(e+=t.PENALTY_N2)}let r=0;for(const t of this.modules)r=t.reduce((e,t)=>e+(t?1:0),r);const n=this.size*this.size,a=Math.ceil(Math.abs(20*r-10*n)/n)-1;return s(0<=a&&a<=9),e+=a*t.PENALTY_N4,s(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let r=[6];for(let n=this.size-7;r.length<e;n-=t)r.splice(1,0,n);return r}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");let r=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;r-=(25*t-10)*t-55,e>=7&&(r-=36)}return s(208<=r&&r<=29648),r}static getNumDataCodewords(e,r){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let r=[];for(let t=0;t<e-1;t++)r.push(0);r.push(1);let n=1;for(let s=0;s<e;s++){for(let e=0;e<r.length;e++)r[e]=t.reedSolomonMultiply(r[e],n),e+1<r.length&&(r[e]^=r[e+1]);n=t.reedSolomonMultiply(n,2)}return r}static reedSolomonComputeRemainder(e,r){let n=r.map(e=>0);for(const s of e){const e=s^n.shift();n.push(0),r.forEach((r,s)=>n[s]^=t.reedSolomonMultiply(r,e))}return n}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");let r=0;for(let n=7;n>=0;n--)r=r<<1^285*(r>>>7),r^=(t>>>n&1)*e;return s(r>>>8==0),r}finderPenaltyCountPatterns(e){const t=e[1];s(t<=3*this.size);const r=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(r&&e[0]>=4*t&&e[6]>=t?1:0)+(r&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,r){return e&&(this.finderPenaltyAddHistory(t,r),t=0),t+=this.size,this.finderPenaltyAddHistory(t,r),this.finderPenaltyCountPatterns(r)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];function r(e,t,r){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(let n=t-1;n>=0;n--)r.push(e>>>n&1)}function n(e,t){return 0!=(e>>>t&1)}function s(e){if(!e)throw new Error("Assertion error")}e.QrCode=t;const a=class e{constructor(e,t,r){if(this.mode=e,this.numChars=t,this.bitData=r,t<0)throw new RangeError("Invalid argument");this.bitData=r.slice()}static makeBytes(t){let n=[];for(const e of t)r(e,8,n);return new e(e.Mode.BYTE,t.length,n)}static makeNumeric(t){if(!e.isNumeric(t))throw new RangeError("String contains non-numeric characters");let n=[];for(let e=0;e<t.length;){const s=Math.min(t.length-e,3);r(parseInt(t.substring(e,e+s),10),3*s+1,n),e+=s}return new e(e.Mode.NUMERIC,t.length,n)}static makeAlphanumeric(t){if(!e.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let n,s=[];for(n=0;n+2<=t.length;n+=2){let a=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n));a+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n+1)),r(a,11,s)}return n<t.length&&r(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n)),6,s),new e(e.Mode.ALPHANUMERIC,t.length,s)}static makeSegments(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}static makeEci(t){let n=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)r(t,8,n);else if(t<16384)r(2,2,n),r(t,14,n);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");r(6,3,n),r(t,21,n)}return new e(e.Mode.ECI,0,n)}static isNumeric(t){return e.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return e.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let r=0;for(const n of e){const e=n.mode.numCharCountBits(t);if(n.numChars>=1<<e)return 1/0;r+=4+e+n.bitData.length}return r}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let r=0;r<e.length;r++)"%"!=e.charAt(r)?t.push(e.charCodeAt(r)):(t.push(parseInt(e.substring(r+1,r+3),16)),r+=2);return t}};a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let i=a;e.QrSegment=a})(Ol||(Ol={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2);e.Ecc=t})(t=e.QrCode||(e.QrCode={}))})(Ol||(Ol={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]);e.Mode=t})(t=e.QrSegment||(e.QrSegment={}))})(Ol||(Ol={}));var Hl=Ol,Vl={L:Hl.QrCode.Ecc.LOW,M:Hl.QrCode.Ecc.MEDIUM,Q:Hl.QrCode.Ecc.QUARTILE,H:Hl.QrCode.Ecc.HIGH},Wl=128,ql="L",Gl="#FFFFFF",Yl="#000000",Xl=!1,Ql=1;function Kl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=[];return e.forEach(function(e,n){let s=null;e.forEach(function(a,i){if(!a&&null!==s)return r.push("M".concat(s+t," ").concat(n+t,"h").concat(i-s,"v1H").concat(s+t,"z")),void(s=null);if(i!==e.length-1)a&&null===s&&(s=i);else{if(!a)return;null===s?r.push("M".concat(i+t,",").concat(n+t," h1v1H").concat(i+t,"z")):r.push("M".concat(s+t,",").concat(n+t," h").concat(i+1-s,"v1H").concat(s+t,"z"))}})}),r.join("")}function Zl(e,t){return e.slice().map((e,r)=>r<t.y||r>=t.y+t.h?e:e.map((e,r)=>(r<t.x||r>=t.x+t.w)&&e))}function Jl(e){let{value:r,level:n,minVersion:s,includeMargin:a,marginSize:i,imageSettings:o,size:l,boostLevel:c}=e,d=t.useMemo(()=>{const e=(Array.isArray(r)?r:[r]).reduce((e,t)=>(e.push(...Hl.QrSegment.makeSegments(t)),e),[]);return Hl.QrCode.encodeSegments(e,Vl[n],s,void 0,void 0,c)},[r,n,s,c]);const{cells:u,margin:h,numCells:m,calculatedImageSettings:p}=t.useMemo(()=>{let e=d.getModules();const t=function(e,t){return null!=t?Math.max(Math.floor(t),0):e?4:0}(a,i),r=e.length+2*t,n=function(e,t,r,n){if(null==n)return null;const s=e.length+2*r,a=Math.floor(.1*t),i=s/t,o=(n.width||a)*i,l=(n.height||a)*i,c=null==n.x?e.length/2-o/2:n.x*i,d=null==n.y?e.length/2-l/2:n.y*i,u=null==n.opacity?1:n.opacity;let h=null;if(n.excavate){let e=Math.floor(c),t=Math.floor(d);h={x:e,y:t,w:Math.ceil(o+c-e),h:Math.ceil(l+d-t)}}return{x:c,y:d,h:l,w:o,excavation:h,opacity:u,crossOrigin:n.crossOrigin}}(e,l,t,o);return{cells:e,margin:t,numCells:r,calculatedImageSettings:n}},[d,l,o,a,i]);return{qrcode:d,margin:h,cells:u,numCells:m,calculatedImageSettings:p}}var $l=function(){try{(new Path2D).addPath(new Path2D)}catch(zd){return!1}return!0}(),ec=t.forwardRef(function(e,r){const n=e,{value:s,size:a=Wl,level:i=ql,bgColor:o=Gl,fgColor:l=Yl,includeMargin:c=Xl,minVersion:d=Ql,boostLevel:u,marginSize:h,imageSettings:m}=n,p=zl(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:f}=p,x=zl(p,["style"]),g=null==m?void 0:m.src,b=t.useRef(null),y=t.useRef(null),v=t.useCallback(e=>{b.current=e,"function"===typeof r?r(e):r&&(r.current=e)},[r]),[w,N]=t.useState(!1),{margin:j,cells:_,numCells:C,calculatedImageSettings:S}=Jl({value:s,level:i,minVersion:d,boostLevel:u,includeMargin:c,marginSize:h,imageSettings:m,size:a});t.useEffect(()=>{if(null!=b.current){const e=b.current,t=e.getContext("2d");if(!t)return;let r=_;const n=y.current,s=null!=S&&null!==n&&n.complete&&0!==n.naturalHeight&&0!==n.naturalWidth;s&&null!=S.excavation&&(r=Zl(_,S.excavation));const i=window.devicePixelRatio||1;e.height=e.width=a*i;const c=a/C*i;t.scale(c,c),t.fillStyle=o,t.fillRect(0,0,C,C),t.fillStyle=l,$l?t.fill(new Path2D(Kl(r,j))):_.forEach(function(e,r){e.forEach(function(e,n){e&&t.fillRect(n+j,r+j,1,1)})}),S&&(t.globalAlpha=S.opacity),s&&t.drawImage(n,S.x+j,S.y+j,S.w,S.h)}}),t.useEffect(()=>{N(!1)},[g]);const E=Ul({height:a,width:a},f);let A=null;return null!=g&&(A=t.createElement("img",{src:g,key:g,style:{display:"none"},onLoad:()=>{N(!0)},ref:y,crossOrigin:null==S?void 0:S.crossOrigin})),t.createElement(t.Fragment,null,t.createElement("canvas",Ul({style:E,height:a,width:a,ref:v,role:"img"},x)),A)});ec.displayName="QRCodeCanvas";var tc=t.forwardRef(function(e,r){const n=e,{value:s,size:a=Wl,level:i=ql,bgColor:o=Gl,fgColor:l=Yl,includeMargin:c=Xl,minVersion:d=Ql,boostLevel:u,title:h,marginSize:m,imageSettings:p}=n,f=zl(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:x,cells:g,numCells:b,calculatedImageSettings:y}=Jl({value:s,level:i,minVersion:d,boostLevel:u,includeMargin:c,marginSize:m,imageSettings:p,size:a});let v=g,w=null;null!=p&&null!=y&&(null!=y.excavation&&(v=Zl(g,y.excavation)),w=t.createElement("image",{href:p.src,height:y.h,width:y.w,x:y.x+x,y:y.y+x,preserveAspectRatio:"none",opacity:y.opacity,crossOrigin:y.crossOrigin}));const N=Kl(v,x);return t.createElement("svg",Ul({height:a,width:a,viewBox:"0 0 ".concat(b," ").concat(b),ref:r,role:"img"},f),!!h&&t.createElement("title",null,h),t.createElement("path",{fill:o,d:"M0,0 h".concat(b,"v").concat(b,"H0z"),shapeRendering:"crispEdges"}),t.createElement("path",{fill:l,d:N,shapeRendering:"crispEdges"}),w)});tc.displayName="QRCodeSVG";const rc={"\u041c\u0435\u0431\u043b\u0456":{groups:[{code:"dirty_upholstery",label:"\u0411\u0440\u0443\u0434\u043d\u0430 \u043e\u0431\u0431\u0438\u0432\u043a\u0430 / \u0441\u0438\u0434\u0456\u043d\u043d\u044f / \u043a\u0430\u0440\u043a\u0430\u0441",min:1e3},{code:"chips_cracks_missing",label:"\u0421\u043a\u043e\u043b, \u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0438, \u0442\u0440\u0456\u0449\u0438\u043d\u0438, \u0432\u0442\u0440\u0430\u0442\u0430 \u0434\u0435\u0442\u0430\u043b\u0435\u0439",min:800,max:"full"},{code:"burn_or_hole",label:"\u041f\u0440\u043e\u043f\u0430\u043b \u0430\u0431\u043e \u0434\u0456\u0440\u043a\u0430",min:5e3},{code:"dirty_legs",label:"\u041d\u0456\u0436\u043a\u0438 \u0431\u0440\u0443\u0434\u043d\u0456 \u0432 \u0437\u0435\u043c\u043b\u0456/\u0433\u043b\u0438\u043d\u0456/\u043f\u0456\u0441\u043a\u0443",min:800},{code:"liquid_spill",label:"\u0417\u0430\u043b\u0438\u0442\u043e \u0440\u0456\u0434\u0438\u043d\u043e\u044e (\u0432\u043e\u0434\u0430, \u0432\u0438\u043d\u043e, \u0441\u0456\u043a \u0442\u0430 \u0456\u043d\u0448\u0435)",range:[1e3,2500]},{code:"wet",label:"\u041c\u043e\u043a\u0440\u0456 \u0430\u0431\u043e \u0432\u043e\u043b\u043e\u0433\u0456 (\u0432\u043e\u0434\u0430)",range:[1e3,2e3]},{code:"no_brand_bag",label:"\u041d\u0435\u043c\u0430\u0454 \u0444\u0456\u0440\u043c\u043e\u0432\u043e\u0433\u043e \u0447\u043e\u0445\u043b\u0430",min:1400},{code:"no_stretch",label:"\u041d\u0435\u043c\u0430\u0454 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0432 \u0441\u0442\u0440\u0435\u0439\u0447",min:800}]},"\u0421\u0442\u043e\u043b\u0438\u043a\u0438":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0456",min:500},{code:"chips",label:"\u0421\u043a\u043e\u043b\u0438 \u0430\u0431\u043e \u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0438",range:[1600,3e3]},{code:"top_missing",label:"\u0412\u0456\u0434\u0441\u0443\u0442\u043d\u044f \u0430\u0431\u043e \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u0430 \u0441\u0442\u043e\u043b\u0435\u0448\u043d\u044f",min:1500},{code:"no_stretch_pct",label:"\u0411\u0435\u0437 \u0441\u0442\u0440\u0435\u0439\u0447\u0443\u0432\u0430\u043d\u043d\u044f",percentOf:"full",percent:.3},{code:"no_native_pack_pct",label:"\u0411\u0435\u0437 \u0432\u043b\u0430\u0441\u043d\u043e\u0433\u043e \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f (\u0444\u0456\u0440\u043c\u043e\u0432\u0456 \u0447\u043e\u0445\u043b\u0438, \xab\u0440\u0456\u0434\u043d\u0456 \u043a\u043e\u0440\u043e\u0431\u043a\u0438\xbb)",percentOf:"full",percent:.5}]},"\u041f\u0443\u0444\u0438 \u0442\u0430 \u0441\u0442\u0456\u043b\u044c\u0446\u0456 \u0437 \u0442\u0435\u043a\u0441\u0442\u0438\u043b\u0435\u043c (\u0448\u043a\u0456\u0440\u043e\u044e)":{groups:[{code:"dirty_upholstery",label:"\u0411\u0440\u0443\u0434\u043d\u0430 \u043e\u0431\u0431\u0438\u0432\u043a\u0430 \u0430\u0431\u043e \u0441\u0438\u0434\u0456\u043d\u043d\u044f",range:[1200,2e3]},{code:"frame_damage",label:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u0438\u0439 \u043a\u0430\u0440\u043a\u0430\u0441",min:700},{code:"dirty_legs",label:"\u041d\u0456\u0436\u043a\u0438 \u0431\u0440\u0443\u0434\u043d\u0456 \u0432 \u0437\u0435\u043c\u043b\u0456/\u0433\u043b\u0438\u043d\u0456/\u043f\u0456\u0441\u043a\u0443",min:800},{code:"burn_or_hole",label:"\u041f\u0440\u043e\u043f\u0430\u043b \u0430\u0431\u043e \u0434\u0456\u0440\u043a\u0430",max:"full"},{code:"liquid_spill",label:"\u0417\u0430\u043b\u0438\u0442\u043e \u0440\u0456\u0434\u0438\u043d\u043e\u044e (\u0432\u043e\u0434\u0430, \u0432\u0438\u043d\u043e, \u0441\u0456\u043a \u0442\u0430 \u0456\u043d\u0448\u0435)",range:[1200,2e3]},{code:"wet",label:"\u041c\u043e\u043a\u0440\u0456 \u0430\u0431\u043e \u0432\u043e\u043b\u043e\u0433\u0456 (\u0432\u043e\u0434\u0430)",range:[1e3,2e3]},{code:"no_brand_or_box",label:"\u041d\u0435\u043c\u0430\u0454 \u0444\u0456\u0440\u043c\u043e\u0432\u043e\u0433\u043e \u0447\u043e\u0445\u043b\u0430 \u0430\u0431\u043e \u0440\u0456\u0434\u043d\u043e\u0457 \u043a\u043e\u0440\u043e\u0431\u043a\u0438",min:3e3},{code:"no_stretch",label:"\u041d\u0435\u043c\u0430\u0454 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0432 \u0441\u0442\u0440\u0435\u0439\u0447",min:1500}]},"\u0421\u0442\u0456\u043b\u044c\u0446\u0456":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0456",min:700},{code:"chips",label:"\u0421\u043a\u043e\u043b\u0438 \u0430\u0431\u043e \u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0438",min:1500},{code:"no_stretch",label:"\u0411\u0435\u0437 \u0441\u0442\u0440\u0435\u0439\u0447\u0443\u0432\u0430\u043d\u043d\u044f",min:1e3},{code:"wet",label:"\u041c\u043e\u043a\u0440\u0456 \u0430\u0431\u043e \u0432\u043e\u043b\u043e\u0433\u0456",min:1e3},{code:"broken_full",label:"\u0417\u043b\u0430\u043c\u0430\u043d\u0456, \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f \u044f\u043a\u0456 \u0443\u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043b\u044e\u044e\u0442\u044c \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f",max:"full"}]},"\u0422\u0443\u043c\u0431\u0438 / \u043f\u043e\u0441\u0442\u0430\u043c\u0435\u043d\u0442\u0438":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0456",min:800},{code:"chips_cracks",label:"\u0421\u043a\u043e\u043b, \u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0438, \u0442\u0440\u0456\u0449\u0438\u043d\u0438, \u0432\u0442\u0440\u0430\u0442\u0430 \u0434\u0435\u0442\u0430\u043b\u0435\u0439",min:500,max:"full"},{code:"adhesive",label:"\u0417 \u0437\u0430\u043b\u0438\u0448\u043a\u0430\u043c\u0438 \u043e\u0440\u0430\u043a\u0430\u043b\u0443 \u0430\u0431\u043e \u0456\u043d\u0448\u0438\u0445 \u043d\u0430\u043b\u0456\u043f\u043e\u043a",min:500},{code:"paint",label:"\u0412 \u0444\u0430\u0440\u0431\u0456",min:800},{code:"no_native_box",label:"\u0411\u0435\u0437 \u0432\u043b\u0430\u0441\u043d\u043e\u0433\u043e \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f (\u0434\u0435\u0440\u0435\u0432\u02bc\u044f\u043d\u0438\u0439 \u0431\u043e\u043a\u0441, \u0447\u043e\u0445\u043e\u043b)",min:2800},{code:"no_stretch_protect",label:"\u0411\u0435\u0437 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0432 \u0441\u0442\u0440\u0435\u0439\u0447 \u0456 \u0437\u0430\u0445\u0438\u0441\u043d\u0438\u0445 \u0435\u043b\u0435\u043c\u0435\u043d\u0442\u0456\u0432 (\u043a\u0443\u0442\u0438\u043a\u0438)",min:1600},{code:"broken_unusable",label:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f, \u0449\u043e \u0443\u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043b\u044e\u044e\u0442\u044c \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f",max:"full"},{code:"wet",label:"\u041c\u043e\u043a\u0440\u0456 \u0430\u0431\u043e \u0432\u043e\u043b\u043e\u0433\u0456",min:200}]},"\u0421\u0432\u0456\u0447\u043d\u0438\u043a\u0438 (h: \u0434\u043e 30 \u0441\u043c)":{groups:[{code:"dirty_wax",label:"\u0411\u0440\u0443\u0434\u043d\u0456 (\u0432\u0456\u0441\u043a, \u0437\u0430\u043b\u0438\u0448\u043a\u0438 \u0441\u0432\u0456\u0447\u043e\u043a, \u0441\u043b\u0456\u0434\u0438 \u0433\u043e\u0440\u0456\u043d\u043d\u044f)",range:[50,400]},{code:"chips",label:"\u0421\u043a\u043e\u043b \u0430\u0431\u043e \u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0438",min:100,max:"full"},{code:"broken",label:"\u0417\u043b\u0430\u043c\u0430\u043d\u0456, \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f \u044f\u043a\u0456 \u0443\u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043b\u044e\u044e\u0442\u044c \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f",max:"full"},{code:"no_stretch",label:"\u0411\u0435\u0437 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0432 \u0441\u0442\u0440\u0435\u0439\u0447",min:60},{code:"no_native_pack",label:"\u0411\u0435\u0437 \u0440\u0456\u0434\u043d\u043e\u0433\u043e \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f",min:200},{code:"wet",label:"\u041c\u043e\u043a\u0440\u0456 \u0430\u0431\u043e \u0432\u043e\u043b\u043e\u0433\u0456",min:100}]},"\u0421\u0432\u0456\u0447\u043d\u0438\u043a\u0438 / \u043a\u0430\u043d\u0434\u0435\u043b\u044f\u0431\u0440\u0438 (h: 30 \u0441\u043c \u2013 1 \u043c)":{groups:[{code:"dirty_wax",label:"\u0411\u0440\u0443\u0434\u043d\u0456 (\u0432\u0456\u0441\u043a, \u0437\u0430\u043b\u0438\u0448\u043a\u0438 \u0441\u0432\u0456\u0447\u043e\u043a, \u0441\u043b\u0456\u0434\u0438 \u0433\u043e\u0440\u0456\u043d\u043d\u044f)",range:[100,800]},{code:"chips",label:"\u0421\u043a\u043e\u043b \u0430\u0431\u043e \u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0438",min:100,max:"full"},{code:"broken",label:"\u0417\u043b\u0430\u043c\u0430\u043d\u0456, \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f \u044f\u043a\u0456 \u0443\u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043b\u044e\u044e\u0442\u044c \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f",max:"full"},{code:"no_stretch",label:"\u0411\u0435\u0437 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0432 \u0441\u0442\u0440\u0435\u0439\u0447",min:300},{code:"no_native_pack",label:"\u0411\u0435\u0437 \u0440\u0456\u0434\u043d\u043e\u0433\u043e \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f",range:[400,800]},{code:"wet",label:"\u041c\u043e\u043a\u0440\u0456 \u0430\u0431\u043e \u0432\u043e\u043b\u043e\u0433\u0456",min:200}]},"\u041a\u0430\u043d\u0434\u0435\u043b\u044f\u0431\u0440\u0438 (h: 1,2 \u043c \u2013 1,8 \u043c)":{groups:[{code:"dirty_wax",label:"\u0411\u0440\u0443\u0434\u043d\u0456 (\u0432\u0456\u0441\u043a, \u0437\u0430\u043b\u0438\u0448\u043a\u0438 \u0441\u0432\u0456\u0447\u043e\u043a, \u0441\u043b\u0456\u0434\u0438 \u0433\u043e\u0440\u0456\u043d\u043d\u044f)",range:[800,1800]},{code:"chips",label:"\u0421\u043a\u043e\u043b \u0430\u0431\u043e \u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0438",min:500,max:"full"},{code:"broken",label:"\u0417\u043b\u0430\u043c\u0430\u043d\u0456, \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f \u044f\u043a\u0456 \u0443\u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043b\u044e\u044e\u0442\u044c \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f",max:"full"},{code:"no_stretch",label:"\u0411\u0435\u0437 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0432 \u0441\u0442\u0440\u0435\u0439\u0447",min:400},{code:"no_native_pack",label:"\u0411\u0435\u0437 \u0440\u0456\u0434\u043d\u043e\u0433\u043e \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f",range:[600,1200]},{code:"wet",label:"\u041c\u043e\u043a\u0440\u0456 \u0430\u0431\u043e \u0432\u043e\u043b\u043e\u0433\u0456",min:400}]},"\u041a\u0430\u043d\u0434\u0435\u043b\u044f\u0431\u0440\u0438 \u0441\u043a\u043b\u044f\u043d\u0456 (\u043c\u043e\u0436\u043d\u0430 \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u043e\u0432\u0443\u0432\u0430\u0442\u0438 \u0442\u0456\u043b\u044c\u043a\u0438 LED \u0441\u0432\u0456\u0447\u043a\u0438)":{groups:[{code:"dirty_fire",label:"\u0411\u0440\u0443\u0434\u043d\u0456 (\u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0447\u0438 \u0441\u043b\u0456\u0434\u0438 \u0436\u0438\u0432\u043e\u0433\u043e \u0432\u043e\u0433\u043d\u044e, \u0432\u0456\u0441\u043a \u0442\u043e\u0449\u043e)",min:6e3},{code:"chips",label:"\u0421\u043a\u043e\u043b \u0430\u0431\u043e \u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0438",min:300,max:"full"},{code:"no_stretch_pct",label:"\u0411\u0435\u0437 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0432 \u0441\u0442\u0440\u0435\u0439\u0447",percentOf:"full",percent:.3},{code:"no_native_pack_pct",label:"\u0411\u0435\u0437 \u0440\u0456\u0434\u043d\u043e\u0433\u043e \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f",percentOf:"full",percent:.5},{code:"wet",label:"\u041c\u043e\u043a\u0440\u0456 \u0430\u0431\u043e \u0432\u043e\u043b\u043e\u0433\u0456",min:400}]},"\u041b\u0430\u0442\u0443\u043d\u044c \u0442\u0430 \u043c\u0456\u0434\u044c":{groups:[{code:"dirty_wax",label:"\u0411\u0440\u0443\u0434\u043d\u0456 (\u0432\u0456\u0441\u043a, \u0437\u0430\u043b\u0438\u0448\u043a\u0438 \u0441\u0432\u0456\u0447\u043e\u043a, \u0441\u043b\u0456\u0434\u0438 \u0433\u043e\u0440\u0456\u043d\u043d\u044f)",range:[50,800]},{code:"chips",label:"\u0421\u043a\u043e\u043b",max:"full"},{code:"broken",label:"\u0417\u043b\u0430\u043c\u0430\u043d\u0456, \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f \u044f\u043a\u0456 \u0443\u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043b\u044e\u044e\u0442\u044c \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f",max:"full"},{code:"no_stretch_pct",label:"\u0411\u0435\u0437 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0432 \u0441\u0442\u0440\u0435\u0439\u0447",percentOf:"full",percent:.3},{code:"no_native_pack_pct",label:"\u0411\u0435\u0437 \u0440\u0456\u0434\u043d\u043e\u0433\u043e \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f",percentOf:"full",percent:.5},{code:"wet",label:"\u041c\u043e\u043a\u0440\u0456 \u0430\u0431\u043e \u0432\u043e\u043b\u043e\u0433\u0456",min:50},{code:"oxidation",label:"\u041e\u043a\u0438\u0441\u043b\u0435\u043d\u043d\u044f \u0432\u0456\u0434 \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f \u0445\u0456\u043c\u0456\u0447\u043d\u0438\u0445 \u0437\u0430\u0441\u043e\u0431\u0456\u0432",max:"full"},{code:"coating_damage",label:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u0435 \u043f\u043e\u043a\u0440\u0438\u0442\u0442\u044f",max:"full"}]},"\u041b\u0456\u0445\u0442\u0430\u0440\u0456 / \u0444\u043b\u043e\u0440\u0430\u0440\u0456\u0443\u043c\u0438":{groups:[{code:"dirty_floral",label:"\u0411\u0440\u0443\u0434\u043d\u0456 (\u043e\u0430\u0437\u0438\u0441, \u0437\u0430\u043b\u0438\u0448\u043a\u0438 \u043a\u0432\u0456\u0442\u0456\u0432, \u0457\u0436\u0456, \u0444\u0430\u0440\u0431\u0430, \u0432\u0456\u0441\u043a, \u0444\u043b\u043e\u0440\u0438\u0441\u0442\u0438\u0447\u043d\u0456 \u043c\u0430\u0442\u0435\u0440\u0456\u0430\u043b\u0438)",range:[100,2e3]},{code:"chips",label:"\u0421\u043a\u043e\u043b \u0430\u0431\u043e \u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0438",min:300,max:"full"},{code:"wet_inside",label:"\u0417 \u0432\u043e\u0434\u043e\u044e \u0432\u0441\u0435\u0440\u0435\u0434\u0438\u043d\u0456, \u043c\u043e\u043a\u0440\u0456, \u043d\u0435 \u043d\u0430\u0442\u0435\u0440\u0442\u0456",range:[400,2e3]},{code:"no_stretch_pct",label:"\u0411\u0435\u0437 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0432 \u0441\u0442\u0440\u0435\u0439\u0447",percentOf:"full",percent:.3},{code:"no_native_pack_pct",label:"\u0411\u0435\u0437 \u0440\u0456\u0434\u043d\u043e\u0433\u043e \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f",percentOf:"full",percent:.5}]},"\u041a\u0440\u0438\u0448\u0442\u0430\u043b\u044c":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0438\u0439",range:[100,500]},{code:"chips",label:"\u0421\u043a\u043e\u043b \u0430\u0431\u043e \u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0438",min:200,max:"full"},{code:"wet_inside",label:"\u0417 \u0432\u043e\u0434\u043e\u044e \u0432\u0441\u0435\u0440\u0435\u0434\u0438\u043d\u0456, \u043c\u043e\u043a\u0440\u0456, \u043d\u0435 \u043d\u0430\u0442\u0435\u0440\u0442\u0456",range:[50,200]},{code:"no_stretch_pct",label:"\u0411\u0435\u0437 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0432 \u0441\u0442\u0440\u0435\u0439\u0447",percentOf:"full",percent:.3},{code:"no_native_pack_pct",label:"\u0411\u0435\u0437 \u0440\u0456\u0434\u043d\u043e\u0433\u043e \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f",percentOf:"full",percent:.5}]},"\u041f\u0456\u0434\u0441\u0442\u0430\u0432\u043a\u0438 \u043f\u0456\u0434 \u043a\u043e\u043c\u043f\u043e\u0437\u0438\u0446\u0456\u0457":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0456",range:[200,1e3]},{code:"chips",label:"\u0421\u043a\u043e\u043b\u0438 \u0430\u0431\u043e \u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0438",min:700,max:"full"},{code:"missing_part",label:"\u0412\u0456\u0434\u0441\u0443\u0442\u043d\u0456\u0439 \u0430\u0431\u043e \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u0438\u0439 \u0437\u0439\u043e\u043c\u043d\u0438\u0439 \u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442",min:1e3,max:"full"},{code:"no_stretch_pct",label:"\u0411\u0435\u0437 \u0441\u0442\u0440\u0435\u0439\u0447\u0443\u0432\u0430\u043d\u043d\u044f",percentOf:"full",percent:.3},{code:"no_native_pack_pct",label:"\u0411\u0435\u0437 \u0432\u043b\u0430\u0441\u043d\u043e\u0433\u043e \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f (\u0444\u0456\u0440\u043c\u043e\u0432\u0456 \u0447\u043e\u0445\u043b\u0438, \xab\u0440\u0456\u0434\u043d\u0456 \u043a\u043e\u0440\u043e\u0431\u043a\u0438\xbb)",percentOf:"full",percent:.5}]},"\u0412\u0430\u0437\u0438":{groups:[{code:"dirty_floral",label:"\u0411\u0440\u0443\u0434\u043d\u0456 (\u043e\u0430\u0437\u0438\u0441, \u0437\u0430\u043b\u0438\u0448\u043a\u0438 \u043a\u0432\u0456\u0442\u0456\u0432, \u0457\u0436\u0456, \u0444\u0430\u0440\u0431\u0430, \u0432\u0456\u0441\u043a, \u0444\u043b\u043e\u0440\u0438\u0441\u0442\u0438\u0447\u043d\u0456 \u043c\u0430\u0442\u0435\u0440\u0456\u0430\u043b\u0438)",range:[50,2e3]},{code:"chips",label:"\u0421\u043a\u043e\u043b \u0430\u0431\u043e \u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0438",min:200,max:"full"},{code:"wet_inside",label:"\u0417 \u0432\u043e\u0434\u043e\u044e \u0432\u0441\u0435\u0440\u0435\u0434\u0438\u043d\u0456, \u043c\u043e\u043a\u0440\u0456, \u043d\u0435 \u043d\u0430\u0442\u0435\u0440\u0442\u0456",range:[50,800]},{code:"broken",label:"\u0417\u043b\u0430\u043c\u0430\u043d\u0456, \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f \u044f\u043a\u0456 \u0443\u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043b\u044e\u044e\u0442\u044c \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f",max:"full"},{code:"no_stretch",label:"\u0411\u0435\u0437 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0432 \u0441\u0442\u0440\u0435\u0439\u0447",min:200},{code:"no_native_pack",label:"\u0411\u0435\u0437 \u0440\u0456\u0434\u043d\u043e\u0433\u043e \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f",range:[200,800]}]},"\u041f\u043e\u0441\u0443\u0434":{groups:[{code:"dirty_floral",label:"\u0411\u0440\u0443\u0434\u043d\u0456 (\u043e\u0430\u0437\u0438\u0441, \u0437\u0430\u043b\u0438\u0448\u043a\u0438 \u043a\u0432\u0456\u0442\u0456\u0432, \u0457\u0436\u0456, \u0444\u0430\u0440\u0431\u0430, \u0432\u0456\u0441\u043a, \u0444\u043b\u043e\u0440\u0438\u0441\u0442\u0438\u0447\u043d\u0456 \u043c\u0430\u0442\u0435\u0440\u0456\u0430\u043b\u0438)",range:[60,800]},{code:"chips",label:"\u0421\u043a\u043e\u043b \u0430\u0431\u043e \u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0438",min:200,max:"full"},{code:"wet_inside",label:"\u0417 \u0432\u043e\u0434\u043e\u044e \u0432\u0441\u0435\u0440\u0435\u0434\u0438\u043d\u0456, \u043c\u043e\u043a\u0440\u0456, \u043d\u0435 \u043d\u0430\u0442\u0435\u0440\u0442\u0456",range:[60,200]},{code:"no_stretch",label:"\u0411\u0435\u0437 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0432 \u0441\u0442\u0440\u0435\u0439\u0447",min:200},{code:"no_native_pack",label:"\u0411\u0435\u0437 \u0440\u0456\u0434\u043d\u043e\u0433\u043e \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f",min:400}]},"\u041f\u0456\u0434\u0432\u0456\u0441\u043d\u0456 \u043e\u0431\u02bc\u0454\u043a\u0442\u0438":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0456",range:[500,1e3]},{code:"chips_integrity",label:"\u0421\u043a\u043e\u043b, \u043f\u043e\u0440\u0443\u0448\u0435\u043d\u043d\u044f \u0446\u0456\u043b\u0456\u0441\u043d\u043e\u0441\u0442\u0456, \u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0438",min:300,max:"full"},{code:"wet_inside",label:"\u0417 \u0432\u043e\u0434\u043e\u044e \u0432\u0441\u0435\u0440\u0435\u0434\u0438\u043d\u0456, \u043c\u043e\u043a\u0440\u0456, \u043d\u0435 \u043d\u0430\u0442\u0435\u0440\u0442\u0456",range:[100,800]},{code:"no_stretch_pct",label:"\u0411\u0435\u0437 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0432 \u0441\u0442\u0440\u0435\u0439\u0447",percentOf:"full",percent:.3},{code:"no_native_pack_pct",label:"\u0411\u0435\u0437 \u0440\u0456\u0434\u043d\u043e\u0433\u043e \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f",percentOf:"full",percent:.5}]},"\u0410\u043a\u0440\u0438\u043b\u043e\u0432\u0456 \u043a\u0443\u0431\u0438":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0456",min:800},{code:"chips",label:"\u0421\u043a\u043e\u043b\u0438 \u0430\u0431\u043e \u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0438",min:6e3},{code:"adhesive",label:"\u0417 \u0437\u0430\u043b\u0438\u0448\u043a\u0430\u043c\u0438 \u043e\u0440\u0430\u043a\u0430\u043b\u0443 \u0430\u0431\u043e \u0456\u043d\u0448\u0438\u0445 \u043d\u0430\u043b\u0456\u043f\u043e\u043a",min:900},{code:"paint",label:"\u0412 \u0444\u0430\u0440\u0431\u0456",min:1200},{code:"no_stretch_protect",label:"\u0411\u0435\u0437 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0432 \u0441\u0442\u0440\u0435\u0439\u0447 \u0456 \u0437\u0430\u0445\u0438\u0441\u043d\u0456 \u0435\u043b\u0435\u043c\u0435\u043d\u0442\u0438",min:2e3},{code:"broken",label:"\u0417\u043b\u0430\u043c\u0430\u043d\u0456",max:"full"},{code:"wet",label:"\u041c\u043e\u043a\u0440\u0456 \u0430\u0431\u043e \u0432\u043e\u043b\u043e\u0433\u0456",min:200}]},"\u0414\u0437\u0435\u0440\u043a\u0430\u043b\u044c\u043d\u0456 \u043a\u0443\u043b\u0456":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0456",range:[500,1e3]},{code:"chips_missing",label:"\u0421\u043a\u043e\u043b, \u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0438 \u0430\u0431\u043e \u0432\u0442\u0440\u0430\u0442\u0430 \u0434\u0435\u0442\u0430\u043b\u0435\u0439",range:[300,3e3]},{code:"broken_unusable",label:"\u0411\u0456\u0439, \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f \u044f\u043a\u0456 \u0443\u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043b\u044e\u044e\u0442\u044c \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f",max:"full"},{code:"structure_damage",label:"\u041f\u043e\u0440\u0443\u0448\u0435\u043d\u043d\u044f \u0446\u0456\u043b\u0456\u0441\u043d\u043e\u0441\u0442\u0456 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0456\u0457",range:[1e3,15e3]},{code:"wet",label:"\u0412\u043e\u043b\u043e\u0433\u0456 \u0430\u0431\u043e \u043c\u043e\u043a\u0440\u0456",range:[500,3e3]},{code:"no_package",label:"\u0411\u0435\u0437 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f (\u0447\u043e\u0445\u043e\u043b, \u0431\u043e\u043a\u0441, \u0444\u0456\u0440\u043c\u043e\u0432\u0430 \u043a\u043e\u0440\u043e\u0431\u043a\u0430)",min:2e3}]},"\u0421\u0432\u0456\u0442\u043b\u043e\u0432\u0456 \u0434\u0435\u043a\u043e\u0440\u0430\u0446\u0456\u0457":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0456",range:[500,5e3]},{code:"chips",label:"\u0421\u043a\u043e\u043b \u0430\u0431\u043e \u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0438",min:200,max:"full"},{code:"broken_unusable",label:"\u0411\u0456\u0439, \u0437\u043b\u0430\u043c\u0430\u043d\u0456, \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f \u044f\u043a\u0456 \u0443\u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043b\u044e\u044e\u0442\u044c \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f",max:"full"},{code:"wet",label:"\u0412\u043e\u043b\u043e\u0433\u0456 \u0430\u0431\u043e \u043c\u043e\u043a\u0440\u0456 (\u0432\u043e\u0434\u0430)",min:100,max:"full"},{code:"disassembled",label:"\u0420\u043e\u0437\u0456\u0431\u0440\u0430\u043d\u0456 (\u0433\u0456\u0440\u043b\u044f\u043d\u0434\u0438 \u043d\u0435 \u0441\u043a\u043b\u0430\u0434\u0435\u043d\u0456 \u0446\u043e\u043a\u043e\u043b\u044c \u0434\u043e \u0446\u043e\u043a\u043e\u043b\u044f, \u043d\u0435 \u0441\u043a\u0440\u0456\u043f\u043b\u0435\u043d\u0456 \u0441\u0442\u044f\u0436\u043a\u0430\u043c\u0438)",min:500},{code:"needs_restore",label:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f \u044f\u043a\u0456 \u043f\u043e\u0442\u0440\u0435\u0431\u0443\u044e\u0442\u044c \u043f\u043e\u0434\u0430\u043b\u044c\u0448\u043e\u0433\u043e \u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0443\u0432\u0430\u043d\u043d\u044f",range:[2500,15e3]},{code:"no_package_pct",label:"\u0411\u0435\u0437 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f (\u0447\u043e\u0445\u043e\u043b, \u0431\u043e\u043a\u0441, \u0444\u0456\u0440\u043c\u043e\u0432\u0430 \u043a\u043e\u0440\u043e\u0431\u043a\u0430)",percentOf:"full",percent:.4}]},"\u0424\u0456\u0433\u0443\u0440\u0438 \u0433\u0456\u043f\u0441 (\u0431\u044e\u0441\u0442, \u0433\u043e\u043b\u043e\u0432\u0438)":{groups:[{code:"broken",label:"\u0411\u0456\u0439",max:"full"},{code:"chips_restore",label:"\u041f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0438, \u0441\u043a\u043e\u043b (\u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f)",range:[1e3,2e3]},{code:"wet",label:"\u0412\u043e\u043b\u043e\u0433\u0456 \u0430\u0431\u043e \u043c\u043e\u043a\u0440\u0456 (\u0432\u043e\u0434\u0430)",range:[500,1e3]},{code:"no_package_pct",label:"\u0411\u0435\u0437 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f (\u0447\u043e\u0445\u043e\u043b, \u0431\u043e\u043a\u0441, \u0444\u0456\u0440\u043c\u043e\u0432\u0430 \u043a\u043e\u0440\u043e\u0431\u043a\u0430)",percentOf:"full",percent:.4}]},"\u0422\u0435\u043a\u0441\u0442\u0438\u043b\u044c":{groups:[{code:"dirty_stains",label:"\u0411\u0440\u0443\u0434\u043d\u0456 (\u043f\u043b\u044f\u043c\u0438 \u0432\u0456\u0434 \u0457\u0436\u0456, \u043d\u0430\u043f\u043e\u0457\u0432, \u0432\u0456\u0441\u043a)",range:[250,3500]},{code:"wet",label:"\u0412\u043e\u043b\u043e\u0433\u0456 \u0430\u0431\u043e \u043c\u043e\u043a\u0440\u0456 (\u0432\u043e\u0434\u0430)",range:[300,3e3]},{code:"burn_or_hole",label:"\u041f\u0440\u043e\u043f\u0430\u043b \u0430\u0431\u043e \u0434\u0456\u0440\u043a\u0430",max:"full"},{code:"no_bag_pct",label:"\u0421\u043a\u0430\u0442\u0435\u0440\u0442\u0438\u043d\u0430 / \u043f\u043b\u0435\u0434 \u0431\u0435\u0437 \u0444\u0456\u0440\u043c\u043e\u0432\u043e\u0433\u043e \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f (\u0442\u0435\u043a\u0441\u0442\u0438\u043b\u044c\u043d\u0430 \u0441\u0443\u043c\u043a\u0430)",percentOf:"full",percent:.3},{code:"tablecloth_no_stretch_pct",label:"\u0421\u043a\u0430\u0442\u0435\u0440\u0442\u0438\u043d\u0430 / \u043f\u043b\u0435\u0434 \u0431\u0435\u0437 \u0441\u0442\u0440\u0435\u0439\u0447\u0443",percentOf:"full",percent:.1},{code:"napkins_no_stretch_pct",label:"\u0421\u0435\u0440\u0432\u0435\u0442\u043a\u0438 \u0431\u0435\u0437 \u0441\u0442\u0440\u0435\u0439\u0447\u0443",percentOf:"full",percent:.5},{code:"no_stretch",label:"\u0411\u0435\u0437 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0432 \u0441\u0442\u0440\u0435\u0439\u0447",min:300}]},"\u041a\u0438\u043b\u0438\u043c\u0438":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0456",range:[2e3,5e3]},{code:"burn_or_hole",label:"\u041f\u0440\u043e\u043f\u0430\u043b \u0430\u0431\u043e \u0434\u0456\u0440\u043a\u0430",max:"full"},{code:"pull_damage",label:"\u0417\u0430\u0442\u044f\u0436\u043a\u0430 \u0430\u0431\u043e \u0456\u043d\u0448\u0435 \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f, \u044f\u043a\u0435 \u043f\u043e\u0442\u0440\u0435\u0431\u0443\u0454 \u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u0457",min:1e3,max:"full"},{code:"wet",label:"\u0412\u043e\u043b\u043e\u0433\u0456 \u0430\u0431\u043e \u043c\u043e\u043a\u0440\u0456 (\u0432\u043e\u0434\u0430)",range:[1e3,2500]},{code:"no_stretch",label:"\u0411\u0435\u0437 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0432 \u0441\u0442\u0440\u0435\u0439\u0447",min:500}]},"\u0422\u0435\u0445\u043d\u0456\u043a\u0430":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0456 (\u0437\u0435\u043c\u043b\u044f, \u0433\u043b\u0438\u043d\u0430, \u0444\u0430\u0440\u0431\u0430, \u0444\u043b\u043e\u0440\u0438\u0441\u0442\u0438\u0447\u043d\u0438\u0439 \u043c\u0430\u0442\u0435\u0440\u0456\u0430\u043b)",range:[200,1200]},{code:"wet",label:"\u0412\u043e\u043b\u043e\u0433\u0456 \u0430\u0431\u043e \u043c\u043e\u043a\u0440\u0456 (\u0432\u043e\u0434\u0430)",range:[50,400]},{code:"chips",label:"\u0421\u043a\u043e\u043b \u0430\u0431\u043e \u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0438",range:[500,1200]},{code:"malfunction",label:"\u041f\u043e\u043b\u043e\u043c\u043a\u0430 \u0430\u0431\u043e \u043d\u0435\u043d\u0430\u043b\u0435\u0436\u043d\u0435 \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f",min:1e3,max:"full"}]},"\u0415\u0442\u043d\u043e":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0438\u0439 \u0440\u0435\u043a\u0432\u0456\u0437\u0438\u0442",range:[100,2e3]},{code:"wet",label:"\u0412\u043e\u043b\u043e\u0433\u0438\u0439 \u0430\u0431\u043e \u043c\u043e\u043a\u0440\u0438\u0439 (\u0432\u043e\u0434\u0430)",range:[100,2e3]},{code:"damage",label:"\u0421\u043a\u043e\u043b, \u043f\u043e\u0434\u0440\u044f\u043f\u0438\u043d\u0430 \u0430\u0431\u043e \u0456\u043d\u0448\u0438\u0439 \u0432\u0438\u0434 \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f",min:200,max:"full"},{code:"no_package_pct",label:"\u0412\u0456\u0434\u0441\u0443\u0442\u043d\u0456\u0441\u0442\u044c \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u044f\u043a \u043f\u0440\u0438 \u0432\u0438\u0434\u0430\u0447\u0456",percentOf:"full",percent:.2}]},"\u041d\u0443\u043c\u0435\u0440\u0430\u0446\u0456\u044f \u0441\u0442\u043e\u043b\u0456\u0432 (\u0440\u0430\u043c\u043a\u0438, \u0442\u0440\u0438\u043c\u0430\u0447\u0456 \u043a\u0430\u0440\u0442\u043e\u043a)":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0456",range:[100,500]},{code:"wet",label:"\u0412\u043e\u043b\u043e\u0433\u0456 \u0430\u0431\u043e \u043c\u043e\u043a\u0440\u0456 (\u0432\u043e\u0434\u0430)",range:[50,300]},{code:"damaged",label:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u0456",max:"full"},{code:"no_stretch_pct",label:"\u0411\u0435\u0437 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0432 \u0441\u0442\u0440\u0435\u0439\u0447",percentOf:"full",percent:.3},{code:"no_envelope",label:"\u0411\u0435\u0437 \u0440\u0456\u0434\u043d\u043e\u0433\u043e \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f (\u043a\u043e\u043d\u0432\u0435\u0440\u0442, \u043a\u043e\u0440\u043e\u0431\u043a\u0430)",min:200}]},"\u0414\u0435\u043a\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u0430 \u043a\u0432\u0456\u0442\u043a\u0430":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0456",range:[50,1e3]},{code:"wet",label:"\u0412\u043e\u043b\u043e\u0433\u0456 \u0430\u0431\u043e \u043c\u043e\u043a\u0440\u0456 (\u0432\u043e\u0434\u0430)",min:50},{code:"damaged_restore",label:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u0456 (\u043c\u043e\u0436\u043b\u0438\u0432\u0430 \u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f)",range:[100,1e3]},{code:"no_package_pct",label:"\u0412\u0456\u0434\u0441\u0443\u0442\u043d\u0456\u0441\u0442\u044c \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f (\u0447\u043e\u0445\u043e\u043b \u0430\u0431\u043e \u043f\u043b\u0430\u0441\u0442\u0438\u043a\u043e\u0432\u0438\u0439 \u0431\u043e\u043a\u0441)",percentOf:"full",percent:.5}]},"\u0414\u0437\u0435\u0440\u043a\u0430\u043b\u0430 / \u0440\u0430\u043c\u043a\u0438":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0456",range:[400,2e3]},{code:"adhesive",label:"\u0417 \u0437\u0430\u043b\u0438\u0448\u043a\u0430\u043c\u0438 \u043e\u0440\u0430\u043a\u0430\u043b\u0443 \u0430\u0431\u043e \u0456\u043d\u0448\u0438\u0445 \u043d\u0430\u043b\u0456\u043f\u043e\u043a",range:[400,2e3]},{code:"wet",label:"\u0412\u043e\u043b\u043e\u0433\u0456 \u0430\u0431\u043e \u043c\u043e\u043a\u0440\u0456 (\u0432\u043e\u0434\u0430)",range:[200,800]},{code:"damaged_missing",label:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u0456, \u0432\u0442\u0440\u0430\u0442\u0430 \u0434\u0435\u0442\u0430\u043b\u0435\u0439 \u0442\u0430 \u0435\u043b\u0435\u043c\u0435\u043d\u0442\u0456\u0432",min:1e3,max:"full"},{code:"no_package_pct",label:"\u0411\u0435\u0437 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f (\u0433\u043e\u0444\u0440\u043e\u043a\u0430\u0440\u0442\u043e\u043d \u0442\u0430 \u0441\u0442\u0440\u0435\u0439\u0447-\u043f\u043b\u0456\u0432\u043a\u0430)",percentOf:"full",percent:.3}]},"\u0421\u043a\u0440\u0438\u043d\u044c\u043a\u0438":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0456",range:[100,600]},{code:"wet",label:"\u0412\u043e\u043b\u043e\u0433\u0456 \u0430\u0431\u043e \u043c\u043e\u043a\u0440\u0456 (\u0432\u043e\u0434\u0430)",min:100,max:"full"},{code:"damaged_restore",label:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u0456 (\u043c\u043e\u0436\u043b\u0438\u0432\u0430 \u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f), \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456\u0441\u0442\u044c \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457 (\u043f\u043e\u0432\u043d\u0430 / \u0447\u0430\u0441\u0442\u043a\u043e\u0432\u0430)",min:300,max:"full"},{code:"broken_loss",label:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u0456 (\u0435\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0456\u044f \u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u0430), \u0432\u0442\u0440\u0430\u0442\u0430",max:"full"},{code:"no_stretch_pct",label:"\u0411\u0435\u0437 \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0432 \u0441\u0442\u0440\u0435\u0439\u0447",percentOf:"full",percent:.3},{code:"no_envelope_pct",label:"\u0411\u0435\u0437 \u0440\u0456\u0434\u043d\u043e\u0433\u043e \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f (\u043a\u043e\u043d\u0432\u0435\u0440\u0442, \u043a\u043e\u0440\u043e\u0431\u043a\u0430)",percentOf:"full",percent:.5}]},"\u0406\u0433\u0440\u0438":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0456",min:100,max:"full"},{code:"wet",label:"\u0412\u043e\u043b\u043e\u0433\u0456 \u0430\u0431\u043e \u043c\u043e\u043a\u0440\u0456 (\u0432\u043e\u0434\u0430)",min:100,max:"full"},{code:"damaged_incomplete",label:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u0456 (\u043c\u043e\u0436\u043b\u0438\u0432\u0430 \u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f), \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456\u0441\u0442\u044c \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457 (\u043f\u043e\u0432\u043d\u0430 / \u0447\u0430\u0441\u0442\u043a\u043e\u0432\u0430)",min:500,max:"full"},{code:"broken_loss",label:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u0456 (\u0435\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0456\u044f \u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u0430), \u0432\u0442\u0440\u0430\u0442\u0430",max:"full"},{code:"no_package_pct",label:"\u0412\u0456\u0434\u0441\u0443\u0442\u043d\u0456\u0441\u0442\u044c \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u044f\u043a \u043f\u0440\u0438 \u0432\u0438\u0434\u0430\u0447\u0456",percentOf:"full",percent:.35}]},"\u041a\u043b\u0456\u0442\u043a\u0438":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0456",range:[100,1500]},{code:"wet",label:"\u0412\u043e\u043b\u043e\u0433\u0456 \u0430\u0431\u043e \u043c\u043e\u043a\u0440\u0456 (\u0432\u043e\u0434\u0430)",range:[100,500]},{code:"damaged_incomplete",label:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u0456 (\u043c\u043e\u0436\u043b\u0438\u0432\u0430 \u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f), \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456\u0441\u0442\u044c \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457 (\u043f\u043e\u0432\u043d\u0430 / \u0447\u0430\u0441\u0442\u043a\u043e\u0432\u0430)",min:800,max:"full"},{code:"broken_loss",label:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u0456 (\u0435\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0456\u044f \u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u0430), \u0432\u0442\u0440\u0430\u0442\u0430",max:"full"},{code:"no_package_pct",label:"\u0412\u0456\u0434\u0441\u0443\u0442\u043d\u0456\u0441\u0442\u044c \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u044f\u043a \u043f\u0440\u0438 \u0432\u0438\u0434\u0430\u0447\u0456",percentOf:"full",percent:.25}]},"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u0438":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0456",range:[300,4e3]},{code:"wet",label:"\u0412\u043e\u043b\u043e\u0433\u0456 \u0430\u0431\u043e \u043c\u043e\u043a\u0440\u0456 (\u0432\u043e\u0434\u0430)",min:200,max:"full"},{code:"damaged_incomplete",label:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u0456 (\u043c\u043e\u0436\u043b\u0438\u0432\u0430 \u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f), \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456\u0441\u0442\u044c \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457 (\u043f\u043e\u0432\u043d\u0430 / \u0447\u0430\u0441\u0442\u043a\u043e\u0432\u0430)",min:1500,max:"full"},{code:"broken_loss",label:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u0456 (\u0435\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0456\u044f \u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u0430), \u0432\u0442\u0440\u0430\u0442\u0430",max:"full"},{code:"no_package_pct",label:"\u0412\u0456\u0434\u0441\u0443\u0442\u043d\u0456\u0441\u0442\u044c \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u044f\u043a \u043f\u0440\u0438 \u0432\u0438\u0434\u0430\u0447\u0456",percentOf:"full",percent:.35}]},"\u0420\u0435\u043a\u0432\u0456\u0437\u0438\u0442":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0438\u0439",range:[100,3e3]},{code:"wet",label:"\u0412\u043e\u043b\u043e\u0433\u0438\u0439 \u0430\u0431\u043e \u043c\u043e\u043a\u0440\u0438\u0439 (\u0432\u043e\u0434\u0430)",range:[50,2e3]},{code:"damaged_incomplete",label:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u0438\u0439 (\u043c\u043e\u0436\u043b\u0438\u0432\u0430 \u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f), \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456\u0441\u0442\u044c \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457 (\u043f\u043e\u0432\u043d\u0430 / \u0447\u0430\u0441\u0442\u043a\u043e\u0432\u0430)",range:[200,3e3]},{code:"broken_loss",label:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u0438\u0439 (\u0435\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0456\u044f \u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u0430), \u0432\u0442\u0440\u0430\u0442\u0430",max:"full"},{code:"no_package_pct",label:"\u0412\u0456\u0434\u0441\u0443\u0442\u043d\u0456\u0441\u0442\u044c \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u044f\u043a \u043f\u0440\u0438 \u0432\u0438\u0434\u0430\u0447\u0456",percentOf:"full",percent:.35}]},"\u041d\u043e\u0432\u0438\u0439 \u0440\u0456\u043a":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0438\u0439",range:[100,5e3]},{code:"wet",label:"\u0412\u043e\u043b\u043e\u0433\u0438\u0439 \u0430\u0431\u043e \u043c\u043e\u043a\u0440\u0438\u0439 (\u0432\u043e\u0434\u0430)",range:[50,4e3]},{code:"damaged_incomplete",label:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u0438\u0439 (\u043c\u043e\u0436\u043b\u0438\u0432\u0430 \u0440\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f), \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456\u0441\u0442\u044c \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457 (\u043f\u043e\u0432\u043d\u0430 / \u0447\u0430\u0441\u0442\u043a\u043e\u0432\u0430)",min:200,max:"full"},{code:"broken_loss",label:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u0456 (\u0435\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0456\u044f \u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u0430), \u0432\u0442\u0440\u0430\u0442\u0430",max:"full"},{code:"no_package_pct",label:"\u0412\u0456\u0434\u0441\u0443\u0442\u043d\u0456\u0441\u0442\u044c \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u044f\u043a \u043f\u0440\u0438 \u0432\u0438\u0434\u0430\u0447\u0456",percentOf:"full",percent:.35}]},"\u0420\u043e\u0437\u043a\u043b\u0430\u0434\u043d\u0438\u0439 \u0447\u043e\u0440\u043d\u0438\u0439 \u0431\u043e\u043a\u0441":{groups:[{code:"dirty",label:"\u0411\u0440\u0443\u0434\u043d\u0438\u0439",range:[100,400]},{code:"wet",label:"\u041c\u043e\u043a\u0440\u0438\u0439",range:[50,200]},{code:"loss_or_damage",label:"\u0412\u0442\u0440\u0430\u0442\u0430 \u0430\u0431\u043e \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f",min:800}]}};function nc(e){return e?"number"===typeof e.min?e.min:Array.isArray(e.range)?e.range[0]:0:0}const sc=_s("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),ac=_s("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),ic=_s("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),oc=_s("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),lc=e=>{let{onPhotosCapture:r,maxPhotos:n=5,label:s="\u0414\u043e\u0434\u0430\u0442\u0438 \u0444\u043e\u0442\u043e",allowMultiple:a=!0,compact:i=!1}=e;const[o,l]=(0,t.useState)([]),[c,d]=(0,t.useState)([]),[u,h]=(0,t.useState)(!1),m=(0,t.useRef)(null),p=(0,t.useRef)(null),f=e=>{const t=Array.from(e.target.files);x(t)},x=e=>{if(!e||0===e.length)return;const t=e.filter(e=>{const t=e.type.startsWith("image/"),r=e.size<=10485760;return t&&r});if(0===t.length)return void alert("\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u0434\u043e 10MB");const s=n-o.length,i=a?t.slice(0,s):[t[0]],u=[],h=[];i.forEach(e=>{const t=new FileReader;t.onloadend=()=>{if(u.push(t.result),h.push(e),u.length===i.length){const e=a?[...o,...h]:h,t=a?[...c,...u]:u;l(e),d(t),r&&r(e)}},t.readAsDataURL(e)})},g=e=>{const t=o.filter((t,r)=>r!==e),n=c.filter((t,r)=>r!==e);l(t),d(n),r&&r(t)},b=()=>{var e;null===(e=m.current)||void 0===e||e.click()},y=()=>{var e;null===(e=p.current)||void 0===e||e.click()},v=o.length<n;return i?(0,Et.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,Et.jsx)("input",{ref:m,type:"file",accept:"image/*",multiple:a,onChange:f,className:"hidden"}),(0,Et.jsx)("input",{ref:p,type:"file",accept:"image/*",capture:"environment",onChange:f,className:"hidden"}),v&&(0,Et.jsxs)("button",{type:"button",onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[(0,Et.jsx)(sc,{className:"w-4 h-4"}),(0,Et.jsx)("span",{className:"hidden sm:inline",children:"\u041a\u0430\u043c\u0435\u0440\u0430"})]}),v&&(0,Et.jsxs)("button",{type:"button",onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm",children:[(0,Et.jsx)(ac,{className:"w-4 h-4"}),(0,Et.jsx)("span",{className:"hidden sm:inline",children:"\u0413\u0430\u043b\u0435\u0440\u0435\u044f"})]}),c.map((e,t)=>(0,Et.jsxs)("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden border-2 border-green-500",children:[(0,Et.jsx)("img",{src:e,alt:"Preview ".concat(t+1),className:"w-full h-full object-cover"}),(0,Et.jsx)("button",{type:"button",onClick:()=>g(t),className:"absolute top-0 right-0 bg-red-500 text-white p-1 rounded-bl-lg hover:bg-red-600",children:(0,Et.jsx)(ic,{className:"w-3 h-3"})})]},t)),o.length>0&&(0,Et.jsxs)("div",{className:"flex items-center text-sm text-gray-600 px-2",children:[(0,Et.jsx)(oc,{className:"w-4 h-4 text-green-600 mr-1"}),o.length," \u0444\u043e\u0442\u043e"]})]}):(0,Et.jsxs)("div",{className:"space-y-4",children:[s&&(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:s}),(0,Et.jsx)("input",{ref:m,type:"file",accept:"image/*",multiple:a,onChange:f,className:"hidden"}),(0,Et.jsx)("input",{ref:p,type:"file",accept:"image/*",capture:"environment",onChange:f,className:"hidden"}),v&&(0,Et.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Et.jsxs)("button",{type:"button",onClick:y,className:"flex flex-col items-center justify-center p-6 border-2 border-dashed border-blue-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all",children:[(0,Et.jsx)(sc,{className:"w-12 h-12 text-blue-600 mb-2"}),(0,Et.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\u041a\u0430\u043c\u0435\u0440\u0430"}),(0,Et.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:"\u0417\u0440\u043e\u0431\u0438\u0442\u0438 \u0444\u043e\u0442\u043e"})]}),(0,Et.jsxs)("button",{type:"button",onClick:b,className:"flex flex-col items-center justify-center p-6 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 transition-all",children:[(0,Et.jsx)(ac,{className:"w-12 h-12 text-gray-600 mb-2"}),(0,Et.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\u0413\u0430\u043b\u0435\u0440\u0435\u044f"}),(0,Et.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:"\u0412\u0438\u0431\u0440\u0430\u0442\u0438 \u0444\u0430\u0439\u043b"})]})]}),c.length>0&&(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsx)("div",{className:"flex items-center justify-between",children:(0,Et.jsxs)("p",{className:"text-sm text-gray-600",children:["\u0414\u043e\u0434\u0430\u043d\u043e \u0444\u043e\u0442\u043e: ",o.length,"/",n]})}),(0,Et.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:c.map((e,t)=>(0,Et.jsxs)("div",{className:"relative group",children:[(0,Et.jsx)("div",{className:"aspect-square rounded-lg overflow-hidden border-2 border-gray-200 hover:border-blue-500 transition-colors",children:(0,Et.jsx)("img",{src:e,alt:"Preview ".concat(t+1),className:"w-full h-full object-cover"})}),(0,Et.jsx)("button",{type:"button",onClick:()=>g(t),className:"absolute -top-2 -right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition-colors shadow-lg",children:(0,Et.jsx)(ic,{className:"w-4 h-4"})}),(0,Et.jsxs)("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-60 text-white text-xs px-2 py-1 rounded",children:["#",t+1]})]},t))})]}),0===o.length&&(0,Et.jsxs)("div",{className:"text-center py-4",children:[(0,Et.jsx)("p",{className:"text-sm text-gray-500",children:"\ud83d\udcf8 \u0417\u0440\u043e\u0431\u0456\u0442\u044c \u0444\u043e\u0442\u043e \u043a\u0430\u043c\u0435\u0440\u043e\u044e \u0430\u0431\u043e \u0432\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0437 \u0433\u0430\u043b\u0435\u0440\u0435\u0457"}),(0,Et.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c ",n," \u0444\u043e\u0442\u043e, \u0434\u043e 10MB \u043a\u043e\u0436\u043d\u0435"]})]}),!v&&(0,Et.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,Et.jsxs)("p",{className:"text-sm text-yellow-800",children:["\u26a0\ufe0f \u0414\u043e\u0441\u044f\u0433\u043d\u0443\u0442\u043e \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c \u0444\u043e\u0442\u043e (",n,")"]})})]})};function cc(e){let{tone:t,children:r}=e;const n={slate:"bg-slate-100 text-slate-700 border-slate-200",amber:"bg-amber-100 text-amber-700 border-amber-200",red:"bg-red-100 text-red-700 border-red-200",green:"bg-green-100 text-green-700 border-green-200"};return(0,Et.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-xs ".concat(n[t]||n.slate),children:r})}function dc(e){let{tone:t,onClick:r,children:n}=e;const s={slate:"bg-slate-800 hover:bg-slate-900 text-white",green:"bg-emerald-600 hover:bg-emerald-700 text-white"};return(0,Et.jsx)("button",{onClick:r,className:"rounded-full px-4 py-2 text-sm ".concat(s[t]||s.slate),children:n})}function uc(e){let{title:t,children:r}=e;return(0,Et.jsxs)("div",{className:"rounded-lg border border-slate-200 p-3",children:[(0,Et.jsx)("h4",{className:"text-sm font-semibold mb-2",children:t}),r]})}function hc(e){var r;let{isOpen:n,onClose:s,item:a,order:i,stage:o,onSave:l,existingHistory:d=[]}=e;const[u,h]=(0,t.useState)({category:"\u041c\u0435\u0431\u043b\u0456",kindCode:"",severity:"low",note:"",fee:0,photoName:""}),[m,p]=(0,t.useState)([]),[f,x]=(0,t.useState)(!1);if((0,t.useEffect)(()=>{n&&(h({category:"\u041c\u0435\u0431\u043b\u0456",kindCode:"",severity:"low",note:"",fee:0,photoName:""}),p([]))},[n]),!n||!a)return null;const g=Object.keys(rc),b=(rc[u.category]||{groups:[]}).groups,y=b.find(e=>e.code===u.kindCode);return(0,Et.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:(0,Et.jsxs)("div",{className:"w-full max-w-xl rounded-2xl border border-slate-200 bg-white p-4 shadow-xl max-h-[90vh] overflow-auto",children:[(0,Et.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,Et.jsxs)("h3",{className:"text-base font-semibold",children:["\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f ",{pre_issue:"\u0414\u041e \u0432\u0438\u0434\u0430\u0447\u0456",return:"\u041f\u0440\u0438 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u0456",audit:"\u041f\u0440\u0438 \u0430\u0443\u0434\u0438\u0442\u0456"}[o]||o," \xb7 ",a.sku," \xb7 ",a.name]}),(0,Et.jsx)("button",{onClick:s,className:"text-slate-500 hover:text-slate-700 text-xl",children:"\u2715"})]}),(0,Et.jsxs)("div",{className:"grid gap-3 text-sm",children:[(0,Et.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-slate-500 mb-1",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f"}),(0,Et.jsx)("select",{className:"w-full rounded-xl border px-3 py-2",value:u.category,onChange:e=>h(t=>c(c({},t),{},{category:e.target.value,kindCode:"",fee:0})),children:g.map(e=>(0,Et.jsx)("option",{value:e,children:e},e))})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-slate-500 mb-1",children:"\u0422\u0438\u043f"}),(0,Et.jsxs)("select",{className:"w-full rounded-xl border px-3 py-2",value:u.kindCode,onChange:e=>{const t=e.target.value,r=b.find(e=>e.code===t);h(e=>c(c({},e),{},{kindCode:t,fee:nc(r)}))},children:[(0,Et.jsx)("option",{value:"",children:"\u2014 \u043e\u0431\u0435\u0440\u0456\u0442\u044c \u2014"}),b.map(e=>(0,Et.jsx)("option",{value:e.code,children:e.label},e.code))]})]})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-slate-500 mb-1",children:"\u0420\u0456\u0432\u0435\u043d\u044c"}),(0,Et.jsxs)("select",{className:"w-full rounded-xl border px-3 py-2",value:u.severity,onChange:e=>h(t=>c(c({},t),{},{severity:e.target.value})),children:[(0,Et.jsx)("option",{value:"low",children:"\u043d\u0438\u0437\u044c\u043a\u0438\u0439"}),(0,Et.jsx)("option",{value:"medium",children:"\u0441\u0435\u0440\u0435\u0434\u043d\u0456\u0439"}),(0,Et.jsx)("option",{value:"high",children:"\u0432\u0438\u0441\u043e\u043a\u0438\u0439"}),(0,Et.jsx)("option",{value:"critical",children:"\u043a\u0440\u0438\u0442\u0438\u0447\u043d\u0438\u0439"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-slate-500 mb-1",children:"\u0421\u0443\u043c\u0430 (\u0433\u0440\u043d)"}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsx)("input",{className:"w-full rounded-xl border px-3 py-2",type:"number",value:u.fee,onChange:e=>h(t=>c(c({},t),{},{fee:Number(e.target.value)||0}))}),(0,Et.jsx)("button",{className:"rounded-lg border px-2 hover:bg-slate-50",onClick:()=>h(e=>c(c({},e),{},{fee:nc(y)})),children:"\u0410\u0432\u0442\u043e"})]}),y&&(y.percent?(0,Et.jsxs)("div",{className:"mt-1 text-xs text-amber-700",children:["\u041f\u0440\u0430\u0432\u0438\u043b\u043e: ",Math.round(100*y.percent),"% \u0432\u0456\u0434 \u043f\u043e\u0432\u043d\u043e\u0433\u043e \u0437\u0431\u0438\u0442\u043a\u0443"]}):"full"===y.max?(0,Et.jsx)("div",{className:"mt-1 text-xs text-amber-700",children:"\u041c\u043e\u0436\u043b\u0438\u0432\u0435 \u043f\u043e\u0432\u043d\u0435 \u0432\u0456\u0434\u0448\u043a\u043e\u0434\u0443\u0432\u0430\u043d\u043d\u044f"}):y.range?(0,Et.jsxs)("div",{className:"mt-1 text-xs text-slate-500",children:["\u0414\u0456\u0430\u043f\u0430\u0437\u043e\u043d: \u20b4 ",y.range[0]," \u2014 \u20b4 ",y.range[1]]}):y.min?(0,Et.jsxs)("div",{className:"mt-1 text-xs text-slate-500",children:["\u041c\u0456\u043d\u0456\u043c\u0443\u043c: \u20b4 ",y.min]}):null)]})]}),(0,Et.jsx)("div",{className:"mb-4",children:(0,Et.jsx)(lc,{onPhotosCapture:e=>{p(e),h(t=>c(c({},t),{},{photoName:e.length>0?e[0].name:""}))},maxPhotos:3,label:"\u0424\u043e\u0442\u043e \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f",allowMultiple:!0,compact:!1})}),(0,Et.jsx)("div",{className:"grid grid-cols-1 gap-3",children:(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-slate-500 mb-1",children:"\u041d\u043e\u0442\u0430\u0442\u043a\u0430"}),(0,Et.jsx)("input",{className:"w-full rounded-xl border px-3 py-2",value:u.note,onChange:e=>h(t=>c(c({},t),{},{note:e.target.value})),placeholder:"\u041e\u043f\u0438\u0448\u0456\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0443\u2026"})]})}),(0,Et.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[(0,Et.jsx)(dc,{tone:"slate",onClick:s,children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"}),(0,Et.jsx)(dc,{tone:"green",onClick:async()=>{if(u.kindCode){x(!0);try{const e={id:"pd-"+Math.floor(9e4*Math.random()+100),kind:u.kindCode,category:u.category,severity:u.severity,note:u.note,fee:u.fee,at:(new Date).toISOString(),photoName:u.photoName};await is.post("".concat("https://backrentalhub.farforrent.com.ua","/api/product-damage-history/"),{product_id:a.inventory_id||a.id,sku:a.sku,product_name:a.name,category:u.category,order_id:null===i||void 0===i?void 0:i.order_id,order_number:null===i||void 0===i?void 0:i.order_number,stage:o,damage_type:(null===y||void 0===y?void 0:y.label)||u.kindCode,damage_code:u.kindCode,severity:u.severity,fee:u.fee,photo_url:u.photoName,note:u.note,created_by:"manager"}),console.log("[DamageModal] Saved damage record for ".concat(a.sku," at stage ").concat(o)),l&&l(e),s(),window.toast&&window.toast({title:"\u2705 \u0423\u0441\u043f\u0456\u0445",description:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f \u0437\u0430\u0444\u0456\u043a\u0441\u043e\u0432\u0430\u043d\u043e \u0442\u0430 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e \u0432 \u0456\u0441\u0442\u043e\u0440\u0456\u044e"})}catch(e){console.error("[DamageModal] Error saving:",e),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f")}finally{x(!1)}}else alert("\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0442\u0438\u043f \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f")},children:f?"\u23f3 \u0417\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f...":"\u0417\u0430\u0444\u0456\u043a\u0441\u0443\u0432\u0430\u0442\u0438"})]})]}),((null===(r=a.pre_damage)||void 0===r?void 0:r.length)>0||(null===d||void 0===d?void 0:d.length)>0)&&(0,Et.jsx)("div",{className:"mt-4",children:(0,Et.jsx)(uc,{title:"\u0406\u0441\u0442\u043e\u0440\u0456\u044f \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u044c \u043f\u043e \u043f\u043e\u0437\u0438\u0446\u0456\u0457",children:(0,Et.jsx)("div",{className:"max-h-40 overflow-auto text-sm",children:(a.pre_damage||d||[]).length>0?(0,Et.jsx)("ul",{className:"space-y-1",children:(a.pre_damage||d||[]).map(e=>{var t;return(0,Et.jsxs)("li",{className:"text-xs border-b pb-1",children:[(0,Et.jsx)(cc,{tone:"amber",children:e.category})," \xb7",(0,Et.jsx)(cc,{tone:"high"===e.severity?"red":"medium"===e.severity?"amber":"slate",children:e.severity})," \xb7 \u20b4",e.fee," \xb7 ",e.note||"\u2014",(0,Et.jsxs)("div",{className:"text-slate-400 mt-0.5",children:[null===(t=e.at)||void 0===t?void 0:t.slice(0,16)," ",e.photoName?"\xb7 \ud83d\udcf7 ".concat(e.photoName):""]})]},e.id)})}):(0,Et.jsx)("div",{className:"text-slate-500",children:"\u041f\u043e\u043a\u0438 \u043d\u0435\u043c\u0430\u0454 \u0437\u0430\u043f\u0438\u0441\u0456\u0432"})})})})]})})}const mc=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")},pc=e=>(Number(e)||0).toLocaleString("uk-UA",{maximumFractionDigits:2});function fc(e){let{tone:t="slate",children:r}=e;return(0,Et.jsx)("span",{className:mc("inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-xs font-medium",{slate:"bg-slate-100 text-slate-700 border-slate-200",green:"bg-emerald-100 text-emerald-700 border-emerald-200",amber:"bg-amber-100 text-amber-800 border-amber-200",red:"bg-rose-100 text-rose-700 border-rose-200",blue:"bg-blue-100 text-blue-700 border-blue-200"}[t]),children:r})}function xc(e){let{orderId:r}=e;const[n,s]=(0,t.useState)([]),[a,i]=(0,t.useState)(!0);if((0,t.useEffect)(()=>{r&&is.get("".concat("https://backrentalhub.farforrent.com.ua","/api/finance/transactions?order_id=").concat(r)).then(e=>{const t=Array.isArray(e.data)?e.data:[];s(t),i(!1)}).catch(e=>{console.error("Failed to load transactions:",e),i(!1)})},[r]),a)return(0,Et.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:(0,Et.jsx)("div",{className:"text-sm text-slate-500",children:"\u23f3 \u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0444\u0456\u043d\u0430\u043d\u0441\u043e\u0432\u043e\u0457 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u0457..."})});const o=n.filter(e=>{var t;return null===(t=e.type)||void 0===t?void 0:t.includes("deposit")}),l=n.filter(e=>{var t;return(null===(t=e.type)||void 0===t?void 0:t.includes("rent"))||"payment"===e.type}),c=o.filter(e=>"deposit_hold"===e.type).reduce((e,t)=>e+(t.amount||0),0),d=o.find(e=>"deposit_expected"===e.type),u=c>0?"received":d?"pending":"not_required",h=l.filter(e=>"payment"===e.type).reduce((e,t)=>e+(t.amount||0),0),m=l.find(e=>"rent_accrual"===e.type),p=h>0?"paid":m?"pending":"not_required",f=c||(null===d||void 0===d?void 0:d.amount)||0,x=h||(null===m||void 0===m?void 0:m.amount)||0,g=n.filter(e=>"completed"===e.status&&("payment"===e.type||"deposit_hold"===e.type)).reduce((e,t)=>e+(t.amount||0),0);return(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[(0,Et.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,Et.jsx)("h3",{className:"text-base font-semibold text-slate-800",children:"\ud83d\udcb0 \u0424\u0456\u043d\u0430\u043d\u0441\u043e\u0432\u0438\u0439 \u0441\u0442\u0430\u0442\u0443\u0441"}),g>0&&(0,Et.jsxs)(fc,{tone:"green",children:["\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e \u20b4 ",pc(g)]})]}),(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50 p-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-sm font-medium text-slate-700",children:"\u0417\u0430\u0441\u0442\u0430\u0432\u0430"}),(0,Et.jsxs)("div",{className:"text-xs text-slate-500",children:["received"===u&&"\u2705 \u0417\u0430\u043b\u0438\u0448\u0435\u043d\u043e \u0432 \u043a\u0430\u0441\u0456","pending"===u&&"\u23f3 \u041e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f","not_required"===u&&"\u2014"]})]}),(0,Et.jsxs)("div",{className:"text-right",children:[(0,Et.jsxs)("div",{className:"text-lg font-bold text-slate-900",children:["\u20b4 ",pc(f)]}),"received"===u&&(0,Et.jsx)(fc,{tone:"green",children:"\u0417\u0430\u043b\u0438\u0448\u0435\u043d\u043e"}),"pending"===u&&(0,Et.jsx)(fc,{tone:"amber",children:"\u041e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f"})]})]}),(0,Et.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50 p-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-sm font-medium text-slate-700",children:"\u0420\u0430\u0445\u0443\u043d\u043e\u043a \u0437\u0430 \u043e\u0440\u0435\u043d\u0434\u0443"}),(0,Et.jsxs)("div",{className:"text-xs text-slate-500",children:["paid"===p&&"\u2705 \u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e","pending"===p&&"\u23f3 \u041e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f \u043e\u043f\u043b\u0430\u0442\u0430","not_required"===p&&"\u2014"]})]}),(0,Et.jsxs)("div",{className:"text-right",children:[(0,Et.jsxs)("div",{className:"text-lg font-bold text-slate-900",children:["\u20b4 ",pc(x)]}),"paid"===p&&(0,Et.jsx)(fc,{tone:"green",children:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e"}),"pending"===p&&(0,Et.jsx)(fc,{tone:"red",children:"\u041d\u0435 \u043e\u043f\u043b\u0430\u0447\u0435\u043d\u043e"})]})]}),n.length>0&&(0,Et.jsxs)("details",{className:"mt-3",children:[(0,Et.jsxs)("summary",{className:"cursor-pointer text-xs font-medium text-slate-600 hover:text-slate-800",children:["\ud83d\udccb \u0406\u0441\u0442\u043e\u0440\u0456\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0439 (",n.length,")"]}),(0,Et.jsx)("div",{className:"mt-2 space-y-1",children:n.map((e,t)=>{const r="deposit_hold"===e.type||"payment"===e.type||"completed"===e.status;return(0,Et.jsxs)("div",{className:"flex items-center justify-between border-l-2 border-slate-200 pl-2 py-1 text-xs",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"font-medium text-slate-700",children:gc(e.type)}),(0,Et.jsx)("span",{className:mc("ml-2 rounded px-1.5 py-0.5",r?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"),children:r?"\u2713":"\u23f3"})]}),(0,Et.jsxs)("div",{className:"font-mono text-slate-600",children:["\u20b4 ",pc(e.amount)]})]},t)})})]}),(0,Et.jsx)("div",{className:"mt-4 border-t border-slate-200 pt-3",children:"received"===u&&"paid"===p?(0,Et.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,Et.jsx)("span",{className:"text-2xl",children:"\u2705"}),(0,Et.jsx)("span",{className:"font-medium text-green-700",children:"\u0412\u0441\u0456 \u0444\u0456\u043d\u0430\u043d\u0441\u043e\u0432\u0456 \u043f\u0438\u0442\u0430\u043d\u043d\u044f \u0432\u0438\u0440\u0456\u0448\u0435\u043d\u0456"})]}):(0,Et.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,Et.jsx)("span",{className:"text-2xl",children:"\u26a0\ufe0f"}),(0,Et.jsxs)("span",{className:"font-medium text-amber-700",children:["pending"===u&&"pending"===p&&"\u041e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f \u0437\u0430\u0441\u0442\u0430\u0432\u0430 \u0442\u0430 \u043e\u043f\u043b\u0430\u0442\u0430","received"===u&&"pending"===p&&"\u041e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f \u043e\u043f\u043b\u0430\u0442\u0430 \u0440\u0430\u0445\u0443\u043d\u043a\u0443","pending"===u&&"paid"===p&&"\u041e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f \u0437\u0430\u0441\u0442\u0430\u0432\u0430"]})]})})]})]})}function gc(e){return{deposit_expected:"\u0417\u0430\u0441\u0442\u0430\u0432\u0430 \u043e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f",deposit_hold:"\u0417\u0430\u0441\u0442\u0430\u0432\u0430 \u043e\u0442\u0440\u0438\u043c\u0430\u043d\u0430",deposit_release:"\u0417\u0430\u0441\u0442\u0430\u0432\u0430 \u043f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0430",deposit_writeoff:"\u0421\u043f\u0438\u0441\u0430\u043d\u043e \u0437 \u0437\u0430\u0441\u0442\u0430\u0432\u0438",rent_accrual:"\u041e\u0440\u0435\u043d\u0434\u0430 \u043d\u0430\u0440\u0430\u0445\u043e\u0432\u0430\u043d\u043e",payment:"\u041e\u043f\u043b\u0430\u0442\u0430 \u0440\u0430\u0445\u0443\u043d\u043a\u0443",refund:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u043a\u043e\u0448\u0442\u0456\u0432"}[e]||e}const bc=_s("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),yc=_s("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),vc=_s("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),wc=_s("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Nc={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:"0",FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://backrentalhub.farforrent.com.ua"}.REACT_APP_API_URL,jc=e=>{let{orderId:r}=e;const[n,s]=(0,t.useState)([]),[a,i]=(0,t.useState)(!0),[o,l]=(0,t.useState)(null);(0,t.useEffect)(()=>{r&&c()},[r]);const c=async()=>{try{i(!0);const e=await is.get("".concat(Nc,"/api/user-tracking/orders/").concat(r,"/history"));s(e.data.history||[])}catch(e){console.error("Error fetching order history:",e),l("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0456\u0441\u0442\u043e\u0440\u0456\u044e")}finally{i(!1)}},d=e=>{switch(e){case"created":return(0,Et.jsx)(bc,{className:"w-4 h-4"});case"confirmed":return(0,Et.jsx)(yc,{className:"w-4 h-4"});case"packed":case"prepared":case"issued":case"returned":return(0,Et.jsx)(Is,{className:"w-4 h-4"});case"damage_recorded":return(0,Et.jsx)(Ds,{className:"w-4 h-4"});case"finance_transaction":return(0,Et.jsx)(vc,{className:"w-4 h-4"});default:return(0,Et.jsx)(Ss,{className:"w-4 h-4"})}},u=e=>{switch(e){case"created":return"text-blue-600";case"confirmed":return"text-green-600";case"packed":case"prepared":return"text-purple-600";case"issued":return"text-indigo-600";case"returned":return"text-orange-600";case"damage_recorded":return"text-red-600";case"finance_transaction":return"text-emerald-600";default:return"text-gray-600"}},h=e=>{if(!e)return"";return new Date(e).toLocaleString("uk-UA",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})};return a?(0,Et.jsx)("div",{className:"flex items-center justify-center p-4",children:(0,Et.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o?(0,Et.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,Et.jsx)("p",{className:"text-red-600",children:o})}):0===n.length?(0,Et.jsx)("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:(0,Et.jsx)("p",{className:"text-gray-600",children:"\u0406\u0441\u0442\u043e\u0440\u0456\u044f \u0434\u0456\u0439 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u044f"})}):(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,Et.jsx)(Ss,{className:"w-5 h-5"}),"\u0406\u0441\u0442\u043e\u0440\u0456\u044f \u0434\u0456\u0439"]}),(0,Et.jsxs)("div",{className:"relative",children:[(0,Et.jsx)("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"}),(0,Et.jsx)("div",{className:"space-y-4",children:n.map((e,t)=>(0,Et.jsxs)("div",{className:"relative flex gap-4 items-start",children:[(0,Et.jsx)("div",{className:"relative z-10 flex items-center justify-center w-8 h-8 rounded-full bg-white border-2 ".concat(u(e.action)),children:d(e.action)}),(0,Et.jsx)("div",{className:"flex-1 bg-white rounded-lg border border-gray-200 p-3 shadow-sm",children:(0,Et.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsx)("p",{className:"font-medium text-gray-900",children:e.action_label}),(0,Et.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-sm text-gray-600",children:[(0,Et.jsx)(wc,{className:"w-3 h-3"}),(0,Et.jsx)("span",{children:e.user_name||"System"})]}),e.details&&(0,Et.jsxs)("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[e.details.sku&&(0,Et.jsxs)("p",{children:[(0,Et.jsx)("span",{className:"font-medium",children:"SKU:"})," ",e.details.sku]}),e.details.product_name&&(0,Et.jsxs)("p",{children:[(0,Et.jsx)("span",{className:"font-medium",children:"\u0422\u043e\u0432\u0430\u0440:"})," ",e.details.product_name]}),e.details.quantity&&(0,Et.jsxs)("p",{children:[(0,Et.jsx)("span",{className:"font-medium",children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c:"})," ",e.details.quantity]}),e.details.location&&(0,Et.jsxs)("p",{children:[(0,Et.jsx)("span",{className:"font-medium",children:"\u041b\u043e\u043a\u0430\u0446\u0456\u044f:"})," ",e.details.location]}),e.details.type&&(0,Et.jsxs)("p",{children:[(0,Et.jsx)("span",{className:"font-medium",children:"\u0422\u0438\u043f:"})," ",e.details.type]}),void 0!==e.details.amount&&(0,Et.jsxs)("p",{children:[(0,Et.jsx)("span",{className:"font-medium",children:"\u0421\u0443\u043c\u0430:"})," ",e.details.amount," ",e.details.currency||"UAH"]}),e.details.damage_type&&(0,Et.jsxs)("p",{children:[(0,Et.jsx)("span",{className:"font-medium",children:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f:"})," ",e.details.damage_type]}),e.details.fee&&(0,Et.jsxs)("p",{children:[(0,Et.jsx)("span",{className:"font-medium",children:"\u0428\u0442\u0440\u0430\u0444:"})," \u20b4",e.details.fee]})]})]}),(0,Et.jsx)("div",{className:"text-xs text-gray-500 whitespace-nowrap",children:h(e.timestamp)})]})})]},t))})]})]})},_c=_s("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),Cc=_s("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),Sc={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:"0",FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://backrentalhub.farforrent.com.ua"}.REACT_APP_API_URL,Ec=e=>{let{orderId:r}=e;const[n,s]=(0,t.useState)([]),[a,i]=(0,t.useState)(!0),[o,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(!1);(0,t.useEffect)(()=>{r&&u()},[r]);const u=async()=>{try{i(!0);const e=await is.get("".concat(Sc,"/api/user-tracking/orders/").concat(r,"/notes"));s(e.data.notes||[])}catch(e){console.error("Error fetching notes:",e)}finally{i(!1)}},h=e=>{if(!e)return"";return new Date(e).toLocaleString("uk-UA",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})};return a?(0,Et.jsx)("div",{className:"flex items-center justify-center p-4",children:(0,Et.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-corp-primary"})}):(0,Et.jsxs)("div",{className:"space-y-4",children:[(0,Et.jsxs)("h3",{className:"text-lg font-semibold text-corp-text-dark flex items-center gap-2",children:[(0,Et.jsx)(_c,{className:"w-5 h-5 text-corp-primary"}),"\u0412\u043d\u0443\u0442\u0440\u0456\u0448\u043d\u0456 \u043d\u043e\u0442\u0430\u0442\u043a\u0438 (",n.length,")"]}),(0,Et.jsxs)("div",{className:"bg-corp-bg-light rounded-corp p-4 border border-corp-border",children:[(0,Et.jsx)("textarea",{value:o,onChange:e=>l(e.target.value),placeholder:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0432\u043d\u0443\u0442\u0440\u0456\u0448\u043d\u044e \u043d\u043e\u0442\u0430\u0442\u043a\u0443 (\u043d\u0435 \u0432\u0438\u0434\u0438\u043c\u0430 \u043a\u043b\u0456\u0454\u043d\u0442\u0443)...",className:"corp-input resize-none",rows:"3"}),(0,Et.jsx)("div",{className:"flex justify-end mt-3",children:(0,Et.jsxs)("button",{onClick:async()=>{if(o.trim())try{d(!0),await is.post("".concat(Sc,"/api/user-tracking/orders/").concat(r,"/notes"),{note:o},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}}),l(""),await u()}catch(e){console.error("Error adding note:",e),alert("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0434\u043e\u0434\u0430\u0442\u0438 \u043d\u043e\u0442\u0430\u0442\u043a\u0443")}finally{d(!1)}},disabled:!o.trim()||c,className:"corp-btn corp-btn-primary flex items-center gap-2 disabled:opacity-50",children:[(0,Et.jsx)(Cc,{className:"w-4 h-4"}),c?"\u0414\u043e\u0434\u0430\u0454\u043c\u043e...":"\u0414\u043e\u0434\u0430\u0442\u0438 \u043d\u043e\u0442\u0430\u0442\u043a\u0443"]})})]}),0===n.length?(0,Et.jsxs)("div",{className:"corp-empty",children:[(0,Et.jsx)(_c,{className:"corp-empty-icon mx-auto"}),(0,Et.jsx)("p",{className:"corp-empty-text",children:"\u041d\u043e\u0442\u0430\u0442\u043a\u0438 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456"})]}):(0,Et.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,Et.jsx)("div",{className:"corp-card-flat",children:(0,Et.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsx)("p",{className:"text-corp-text-dark whitespace-pre-wrap",children:e.note}),(0,Et.jsxs)("div",{className:"flex items-center gap-3 mt-2 text-sm text-corp-text-muted",children:[(0,Et.jsx)("span",{className:"font-medium text-corp-primary",children:e.created_by_name}),(0,Et.jsx)("span",{children:"\u2022"}),(0,Et.jsx)("span",{children:h(e.created_at)})]})]}),(0,Et.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0446\u044e \u043d\u043e\u0442\u0430\u0442\u043a\u0443?"))try{await is.delete("".concat(Sc,"/api/user-tracking/notes/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),await u()}catch(t){console.error("Error deleting note:",t),alert("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043d\u043e\u0442\u0430\u0442\u043a\u0443")}})(e.id),className:"text-corp-text-muted hover:text-corp-error transition-colors",title:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043d\u043e\u0442\u0430\u0442\u043a\u0443",children:(0,Et.jsx)(As,{className:"w-4 h-4"})})]})},e.id))})]})},Ac="https://backrentalhub.farforrent.com.ua",Ic=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")},kc=()=>(new Date).toISOString().slice(0,10),Tc=()=>(new Date).toISOString();function Dc(e){let{tone:t="slate",children:r}=e;return(0,Et.jsx)("span",{className:Ic("inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-xs",{slate:"corp-badge corp-badge-neutral",green:"corp-badge corp-badge-success",amber:"corp-badge corp-badge-warning",red:"corp-badge corp-badge-error",blue:"corp-badge corp-badge-info",violet:"corp-badge corp-badge-primary"}[t]),children:r})}function Rc(e){let{tone:t="slate",onClick:r,children:n,disabled:s=!1}=e;return(0,Et.jsx)("button",{disabled:s,onClick:r,className:Ic("rounded-full px-3 py-1 text-sm transition disabled:opacity-50 disabled:pointer-events-none",{slate:"corp-btn corp-btn-secondary",green:"corp-btn corp-btn-primary",red:"bg-rose-600 hover:bg-rose-700 text-white",blue:"corp-btn corp-btn-primary",yellow:"bg-amber-500 hover:bg-amber-600 text-corp-text-dark"}[t]),children:n})}function Oc(e){let{title:t,right:r=null,children:n}=e;return(0,Et.jsxs)("div",{className:"corp-card",children:[(0,Et.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,Et.jsx)("h3",{className:"text-base font-semibold text-corp-text-dark",children:t}),r]}),n]})}function Mc(e){var r;let{order:n,issueCard:s,onDateChange:a}=e;const i={preparation:{text:"\u041d\u0430 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457",tone:"amber"},ready:{text:"\u0413\u043e\u0442\u043e\u0432\u043e \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456",tone:"blue"},issued:{text:"\u0412\u0438\u0434\u0430\u043d\u043e",tone:"green"}}[null===s||void 0===s?void 0:s.status]||{text:"\u0412 \u043e\u0431\u0440\u043e\u0431\u0446\u0456",tone:"slate"},[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(n.rent_issue_date||kc()),[u,h]=(0,t.useState)(n.rent_return_date||kc());return(0,Et.jsxs)("div",{className:"space-y-2",children:[(0,Et.jsx)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsxs)("div",{className:"text-xl md:text-2xl font-bold",children:["\u0412\u0438\u0434\u0430\u0447\u0430 #",(null===s||void 0===s?void 0:s.order_id)||n.order_id]}),(0,Et.jsx)(Dc,{tone:i.tone,children:i.text})]})}),(0,Et.jsxs)("div",{className:"text-sm text-corp-text-main",children:[o?(0,Et.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[(0,Et.jsxs)("div",{className:"flex flex-col",children:[(0,Et.jsx)("label",{className:"text-xs text-corp-text-muted",children:"\u0414\u0430\u0442\u0430 \u0432\u0438\u0434\u0430\u0447\u0456:"}),(0,Et.jsx)("input",{type:"date",value:c,onChange:e=>d(e.target.value),className:"rounded border px-2 py-1.5 text-sm"})]}),(0,Et.jsxs)("div",{className:"flex flex-col",children:[(0,Et.jsx)("label",{className:"text-xs text-corp-text-muted",children:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f:"}),(0,Et.jsx)("input",{type:"date",value:u,onChange:e=>h(e.target.value),className:"rounded border px-2 py-1.5 text-sm"})]}),(0,Et.jsxs)("div",{className:"flex gap-1 mt-1 sm:mt-4",children:[(0,Et.jsx)("button",{onClick:()=>{a&&a(c,u),l(!1)},className:"rounded bg-green-600 px-3 py-1.5 text-white hover:bg-green-700",children:"\u2713 \u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"}),(0,Et.jsx)("button",{onClick:()=>l(!1),className:"rounded bg-slate-200 px-3 py-1.5 hover:bg-slate-300",children:"\u2715"})]})]}):(0,Et.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3",children:[(0,Et.jsxs)("span",{children:["\ud83d\udcc5 \u0412\u0438\u0434\u0430\u0447\u0430: ",(0,Et.jsx)("b",{children:n.rent_issue_date||kc()})]}),(0,Et.jsxs)("span",{children:["\ud83d\udcc6 \u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f: ",(0,Et.jsx)("b",{children:n.rent_return_date||kc()})]}),(0,Et.jsx)("button",{onClick:()=>l(!0),className:"text-blue-600 hover:text-blue-800 text-sm",title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0434\u0430\u0442\u0438",children:"\u270f\ufe0f \u0417\u043c\u0456\u043d\u0438\u0442\u0438 \u0434\u0430\u0442\u0438"})]}),(0,Et.jsx)("div",{className:"mt-1",children:(0,Et.jsxs)(Dc,{tone:"slate",children:["\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0432\u0456\u0434: ",(null===(r=n.date_added)||void 0===r?void 0:r.slice(0,10))||"\u2014"]})})]})]})}function Pc(e){let{order:t}=e;return(0,Et.jsx)(Oc,{title:"\u041a\u043b\u0456\u0454\u043d\u0442",children:(0,Et.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted text-xs",children:"\u0406\u043c\u02bc\u044f"}),(0,Et.jsxs)("div",{className:"font-medium",title:"".concat(t.firstname," ").concat(t.lastname),children:[t.firstname," ",t.lastname]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted text-xs",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,Et.jsx)("a",{href:"tel:".concat(t.telephone),className:"font-medium text-blue-600",children:t.telephone})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted text-xs",children:"Email"}),(0,Et.jsx)("div",{className:"font-medium break-words",title:t.email,children:t.email})]})]})})}function Lc(e){let{state:t,zone:r}=e;const n={wash:{tone:"blue",text:"\u041c\u0438\u0439\u043a\u0430"},shelf:{tone:"slate",text:"\u041f\u043e\u043b\u0438\u0446\u044f"},restore:{tone:"violet",text:"\u0420\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f"},intake:{tone:"amber",text:"\u041f\u0440\u0438\u0439\u043c\u0430\u043d\u043d\u044f"},unknown:{tone:"amber",text:"\u041d\u0435\u0432\u0456\u0434\u043e\u043c\u043e"}},s=n[t]||n.unknown;return(0,Et.jsxs)(Dc,{tone:s.tone,children:[s.text,": ",r||"\u2014"]})}function Bc(e){var t,r;let{it:n,onScan:s,onPick:a,onOpenDamage:i}=e;const o=ge(),l=xs(n.image||n.image_url),c=Math.max(0,n.qty-(n.available||0)),d=n.picked_qty>n.qty,u=n.picked_qty>=n.qty,h=n.pre_damage&&n.pre_damage.length>0;return(0,Et.jsxs)("div",{className:Ic("rounded-xl border p-3 bg-white",u?"border-emerald-200 bg-emerald-50":c>0?"bg-amber-50 border-amber-200":""),children:[(0,Et.jsxs)("div",{className:"flex gap-3 mb-3",children:[(0,Et.jsx)("img",{src:l,alt:n.name,className:"h-20 w-24 flex-shrink-0 rounded-lg object-cover",onClick:()=>{n.product_id&&o("/inventory-view/".concat(n.product_id))}}),(0,Et.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Et.jsx)("div",{className:"font-semibold text-sm mb-1 line-clamp-2",children:n.name}),(0,Et.jsxs)("div",{className:"text-xs text-corp-text-muted mb-1",children:["SKU: ",n.sku]}),(0,Et.jsxs)("div",{className:"flex flex-wrap gap-1",children:[u&&(0,Et.jsx)(Dc,{tone:"green",children:"\u2713 \u0413\u043e\u0442\u043e\u0432\u043e"}),h&&(0,Et.jsxs)(Dc,{tone:"amber",children:[n.pre_damage.length," \u043f\u043e\u0448\u043a\u043e\u0434\u0436."]}),c>0&&(0,Et.jsxs)(Dc,{tone:"red",children:["\u0411\u0440\u0430\u043a\u0443\u0454 ",c]})]})]})]}),(0,Et.jsxs)("div",{className:"flex items-center justify-between mb-3 p-3 bg-slate-100 rounded-xl",children:[(0,Et.jsx)("span",{className:"text-sm font-medium",children:"\u0423\u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u043e\u0432\u0430\u043d\u043e:"}),(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("button",{onClick:()=>a(n.id,Math.max(0,n.picked_qty-1)),className:"h-10 w-10 rounded-xl border-2 border-slate-300 bg-white text-lg font-bold active:bg-slate-100",children:"\u2212"}),(0,Et.jsx)("div",{className:Ic("w-14 text-center text-xl font-bold py-1 rounded-lg",u?"text-emerald-600 bg-emerald-100":d?"text-rose-600 bg-rose-100":"bg-white"),children:n.picked_qty}),(0,Et.jsx)("button",{onClick:()=>a(n.id,n.picked_qty+1),className:"h-10 w-10 rounded-xl border-2 border-slate-300 bg-white text-lg font-bold active:bg-slate-100",children:"+"}),(0,Et.jsxs)("span",{className:"text-sm text-corp-text-muted ml-1",children:["/ ",n.qty]})]})]}),n.serials&&n.serials.length>0&&(0,Et.jsxs)("div",{className:"mb-3",children:[(0,Et.jsx)("div",{className:"text-xs text-corp-text-muted mb-1",children:"\u0421\u0435\u0440\u0456\u0439\u043d\u0456 \u043d\u043e\u043c\u0435\u0440\u0438:"}),(0,Et.jsx)("div",{className:"flex flex-wrap gap-1",children:n.serials.map(e=>{var t;const r=null===(t=n.scanned)||void 0===t?void 0:t.includes(e);return(0,Et.jsxs)("button",{onClick:()=>s(n.id,e),className:Ic("rounded-lg border-2 px-3 py-1.5 text-sm font-medium transition-all",r?"border-emerald-400 bg-emerald-100 text-emerald-700":"border-slate-200 bg-white active:bg-slate-50"),children:[e," ",r&&"\u2713"]},e)})})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-3 text-xs",children:[(0,Et.jsxs)("div",{className:"text-center p-2 bg-slate-50 rounded-lg",children:[(0,Et.jsx)("div",{className:"text-corp-text-muted",children:"\u041d\u0430\u044f\u0432\u043d\u0456\u0441\u0442\u044c"}),(0,Et.jsx)("div",{className:"font-bold mt-0.5",children:n.available})]}),(0,Et.jsxs)("div",{className:"text-center p-2 bg-slate-50 rounded-lg",children:[(0,Et.jsx)("div",{className:"text-corp-text-muted",children:"\u0420\u0435\u0437\u0435\u0440\u0432"}),(0,Et.jsx)("div",{className:"font-bold mt-0.5",children:n.reserved||0})]}),(0,Et.jsxs)("div",{className:"text-center p-2 bg-slate-50 rounded-lg",children:[(0,Et.jsx)("div",{className:"text-corp-text-muted",children:"\u0412 \u043e\u0440\u0435\u043d\u0434\u0456"}),(0,Et.jsx)("div",{className:"font-bold mt-0.5",children:n.in_rent||0})]})]}),(0,Et.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[(0,Et.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer bg-slate-50 rounded-lg px-3 py-2 border flex-1 min-w-[120px]",children:[(0,Et.jsx)("input",{type:"checkbox",checked:(null===(t=n.packaging)||void 0===t?void 0:t.cover)||!1,onChange:e=>a(n.id,"packaging_cover",e.target.checked),className:"h-5 w-5 rounded"}),(0,Et.jsx)("span",{className:"text-sm",children:"\u0427\u043e\u0445\u043e\u043b"})]}),(0,Et.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer bg-slate-50 rounded-lg px-3 py-2 border flex-1 min-w-[120px]",children:[(0,Et.jsx)("input",{type:"checkbox",checked:(null===(r=n.packaging)||void 0===r?void 0:r.box)||!1,onChange:e=>a(n.id,"packaging_box",e.target.checked),className:"h-5 w-5 rounded"}),(0,Et.jsx)("span",{className:"text-sm",children:"\u041a\u043e\u0440\u043e\u0431\u043a\u0430"})]})]}),(0,Et.jsx)("button",{onClick:()=>i(n.id),className:"w-full py-2.5 rounded-lg bg-amber-500 text-white font-medium text-sm active:bg-amber-600",children:"\ud83d\udcf7 \u0417\u0430\u0444\u0456\u043a\u0441\u0443\u0432\u0430\u0442\u0438 \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f"})]})}function Fc(e){var t,r,n,s,a,i;let{it:o,onScan:l,onPick:c,onOpenDamage:d}=e;const u=o.qty-o.picked_qty,h=o.picked_qty>o.qty,m=u>0&&o.available-(o.reserved||0)<o.qty,p=((null===(t=o.pre_damage)||void 0===t?void 0:t.length)||0)>0,f=xs(o.image)||"https://picsum.photos/seed/".concat(o.inventory_id,"/60/40");return(0,Et.jsxs)("tr",{className:Ic("border-t",u>0&&"bg-amber-50"),children:[(0,Et.jsx)("td",{className:"px-3 py-2",children:(0,Et.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,Et.jsx)("div",{className:"flex items-center justify-center p-1 bg-white border border-slate-200 rounded-lg",children:(0,Et.jsx)(tc,{value:"".concat(window.location.origin,"/inventory/").concat(o.sku||o.id),size:60,level:"L",includeMargin:!1})}),(0,Et.jsx)("div",{className:"text-[9px] text-center text-slate-400",children:"\u0421\u043a\u0430\u043d \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a\u0443"}),o.serials&&o.serials.length>0&&(0,Et.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:o.serials.map(e=>(0,Et.jsx)("button",{onClick:()=>l(o.id,e),className:Ic("rounded-md border px-2 py-0.5 text-xs",o.scanned.includes(e)?"border-emerald-300 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white hover:bg-slate-50"),children:e},e))})]})}),(0,Et.jsx)("td",{className:"px-3 py-2",children:(0,Et.jsx)("img",{src:f,alt:o.name,className:"h-10 w-14 rounded object-cover cursor-pointer hover:ring-2 hover:ring-blue-500 transition",onClick:()=>{window.open("/catalog?product=".concat(o.inventory_id),"_blank")},title:"\u041d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c \u0449\u043e\u0431 \u0432\u0456\u0434\u043a\u0440\u0438\u0442\u0438 \u043a\u0430\u0440\u0442\u043a\u0443 \u0442\u043e\u0432\u0430\u0440\u0443"})}),(0,Et.jsx)("td",{className:"px-3 py-2 text-xs text-corp-text-muted",children:o.sku}),(0,Et.jsxs)("td",{className:"px-3 py-2 font-medium",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("span",{children:o.name}),(0,Et.jsx)("button",{title:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f",onClick:()=>d(o.id),className:"rounded-md border px-2 py-0.5 text-xs hover:bg-slate-50",children:"\ud83d\udcf7 +"}),p&&(0,Et.jsxs)(Dc,{tone:"amber",children:[o.pre_damage.length," \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u044c"]})]}),(0,Et.jsxs)("div",{className:"mt-1 text-xs text-corp-text-muted flex flex-wrap gap-2",children:[(0,Et.jsx)(Lc,{state:null===(r=o.location)||void 0===r?void 0:r.state,zone:null===(n=o.location)||void 0===n?void 0:n.zone}),m&&(0,Et.jsx)(Dc,{tone:"red",children:"\u041a\u043e\u043d\u0444\u043b\u0456\u043a\u0442 \u0440\u0435\u0437\u0435\u0440\u0432\u0443"})]})]}),(0,Et.jsxs)("td",{className:"px-3 py-2 text-right tabular-nums text-corp-text-main",children:["\u20b4 ",(o.damage_cost||0).toLocaleString("uk-UA")]}),(0,Et.jsxs)("td",{className:"px-3 py-2 text-right tabular-nums font-medium text-amber-700",children:["\u20b4 ",(o.deposit||0).toLocaleString("uk-UA")]}),(0,Et.jsx)("td",{className:"px-3 py-2",children:o.available}),(0,Et.jsx)("td",{className:"px-3 py-2",children:o.reserved||0}),(0,Et.jsx)("td",{className:"px-3 py-2",children:o.in_rent||0}),(0,Et.jsx)("td",{className:"px-3 py-2",children:o.in_restore||0}),(0,Et.jsxs)("td",{className:"px-3 py-2",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("button",{onClick:()=>c(o.id,Math.max(0,o.picked_qty-1)),className:"h-7 w-7 rounded-lg border hover:bg-slate-50",children:"-"}),(0,Et.jsx)("div",{className:Ic("w-10 text-center font-semibold",h&&"text-rose-600"),children:o.picked_qty}),(0,Et.jsx)("button",{onClick:()=>c(o.id,o.picked_qty+1),className:"h-7 w-7 rounded-lg border hover:bg-slate-50",children:"+"})]}),(0,Et.jsxs)("div",{className:"text-xs text-corp-text-muted",children:["\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u043e: ",o.qty]})]}),(0,Et.jsx)("td",{className:"px-3 py-2",children:(0,Et.jsxs)("div",{className:"flex flex-col gap-0.5 text-xs",children:[(0,Et.jsxs)("label",{className:"flex items-center gap-1 cursor-pointer hover:bg-slate-50 rounded px-1",children:[(0,Et.jsx)("input",{type:"checkbox",checked:(null===(s=o.packaging)||void 0===s?void 0:s.cover)||!1,onChange:e=>c(o.id,"packaging_cover",e.target.checked),className:"h-3 w-3"}),(0,Et.jsx)("span",{children:"\u0427\u043e\u0445\u043e\u043b"})]}),(0,Et.jsxs)("label",{className:"flex items-center gap-1 cursor-pointer hover:bg-slate-50 rounded px-1",children:[(0,Et.jsx)("input",{type:"checkbox",checked:(null===(a=o.packaging)||void 0===a?void 0:a.box)||!1,onChange:e=>c(o.id,"packaging_box",e.target.checked),className:"h-3 w-3"}),(0,Et.jsx)("span",{children:"\u041a\u043e\u0440\u043e\u0431\u043a\u0430"})]}),(0,Et.jsxs)("label",{className:"flex items-center gap-1 cursor-pointer hover:bg-slate-50 rounded px-1",children:[(0,Et.jsx)("input",{type:"checkbox",checked:(null===(i=o.packaging)||void 0===i?void 0:i.stretch)||!1,onChange:e=>c(o.id,"packaging_stretch",e.target.checked),className:"h-3 w-3"}),(0,Et.jsx)("span",{children:"\u0421\u0442\u0440\u0435\u0442\u0447"})]})]})})]})}function Uc(e){let{items:t,onScan:r,onPick:n,onOpenDamage:s}=e;return(0,Et.jsxs)(Oc,{title:"\u041f\u043e\u0437\u0438\u0446\u0456\u0457 \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456",children:[(0,Et.jsx)("div",{className:"hidden md:block overflow-hidden rounded-xl border",children:(0,Et.jsxs)("table",{className:"min-w-full text-sm",children:[(0,Et.jsx)("thead",{className:"bg-slate-50 text-left text-corp-text-muted",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-3 py-2",children:"QR / \u0421\u043a\u0430\u043d"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0424\u043e\u0442\u043e"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"SKU"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u041d\u0430\u0437\u0432\u0430 / \u043b\u043e\u043a\u0430\u0446\u0456\u044f"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0417\u0431\u0438\u0442\u043e\u043a"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0417\u0430\u0441\u0442\u0430\u0432\u0430"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0412 \u043d\u0430\u044f\u0432\u043d."}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0420\u0435\u0437\u0435\u0440\u0432"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0412 \u043e\u0440\u0435\u043d\u0434\u0456"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0412 \u0440\u0435\u0441\u0442\u0430\u0432\u0440."}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0423\u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442."}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u041f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f"})]})}),(0,Et.jsx)("tbody",{children:t.map(e=>(0,Et.jsx)(Fc,{it:e,onScan:r,onPick:n,onOpenDamage:s},e.id))})]})}),(0,Et.jsx)("div",{className:"md:hidden space-y-3",children:t.map(e=>(0,Et.jsx)(Bc,{it:e,onScan:r,onPick:n,onOpenDamage:s},e.id))})]})}function zc(e){let{check:t,setCheck:r}=e;return(0,Et.jsx)(Oc,{title:"\u0427\u0435\u043a\u043b\u0456\u0441\u0442 \u043f\u0435\u0440\u0435\u0434 \u0432\u0438\u0434\u0430\u0447\u043e\u044e",right:(0,Et.jsx)(Dc,{tone:t.photos_before&&t.docs_printed?"green":"amber",children:t.photos_before&&t.docs_printed?"\u0433\u043e\u0442\u043e\u0432\u043e":"\u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0456"}),children:(0,Et.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,Et.jsxs)("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[(0,Et.jsx)("input",{type:"checkbox",checked:t.stretch,onChange:e=>r(c(c({},t),{},{stretch:e.target.checked}))})," \u0421\u0442\u0440\u0435\u0439\u0447\u0443\u0432\u0430\u043d\u043d\u044f"]}),(0,Et.jsxs)("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[(0,Et.jsx)("input",{type:"checkbox",checked:t.labels,onChange:e=>r(c(c({},t),{},{labels:e.target.checked}))})," \u041c\u0430\u0440\u043a\u0443\u0432\u0430\u043d\u043d\u044f/\u0441\u0442\u0456\u043a\u0435\u0440\u0438"]}),(0,Et.jsxs)("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[(0,Et.jsx)("input",{type:"checkbox",checked:t.photos_before,onChange:e=>r(c(c({},t),{},{photos_before:e.target.checked}))})," \u0424\u043e\u0442\u043e \u0441\u0442\u0430\u043d\u0443 (\u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456)"]}),(0,Et.jsxs)("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[(0,Et.jsx)("input",{type:"checkbox",checked:t.docs_printed,onChange:e=>r(c(c({},t),{},{docs_printed:e.target.checked}))})," \u0420\u043e\u0437\u0434\u0440\u0443\u043a\u043e\u0432\u0430\u043d\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438"]})]})})}function Hc(e){let{orderId:t,docs:r,setDocs:n}=e;return(0,Et.jsx)(Oc,{title:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438",children:(0,Et.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[(0,Et.jsx)(Rc,{tone:"blue",onClick:async()=>{try{window.open("".concat(Ac,"/api/pdf/pick-list/").concat(t),"_blank"),n(c(c({},r),{},{waybill:!0}))}catch(zd){alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f pick-list")}},children:"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430 (PDF)"}),(0,Et.jsx)(Rc,{tone:"blue",onClick:async()=>{try{window.open("".concat(Ac,"/api/pdf/invoice/").concat(t),"_blank"),n(c(c({},r),{},{act:!0}))}catch(zd){alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0440\u0430\u0445\u0443\u043d\u043a\u0443")}},children:"\u0420\u0430\u0445\u0443\u043d\u043e\u043a (PDF)"}),(0,Et.jsxs)(Dc,{tone:r.waybill?"green":"slate",children:["\u043d\u0430\u043a\u043b\u0430\u0434\u043d\u0430: ",r.waybill?"\u0433\u043e\u0442\u043e\u0432\u0430":"\u2014"]}),(0,Et.jsxs)(Dc,{tone:r.act?"green":"slate",children:["\u0440\u0430\u0445\u0443\u043d\u043e\u043a: ",r.act?"\u0433\u043e\u0442\u043e\u0432\u0438\u0439":"\u2014"]})]})})}function Vc(e){let{notes:t,setNotes:r}=e;return(0,Et.jsx)(Oc,{title:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0456",children:(0,Et.jsx)("textarea",{value:t||"",onChange:e=>r(e.target.value),className:"w-full rounded-xl border p-3 text-sm",rows:3,placeholder:"\u0421\u043b\u0443\u0436\u0431\u043e\u0432\u0430 \u043d\u043e\u0442\u0430\u0442\u043a\u0430"})})}function Wc(e){let{events:t}=e;return(0,Et.jsx)(Oc,{title:"\u0422\u0430\u0439\u043c\u043b\u0430\u0439\u043d",children:(0,Et.jsx)("ol",{className:"space-y-2 text-sm max-h-60 overflow-auto",children:t.map((e,t)=>(0,Et.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Et.jsx)("div",{className:Ic("mt-1 h-2 w-2 rounded-full flex-shrink-0","green"===e.tone?"bg-emerald-500":"red"===e.tone?"bg-rose-500":"bg-blue-500")}),(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsx)("div",{className:"font-medium",children:e.title}),(0,Et.jsxs)("div",{className:"flex items-center gap-2 text-xs text-corp-text-muted",children:[(0,Et.jsx)("span",{children:e.when}),e.manager&&(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsx)("span",{children:"\xb7"}),(0,Et.jsx)("span",{className:"text-blue-600 font-medium",children:e.manager})]})]})]})]},t))})})}function qc(){const{id:e}=be(),r=ge(),{toast:n}=Go(),[s,a]=(0,t.useState)(null),[i,o]=(0,t.useState)(null),[l,d]=(0,t.useState)(!0),[u,h]=(0,t.useState)([]),[m,p]=(0,t.useState)(""),[f,x]=(0,t.useState)({stretch:!1,labels:!1,photos_before:!1,docs_printed:!1}),[g,b]=(0,t.useState)({waybill:!1,act:!1}),[y,v]=(0,t.useState)([]),[w,N]=(0,t.useState)({open:!1,item_id:null,category:"\u041c\u0435\u0431\u043b\u0456",kindCode:"",severity:"low",note:"",fee:0,photoName:""});(0,t.useEffect)(()=>{j()},[e]);const j=async()=>{try{var t,r;d(!0),console.log("[IssueCard] \u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f issue card \u0437 id:",e);const n=(await is.get("".concat(Ac,"/api/issue-cards/").concat(e))).data;console.log("[IssueCard] Issue card \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043e:",n),o(n);const l=n.order_id;let c,u;console.log("[IssueCard] \u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f decor order \u0437 id:",l);try{c=await is.get("".concat(Ac,"/api/decor-orders/").concat(l)),u=c.data,console.log("[Issue] Order loaded from decor_orders:",u)}catch(s){console.log("[Issue] Not in decor_orders, trying OpenCart..."),c=await is.get("".concat(Ac,"/api/orders/").concat(l)),u=c.data,console.log("[Issue] Order loaded from OpenCart:",u)}const m={order_id:u.id||u.order_id,order_status_id:u.order_status_id||19,decor_status:u.status,firstname:(null===(t=u.client_name)||void 0===t?void 0:t.split(" ")[0])||"",lastname:(null===(r=u.client_name)||void 0===r?void 0:r.split(" ").slice(1).join(" "))||"",telephone:u.client_phone||"",email:u.client_email||"",total:u.total_rental||0,prepayment:0,deposit:u.deposit_held||u.total_deposit||0,rent_issue_date:u.rent_date||u.issue_date||kc(),rent_return_date:u.rent_return_date||u.return_date||kc(),date_added:u.created_at||Tc(),manager_comment:u.notes||u.manager_comment||""};a(m),p(n.preparation_notes||u.notes||u.manager_comment||""),n.checklist&&(x(n.checklist),console.log("[IssueCard] \u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043e checklist:",n.checklist));const f=(n.items&&n.items.length>0?n.items:u.items||[]).map((e,t)=>{var r,n;const s=parseInt(e.quantity||e.qty)||0,a=e.serials||[];return{id:e.id||e.order_product_id||e.inventory_id||t,sku:e.article||e.sku||e.model||"",name:e.name||e.product_name||"",image:e.image||e.photo||"",qty:s,picked_qty:parseInt(e.picked_qty)||0,available:parseInt(e.available_qty||e.available)||0,reserved:parseInt(e.reserved_qty||e.reserved)||0,in_rent:parseInt(e.in_rent_qty||e.in_rent)||0,in_restore:parseInt(e.in_restore_qty||e.in_restore)||0,damage_cost:parseFloat(e.damage_cost||e.deposit||0),deposit:parseFloat(e.deposit||e.damage_cost||0),serials:a,scanned:e.scanned||[],pack:e.pack||"",packaging:e.packaging||{cover:!1,box:!1,stretch:!1},location:{zone:(null===(r=e.location)||void 0===r?void 0:r.zone)||"",state:(null===(n=e.location)||void 0===n?void 0:n.state)||"shelf"},pre_damage:e.pre_damage||[]}});console.log("Transformed items:",f),h(f);try{const e=(await is.get("".concat(Ac,"/api/orders/").concat(l,"/lifecycle"))).data||[];console.log("[IssueCard] Lifecycle events:",e);const t=e.map(e=>({title:e.notes||e.stage||"\u041f\u043e\u0434\u0456\u044f",when:e.created_at||Tc(),tone:"accepted"===e.stage||"completed"===e.stage?"green":"blue",manager:e.created_by||e.manager||null}));0===t.length&&t.push({title:"\u041a\u0430\u0440\u0442\u043a\u0443 \u0432\u0438\u0434\u0430\u0447\u0456 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e",when:m.date_added||Tc(),tone:"blue"}),v(t)}catch(i){console.error("[IssueCard] Error loading lifecycle:",i),v([{title:"\u041a\u0430\u0440\u0442\u043a\u0443 \u0432\u0438\u0434\u0430\u0447\u0456 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e",when:m.date_added||Tc(),tone:"blue"}])}}catch(zd){console.error("Error loading order:",zd),n({title:"\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",variant:"destructive"})}finally{d(!1)}},_=(0,t.useMemo)(()=>u.every(e=>e.picked_qty>=e.qty),[u]),C=(0,t.useMemo)(()=>u.every(e=>0===e.serials.length||e.scanned.length>=e.qty),[u]),S=(0,t.useMemo)(()=>f.photos_before&&f.docs_printed,[f]),E=_&&C&&S,A=s&&("ready_for_issue"===s.status||"ready_for_issue"===s.decor_status),I=!!s&&("processing"===s.status||"processing"===s.decor_status),k=!!s&&("ready_for_issue"===s.status||"ready_for_issue"===s.decor_status),T=!!s&&("issued"===s.status||"issued"===s.decor_status);console.log("[Issue] Button states:",{order_status_id:null===s||void 0===s?void 0:s.order_status_id,isProcessing:I,isReadyForIssue:k,isIssued:T,canMarkReady:E,canIssue:A});const D=async()=>{try{await is.put("".concat(Ac,"/api/issue-cards/").concat(e),{items:u.map(e=>({id:e.id,sku:e.sku,name:e.name,qty:e.qty,picked_qty:e.picked_qty,scanned:e.scanned,location_zone:e.location_zone,location_state:e.location_state})),checklist:f,manager_notes:m}),n({title:"\u2705 \u0423\u0441\u043f\u0456\u0445",description:"\u041f\u0440\u043e\u0433\u0440\u0435\u0441 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0443\u0432\u0430\u043d\u043d\u044f \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e"})}catch(zd){console.error("Error saving progress:",zd),n({title:"\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u043f\u0440\u043e\u0433\u0440\u0435\u0441",variant:"destructive"})}},R=async()=>{try{if(await D(),!i)return void n({title:"\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:"Issue card \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e",variant:"destructive"});await is.put("".concat(Ac,"/api/issue-cards/").concat(i.id),{status:"ready",prepared_by:"Warehouse Staff",items:u.map(e=>({id:e.id,sku:e.sku,name:e.name,qty:e.qty,picked_qty:e.picked_qty,scanned:e.scanned,location_zone:e.location_zone,location_state:e.location_state})),checklist:f,manager_notes:m}),a(e=>c(c({},e),{},{status:"ready_for_issue",decor_status:"ready_for_issue"})),v(e=>[{title:"\u0423\u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u043e\u0432\u0430\u043d\u043e \u0456 \u0433\u043e\u0442\u043e\u0432\u043e \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456",when:Tc(),tone:"blue"},...e]),n({title:"\u2705 \u0423\u0441\u043f\u0456\u0445",description:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0433\u043e\u0442\u043e\u0432\u0435 \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456"}),console.log("[IssueCard] Navigating to dashboard in 1.5s..."),setTimeout(()=>{console.log("[IssueCard] Navigating now..."),r("/manager")},1500)}catch(zd){console.error("Error marking ready:",zd),n({title:"\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u043e\u043d\u043e\u0432\u0438\u0442\u0438 \u0441\u0442\u0430\u0442\u0443\u0441",variant:"destructive"})}},O=async()=>{try{const t={issued_by:"Manager",issue_notes:m||""};await is.post("".concat(Ac,"/api/issue-cards/").concat(e,"/complete"),t),a(e=>c(c({},e),{},{order_status_id:24})),v(e=>[{title:"\u0412\u0438\u0434\u0430\u043d\u043e \u043a\u043b\u0456\u0454\u043d\u0442\u0443",when:Tc(),tone:"green"},...e]),n({title:"\u2705 \u0423\u0441\u043f\u0456\u0445",description:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0432\u0438\u0434\u0430\u043d\u043e \u043a\u043b\u0456\u0454\u043d\u0442\u0443. Return Card \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e."}),setTimeout(()=>r("/"),2e3)}catch(zd){var t,s;console.error("Error marking issued:",zd),n({title:"\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:(null===(t=zd.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.detail)||"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438 \u0432\u0438\u0434\u0430\u0447\u0443",variant:"destructive"})}};return l?(0,Et.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,Et.jsx)("div",{className:"text-xl",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})}):s?(0,Et.jsxs)("div",{className:"mx-auto max-w-7xl px-3 py-4 md:p-6 space-y-4 md:space-y-6 pb-32 md:pb-6",children:[(0,Et.jsx)(Mc,{order:s,issueCard:i,onDateChange:async(t,r)=>{try{a(e=>c(c({},e),{},{rent_issue_date:t,rent_return_date:r})),await is.put("".concat(Ac,"/api/issue-cards/").concat(e),{rent_issue_date:t,rent_return_date:r}),n({title:"\u2705 \u0423\u0441\u043f\u0456\u0445",description:"\u0414\u0430\u0442\u0438 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e"})}catch(zd){console.error("Error updating dates:",zd),n({title:"\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u043e\u043d\u043e\u0432\u0438\u0442\u0438 \u0434\u0430\u0442\u0438",variant:"destructive"})}}}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[(0,Et.jsx)(Pc,{order:s}),(0,Et.jsx)(xc,{orderId:null===s||void 0===s?void 0:s.order_id}),(0,Et.jsx)(Wc,{events:y})]}),(0,Et.jsx)(Uc,{items:u,onScan:(e,t)=>h(r=>r.map(r=>{if(r.id!==e)return r;const n=r.scanned.includes(t)?r.scanned.filter(e=>e!==t):[...r.scanned,t];return c(c({},r),{},{scanned:n})})),onPick:(e,t,r)=>{if("number"!==typeof t){if(t.startsWith("packaging_")){const n=t.replace("packaging_","");h(t=>t.map(t=>{if(t.id!==e)return t;const s=t.packaging||{};return c(c({},t),{},{packaging:c(c({},s),{},{[n]:r})})}))}}else h(r=>r.map(r=>r.id===e?c(c({},r),{},{picked_qty:t}):r))},onOpenDamage:e=>{const t=u.find(t=>t.id===e);N({open:!0,item_id:e,category:(null===t||void 0===t?void 0:t.category)||"\u041c\u0435\u0431\u043b\u0456",kindCode:"",severity:"low",note:"",fee:0,photoName:""})}}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:[(0,Et.jsx)(zc,{check:f,setCheck:x}),(0,Et.jsx)(Hc,{orderId:null===s||void 0===s?void 0:s.order_id,docs:g,setDocs:b})]}),(0,Et.jsx)(Vc,{notes:m,setNotes:p}),(0,Et.jsx)("div",{className:"hidden md:block",children:(0,Et.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-slate-200 bg-white p-4",children:[(0,Et.jsxs)("div",{className:"text-sm text-corp-text-main",children:["\u0421\u0442\u0430\u0442\u0443\u0441: ",(0,Et.jsx)("b",{children:T?"issued":k?"ready_for_issue":"processing"})," \xb7",(0,Et.jsxs)("span",{className:"ml-2",children:["\u041f\u043e\u0437\u0438\u0446\u0456\u0439 \u0441\u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u043e\u0432\u0430\u043d\u043e: ",u.filter(e=>e.picked_qty>=e.qty).length,"/",u.length]})," \xb7",(0,Et.jsxs)("span",{className:"ml-2",children:["\u041e\u0434\u0438\u043d\u0438\u0446\u044c: ",u.reduce((e,t)=>e+t.picked_qty,0),"/",u.reduce((e,t)=>e+t.qty,0)]})," \xb7",(0,Et.jsxs)("span",{className:"ml-2",children:["\u0421\u0435\u0440\u0456\u0439 \u0432\u0456\u0434\u0441\u043a\u0430\u043d\u043e\u0432\u0430\u043d\u043e: ",u.reduce((e,t)=>{var r;return e+((null===(r=t.scanned)||void 0===r?void 0:r.length)||0)},0)]})]}),(0,Et.jsxs)("div",{className:"flex flex-wrap gap-2",children:[!T&&(0,Et.jsx)(Rc,{tone:"slate",onClick:D,children:"\ud83d\udcbe \u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u043f\u0440\u043e\u0433\u0440\u0435\u0441"}),I&&(0,Et.jsx)(Rc,{tone:"yellow",onClick:R,children:"\u2705 \u0413\u043e\u0442\u043e\u0432\u043e \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456"}),k&&(0,Et.jsx)(Rc,{tone:"green",onClick:O,children:"\ud83d\ude9a \u0412\u0438\u0434\u0430\u0442\u0438"}),T&&(0,Et.jsx)(Dc,{tone:"green",children:"\u2705 \u0412\u0438\u0434\u0430\u043d\u043e \u043a\u043b\u0456\u0454\u043d\u0442\u0443"}),(0,Et.jsx)(Rc,{tone:"blue",onClick:async()=>{let e={};try{const t=u.map(e=>e.sku).filter(Boolean);if(t.length>0){(await is.post("".concat(Ac,"/api/products/inventory/recounts/batch"),{skus:t})).data.forEach(t=>{e[t.sku]=t})}}catch(a){console.error("Error loading recounts:",a)}const t=u.map((t,r)=>{var n,s;const a=t.packaging||{},i=a.cover?"\u2611":"\u2610",o=a.box?"\u2611":"\u2610",l=a.stretch?"\u2611":"\u2610",c=e[t.sku],d=c&&"damaged"===c.status,u=d?c.notes||"".concat(c.damage_type||"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f"," (").concat(c.severity||"low",")"):"";return"\n      <tr>\n        <td>".concat(r+1,"</td>\n        <td>").concat(t.sku||"\u2014","</td>\n        <td>").concat(t.name,"</td>\n        <td>").concat(t.qty,"</td>\n        <td>").concat(t.picked_qty||0,"</td>\n        <td>").concat((null===(n=t.location)||void 0===n?void 0:n.zone)||"\u2014"," \xb7 ").concat((null===(s=t.location)||void 0===s?void 0:s.shelf)||"\u2014",'</td>\n        <td style="font-size: 9px;">\n          ').concat(d?"\u2610":"\u2611"," \u041e\u041a<br/>\n          ").concat(d?"\u2611":"\u2610"," \u0404 \u043f\u043e\u043f\u0435\u0440\u0435\u0434\u043d\u0456 \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f<br/>\n          ").concat(d?'<span style="color: #d97706; font-size: 8px;">'.concat(u,"</span>"):"","\n        </td>\n        <td>\n          ").concat(i," \u0447\u043e\u0445\u043e\u043b  ").concat(o," \u043a\u043e\u0440\u043e\u0431\u043a\u0430<br/>\n          ").concat(l," \u0441\u0442\u0440\u0435\u0442\u0447 \u2610 \u0456\u043d\u0448\u0435: __________<br/>\n          \u041f\u0440\u0438\u043c\u0456\u0442\u043a\u0430: __________________\n        </td>\n      </tr>\n      ")}).join(""),r='<!doctype html>\n<html lang="uk">\n<head>\n  <meta charset="utf-8" />\n  <title>\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430 \u043d\u0430 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u044e - \u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f #'.concat(s.order_id,'</title>\n  <style>\n    body {\n      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;\n      font-size: 11px;\n      color: #0f172a;\n      margin: 20px;\n    }\n    h1 {\n      font-size: 18px;\n      margin: 0;\n    }\n    .row { display: flex; justify-content: space-between; align-items: flex-start; }\n    .mt-4 { margin-top: 16px; }\n    .mt-2 { margin-top: 8px; }\n    .mt-1 { margin-top: 4px; }\n    .box {\n      border: 1px solid #e2e8f0;\n      border-radius: 10px;\n      padding: 8px 10px;\n      margin-top: 8px;\n    }\n    table {\n      width: 100%;\n      border-collapse: collapse;\n      font-size: 10px;\n    }\n    th, td {\n      border: 1px solid #e2e8f0;\n      padding: 4px 6px;\n      vertical-align: top;\n    }\n    th {\n      background: #f8fafc;\n      text-align: left;\n    }\n    .small { font-size: 9px; color: #6b7280; }\n    .sign-row {\n      display: flex;\n      justify-content: space-between;\n      margin-top: 18px;\n      font-size: 10px;\n    }\n    .sign-block {\n      width: 32%;\n    }\n    .sign-line {\n      border-bottom: 1px solid #cbd5e1;\n      height: 16px;\n      margin-top: 4px;\n      margin-bottom: 2px;\n    }\n    .checkbox-line {\n      margin-bottom: 2px;\n    }\n    @media print {\n      body { margin: 10px; }\n    }\n  </style>\n</head>\n<body>\n  \x3c!-- \u0428\u0430\u043f\u043a\u0430 --\x3e\n  <div class="row">\n    <div>\n      <div style="font-weight:600; font-size:14px;">Farfor Decor / Farfor Rent</div>\n      <h1>\u041d\u0410\u041a\u041b\u0410\u0414\u041d\u0410 \u041d\u0410 \u041a\u041e\u041c\u041f\u041b\u0415\u041a\u0422\u0410\u0426\u0406\u042e / \u0412\u0418\u0414\u0410\u0427\u0423</h1>\n      <div class="small">\u0412\u043d\u0443\u0442\u0440\u0456\u0448\u043d\u0456\u0439 \u0447\u0435\u043a-\u043b\u0438\u0441\u0442 \u0441\u043a\u043b\u0430\u0434\u0443</div>\n    </div>\n    <div style="text-align:right; font-size:10px;">\n      <div><strong>\u2116 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f:</strong> ').concat(s.order_id||"\u2014",'</div>\n      <div class="mt-1"><strong>\u0414\u0430\u0442\u0430 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457:</strong> ').concat((new Date).toLocaleDateString("uk-UA"),'</div>\n      <div class="mt-1"><strong>\u0427\u0430\u0441 \u0432\u0438\u0434\u0430\u0447\u0456:</strong> ').concat(s.rent_issue_date||"\u2014",'</div>\n      <div class="mt-1"><strong>\u0422\u0438\u043f \u0432\u0438\u0434\u0430\u0447\u0456:</strong> \u0441\u0430\u043c\u043e\u0432\u0438\u0432\u0456\u0437 / \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430</div>\n    </div>\n  </div>\n\n  \x3c!-- \u0414\u0430\u043d\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f --\x3e\n  <div class="box mt-4">\n    <div class="row">\n      <div style="width:50%;">\n        <div><strong>\u041a\u043b\u0456\u0454\u043d\u0442:</strong> ').concat(s.firstname||""," ").concat(s.lastname||"",'</div>\n        <div class="mt-1"><strong>\u0422\u0435\u043b\u0435\u0444\u043e\u043d:</strong> ').concat(s.telephone||"\u2014",'</div>\n        <div class="mt-1"><strong>\u0406\u0432\u0435\u043d\u0442 / \u043e\u043f\u0438\u0441:</strong> _______________________</div>\n        <div class="mt-1"><strong>\u0414\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440 / \u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432\u043e:</strong> ______________</div>\n      </div>\n      <div style="width:46%; text-align:right;">\n        <div><strong>\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440:</strong> _______________________</div>\n        <div class="mt-1"><strong>\u0420\u0435\u043a\u0432\u0456\u0437\u0438\u0442\u043e\u0440 (\u0437\u0431\u0456\u0440):</strong> ______________</div>\n        <div class="mt-1"><strong>\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u0434\u043e:</strong> ').concat(s.rent_return_date||"\u2014",'</div>\n        <div class="mt-1"><strong>\u0421\u043f\u043e\u0441\u0456\u0431 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f:</strong> \u0441\u0430\u043c\u043e\u0432\u0438\u0432\u0456\u0437 / \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430 / \u041d\u041f</div>\n      </div>\n    </div>\n  </div>\n\n  \x3c!-- \u0427\u0435\u043a-\u043b\u0438\u0441\u0442 \u043f\u0435\u0440\u0435\u0434 \u0432\u0438\u0434\u0430\u0447\u0435\u044e --\x3e\n  <div class="box mt-2">\n    <div style="font-weight:600; margin-bottom:4px;">\u0427\u0435\u043a-\u043b\u0438\u0441\u0442 \u043f\u0435\u0440\u0435\u0434 \u0432\u0438\u0434\u0430\u0447\u0435\u044e</div>\n    <div class="checkbox-line">\u2610 \u0412\u0441\u0435 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0437\u0456\u0431\u0440\u0430\u043d\u0435 \u043f\u043e\u0432\u043d\u0456\u0441\u0442\u044e (').concat(u.reduce((e,t)=>e+t.picked_qty,0),"/").concat(u.reduce((e,t)=>e+t.qty,0),' \u043f\u043e\u0437\u0438\u0446\u0456\u0439)</div>\n    <div class="checkbox-line">\u2610 \u0423\u0441\u0456 \u043f\u043e\u0437\u0438\u0446\u0456\u0457 \u0437 \u043d\u0430\u043b\u0435\u0436\u043d\u0438\u043c \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f\u043c (\u0447\u043e\u0445\u043b\u0438 / \u043a\u043e\u0440\u043e\u0431\u043a\u0438 / \u0441\u0442\u0440\u0435\u0442\u0447)</div>\n    <div class="checkbox-line">\u2610 \u0412\u043d\u0435\u0441\u0435\u043d\u0456 \u0456\u0441\u043d\u0443\u044e\u0447\u0456 \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f \u0443 \u0431\u043b\u043e\u043a \xab\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f \u043f\u0440\u0438 \u0432\u0438\u0434\u0430\u0447\u0456\xbb</div>\n    <div class="checkbox-line">\u2610 \u0414\u043e\u0434\u0430\u043d\u0438\u0439 \u0434\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u0438\u0439 \u0437\u0430\u0445\u0438\u0441\u0442 \u0434\u043b\u044f \u043a\u0440\u0438\u0445\u043a\u0438\u0445 / \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u043f\u043e\u0437\u0438\u0446\u0456\u0439</div>\n    <div class="checkbox-line">\u2610 \u0424\u043e\u0442\u043e \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457 \u0437\u0440\u043e\u0431\u043b\u0435\u043d\u043e (\u0437\u0430 \u043f\u043e\u0442\u0440\u0435\u0431\u0438)</div>\n  </div>\n\n  \x3c!-- \u0422\u0430\u0431\u043b\u0438\u0446\u044f \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457 --\x3e\n  <div class="box mt-4">\n    <div style="font-weight:600; margin-bottom:4px;">\u041e\u0441\u043d\u043e\u0432\u043d\u0456 \u043f\u043e\u0437\u0438\u0446\u0456\u0457 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f (').concat(u.length,' \u043f\u043e\u0437.)</div>\n    <table>\n      <thead>\n        <tr>\n          <th style="width:3%;">\u2116</th>\n          <th style="width:10%;">SKU / \u041a\u043e\u0434</th>\n          <th style="width:25%;">\u041d\u0430\u0437\u0432\u0430</th>\n          <th style="width:7%;">\u041a-\u0442\u044c<br/>\u0432 \u0437\u0430\u043c\u043e\u0432\u043b.</th>\n          <th style="width:7%;">\u0417\u0456\u0431\u0440\u0430\u043d\u043e</th>\n          <th style="width:14%;">\u0417\u043e\u043d\u0430 / \u043f\u043e\u043b\u0438\u0446\u044f</th>\n          <th style="width:14%;">\u0421\u0442\u0430\u0442\u0443\u0441 \u043f\u0440\u0438 \u0432\u0438\u0434\u0430\u0447\u0456</th>\n          <th style="width:20%;">\u041f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f / \u043f\u0440\u0438\u043c\u0456\u0442\u043a\u0430</th>\n        </tr>\n      </thead>\n      <tbody>\n        ').concat(t,'\n      </tbody>\n    </table>\n  </div>\n\n  \x3c!-- \u0414\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u0456 \u043c\u0430\u0442\u0435\u0440\u0456\u0430\u043b\u0438 --\x3e\n  <div class="box mt-2">\n    <div style="font-weight:600; margin-bottom:4px;">\u0414\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u0456 \u043c\u0430\u0442\u0435\u0440\u0456\u0430\u043b\u0438 / \u043f\u0430\u043a\u0443\u0432\u0430\u043d\u043d\u044f</div>\n    <table>\n      <thead>\n        <tr>\n          <th style="width:30%;">\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f</th>\n          <th style="width:40%;">\u0429\u043e \u0432\u0438\u0434\u0430\u043d\u043e</th>\n          <th style="width:10%;">\u041a-\u0442\u044c</th>\n          <th style="width:20%;">\u041f\u0440\u0438\u043c\u0456\u0442\u043a\u0430</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr><td>\u0421\u0442\u0440\u0435\u0442\u0447</td><td></td><td></td><td></td></tr>\n        <tr><td>\u041a\u0430\u0440\u0442\u043e\u043d / \u0433\u043e\u0444\u0440\u0430</td><td></td><td></td><td></td></tr>\n        <tr><td>\u0427\u043e\u0445\u043b\u0438 \u0442\u0435\u043a\u0441\u0442\u0438\u043b\u044c\u043d\u0456</td><td></td><td></td><td></td></tr>\n        <tr><td>\u0406\u043d\u0448\u0435</td><td></td><td></td><td></td></tr>\n      </tbody>\n    </table>\n  </div>\n\n  \x3c!-- \u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f \u043f\u0440\u0438 \u0432\u0438\u0434\u0430\u0447\u0456 --\x3e\n  <div class="box mt-4">\n    <div style="font-weight:600; margin-bottom:4px;">\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f, \u0437\u0430\u0444\u0456\u043a\u0441\u043e\u0432\u0430\u043d\u0456 \u043f\u0440\u0438 \u0432\u0438\u0434\u0430\u0447\u0456</div>\n    <table>\n      <thead>\n        <tr>\n          <th style="width:10%;">SKU / \u041a\u043e\u0434</th>\n          <th style="width:25%;">\u041d\u0430\u0437\u0432\u0430</th>\n          <th style="width:40%;">\u041e\u043f\u0438\u0441 \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f</th>\n          <th style="width:15%;">\u0424\u043e\u0442\u043e / \u043f\u043e\u0437\u043d\u0430\u0447\u043a\u0430</th>\n          <th style="width:10%;">\u0425\u0442\u043e \u0437\u0430\u0444\u0456\u043a\u0441\u0443\u0432\u0430\u0432</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr><td></td><td></td><td></td><td></td><td></td></tr>\n        <tr><td></td><td></td><td></td><td></td><td></td></tr>\n      </tbody>\n    </table>\n    <div class="small mt-1">\n      *\u0412\u0441\u0435, \u0449\u043e \u0437\u0430\u043f\u0438\u0441\u0430\u043d\u043e \u0442\u0443\u0442, \u043d\u0435 \u0440\u0430\u0445\u0443\u0454\u0442\u044c\u0441\u044f \u043d\u043e\u0432\u043e\u044e \u0448\u043a\u043e\u0434\u043e\u044e \u043f\u0440\u0438 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u0456, \u044f\u043a\u0449\u043e \u0441\u0442\u0430\u043d \u043d\u0435 \u043f\u043e\u0433\u0456\u0440\u0448\u0438\u0432\u0441\u044f.\n    </div>\n  </div>\n\n  \x3c!-- \u041f\u0456\u0434\u043f\u0438\u0441\u0438 --\x3e\n  <div class="sign-row">\n    <div class="sign-block">\n      <div><strong>\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0437\u0456\u0431\u0440\u0430\u0432 (\u0440\u0435\u043a\u0432\u0456\u0437\u0438\u0442\u043e\u0440)</strong></div>\n      <div class="sign-line"></div>\n      <div class="small">\u041f\u0406\u0411 / \u043f\u0456\u0434\u043f\u0438\u0441 / \u0434\u0430\u0442\u0430, \u0447\u0430\u0441</div>\n    </div>\n    <div class="sign-block">\n      <div><strong>\u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0438\u0432 (\u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440)</strong></div>\n      <div class="sign-line"></div>\n      <div class="small">\u041f\u0406\u0411 / \u043f\u0456\u0434\u043f\u0438\u0441 / \u0434\u0430\u0442\u0430, \u0447\u0430\u0441</div>\n    </div>\n    <div class="sign-block">\n      <div><strong>\u041e\u0442\u0440\u0438\u043c\u0430\u0432 (\u043a\u043b\u0456\u0454\u043d\u0442 / \u0434\u043e\u0432\u0456\u0440\u0435\u043d\u0430 \u043e\u0441\u043e\u0431\u0430)</strong></div>\n      <div class="sign-line"></div>\n      <div class="small">\u041f\u0406\u0411 / \u043f\u0456\u0434\u043f\u0438\u0441 / \u0434\u0430\u0442\u0430, \u0447\u0430\u0441</div>\n    </div>\n  </div>\n\n  <div class="small mt-2">\n    \u0426\u044f \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u0430 \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u043e\u0432\u0443\u0454\u0442\u044c\u0441\u044f \u044f\u043a \u0447\u0435\u043a-\u043b\u0438\u0441\u0442 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457. \u0424\u0456\u043d\u0430\u043d\u0441\u043e\u0432\u0456 \u0432\u0437\u0430\u0454\u043c\u043e\u0440\u043e\u0437\u0440\u0430\u0445\u0443\u043d\u043a\u0438 \u0432\u0435\u0434\u0443\u0442\u044c\u0441\u044f \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0456 \u0442\u0430 \u043e\u043a\u0440\u0435\u043c\u0438\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0445.\n  </div>\n\n  <script>\n    window.onload = function() {\n      window.print();\n      // \u0417\u0430\u043a\u0440\u0438\u0442\u0438 \u0432\u0456\u043a\u043d\u043e \u043f\u0456\u0441\u043b\u044f \u0434\u0440\u0443\u043a\u0443 (\u043e\u043f\u0446\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u043e)\n      // window.onafterprint = function() { window.close(); }\n    }\n  <\/script>\n</body>\n</html>'),n=window.open("","_blank");n.document.write(r),n.document.close()},children:"\ud83d\udda8\ufe0f \u0414\u0440\u0443\u043a \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0457"}),(0,Et.jsx)(Rc,{tone:"purple",onClick:()=>{const e=u.map((e,t)=>{"".concat(window.location.origin,"/inventory/").concat(e.sku||e.id);return'\n        <div style="page-break-inside: avoid; display: inline-block; width: 48%; margin: 4px; padding: 10px; border: 1px dashed #cbd5e1; text-align: center;">\n          <div style="font-size: 10px; font-weight: 600; margin-bottom: 4px;">'.concat(e.name,'</div>\n          <div style="font-size: 9px; color: #64748b; margin-bottom: 6px;">SKU: ').concat(e.sku||"\u2014",'</div>\n          <div style="display: flex; justify-content: center; margin-bottom: 6px;">\n            <canvas id="qr-').concat(t,'"></canvas>\n          </div>\n          <div style="font-size: 8px; color: #94a3b8;">\u0412\u0456\u0434\u0441\u043a\u0430\u043d\u0443\u0439\u0442\u0435 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a\u0443</div>\n        </div>\n      ')}).join(""),t='<!doctype html>\n<html lang="uk">\n<head>\n  <meta charset="utf-8" />\n  <title>QR \u043a\u043e\u0434\u0438 \u0434\u043b\u044f \u0442\u043e\u0432\u0430\u0440\u0456\u0432 - \u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f #'.concat(s.order_id,'</title>\n  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"><\/script>\n  <style>\n    body {\n      font-family: system-ui, -apple-system, sans-serif;\n      margin: 15px;\n    }\n    h2 {\n      font-size: 16px;\n      margin-bottom: 10px;\n    }\n    .header {\n      border-bottom: 2px solid #e2e8f0;\n      padding-bottom: 10px;\n      margin-bottom: 15px;\n    }\n    @media print {\n      body { margin: 10px; }\n    }\n  </style>\n</head>\n<body>\n  <div class="header">\n    <h2>QR \u043a\u043e\u0434\u0438 \u0434\u043b\u044f \u0442\u043e\u0432\u0430\u0440\u0456\u0432</h2>\n    <div style="font-size: 11px; color: #64748b;">\n      \u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f: #').concat(s.order_id," | \u041a\u043b\u0456\u0454\u043d\u0442: ").concat(s.firstname||""," ").concat(s.lastname||""," | \u0412\u0441\u044c\u043e\u0433\u043e \u043f\u043e\u0437\u0438\u0446\u0456\u0439: ").concat(u.length,'\n    </div>\n  </div>\n  \n  <div style="display: flex; flex-wrap: wrap;">\n    ').concat(e,"\n  </div>\n\n  <script>\n    window.onload = function() {\n      ").concat(u.map((e,t)=>{const r="".concat(window.location.origin,"/inventory/").concat(e.sku||e.id);return"\n        QRCode.toCanvas(document.getElementById('qr-".concat(t,"'), '").concat(r,"', {\n          width: 100,\n          margin: 1\n        });\n        ")}).join("\n"),"\n      \n      setTimeout(() => {\n        window.print();\n      }, 500);\n    }\n  <\/script>\n</body>\n</html>"),r=window.open("","_blank");r.document.write(t),r.document.close()},children:"\ud83d\udcf1 \u0414\u0440\u0443\u043a QR \u043a\u043e\u0434\u0456\u0432"}),(0,Et.jsx)(Rc,{tone:"slate",onClick:()=>r("/"),children:"\u041d\u0430\u0437\u0430\u0434"})]})]})}),(0,Et.jsxs)("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 p-3 space-y-2 z-50 shadow-lg",children:[(0,Et.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-corp-text-muted",children:"\u041f\u043e\u0437\u0438\u0446\u0456\u0439:"})," ",(0,Et.jsxs)("span",{className:"font-bold",children:[u.filter(e=>e.picked_qty>=e.qty).length,"/",u.length]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-corp-text-muted",children:"\u041e\u0434\u0438\u043d\u0438\u0446\u044c:"})," ",(0,Et.jsxs)("span",{className:"font-bold",children:[u.reduce((e,t)=>e+t.picked_qty,0),"/",u.reduce((e,t)=>e+t.qty,0)]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-corp-text-muted",children:"\u0421\u0435\u0440\u0456\u0439:"})," ",(0,Et.jsx)("span",{className:"font-bold",children:u.reduce((e,t)=>{var r;return e+((null===(r=t.scanned)||void 0===r?void 0:r.length)||0)},0)})]})]}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsx)("button",{onClick:()=>r("/"),className:"flex-none px-3 py-2.5 rounded-lg border border-slate-200 bg-white text-sm font-medium",children:"\u2190"}),!T&&(0,Et.jsx)("button",{onClick:D,className:"flex-none px-3 py-2.5 rounded-lg border border-slate-200 bg-white text-sm font-medium",children:"\ud83d\udcbe"}),I&&(0,Et.jsx)("button",{onClick:R,className:"flex-1 py-2.5 rounded-lg bg-amber-500 text-white font-medium text-sm active:bg-amber-600",children:"\u2705 \u0413\u043e\u0442\u043e\u0432\u043e \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456"}),k&&(0,Et.jsx)("button",{onClick:O,className:"flex-1 py-2.5 rounded-lg bg-emerald-500 text-white font-medium text-sm active:bg-emerald-600",children:"\ud83d\ude9a \u0412\u0438\u0434\u0430\u0442\u0438 \u043a\u043b\u0456\u0454\u043d\u0442\u0443"}),T&&(0,Et.jsx)("div",{className:"flex-1 py-2.5 rounded-lg bg-emerald-100 text-emerald-700 font-medium text-sm text-center",children:"\u2705 \u0412\u0438\u0434\u0430\u043d\u043e"})]})]}),(0,Et.jsx)(hc,{isOpen:w.open,onClose:()=>N(e=>c(c({},e),{},{open:!1})),item:u.find(e=>e.id===w.item_id),order:s,stage:"pre_issue",onSave:e=>{h(t=>t.map(t=>t.id===w.item_id?c(c({},t),{},{pre_damage:[...t.pre_damage||[],e]}):t)),N({open:!1,item_id:null,category:"\u041c\u0435\u0431\u043b\u0456",kindCode:"",severity:"low",note:"",fee:0,photoName:""})}}),(0,Et.jsx)("div",{className:"hidden md:block text-xs text-corp-text-muted text-center",children:"\u041f\u0456\u0434\u0441\u0432\u0456\u0442\u043a\u0430: \u0440\u044f\u0434\u043a\u0438 \u0436\u043e\u0432\u0442\u043e\u0433\u043e \u043a\u043e\u043b\u044c\u043e\u0440\u0443 \u2014 \u0449\u0435 \u043d\u0435\u0443\u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u043e\u0432\u0430\u043d\u0456; \u0441\u0435\u0440\u0456\u0439\u043d\u0456 \u043d\u043e\u043c\u0435\u0440\u0438 \u043a\u043b\u0456\u043a\u0430\u0431\u0435\u043b\u044c\u043d\u0456 \u0434\u043b\u044f \u0441\u043a\u0430\u043d/\u0430\u043d\u0441\u043a\u0430\u043d."}),(0,Et.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,Et.jsx)(Ec,{orderId:null===s||void 0===s?void 0:s.order_id}),(0,Et.jsx)(jc,{orderId:null===s||void 0===s?void 0:s.order_id})]})]}):(0,Et.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,Et.jsx)("div",{className:"text-xl",children:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e"})})}const Gc="https://backrentalhub.farforrent.com.ua",Yc=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")},Xc=e=>(Number(e)||0).toLocaleString("uk-UA",{maximumFractionDigits:2}),Qc=()=>(new Date).toISOString().slice(0,10),Kc=()=>(new Date).toISOString().replace("T"," ").slice(0,19);function Zc(e){let{tone:t="slate",children:r}=e;return(0,Et.jsx)("span",{className:Yc("inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-xs",{slate:"corp-badge corp-badge-neutral",green:"corp-badge corp-badge-success",amber:"corp-badge corp-badge-warning",red:"corp-badge corp-badge-error",blue:"corp-badge corp-badge-info",violet:"corp-badge corp-badge-primary"}[t]),children:r})}function Jc(e){let{state:t,zone:r}=e;const n={wash:{tone:"blue",text:"\u041c\u0438\u0439\u043a\u0430"},shelf:{tone:"slate",text:"\u041f\u043e\u043b\u0438\u0446\u044f"},restore:{tone:"violet",text:"\u0420\u0435\u0441\u0442\u0430\u0432\u0440\u0430\u0446\u0456\u044f"},intake:{tone:"amber",text:"\u041f\u0440\u0438\u0439\u043c\u0430\u043d\u043d\u044f"},unknown:{tone:"amber",text:"\u041d\u0435\u0432\u0456\u0434\u043e\u043c\u043e"}},s=n[t]||n.unknown;return(0,Et.jsxs)(Zc,{tone:s.tone,children:[s.text,": ",r||"\u2014"]})}function $c(e){let{tone:t="slate",onClick:r,children:n,disabled:s=!1}=e;return(0,Et.jsx)("button",{disabled:s,onClick:r,className:Yc("rounded-full px-3 py-1 text-sm transition disabled:opacity-50 disabled:pointer-events-none",{slate:"corp-btn corp-btn-secondary",green:"corp-btn corp-btn-primary",red:"bg-rose-600 hover:bg-rose-700 text-white",blue:"corp-btn corp-btn-primary",yellow:"bg-amber-500 hover:bg-amber-600 text-corp-text-dark"}[t]),children:n})}function ed(e){let{title:t,right:r=null,children:n}=e;return(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[(0,Et.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,Et.jsx)("h3",{className:"text-base font-semibold text-corp-text-dark",children:t}),r]}),n]})}function td(e){let{order:t}=e;const r={6:"intake",7:"inspecting",8:"settled"}[t.order_status_id]||"intake",n="settled"===r?"green":"inspecting"===r?"blue":"amber";return(0,Et.jsxs)("div",{className:"space-y-2",children:[(0,Et.jsx)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsxs)("div",{className:"text-xl md:text-2xl font-bold",children:["\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f #",t.order_id]}),(0,Et.jsx)(Zc,{tone:n,children:r})]})}),(0,Et.jsxs)("div",{className:"flex flex-col sm:flex-row sm:flex-wrap gap-1 sm:gap-3 text-sm text-corp-text-main",children:[(0,Et.jsxs)("span",{children:["\ud83d\udcc5 \u0412\u0438\u0434\u0430\u043b\u0438: ",(0,Et.jsx)("b",{children:t.rent_issue_date||"\u2014"})]}),(0,Et.jsxs)("span",{children:["\ud83d\udcc6 \u041f\u043b\u0430\u043d: ",(0,Et.jsx)("b",{children:t.rent_return_date||"\u2014"})]}),(0,Et.jsxs)("span",{children:["\u2705 \u0424\u0430\u043a\u0442: ",(0,Et.jsx)("b",{children:Qc()})]})]})]})}function rd(e){let{items:t,onToggleSerialOK:r,onSetCounts:n,onOpenFinding:s,onToggleFlags:a}=e;return(0,Et.jsxs)(ed,{title:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u0437\u0438\u0446\u0456\u0439 (".concat(t.length,")"),children:[(0,Et.jsx)("div",{className:"hidden lg:block overflow-hidden rounded-xl border",children:(0,Et.jsxs)("table",{className:"min-w-full text-sm",children:[(0,Et.jsx)("thead",{className:"bg-slate-50 text-left text-corp-text-muted",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0424\u043e\u0442\u043e"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"SKU"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u041d\u0430\u0437\u0432\u0430"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u041e\u0440\u0435\u043d\u0434\u0430"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u043e"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0421\u0442\u0430\u043d"}),(0,Et.jsx)("th",{className:"px-3 py-2",children:"\u0421\u0435\u0440\u0456\u0439\u043d\u0456"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right",children:"\u0414\u0456\u0457"})]})}),(0,Et.jsx)("tbody",{children:t.map(e=>{var t,a;const i=xs(e.image)||"https://picsum.photos/seed/".concat(e.inventory_id,"/60/40");return(0,Et.jsxs)("tr",{className:"border-t",children:[(0,Et.jsx)("td",{className:"px-3 py-2",children:(0,Et.jsx)("img",{src:i,alt:e.name,className:"h-10 w-14 rounded object-cover cursor-pointer hover:ring-2 hover:ring-blue-500 transition",onClick:()=>{window.open("/catalog?product=".concat(e.inventory_id),"_blank")},title:"\u041d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c \u0449\u043e\u0431 \u0432\u0456\u0434\u043a\u0440\u0438\u0442\u0438 \u043a\u0430\u0440\u0442\u043a\u0443 \u0442\u043e\u0432\u0430\u0440\u0443"})}),(0,Et.jsx)("td",{className:"px-3 py-2 text-xs text-corp-text-muted",children:e.sku}),(0,Et.jsxs)("td",{className:"px-3 py-2 font-medium",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("span",{children:e.name}),e.findings.length>0&&(0,Et.jsxs)(Zc,{tone:"amber",children:[e.findings.length," \u0437\u0430\u0443\u0432\u0430\u0436\u0435\u043d\u044c"]})]}),(0,Et.jsx)("div",{className:"mt-1 text-xs text-corp-text-muted",children:(0,Et.jsx)(Jc,{state:(null===(t=e.location)||void 0===t?void 0:t.state)||"shelf",zone:(null===(a=e.location)||void 0===a?void 0:a.zone)||e.shelf||""})})]}),(0,Et.jsx)("td",{className:"px-3 py-2",children:e.rented_qty}),(0,Et.jsx)("td",{className:"px-3 py-2",children:(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("button",{className:"h-7 w-7 rounded-lg border hover:bg-slate-50",onClick:()=>n(e.id,Math.max(0,e.returned_qty-1)),children:"-"}),(0,Et.jsx)("div",{className:"w-10 text-center font-semibold",children:e.returned_qty}),(0,Et.jsx)("button",{className:"h-7 w-7 rounded-lg border hover:bg-slate-50",onClick:()=>n(e.id,e.returned_qty+1),children:"+"})]})}),(0,Et.jsx)("td",{className:"px-3 py-2",children:e.returned_qty===e.rented_qty&&0===e.findings.length?(0,Et.jsx)(Zc,{tone:"green",children:"OK"}):e.findings.length>0?(0,Et.jsx)(Zc,{tone:"red",children:"\u0404 \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f"}):(0,Et.jsx)(Zc,{tone:"amber",children:"\u0427\u0430\u0441\u0442\u043a. \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f"})}),(0,Et.jsx)("td",{className:"px-3 py-2",children:e.serials&&0!==e.serials.length?(0,Et.jsx)("div",{className:"flex flex-wrap gap-1 max-w-[240px]",children:e.serials.map(t=>(0,Et.jsx)("button",{onClick:()=>r(e.id,t),className:Yc("rounded-md border px-2 py-0.5 text-xs",e.ok_serials.includes(t)?"border-emerald-300 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white hover:bg-slate-50"),children:t},t))}):(0,Et.jsx)("span",{className:"text-xs text-corp-text-muted",children:"\u0431\u0435\u0437\u0441\u0435\u0440\u0456\u0439\u043d\u0438\u0439"})}),(0,Et.jsx)("td",{className:"px-3 py-2 text-right",children:(0,Et.jsx)($c,{tone:"amber",onClick:()=>s(e.id),children:"\u0417\u0430\u0444\u0456\u043a\u0441\u0443\u0432\u0430\u0442\u0438 \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f"})})]},e.id)})})]})}),(0,Et.jsx)("div",{className:"lg:hidden space-y-3",children:t.map(e=>{const t=xs(e.image)||"https://picsum.photos/seed/".concat(e.inventory_id,"/60/40"),a=e.returned_qty===e.rented_qty&&0===e.findings.length?(0,Et.jsx)(Zc,{tone:"green",children:"OK"}):e.findings.length>0?(0,Et.jsx)(Zc,{tone:"red",children:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f"}):(0,Et.jsx)(Zc,{tone:"amber",children:"\u0427\u0430\u0441\u0442\u043a\u043e\u0432\u043e"});return(0,Et.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-3 space-y-3",children:[(0,Et.jsxs)("div",{className:"flex gap-3",children:[(0,Et.jsx)("img",{src:t,alt:e.name,className:"h-16 w-20 rounded-lg object-cover cursor-pointer flex-shrink-0",onClick:()=>{window.open("/catalog?product=".concat(e.inventory_id),"_blank")}}),(0,Et.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Et.jsx)("div",{className:"font-semibold text-corp-text-dark truncate",children:e.name}),(0,Et.jsxs)("div",{className:"text-xs text-corp-text-muted",children:["SKU: ",e.sku]}),(0,Et.jsxs)("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[a,e.findings.length>0&&(0,Et.jsxs)(Zc,{tone:"amber",children:[e.findings.length," \u0437\u0430\u0443\u0432\u0430\u0436."]})]})]})]}),(0,Et.jsxs)("div",{className:"flex items-center justify-between bg-slate-50 rounded-lg p-2",children:[(0,Et.jsxs)("div",{className:"text-sm",children:[(0,Et.jsx)("span",{className:"text-corp-text-muted",children:"\u041e\u0440\u0435\u043d\u0434\u0430:"})," ",(0,Et.jsx)("span",{className:"font-semibold",children:e.rented_qty})]}),(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("span",{className:"text-sm text-corp-text-muted",children:"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u043e:"}),(0,Et.jsx)("button",{className:"h-9 w-9 rounded-lg border bg-white text-lg font-bold active:bg-slate-100",onClick:()=>n(e.id,Math.max(0,e.returned_qty-1)),children:"\u2212"}),(0,Et.jsx)("div",{className:"w-10 text-center text-lg font-bold",children:e.returned_qty}),(0,Et.jsx)("button",{className:"h-9 w-9 rounded-lg border bg-white text-lg font-bold active:bg-slate-100",onClick:()=>n(e.id,e.returned_qty+1),children:"+"})]})]}),e.serials&&e.serials.length>0&&(0,Et.jsxs)("div",{className:"space-y-1",children:[(0,Et.jsx)("div",{className:"text-xs text-corp-text-muted",children:"\u0421\u0435\u0440\u0456\u0439\u043d\u0456 \u043d\u043e\u043c\u0435\u0440\u0438:"}),(0,Et.jsx)("div",{className:"flex flex-wrap gap-1",children:e.serials.map(t=>(0,Et.jsxs)("button",{onClick:()=>r(e.id,t),className:Yc("rounded-lg border px-3 py-1.5 text-sm font-medium",e.ok_serials.includes(t)?"border-emerald-400 bg-emerald-100 text-emerald-700":"border-slate-200 bg-white text-corp-text-dark active:bg-slate-50"),children:[t," ",e.ok_serials.includes(t)&&"\u2713"]},t))})]}),(0,Et.jsx)("button",{onClick:()=>s(e.id),className:"w-full py-2.5 rounded-lg bg-amber-500 text-white font-medium active:bg-amber-600",children:"\ud83d\udcf8 \u0417\u0430\u0444\u0456\u043a\u0441\u0443\u0432\u0430\u0442\u0438 \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f"})]},e.id)})})]})}function nd(e){let{order:t,onSetFees:r,onDecideDeposit:n}=e;const s=parseFloat(t.total||0),a=parseFloat(t.prepayment||0),i=(parseFloat(t.deposit||0),Math.max(0,s-a),(t.late_fee||0)+(t.cleaning_fee||0)+(t.damage_fee||0));return(0,Et.jsx)(ed,{title:"\u0424\u0456\u043d\u0430\u043d\u0441\u0438",right:(0,Et.jsx)(Zc,{tone:i>0?"amber":"green",children:i>0?"\u0414\u043e \u0434\u043e\u043f\u043b\u0430\u0442\u0438 \u20b4 ".concat(Xc(i)):"\u0411\u0435\u0437 \u0437\u0431\u0438\u0442\u043a\u0456\u0432"}),children:(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsx)("div",{className:"text-sm text-corp-text-main",children:"\u041d\u0430\u0440\u0430\u0445\u043e\u0432\u0430\u043d\u0456 \u0437\u0431\u0438\u0442\u043a\u0438 \u043f\u0456\u0441\u043b\u044f \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f:"}),(0,Et.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Et.jsxs)("div",{className:"flex justify-between",children:[(0,Et.jsx)("span",{className:"text-corp-text-muted",children:"\u041f\u0435\u043d\u044f \u0437\u0430 \u043f\u0440\u043e\u0441\u0442\u0440\u043e\u0447\u043a\u0443"}),(0,Et.jsx)("input",{type:"number",className:"w-28 rounded-lg border px-2 py-1 text-right",value:t.late_fee||0,onChange:e=>r("late_fee",Number(e.target.value)||0)})]}),(0,Et.jsxs)("div",{className:"flex justify-between",children:[(0,Et.jsx)("span",{className:"text-corp-text-muted",children:"\u041c\u0438\u0442\u0442\u044f/\u0441\u0443\u0448\u043a\u0430/\u0447\u0438\u0441\u0442\u043a\u0430"}),(0,Et.jsx)("input",{type:"number",className:"w-28 rounded-lg border px-2 py-1 text-right",value:t.cleaning_fee||0,onChange:e=>r("cleaning_fee",Number(e.target.value)||0)})]}),(0,Et.jsxs)("div",{className:"flex justify-between",children:[(0,Et.jsx)("span",{className:"text-corp-text-muted",children:"\u0417\u0431\u0438\u0442\u043a\u0438 (\u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f)"}),(0,Et.jsx)("input",{type:"number",className:"w-28 rounded-lg border px-2 py-1 text-right",value:t.damage_fee||0,onChange:e=>r("damage_fee",Number(e.target.value)||0)})]}),(0,Et.jsxs)("div",{className:"flex justify-between border-t pt-2",children:[(0,Et.jsx)("span",{className:"font-medium",children:"\u0420\u0430\u0437\u043e\u043c \u0434\u043e \u0434\u043e\u043f\u043b\u0430\u0442\u0438"}),(0,Et.jsxs)("span",{className:"font-semibold",children:["\u20b4 ",Xc(i)]})]})]}),i>0&&(0,Et.jsxs)("div",{className:"rounded-lg bg-amber-50 border border-amber-200 p-3 text-sm",children:[(0,Et.jsx)("div",{className:"font-medium text-amber-800 mb-1",children:"\ud83d\udcb0 \u0406\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f"}),(0,Et.jsx)("div",{className:"text-amber-700",children:"\u041f\u0456\u0441\u043b\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044f \u043f\u0440\u0438\u0439\u043c\u0430\u043d\u043d\u044f \u0434\u0430\u043d\u0456 \u043f\u0440\u043e \u0434\u043e\u043f\u043b\u0430\u0442\u0443 \u0431\u0443\u0434\u0443\u0442\u044c \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u0456 \u0443 \u0444\u0456\u043d\u0430\u043d\u0441\u043e\u0432\u0438\u0439 \u043a\u0430\u0431\u0456\u043d\u0435\u0442 \u0434\u043b\u044f \u043f\u0440\u0438\u0439\u043d\u044f\u0442\u0442\u044f \u043a\u043e\u0448\u0442\u0456\u0432 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u043e\u043c."})]})]})})}function sd(e){let{events:t}=e;return(0,Et.jsx)(ed,{title:"\u0422\u0430\u0439\u043c\u043b\u0430\u0439\u043d",children:(0,Et.jsx)("ol",{className:"space-y-2 text-sm max-h-60 overflow-auto",children:t.map((e,t)=>(0,Et.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Et.jsx)("div",{className:Yc("mt-1 h-2 w-2 rounded-full flex-shrink-0","green"===e.tone?"bg-emerald-500":"red"===e.tone?"bg-rose-500":"bg-blue-500")}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"font-medium",children:e.text}),(0,Et.jsx)("div",{className:"text-xs text-corp-text-muted",children:e.at})]})]},t))})})}function ad(){const{id:e}=be(),r=ge(),{toast:n}=Go(),[s,a]=(0,t.useState)(null),[i,o]=(0,t.useState)(!0),[l,d]=(0,t.useState)([]),[u,h]=(0,t.useState)(""),[m,p]=(0,t.useState)([]),[f,x]=(0,t.useState)({open:!1,itemId:null}),[g,b]=(0,t.useState)([]);(0,t.useEffect)(()=>{y()},[e]);const y=async()=>{try{var t,r;let n,l;o(!0);try{n=await is.get("".concat(Gc,"/api/decor-orders/").concat(e)),l=n.data,console.log("[Return] Order loaded from decor_orders:",l)}catch(s){console.log("[Return] Not in decor_orders, trying OpenCart..."),n=await is.get("".concat(Gc,"/api/orders/").concat(e)),l=n.data,console.log("[Return] Order loaded from OpenCart:",l)}const u={order_id:l.id||l.order_id,order_status_id:l.order_status_id||24,firstname:(null===(t=l.client_name)||void 0===t?void 0:t.split(" ")[0])||"",lastname:(null===(r=l.client_name)||void 0===r?void 0:r.split(" ").slice(1).join(" "))||"",telephone:l.client_phone||"",email:l.client_email||"",total:l.total_rental||0,prepayment:0,deposit:l.deposit_held||l.total_deposit||0,rent_issue_date:l.rent_date||l.issue_date||Qc(),rent_return_date:l.rent_return_date||l.return_date||Qc(),date_added:l.created_at||Kc(),manager_comment:l.notes||l.manager_comment||"",late_fee:0,cleaning_fee:0,damage_fee:0};a(u),h(l.notes||l.manager_comment||"");const m=(l.items||[]).map((e,t)=>({id:e.id||e.order_product_id||e.inventory_id||t,sku:e.article||e.sku||e.model||"",name:e.name||e.product_name||"",image:e.image||"",category:e.category||"\u041c\u0435\u0431\u043b\u0456",rented_qty:parseInt(e.quantity||e.qty)||0,returned_qty:0,serials:e.serials||[],ok_serials:[],findings:[],location:{state:"shelf",zone:e.article||e.sku||e.model||"A-01"},location_after:"intake"}));console.log("Transformed return items:",m),d(m),p([{at:Kc(),text:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u0440\u043e\u0437\u043f\u043e\u0447\u0430\u0442\u043e",tone:"blue"}]);try{const t=await is.get("".concat(Gc,"/api/finance/transactions?order_id=").concat(e)),r=Array.isArray(t.data)?t.data:[];b(r);const n=r.filter(e=>"deposit_hold"===e.type).reduce((e,t)=>e+(t.amount||0),0);n>0&&(a(e=>c(c({},e),{},{deposit:n})),console.log("[Return] Real deposit from transactions:",n))}catch(i){console.error("[Return] Failed to load transactions:",i)}}catch(zd){console.error("Error loading order for return:",zd),n({title:"\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",variant:"destructive"})}finally{o(!1)}},v=(0,t.useMemo)(()=>l.every(e=>0===e.serials.length||e.ok_serials.length===e.rented_qty),[l]),w=(0,t.useMemo)(()=>l.every(e=>e.returned_qty<=e.rented_qty),[l]),N=v&&w,j=async()=>{try{const t=parseFloat(s.total||0),i=parseFloat(s.prepayment||0),o=parseFloat(s.deposit||0),d=(Math.max(0,t-i),(s.late_fee||0)+(s.cleaning_fee||0)+(s.damage_fee||0));let h="release";d>0&&o>0&&(h="part-release"),await is.post("".concat(Gc,"/api/decor-orders/").concat(e,"/complete-return"),{items_returned:l.map(e=>({id:e.id,sku:e.sku,name:e.name,rented_qty:e.rented_qty,returned_qty:e.returned_qty,ok_serials:e.ok_serials,findings:e.findings,location_state:e.location_state,location_zone:e.location_zone})),late_fee:s.late_fee||0,cleaning_fee:s.cleaning_fee||0,damage_fee:s.damage_fee||0,deposit_action:h,manager_notes:u}),a(e=>c(c({},e),{},{order_status_id:13})),p(e=>[{at:Kc(),text:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e \u0447\u0435\u0440\u0435\u0437 decor_orders",tone:"green"},...e]),n({title:"\u2705 \u0423\u0441\u043f\u0456\u0445",description:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e (decor_orders API)"}),setTimeout(()=>r("/"),2e3)}catch(zd){var t,i;console.error("Error settling return:",zd),n({title:"\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f: ".concat((null===(t=zd.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.detail)||zd.message),variant:"destructive"})}},_=(0,t.useMemo)(()=>{const e=parseFloat((null===s||void 0===s?void 0:s.total)||0),t=parseFloat((null===s||void 0===s?void 0:s.prepayment)||0),r=Math.max(0,e-t),n=((null===s||void 0===s?void 0:s.late_fee)||0)+((null===s||void 0===s?void 0:s.cleaning_fee)||0)+((null===s||void 0===s?void 0:s.damage_fee)||0);return{rentDue:r,totalFees:n,totalDue:r+n}},[s]),C=l.find(e=>e.id===f.itemId);return i?(0,Et.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,Et.jsx)("div",{className:"text-xl",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})}):s?(0,Et.jsxs)("div",{className:"mx-auto max-w-7xl px-3 py-4 md:p-6 space-y-4 md:space-y-6 pb-24 md:pb-6",children:[(0,Et.jsx)(td,{order:s}),(0,Et.jsx)(xc,{orderId:null===s||void 0===s?void 0:s.order_id}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[(0,Et.jsx)(ed,{title:"\u041a\u043b\u0456\u0454\u043d\u0442",children:(0,Et.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted text-xs",children:"\u0406\u043c\u02bc\u044f"}),(0,Et.jsxs)("div",{className:"font-medium",title:"".concat(s.firstname," ").concat(s.lastname),children:[s.firstname," ",s.lastname]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted text-xs",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,Et.jsx)("a",{href:"tel:".concat(s.telephone),className:"font-medium text-blue-600",children:s.telephone})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted text-xs",children:"Email"}),(0,Et.jsx)("div",{className:"font-medium break-words",title:s.email,children:s.email})]})]})}),(0,Et.jsx)(nd,{order:s,onSetFees:(e,t)=>a(r=>c(c({},r),{},{[e]:t})),onDecideDeposit:async t=>{const r=parseFloat(s.total||0),i=parseFloat(s.prepayment||0),o=parseFloat(s.deposit||0),l=Math.max(0,r-i)+(s.late_fee||0)+(s.cleaning_fee||0)+(s.damage_fee||0);try{if("use"===t){const t=Math.max(0,o-l);a(e=>c(c({},e),{},{deposit:t})),await is.post("".concat(Gc,"/api/manager/finance/transactions"),{order_id:parseInt(e),type:"deposit_writeoff",title:"\u0421\u043f\u0438\u0441\u0430\u043d\u043d\u044f \u0456\u0437 \u0437\u0430\u0441\u0442\u0430\u0432\u0438",debit:0,credit:0,currency:"UAH",status:"completed",notes:"\u0421\u043f\u0438\u0441\u0430\u043d\u043e \u20b4".concat(Math.min(o,l))}),n({title:"\u2705 \u0423\u0441\u043f\u0456\u0445",description:"\u0421\u043f\u0438\u0441\u0430\u043d\u043e \u0437 \u0437\u0430\u0441\u0442\u0430\u0432\u0438"})}if("release"===t&&(a(e=>c(c({},e),{},{deposit:0})),await is.post("".concat(Gc,"/api/manager/finance/transactions"),{order_id:parseInt(e),type:"deposit_release",title:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u0437\u0430\u0441\u0442\u0430\u0432\u0438",debit:0,credit:0,currency:"UAH",status:"completed",notes:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043e \u20b4".concat(o)}),n({title:"\u2705 \u0423\u0441\u043f\u0456\u0445",description:"\u0417\u0430\u0441\u0442\u0430\u0432\u0443 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043e"})),"part-release"===t){const e=Math.max(0,o-l);a(t=>c(c({},t),{},{deposit:e})),n({title:"\u2705 \u0423\u0441\u043f\u0456\u0445",description:"\u0427\u0430\u0441\u0442\u043a\u043e\u0432\u043e \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043e \u0437\u0430\u0441\u0442\u0430\u0432\u0443"})}}catch(zd){console.error("Error with deposit operation:",zd),n({title:"\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430",description:"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0432\u0438\u043a\u043e\u043d\u0430\u0442\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044e",variant:"destructive"})}}}),(0,Et.jsx)(sd,{events:m})]}),(0,Et.jsx)(rd,{items:l,onToggleSerialOK:(e,t)=>d(r=>r.map(r=>{if(r.id!==e)return r;const n=r.ok_serials.includes(t)?r.ok_serials.filter(e=>e!==t):[...r.ok_serials,t],s=Math.max(r.returned_qty,n.length);return c(c({},r),{},{ok_serials:n,returned_qty:s})})),onSetCounts:(e,t)=>d(r=>r.map(r=>r.id===e?c(c({},r),{},{returned_qty:Math.max(0,Math.min(t,r.rented_qty))}):r)),onOpenFinding:e=>x({open:!0,itemId:e}),onToggleFlags:(e,t)=>d(r=>r.map(r=>r.id===e?c(c({},r),{},{[t]:!r[t]}):r))}),(0,Et.jsx)(ed,{title:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0456",children:(0,Et.jsx)("textarea",{value:u,onChange:e=>h(e.target.value),className:"w-full rounded-xl border p-3 text-sm",rows:3,placeholder:"\u0421\u043b\u0443\u0436\u0431\u043e\u0432\u0430 \u043d\u043e\u0442\u0430\u0442\u043a\u0430 \u043f\u0440\u043e \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f"})}),(0,Et.jsx)("div",{className:"hidden md:block",children:(0,Et.jsxs)(ed,{title:"\u041f\u0456\u0434\u0441\u0443\u043c\u043e\u043a \u043f\u0440\u0438\u0439\u043c\u0430\u043d\u043d\u044f",right:(0,Et.jsx)(Zc,{tone:N?"green":"amber",children:N?"\u041c\u043e\u0436\u043d\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438":"\u0429\u0435 \u0454 \u043d\u0435\u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u043d\u043e\u0441\u0442\u0456"}),children:[(0,Et.jsxs)("div",{className:"grid gap-3 md:grid-cols-4 text-sm",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted",children:"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u043e \u043f\u043e\u0437\u0438\u0446\u0456\u0439"}),(0,Et.jsxs)("div",{className:"font-semibold",children:[l.reduce((e,t)=>e+t.returned_qty,0)," / ",l.reduce((e,t)=>e+t.rented_qty,0)]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted",children:"\u0424\u0456\u043a\u0441\u0430\u0446\u0456\u0439 \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u044c"}),(0,Et.jsx)("div",{className:"font-semibold",children:l.reduce((e,t)=>e+t.findings.length,0)})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted",children:"\u0414\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u0456 \u0432\u0438\u0442\u0440\u0430\u0442\u0438"}),(0,Et.jsxs)("div",{className:"font-semibold",children:["\u20b4 ",Xc(_.totalFees)]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-corp-text-muted",children:"\u0414\u043e \u0441\u043f\u043b\u0430\u0442\u0438"}),(0,Et.jsxs)("div",{className:"font-semibold",children:["\u20b4 ",Xc(_.totalDue)]})]})]}),(0,Et.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[(0,Et.jsx)($c,{tone:"green",onClick:j,disabled:!N,children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438 \u043f\u0440\u0438\u0439\u043c\u0430\u043d\u043d\u044f"}),(0,Et.jsx)($c,{tone:"blue",onClick:()=>window.print(),children:"\u0414\u0440\u0443\u043a \u0430\u043a\u0442\u0430"}),(0,Et.jsx)($c,{tone:"slate",onClick:()=>r("/"),children:"\u041d\u0430\u0437\u0430\u0434"})]})]})}),(0,Et.jsxs)("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 p-3 space-y-2 z-50 shadow-lg",children:[(0,Et.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-corp-text-muted",children:"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u043e:"})," ",(0,Et.jsxs)("span",{className:"font-semibold",children:[l.reduce((e,t)=>e+t.returned_qty,0),"/",l.reduce((e,t)=>e+t.rented_qty,0)]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-corp-text-muted",children:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u044c:"})," ",(0,Et.jsx)("span",{className:"font-semibold text-amber-600",children:l.reduce((e,t)=>e+t.findings.length,0)})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-corp-text-muted",children:"\u0414\u043e \u0441\u043f\u043b\u0430\u0442\u0438:"})," ",(0,Et.jsxs)("span",{className:"font-semibold",children:["\u20b4",Xc(_.totalDue)]})]})]}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsx)("button",{onClick:()=>r("/"),className:"flex-none px-4 py-2.5 rounded-lg border border-slate-200 bg-white text-sm font-medium",children:"\u2190 \u041d\u0430\u0437\u0430\u0434"}),(0,Et.jsx)("button",{onClick:j,disabled:!N,className:Yc("flex-1 py-2.5 rounded-lg text-white font-medium text-sm",N?"bg-emerald-500 active:bg-emerald-600":"bg-slate-300"),children:"\u2705 \u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438 \u043f\u0440\u0438\u0439\u043c\u0430\u043d\u043d\u044f"})]})]}),(0,Et.jsx)(hc,{isOpen:f.open,onClose:()=>x({open:!1,itemId:null}),item:C,order:{order_id:e,order_number:null===s||void 0===s?void 0:s.order_id},stage:"return",onSave:e=>{d(t=>t.map(t=>t.id===f.itemId?c(c({},t),{},{findings:[...t.findings,e]}):t)),x({open:!1,itemId:null}),a(t=>c(c({},t),{},{damage_fee:(t.damage_fee||0)+(Number(e.fee)||0)})),p(t=>[{at:Kc(),text:"\u0417\u0430\u0444\u0456\u043a\u0441\u043e\u0432\u0430\u043d\u043e \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f: ".concat(e.category," - ").concat(e.kind),tone:"amber"},...t])},existingHistory:(null===C||void 0===C?void 0:C.findings)||[]}),(0,Et.jsx)("div",{className:"text-xs text-corp-text-muted text-center",children:"\u041f\u0456\u0434\u043a\u0430\u0437\u043a\u0430: \u043a\u043b\u0456\u043a \u043f\u043e \u0441\u0435\u0440\u0456\u0439\u043d\u043e\u043c\u0443 \u043d\u043e\u043c\u0435\u0440\u0443 \u0432\u0456\u0434\u043c\u0456\u0447\u0430\u0454, \u0449\u043e \u0435\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u043f\u043e\u0432\u0435\u0440\u043d\u0443\u0432\u0441\u044f \u0442\u0430 OK."})]}):(0,Et.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,Et.jsx)("div",{className:"text-xl",children:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e"})})}const id="https://backrentalhub.farforrent.com.ua";function od(){var e,r;const{sku:n}=be(),s=ge(),[a,i]=(0,t.useState)(null),[o,l]=(0,t.useState)(!0),[d,u]=(0,t.useState)("available"),[h,m]=(0,t.useState)(""),[p,f]=(0,t.useState)(!1),[x,g]=(0,t.useState)([]),[b,y]=(0,t.useState)([]),[v,w]=(0,t.useState)(!1),[N,j]=(0,t.useState)(!1);(0,t.useEffect)(()=>{C(),_()},[n]);const _=async()=>{if(n)try{w(!0);const e=await is.get("".concat(id,"/api/product-damage-history/sku/").concat(n));y(e.data.history||[])}catch(e){console.error("Error loading damage history:",e),y([])}finally{w(!1)}},C=async()=>{try{l(!0);const t=await is.get("".concat(id,"/api/products/").concat(n));if(i(t.data),t.data.family_id)try{const e=await is.get("".concat(id,"/api/catalog/families/").concat(t.data.family_id,"/products"));g(e.data.filter(e=>e.sku!==n))}catch(e){console.error("Error loading family products:",e)}}catch(t){console.error("Error loading product:",t)}finally{l(!1)}},S=async()=>{try{f(!0),await is.post("".concat(id,"/api/inventory/recount"),{sku:n,product_id:null===a||void 0===a?void 0:a.product_id,status:d,notes:h,timestamp:(new Date).toISOString()}),alert("\u2705 \u041f\u0435\u0440\u0435\u043e\u0431\u0456\u043a \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e!"),s("/")}catch(e){console.error("Error saving recount:",e),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f")}finally{f(!1)}};return o?(0,Et.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:(0,Et.jsx)("div",{className:"text-corp-text-main",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})}):a?(0,Et.jsxs)("div",{className:"min-h-screen bg-slate-50 p-4",children:[(0,Et.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,Et.jsx)("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 mb-4",children:(0,Et.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,Et.jsx)("div",{className:"text-5xl",children:"\ud83d\udccb"}),(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-corp-text-dark",children:"\u041a\u0430\u0431\u0456\u043d\u0435\u0442 \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a\u0443"}),(0,Et.jsx)("p",{className:"text-corp-text-main",children:"\u0428\u0432\u0438\u0434\u043a\u0430 \u0444\u0456\u043a\u0441\u0430\u0446\u0456\u044f \u0441\u0442\u0430\u043d\u0443 \u0442\u043e\u0432\u0430\u0440\u0443"})]})]})}),a.family_id&&(0,Et.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-6 mb-4",children:[(0,Et.jsx)("h2",{className:"text-lg font-semibold mb-3 text-blue-900",children:"\ud83d\udd17 \u0422\u043e\u0432\u0430\u0440 \u0432\u0445\u043e\u0434\u0438\u0442\u044c \u0443 \u043d\u0430\u0431\u0456\u0440"}),(0,Et.jsxs)("div",{className:"text-sm text-blue-800 mb-3",children:[(0,Et.jsx)("strong",{children:"\u041d\u0430\u0437\u0432\u0430 \u043d\u0430\u0431\u043e\u0440\u0443:"})," ",(null===(e=a.family)||void 0===e?void 0:e.name)||"\u041d\u0435 \u0432\u043a\u0430\u0437\u0430\u043d\u043e"]}),(null===(r=a.family)||void 0===r?void 0:r.description)&&(0,Et.jsx)("div",{className:"text-sm text-blue-700 mb-3",children:a.family.description}),x.length>0&&(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsx)("div",{className:"text-sm font-medium text-blue-900 mb-2",children:"\u0406\u043d\u0448\u0456 \u0442\u043e\u0432\u0430\u0440\u0438 \u0437 \u043d\u0430\u0431\u043e\u0440\u0443:"}),(0,Et.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:x.map(e=>(0,Et.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-white rounded-lg border border-blue-200 hover:border-blue-400 transition cursor-pointer",onClick:()=>s("/inventory/".concat(e.sku)),children:[e.image&&(0,Et.jsx)("img",{src:xs(e.image),alt:e.name,className:"w-10 h-10 object-cover rounded"}),(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsx)("div",{className:"text-sm font-medium text-corp-text-dark",children:e.name}),(0,Et.jsxs)("div",{className:"text-xs text-corp-text-muted",children:["SKU: ",e.sku," \u2022 \u0404: ",e.quantity," \u0448\u0442"]})]})]},e.sku))})]})]}),(0,Et.jsxs)("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 mb-4",children:[(0,Et.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"\u0406\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f \u043f\u0440\u043e \u0442\u043e\u0432\u0430\u0440"}),(0,Et.jsxs)("div",{className:"mb-4",children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0424\u043e\u0442\u043e \u0442\u043e\u0432\u0430\u0440\u0443"}),(0,Et.jsx)(ls,{sku:a.sku,currentImageUrl:a.image_url,onUploadSuccess:e=>{i(c(c({},a),{},{image_url:e}))}})]}),(0,Et.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Et.jsxs)("div",{className:"flex justify-between",children:[(0,Et.jsx)("span",{className:"text-corp-text-main",children:"SKU:"}),(0,Et.jsx)("span",{className:"font-semibold",children:a.sku})]}),(0,Et.jsxs)("div",{className:"flex justify-between",children:[(0,Et.jsx)("span",{className:"text-corp-text-main",children:"\u041d\u0430\u0437\u0432\u0430:"}),(0,Et.jsx)("span",{className:"font-semibold",children:a.name})]}),(0,Et.jsxs)("div",{className:"flex justify-between",children:[(0,Et.jsx)("span",{className:"text-corp-text-main",children:"\u0412 \u043d\u0430\u044f\u0432\u043d\u043e\u0441\u0442\u0456:"}),(0,Et.jsxs)("span",{className:"font-semibold",children:[a.quantity||0," \u0448\u0442"]})]}),(0,Et.jsxs)("div",{className:"flex justify-between",children:[(0,Et.jsx)("span",{className:"text-corp-text-main",children:"\u041b\u043e\u043a\u0430\u0446\u0456\u044f:"}),(0,Et.jsxs)("span",{className:"font-semibold",children:[a.zone||"\u2014"," / ",a.aisle||"\u2014"," / ",a.shelf||"\u2014"]})]})]})]}),b.length>0&&(0,Et.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-6 mb-4",children:[(0,Et.jsxs)("h2",{className:"text-lg font-semibold mb-3 text-amber-900",children:["\ud83d\udd28 \u0406\u0441\u0442\u043e\u0440\u0456\u044f \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u044c (",b.length,")"]}),(0,Et.jsx)("div",{className:"space-y-2",children:b.map(e=>(0,Et.jsx)("div",{className:"bg-white rounded-lg border border-amber-300 p-3",children:(0,Et.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsx)("div",{className:"font-medium text-corp-text-dark",children:e.damage_type}),(0,Et.jsxs)("div",{className:"text-xs text-corp-text-muted mt-1",children:[e.stage_label," \xb7 \u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f #",e.order_number]}),e.note&&(0,Et.jsx)("div",{className:"text-sm text-corp-text-main mt-1",children:e.note}),(0,Et.jsxs)("div",{className:"text-xs text-slate-400 mt-1",children:[e.created_by," \xb7 ",new Date(e.created_at).toLocaleString("uk-UA")]})]}),(0,Et.jsxs)("div",{className:"text-right ml-3",children:[(0,Et.jsxs)("div",{className:"text-sm font-semibold ".concat("high"===e.severity?"text-red-600":"medium"===e.severity?"text-amber-600":"text-green-600"),children:["\u20b4",e.fee]}),(0,Et.jsx)("div",{className:"text-xs text-corp-text-muted mt-1",children:"high"===e.severity?"\ud83d\udd34 \u0412\u0438\u0441\u043e\u043a\u0435":"medium"===e.severity?"\ud83d\udfe1 \u0421\u0435\u0440\u0435\u0434\u043d\u0454":"\ud83d\udfe2 \u041d\u0438\u0437\u044c\u043a\u0435"})]})]})},e.id))}),(0,Et.jsx)("div",{className:"mt-3 text-sm text-amber-800",children:'\ud83d\udca1 \u041f\u0440\u0438 \u0432\u0438\u044f\u0432\u043b\u0435\u043d\u043d\u0456 \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f \u043e\u0431\u0435\u0440\u0456\u0442\u044c "\u26a0\ufe0f \u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043e" \u043d\u0438\u0436\u0447\u0435'})]}),(0,Et.jsxs)("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 mb-4",children:[(0,Et.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u043a\u0438"}),(0,Et.jsxs)("div",{className:"mb-4",children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0442\u043e\u0432\u0430\u0440\u0443"}),(0,Et.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,Et.jsx)("button",{onClick:()=>u("available"),className:"p-3 rounded-lg border-2 text-sm font-medium transition-colors ".concat("available"===d?"border-emerald-500 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white text-corp-text-main hover:border-slate-300"),children:"\u2705 \u0412 \u043d\u043e\u0440\u043c\u0456"}),(0,Et.jsx)("button",{onClick:()=>u("damaged"),className:"p-3 rounded-lg border-2 text-sm font-medium transition-colors ".concat("damaged"===d?"border-amber-500 bg-amber-50 text-amber-700":"border-slate-200 bg-white text-corp-text-main hover:border-slate-300"),children:"\u26a0\ufe0f \u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043e"}),(0,Et.jsx)("button",{onClick:()=>u("missing"),className:"p-3 rounded-lg border-2 text-sm font-medium transition-colors ".concat("missing"===d?"border-rose-500 bg-rose-50 text-rose-700":"border-slate-200 bg-white text-corp-text-main hover:border-slate-300"),children:"\u274c \u0412\u0456\u0434\u0441\u0443\u0442\u043d\u0456\u0439"})]})]}),"damaged"===d&&(0,Et.jsx)("div",{className:"mb-4 p-3 bg-amber-50 rounded-lg border border-amber-200",children:(0,Et.jsx)("div",{className:"text-sm text-amber-800 mb-2",children:"\u26a0\ufe0f \u041f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456 \u0432\u0456\u0434\u043a\u0440\u0438\u0454\u0442\u044c\u0441\u044f \u043c\u043e\u0434\u0430\u043b\u044c\u043d\u0435 \u0432\u0456\u043a\u043d\u043e \u0434\u043b\u044f \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u043e\u0457 \u0444\u0456\u043a\u0441\u0430\u0446\u0456\u0457 \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f."})}),(0,Et.jsxs)("div",{className:"mb-4",children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"\u041f\u0440\u0438\u043c\u0456\u0442\u043a\u0438 (\u043e\u043f\u0446\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u043e)"}),(0,Et.jsx)("textarea",{value:h,onChange:e=>m(e.target.value),placeholder:"\u0414\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u0430 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f \u043f\u0440\u043e \u0441\u0442\u0430\u043d \u0442\u043e\u0432\u0430\u0440\u0443...",rows:3,className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Et.jsxs)("div",{className:"flex gap-2",children:[(0,Et.jsx)("button",{onClick:async()=>{"damaged"!==d?await S():j(!0)},disabled:p,className:"flex-1 py-3 bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"\u0417\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f...":"\ud83d\udcbe \u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u043f\u0435\u0440\u0435\u043e\u0431\u0456\u043a"}),(0,Et.jsx)("button",{onClick:()=>s("/"),className:"px-4 py-3 bg-slate-100 text-slate-700 rounded-lg font-medium hover:bg-slate-200",children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"})]})]}),(0,Et.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-800",children:(0,Et.jsxs)("div",{className:"flex items-start gap-2",children:[(0,Et.jsx)("span",{className:"text-lg",children:"\ud83d\udca1"}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("strong",{children:"\u041f\u0456\u0434\u043a\u0430\u0437\u043a\u0430:"})," \u0412\u0456\u0434\u0441\u043a\u0430\u043d\u0443\u0439\u0442\u0435 QR \u043a\u043e\u0434 \u043d\u0430 \u0442\u043e\u0432\u0430\u0440\u0456 \u0449\u043e\u0431 \u0448\u0432\u0438\u0434\u043a\u043e \u043f\u043e\u0442\u0440\u0430\u043f\u0438\u0442\u0438 \u043d\u0430 \u0446\u044e \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0443. \u0412\u0441\u0456 \u0434\u0430\u043d\u0456 \u043f\u0435\u0440\u0435\u043e\u0431\u043b\u0456\u043a\u0443 \u0437\u0431\u0435\u0440\u0456\u0433\u0430\u044e\u0442\u044c\u0441\u044f \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443 \u0434\u043b\u044f \u0430\u043d\u0430\u043b\u0456\u0437\u0443 \u0442\u0430 \u0437\u0432\u0456\u0442\u043d\u043e\u0441\u0442\u0456."]})]})})]}),(0,Et.jsx)(hc,{isOpen:N,onClose:()=>j(!1),item:{id:null===a||void 0===a?void 0:a.product_id,sku:null===a||void 0===a?void 0:a.sku,name:null===a||void 0===a?void 0:a.name,inventory_id:null===a||void 0===a?void 0:a.product_id},order:null,stage:"audit",onSave:async e=>{j(!1),await _(),await S()},existingHistory:b})]}):(0,Et.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:(0,Et.jsxs)("div",{className:"max-w-md w-full bg-white rounded-2xl border border-slate-200 p-6 text-center",children:[(0,Et.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udce6"}),(0,Et.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"\u0422\u043e\u0432\u0430\u0440 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),(0,Et.jsxs)("p",{className:"text-corp-text-main mb-4",children:["SKU: ",n]}),(0,Et.jsx)("button",{onClick:()=>s("/"),className:"px-4 py-2 bg-slate-800 text-white rounded-lg hover:bg-slate-700",children:"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0438\u0441\u044f"})]})})}const ld="https://backrentalhub.farforrent.com.ua";function cd(){const[e,r]=(0,t.useState)([]),[n,s]=(0,t.useState)(!0),[a,i]=(0,t.useState)(null),[o,l]=(0,t.useState)({}),[d,u]=(0,t.useState)({}),h=ge(),[m,p]=(0,t.useState)(""),[f,x]=(0,t.useState)("all"),[g,b]=(0,t.useState)("archived"),[y,v]=(0,t.useState)("date_desc");(0,t.useEffect)(()=>{w()},[g]);const w=async()=>{try{s(!0);const e="archived"===g?"true":"active"===g?"false":"all",t=await fetch("".concat(ld,"/api/decor-orders?status=all&archived=").concat(e,"&limit=1000"),{mode:"cors"}),n=await t.json();r(n.orders||n)}catch(e){console.error("Error fetching orders:",e),alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c. \u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c.")}finally{s(!1)}},N=e=>{const t=e.order_id||parseInt(e.id);a===t?i(null):(i(t),o[t]||(async e=>{try{const t=await fetch("".concat(ld,"/api/orders/").concat(e,"/lifecycle"),{mode:"cors"}),r=await t.json();l(t=>c(c({},t),{},{[e]:r}))}catch(t){console.error("Error fetching lifecycle:",t)}})(t),d[t]||(async e=>{try{const t=await fetch("".concat(ld,"/api/manager/finance/ledger?order_id=").concat(e),{mode:"cors"}),r=await t.json();u(t=>c(c({},t),{},{[e]:r}))}catch(t){console.error("Error fetching finance history:",t)}})(t))},j=[...e.filter(e=>{if(m){var t,r,n;const s=m.toLowerCase();if(!((null===(t=e.order_number)||void 0===t?void 0:t.toLowerCase().includes(s))||(null===(r=e.client_name)||void 0===r?void 0:r.toLowerCase().includes(s))||(null===(n=e.client_phone)||void 0===n?void 0:n.includes(s))))return!1}return"all"===f||e.status===f})].sort((e,t)=>{switch(y){case"date_desc":return new Date(t.created_at)-new Date(e.created_at);case"date_asc":return new Date(e.created_at)-new Date(t.created_at);case"amount_desc":return(t.total_rental||0)-(e.total_rental||0);case"amount_asc":return(e.total_rental||0)-(t.total_rental||0);default:return 0}}),_={awaiting_customer:"\u23f3 \u041e\u0447\u0456\u043a\u0443\u0454 \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f",processing:"\ud83d\udce6 \u0412 \u043e\u0431\u0440\u043e\u0431\u0446\u0456",ready_for_issue:"\u2705 \u0413\u043e\u0442\u043e\u0432\u043e \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456",issued:"\ud83d\ude9a \u0412\u0438\u0434\u0430\u043d\u043e",on_rent:"\ud83c\udfe0 \u0412 \u043e\u0440\u0435\u043d\u0434\u0456",returned:"\u2713 \u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u043e",completed:"\u2713 \u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e",cancelled:"\u274c \u0421\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u043e",declined:"\u274c \u0412\u0456\u0434\u0445\u0438\u043b\u0435\u043d\u043e"},C={awaiting_customer:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",ready_for_issue:"bg-emerald-100 text-emerald-800",issued:"bg-green-100 text-green-800",on_rent:"bg-green-100 text-green-800",returned:"bg-slate-100 text-slate-700",completed:"bg-slate-100 text-slate-700",cancelled:"bg-rose-100 text-rose-800",declined:"bg-rose-100 text-rose-800"};return(0,Et.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,Et.jsx)("div",{className:"bg-white border-b border-slate-200 sticky top-0 z-10",children:(0,Et.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Et.jsx)("button",{onClick:()=>h("/manager"),className:"text-corp-text-main hover:text-corp-text-dark",children:"\u2190 \u041d\u0430\u0437\u0430\u0434"}),(0,Et.jsx)("h1",{className:"text-2xl font-bold text-corp-text-dark",children:"\ud83d\udcc2 \u0410\u0440\u0445\u0456\u0432 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c"}),(0,Et.jsxs)("span",{className:"text-sm text-corp-text-muted",children:[j.length," \u0437 ",e.length," \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c"]})]}),(0,Et.jsx)("button",{onClick:w,className:"px-4 py-2 text-sm bg-white border border-slate-300 rounded-lg hover:bg-slate-50",children:"\ud83d\udd04 \u041e\u043d\u043e\u0432\u0438\u0442\u0438"})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[(0,Et.jsxs)("select",{value:g,onChange:e=>b(e.target.value),className:"px-4 py-2 border-2 border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-blue-50 font-semibold",children:[(0,Et.jsx)("option",{value:"archived",children:"\ud83d\udcc2 \u0410\u0440\u0445\u0456\u0432\u043d\u0456"}),(0,Et.jsx)("option",{value:"active",children:"\ud83d\udccb \u0410\u043a\u0442\u0438\u0432\u043d\u0456"}),(0,Et.jsx)("option",{value:"all",children:"\ud83d\udcca \u0412\u0441\u0456"})]}),(0,Et.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0448\u0443\u043a (\u043d\u043e\u043c\u0435\u0440, \u043a\u043b\u0456\u0454\u043d\u0442, \u0442\u0435\u043b\u0435\u0444\u043e\u043d)...",value:m,onChange:e=>p(e.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,Et.jsxs)("select",{value:f,onChange:e=>x(e.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Et.jsx)("option",{value:"all",children:"\u0412\u0441\u0456 \u0441\u0442\u0430\u0442\u0443\u0441\u0438"}),(0,Et.jsx)("option",{value:"awaiting_customer",children:"\u041e\u0447\u0456\u043a\u0443\u0454 \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f"}),(0,Et.jsx)("option",{value:"processing",children:"\u0412 \u043e\u0431\u0440\u043e\u0431\u0446\u0456"}),(0,Et.jsx)("option",{value:"ready_for_issue",children:"\u0413\u043e\u0442\u043e\u0432\u043e \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456"}),(0,Et.jsx)("option",{value:"issued",children:"\u0412\u0438\u0434\u0430\u043d\u043e"}),(0,Et.jsx)("option",{value:"on_rent",children:"\u0412 \u043e\u0440\u0435\u043d\u0434\u0456"}),(0,Et.jsx)("option",{value:"returned",children:"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u043e"}),(0,Et.jsx)("option",{value:"completed",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e"}),(0,Et.jsx)("option",{value:"cancelled",children:"\u0421\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u043e"}),(0,Et.jsx)("option",{value:"declined",children:"\u0412\u0456\u0434\u0445\u0438\u043b\u0435\u043d\u043e"})]}),(0,Et.jsxs)("select",{value:y,onChange:e=>v(e.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Et.jsx)("option",{value:"date_desc",children:"\u0414\u0430\u0442\u0430 \u2193 (\u043d\u043e\u0432\u0456 \u0441\u043f\u043e\u0447\u0430\u0442\u043a\u0443)"}),(0,Et.jsx)("option",{value:"date_asc",children:"\u0414\u0430\u0442\u0430 \u2191 (\u0441\u0442\u0430\u0440\u0456 \u0441\u043f\u043e\u0447\u0430\u0442\u043a\u0443)"}),(0,Et.jsx)("option",{value:"amount_desc",children:"\u0421\u0443\u043c\u0430 \u2193 (\u0431\u0456\u043b\u044c\u0448\u0456 \u0441\u043f\u043e\u0447\u0430\u0442\u043a\u0443)"}),(0,Et.jsx)("option",{value:"amount_asc",children:"\u0421\u0443\u043c\u0430 \u2191 (\u043c\u0435\u043d\u0448\u0456 \u0441\u043f\u043e\u0447\u0430\u0442\u043a\u0443)"})]}),(0,Et.jsxs)("div",{className:"text-sm text-corp-text-main flex items-center",children:[(0,Et.jsx)("span",{className:"mr-2",children:"\ud83d\udcca"}),"\u0412\u0441\u044c\u043e\u0433\u043e: \u20b4",j.reduce((e,t)=>e+(t.total_rental||0),0).toFixed(0)]})]})]})}),(0,Et.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:n?(0,Et.jsx)("div",{className:"text-center py-12 text-corp-text-muted",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."}):0===j.length?(0,Et.jsx)("div",{className:"text-center py-12 text-corp-text-muted",children:m||"all"!==f?"\u041d\u0435\u043c\u0430\u0454 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c \u0437\u0430 \u043e\u0431\u0440\u0430\u043d\u0438\u043c\u0438 \u0444\u0456\u043b\u044c\u0442\u0440\u0430\u043c\u0438":"\u041d\u0435\u043c\u0430\u0454 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c"}):(0,Et.jsx)("div",{className:"space-y-3",children:j.map(e=>(0,Et.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden",children:[(0,Et.jsx)("div",{onClick:()=>N(e),className:"p-4 cursor-pointer hover:bg-slate-50 transition-colors",children:(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Et.jsx)("span",{className:"text-lg font-semibold text-corp-text-dark",children:e.order_number}),(0,Et.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(C[e.status]||"bg-slate-100 text-slate-700"),children:_[e.status]||e.status}),e.is_archived&&(0,Et.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-slate-200 text-slate-700",children:"\ud83d\udcc2 \u0410\u0440\u0445\u0456\u0432"}),(0,Et.jsx)("span",{className:"text-sm text-corp-text-main",children:new Date(e.created_at).toLocaleDateString("uk-UA")})]}),(0,Et.jsxs)("div",{className:"flex items-center gap-6",children:[(0,Et.jsxs)("div",{className:"text-right",children:[(0,Et.jsx)("div",{className:"text-sm text-corp-text-muted",children:"\u041a\u043b\u0456\u0454\u043d\u0442"}),(0,Et.jsx)("div",{className:"font-medium text-corp-text-dark",children:e.client_name})]}),(0,Et.jsxs)("div",{className:"text-right",children:[(0,Et.jsx)("div",{className:"text-sm text-corp-text-muted",children:"\u0421\u0443\u043c\u0430"}),(0,Et.jsxs)("div",{className:"font-semibold text-corp-text-dark",children:["\u20b4",(e.total_rental||0).toFixed(0)]})]}),(0,Et.jsxs)("div",{className:"text-right",children:[(0,Et.jsx)("div",{className:"text-sm text-corp-text-muted",children:"\u0414\u0430\u0442\u0438"}),(0,Et.jsxs)("div",{className:"text-sm text-corp-text-dark",children:[e.issue_date||e.rental_start_date," \u2192 ",e.return_date||e.rental_end_date]})]}),(0,Et.jsx)("span",{className:"text-slate-400",children:a===(e.order_id||parseInt(e.id))?"\u25bc":"\u25b6"})]})]})}),a===(e.order_id||parseInt(e.id))&&(0,Et.jsx)("div",{className:"border-t border-slate-200 bg-slate-50 p-4",children:(0,Et.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h3",{className:"font-semibold text-corp-text-dark mb-3",children:"\u0406\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f \u043f\u0440\u043e \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),(0,Et.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Et.jsxs)("div",{className:"grid grid-cols-2",children:[(0,Et.jsx)("span",{className:"text-corp-text-main",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d:"}),(0,Et.jsx)("span",{className:"font-medium",children:e.client_phone})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-2",children:[(0,Et.jsx)("span",{className:"text-corp-text-main",children:"Email:"}),(0,Et.jsx)("span",{className:"font-medium",children:e.client_email||"\u2014"})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-2",children:[(0,Et.jsx)("span",{className:"text-corp-text-main",children:"\u0417\u0430\u0441\u0442\u0430\u0432\u0430:"}),(0,Et.jsxs)("span",{className:"font-medium",children:["\u20b4",(e.total_deposit||0).toFixed(0)]})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-2",children:[(0,Et.jsx)("span",{className:"text-corp-text-main",children:"\u0417\u043d\u0438\u0436\u043a\u0430:"}),(0,Et.jsxs)("span",{className:"font-medium",children:[e.discount||0,"%"]})]})]}),(0,Et.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,Et.jsx)("button",{onClick:t=>{t.stopPropagation(),h("/order/".concat(e.id,"/view"))},className:"px-3 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"\u0412\u0456\u0434\u043a\u0440\u0438\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),e.is_archived?(0,Et.jsx)("button",{onClick:t=>{t.stopPropagation(),(async(e,t)=>{if(confirm("\u0420\u043e\u0437\u0430\u0440\u0445\u0456\u0432\u0443\u0432\u0430\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f ".concat(t,"?")))try{const t=await fetch("".concat(ld,"/api/decor-orders/").concat(e,"/unarchive"),{method:"POST",mode:"cors"});if(t.ok)alert("\u2705 \u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0440\u043e\u0437\u0430\u0440\u0445\u0456\u0432\u043e\u0432\u0430\u043d\u043e"),w();else{const e=await t.json();alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430: ".concat(e.detail))}}catch(r){console.error("Error unarchiving order:",r),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430: ".concat(r.message))}})(e.order_id||parseInt(e.id),e.order_number)},className:"px-3 py-1.5 text-sm bg-emerald-600 text-white rounded hover:bg-emerald-700",children:"\u21a9\ufe0f \u0420\u043e\u0437\u0430\u0440\u0445\u0456\u0432\u0443\u0432\u0430\u0442\u0438"}):(0,Et.jsx)("button",{onClick:t=>{t.stopPropagation(),(async(e,t)=>{if(confirm("\u0410\u0440\u0445\u0456\u0432\u0443\u0432\u0430\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f ".concat(t,"?")))try{const t=await fetch("".concat(ld,"/api/decor-orders/").concat(e,"/archive"),{method:"POST",mode:"cors"});if(t.ok)alert("\u2705 \u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0430\u0440\u0445\u0456\u0432\u043e\u0432\u0430\u043d\u043e"),w();else{const e=await t.json();alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430: ".concat(e.detail))}}catch(r){console.error("Error archiving order:",r),alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430: ".concat(r.message))}})(e.order_id||parseInt(e.id),e.order_number)},className:"px-3 py-1.5 text-sm bg-slate-600 text-white rounded hover:bg-slate-700",children:"\ud83d\udcc2 \u0410\u0440\u0445\u0456\u0432\u0443\u0432\u0430\u0442\u0438"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h3",{className:"font-semibold text-corp-text-dark mb-3",children:"\ud83d\udd50 \u0406\u0441\u0442\u043e\u0440\u0456\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u0456\u0432"}),o[e.order_id||parseInt(e.id)]?(0,Et.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:o[e.order_id||parseInt(e.id)].map((e,t)=>(0,Et.jsx)("div",{className:"flex gap-3 text-sm border-l-2 border-blue-200 pl-3 py-1",children:(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("span",{className:"font-semibold text-corp-text-dark",children:e.stage}),e.created_by&&(0,Et.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full",children:e.created_by})]}),(0,Et.jsx)("div",{className:"text-xs text-corp-text-muted mt-0.5",children:new Date(e.created_at).toLocaleString("uk-UA",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}),e.notes&&(0,Et.jsx)("div",{className:"text-xs text-corp-text-main mt-1",children:e.notes})]})},t))}):(0,Et.jsx)("div",{className:"text-sm text-corp-text-muted",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h3",{className:"font-semibold text-corp-text-dark mb-3",children:"\ud83d\udcb0 \u0424\u0456\u043d\u0430\u043d\u0441\u043e\u0432\u0430 \u0456\u0441\u0442\u043e\u0440\u0456\u044f"}),d[e.order_id||parseInt(e.id)]?(0,Et.jsxs)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[d[e.order_id||parseInt(e.id)].map((e,t)=>(0,Et.jsx)("div",{className:"flex gap-3 text-sm border-l-2 border-emerald-200 pl-3 py-1",children:(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsxs)("span",{className:"font-semibold text-corp-text-dark",children:["payment"===e.type&&"\ud83d\udcb5 \u041e\u043f\u043b\u0430\u0442\u0430","deposit_hold"===e.type&&"\ud83d\udd12 \u0417\u0430\u0441\u0442\u0430\u0432\u0430","deposit_release"===e.type&&"\u21a9\ufe0f \u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u0437\u0430\u0441\u0442\u0430\u0432\u0438","damage"===e.type&&"\u26a0\ufe0f \u0417\u0431\u0438\u0442\u043a\u0438",!["payment","deposit_hold","deposit_release","damage"].includes(e.type)&&e.type]}),(0,Et.jsxs)("span",{className:"text-sm font-semibold ".concat(e.credit>0?"text-emerald-600":"text-rose-600"),children:[e.credit>0?"+":"-","\u20b4",Math.abs(e.credit||e.debit||0).toFixed(0)]})]}),(0,Et.jsxs)("div",{className:"text-xs text-corp-text-muted mt-0.5 flex items-center gap-2",children:[(0,Et.jsx)("span",{children:new Date(e.date).toLocaleString("uk-UA",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}),e.payment_method&&(0,Et.jsxs)("span",{children:["\u2022 ",e.payment_method]}),e.created_by&&(0,Et.jsx)("span",{className:"bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-full text-xs",children:e.created_by})]}),e.notes&&(0,Et.jsx)("div",{className:"text-xs text-corp-text-main mt-1",children:e.notes})]})},t)),(0,Et.jsx)("div",{className:"border-t border-slate-300 pt-2 mt-3",children:(0,Et.jsxs)("div",{className:"flex justify-between text-sm font-semibold",children:[(0,Et.jsx)("span",{children:"\u0412\u0441\u044c\u043e\u0433\u043e \u043e\u043f\u043b\u0430\u0447\u0435\u043d\u043e:"}),(0,Et.jsxs)("span",{className:"text-emerald-600",children:["\u20b4",d[e.order_id||parseInt(e.id)].filter(e=>"payment"===e.type).reduce((e,t)=>e+(t.credit||0),0).toFixed(0)]})]})})]}):(0,Et.jsx)("div",{className:"text-sm text-corp-text-muted",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]})]})})]},e.id))})})]})}const dd="https://backrentalhub.farforrent.com.ua";function ud(){const[e,r]=(0,t.useState)(null),[n,s]=(0,t.useState)(!1),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(null);(0,t.useEffect)(()=>{c(),d();const e=setInterval(()=>{c(),d()},3e4);return()=>clearInterval(e)},[]);const c=async()=>{try{s(!0);const e=await is.get("".concat(dd,"/api/sync/last-sync"));r(e.data)}catch(e){console.error("Error loading sync info:",e)}finally{s(!1)}},d=async()=>{try{const e=await is.get("".concat(dd,"/api/sync/status"));l(e.data)}catch(e){console.error("Error loading sync status:",e)}},u=e=>{if(!e)return"\u041d\u0456\u043a\u043e\u043b\u0438";return new Date(e).toLocaleString("uk-UA")};return(0,Et.jsxs)("div",{className:"p-6 max-w-5xl mx-auto",children:[(0,Et.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"\ud83d\udd04 \u0421\u0438\u043d\u0445\u0440\u043e\u043d\u0456\u0437\u0430\u0446\u0456\u044f \u0437 OpenCart"}),(0,Et.jsxs)("div",{className:"grid md:grid-cols-3 gap-4 mb-6",children:[(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,Et.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"\ud83d\udce6 \u0422\u043e\u0432\u0430\u0440\u0438"}),e?(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.products.total_count.toLocaleString()}),(0,Et.jsxs)("div",{className:"text-xs text-gray-400 mt-2",children:["\u041e\u0441\u0442\u0430\u043d\u043d\u044f \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0456\u0437\u0430\u0446\u0456\u044f:",(0,Et.jsx)("br",{}),u(e.products.last_sync)]})]}):(0,Et.jsx)("div",{className:"text-gray-400",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,Et.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"\ud83d\udcc1 \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457"}),e?(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.categories.total_count}),(0,Et.jsxs)("div",{className:"text-xs text-gray-400 mt-2",children:["\u041e\u0441\u0442\u0430\u043d\u043d\u044f \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0456\u0437\u0430\u0446\u0456\u044f:",(0,Et.jsx)("br",{}),u(e.categories.last_sync)]})]}):(0,Et.jsx)("div",{className:"text-gray-400",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,Et.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"\ud83d\uded2 \u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),e?(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:e.orders.total_count}),(0,Et.jsxs)("div",{className:"text-xs text-gray-400 mt-2",children:["\u041e\u0441\u0442\u0430\u043d\u043d\u044f \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0456\u0437\u0430\u0446\u0456\u044f:",(0,Et.jsx)("br",{}),u(e.orders.last_sync)]})]}):(0,Et.jsx)("div",{className:"text-gray-400",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]})]}),(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,Et.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0456\u0437\u0430\u0446\u0456\u0457"}),o&&(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,Et.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(o.is_running?"bg-green-500 animate-pulse":"bg-gray-300")}),(0,Et.jsx)("span",{className:"font-medium",children:o.is_running?"\ud83d\udd04 \u0421\u0438\u043d\u0445\u0440\u043e\u043d\u0456\u0437\u0430\u0446\u0456\u044f \u0432\u0438\u043a\u043e\u043d\u0443\u0454\u0442\u044c\u0441\u044f...":"\u2705 \u0413\u043e\u0442\u043e\u0432\u043e \u0434\u043e \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0456\u0437\u0430\u0446\u0456\u0457"})]}),(0,Et.jsx)("div",{className:"text-sm text-gray-600 mb-4",children:o.supervisor_status}),o.last_log_lines&&o.last_log_lines.length>0&&(0,Et.jsxs)("div",{className:"mt-4",children:[(0,Et.jsx)("div",{className:"text-sm font-medium mb-2",children:"\u041e\u0441\u0442\u0430\u043d\u043d\u0456 \u0437\u0430\u043f\u0438\u0441\u0438 \u043b\u043e\u0433\u0443:"}),(0,Et.jsx)("div",{className:"bg-gray-50 rounded p-3 text-xs font-mono max-h-48 overflow-y-auto",children:o.last_log_lines.map((e,t)=>(0,Et.jsx)("div",{className:"text-gray-700",children:e},t))})]})]})]}),(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Et.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\u0414\u0456\u0457"}),(0,Et.jsx)("button",{onClick:async()=>{if(confirm("\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0438 \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0456\u0437\u0430\u0446\u0456\u044e \u0437 OpenCart? \u0426\u0435 \u043c\u043e\u0436\u0435 \u0437\u0430\u0439\u043d\u044f\u0442\u0438 \u043a\u0456\u043b\u044c\u043a\u0430 \u0445\u0432\u0438\u043b\u0438\u043d."))try{i(!0);const e=await is.post("".concat(dd,"/api/sync/trigger"));alert("\u2705 "+e.data.message),setTimeout(()=>{c(),d()},5e3)}catch(r){var e,t;alert("\u274c \u041f\u043e\u043c\u0438\u043b\u043a\u0430: "+((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||r.message))}finally{i(!1)}},disabled:a||o&&o.is_running,className:"px-6 py-3 rounded-lg font-medium ".concat(a||o&&o.is_running?"bg-gray-300 cursor-not-allowed":"corp-btn corp-btn-primary"),children:a?"\u23f3 \u0417\u0430\u043f\u0443\u0441\u043a...":"\ud83d\udd04 \u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0438 \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0456\u0437\u0430\u0446\u0456\u044e \u0437\u0430\u0440\u0430\u0437"}),(0,Et.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:[(0,Et.jsx)("strong",{children:"\u041f\u0440\u0438\u043c\u0456\u0442\u043a\u0430:"})," \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u043d\u0430 \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0456\u0437\u0430\u0446\u0456\u044f \u0432\u0438\u043a\u043e\u043d\u0443\u0454\u0442\u044c\u0441\u044f \u043a\u043e\u0436\u043d\u0456 30 \u0445\u0432\u0438\u043b\u0438\u043d. \u0412\u0438 \u043c\u043e\u0436\u0435\u0442\u0435 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0438 \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0456\u0437\u0430\u0446\u0456\u044e \u0432\u0440\u0443\u0447\u043d\u0443, \u044f\u043a\u0449\u043e \u043f\u043e\u0442\u0440\u0456\u0431\u043d\u043e \u043e\u043d\u043e\u0432\u0438\u0442\u0438 \u0434\u0430\u043d\u0456 \u043d\u0435\u0433\u0430\u0439\u043d\u043e."]})]}),(0,Et.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 mt-6",children:[(0,Et.jsx)("h3",{className:"font-bold text-blue-900 mb-2",children:"\u2139\ufe0f \u0429\u043e \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0456\u0437\u0443\u0454\u0442\u044c\u0441\u044f?"}),(0,Et.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,Et.jsx)("li",{children:"\u2713 \u0422\u043e\u0432\u0430\u0440\u0438 \u0437 OpenCart (\u043d\u0430\u0437\u0432\u0438, \u0446\u0456\u043d\u0438, \u0444\u043e\u0442\u043e, SKU)"}),(0,Et.jsx)("li",{children:"\u2713 \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457 \u0442\u043e\u0432\u0430\u0440\u0456\u0432"}),(0,Et.jsx)("li",{children:"\u2713 \u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u0456\u0432 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0456"}),(0,Et.jsx)("li",{children:"\u2713 \u041d\u043e\u0432\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0432\u0456\u0434 \u043a\u043b\u0456\u0454\u043d\u0442\u0456\u0432"}),(0,Et.jsx)("li",{children:"\u2713 \u0410\u0442\u0440\u0438\u0431\u0443\u0442\u0438 \u0442\u043e\u0432\u0430\u0440\u0456\u0432 (\u043a\u043e\u043b\u0456\u0440, \u0440\u043e\u0437\u043c\u0456\u0440 \u0442\u043e\u0449\u043e)"})]})]})]})}const hd={neutral:"bg-slate-100 text-slate-700 border-slate-200",info:"bg-blue-100 text-blue-800 border-blue-200",ok:"bg-emerald-100 text-emerald-800 border-emerald-200",warn:"bg-amber-100 text-amber-900 border-amber-200",danger:"bg-rose-100 text-rose-800 border-rose-200",violet:"bg-violet-100 text-violet-800 border-violet-200"};function md(e){let{tone:t="neutral",children:r,icon:n,className:s=""}=e;const a=hd[t]||hd.neutral;return(0,Et.jsxs)("span",{className:"inline-flex items-center gap-1.5 rounded-full border px-3 py-1 text-xs font-semibold ".concat(a," ").concat(s),children:[n&&(0,Et.jsx)("span",{children:n}),r]})}const pd={WAITING_CONFIRMATION:{key:"WAITING_CONFIRMATION",title:"\u041e\u0447\u0456\u043a\u0443\u0454 \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f",mode:"\u0420\u0435\u0436\u0438\u043c \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f",tone:"warn",color:"bg-amber-50",borderColor:"border-amber-200",icon:"\u23f3",primaryAction:"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438 \u0442\u0430 \u043f\u0440\u0438\u0439\u043d\u044f\u0442\u0438",secondaryActions:["\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438","\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"]},PROCESSING:{key:"PROCESSING",title:"\u0412 \u043e\u0431\u0440\u043e\u0431\u0446\u0456",mode:"\u0420\u0435\u0436\u0438\u043c \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457",tone:"info",color:"bg-blue-50",borderColor:"border-blue-200",icon:"\u2699\ufe0f",primaryAction:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u044e",secondaryActions:["\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"]},READY_FOR_ISSUE:{key:"READY_FOR_ISSUE",title:"\u0413\u043e\u0442\u043e\u0432\u043e \u0434\u043e \u0432\u0438\u0434\u0430\u0447\u0456",mode:"\u0420\u0435\u0436\u0438\u043c \u0432\u0438\u0434\u0430\u0447\u0456",tone:"ok",color:"bg-emerald-50",borderColor:"border-emerald-200",icon:"\u2705",primaryAction:"\u0412\u0438\u0434\u0430\u0442\u0438 \u043a\u043b\u0456\u0454\u043d\u0442\u0443",secondaryActions:["\u0414\u0440\u0443\u043a \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0457","\u0414\u0440\u0443\u043a QR"]},ISSUED:{key:"ISSUED",title:"\u0412\u0438\u0434\u0430\u043d\u043e",mode:"\u0420\u0435\u0436\u0438\u043c \u043e\u0440\u0435\u043d\u0434\u0438 (read-only)",tone:"info",color:"bg-indigo-50",borderColor:"border-indigo-200",icon:"\ud83d\udce4",primaryAction:"\u0420\u043e\u0437\u043f\u043e\u0447\u0430\u0442\u0438 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f",secondaryActions:["\u041d\u0430\u0434\u0456\u0441\u043b\u0430\u0442\u0438 \u043d\u0430\u0433\u0430\u0434\u0443\u0432\u0430\u043d\u043d\u044f"]},INTAKE:{key:"INTAKE",title:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f",mode:"\u0420\u0435\u0436\u0438\u043c \u043f\u0440\u0438\u0439\u043c\u0430\u043d\u043d\u044f",tone:"warn",color:"bg-orange-50",borderColor:"border-orange-200",icon:"\ud83d\udd19",primaryAction:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438 \u043f\u0440\u0438\u0439\u043c\u0430\u043d\u043d\u044f",secondaryActions:["\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0441\u0442\u0430\u043d"]},CLOSED:{key:"CLOSED",title:"\u0417\u0430\u043a\u0440\u0438\u0442\u043e",mode:"\u0410\u0440\u0445\u0456\u0432",tone:"neutral",color:"bg-slate-100",borderColor:"border-slate-200",icon:"\ud83d\udcc1",primaryAction:null,secondaryActions:["\u0415\u043a\u0441\u043f\u043e\u0440\u0442","\u0412\u0456\u0434\u043a\u0440\u0438\u0442\u0438 \u043a\u0435\u0439\u0441"]}},fd={awaiting_customer:"WAITING_CONFIRMATION",processing:"PROCESSING",ready_for_issue:"READY_FOR_ISSUE",ready:"READY_FOR_ISSUE",issued:"ISSUED",on_rent:"ISSUED",returning:"INTAKE",completed:"CLOSED",archived:"CLOSED",cancelled:"CLOSED",preparation:"PROCESSING",2:"WAITING_CONFIRMATION",19:"PROCESSING",24:"INTAKE",5:"CLOSED"};function xd(e){return pd[fd[e]||"WAITING_CONFIRMATION"]||pd.WAITING_CONFIRMATION}function gd(e){let{orderId:t,orderNumber:r,status:n,issueDate:s,returnDate:a,createdAt:i,title:o,backUrl:l="/manager"}=e;const c=ge(),d=xd(n),u=e=>{if(!e)return"\u2014";return new Date(e).toLocaleDateString("uk-UA",{day:"numeric",month:"short"})},h=(()=>{if(!s||!a)return null;const e=new Date(s),t=new Date(a),r=Math.ceil((t-e)/864e5);return r>0?r:1})();return(0,Et.jsx)("div",{className:"bg-white border-b border-slate-200 sticky top-0 z-10",children:(0,Et.jsxs)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 py-4",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,Et.jsxs)("button",{onClick:()=>c(l),className:"flex items-center gap-1 text-sm text-slate-600 hover:text-slate-900 transition-colors",children:[(0,Et.jsx)("span",{children:"\u2190"}),(0,Et.jsx)("span",{children:"\u041d\u0430\u0437\u0430\u0434"})]}),(0,Et.jsx)("div",{className:"text-sm text-slate-400",children:"Order Workspace"})]}),(0,Et.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,Et.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,Et.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-slate-900",children:o||"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f #".concat(r||t)}),(0,Et.jsx)(md,{tone:d.tone,icon:d.icon,children:d.title})]}),(0,Et.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[(0,Et.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm",children:[(0,Et.jsx)("div",{className:"text-xs text-slate-500",children:"\u0414\u0430\u0442\u0438"}),(0,Et.jsxs)("div",{className:"font-medium text-slate-800",children:[u(s)," \u2014 ",u(a),h&&(0,Et.jsxs)("span",{className:"text-slate-500",children:[" \u2022 ",h," \u0434\u043d."]})]})]}),(0,Et.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm",children:[(0,Et.jsx)("div",{className:"text-xs text-slate-500",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,Et.jsx)("div",{className:"font-medium text-slate-800",children:d.mode})]})]})]})]})})}function bd(e){let{status:t,onPrimaryAction:r,onSecondaryAction:n,onSave:s,primaryLabel:a,primaryDisabled:i=!1,primaryDisabledReason:o,saving:l=!1,showSave:c=!0,additionalActions:d=[],children:u}=e;const h=xd(t),m=a||h.primaryAction;return(0,Et.jsx)("div",{className:"sticky bottom-0 bg-white border-t border-slate-200 shadow-lg",children:(0,Et.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 py-4",children:(0,Et.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[(0,Et.jsx)("div",{className:"flex items-center gap-2 text-sm",children:u||(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsx)("span",{className:"text-slate-500",children:"\u0421\u0442\u0430\u0442\u0443\u0441:"}),(0,Et.jsx)("span",{className:"font-medium text-slate-800",children:h.title})]})}),(0,Et.jsxs)("div",{className:"flex flex-wrap items-center justify-end gap-2 w-full sm:w-auto",children:[d.map((e,t)=>(0,Et.jsx)("button",{onClick:e.onClick,disabled:e.disabled,className:"\n                  rounded-lg border px-4 py-2 text-sm font-medium transition-colors\n                  disabled:opacity-50 disabled:cursor-not-allowed\n                  ".concat("danger"===e.variant?"border-rose-200 text-rose-600 hover:bg-rose-50":"border-slate-200 text-slate-700 hover:bg-slate-50","\n                "),children:e.label},t)),c&&s&&(0,Et.jsx)("button",{onClick:s,disabled:l,className:"rounded-lg border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 transition-colors disabled:opacity-50",children:l?"\u23f3 \u0417\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f...":"\ud83d\udcbe \u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"}),m&&r&&(0,Et.jsx)("button",{onClick:r,disabled:i||l,title:o,className:"\n                  rounded-lg px-4 py-2 text-sm font-medium transition-colors\n                  disabled:opacity-50 disabled:cursor-not-allowed\n                  ".concat(i?"bg-slate-400 text-white cursor-not-allowed":"bg-slate-900 text-white hover:bg-slate-800","\n                "),children:m})]})]})})})}function yd(e){let{orderId:t,orderNumber:r,status:n,issueDate:s,returnDate:a,createdAt:i,headerTitle:o,backUrl:l,leftRail:c,children:d,onPrimaryAction:u,onSave:h,primaryLabel:m,primaryDisabled:p,primaryDisabledReason:f,saving:x,showSave:g,footerActions:b,footerChildren:y,loading:v}=e;const w=xd(n);return v?(0,Et.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:(0,Et.jsx)("div",{className:"text-slate-500",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})}):(0,Et.jsxs)("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[(0,Et.jsx)(gd,{orderId:t,orderNumber:r,status:n,issueDate:s,returnDate:a,createdAt:i,title:o,backUrl:l}),(0,Et.jsx)("div",{className:"flex-1 mx-auto max-w-7xl w-full px-4 sm:px-6 py-6",children:(0,Et.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,Et.jsx)("aside",{className:"col-span-12 lg:col-span-4 space-y-4",children:c}),(0,Et.jsxs)("main",{className:"col-span-12 lg:col-span-8 rounded-2xl border p-5 shadow-sm ".concat(w.color," ").concat(w.borderColor),children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between gap-3 mb-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-sm text-slate-500",children:"\u0426\u0435\u043d\u0442\u0440\u0430\u043b\u044c\u043d\u0430 \u0437\u043e\u043d\u0430"}),(0,Et.jsx)("div",{className:"text-lg font-semibold text-slate-800",children:w.title})]}),(0,Et.jsx)("div",{className:"flex items-center gap-2",children:(0,Et.jsx)("span",{className:"text-xs text-slate-500",children:w.mode})})]}),(0,Et.jsx)("div",{className:"space-y-4",children:d})]})]})}),(0,Et.jsx)(bd,{status:n,onPrimaryAction:u,onSave:h,primaryLabel:m,primaryDisabled:p,primaryDisabledReason:f,saving:x,showSave:g,additionalActions:b,children:y})]})}function vd(e){let{title:r,hint:n,tone:s="neutral",icon:a,children:i,actions:o=[],collapsible:l=!1,defaultCollapsed:c=!1,className:d="",rightContent:u}=e;const[h,m]=t.useState(c);return(0,Et.jsxs)("div",{className:"rounded-xl border bg-white p-4 shadow-sm ".concat(d),children:[(0,Et.jsxs)("div",{className:"flex items-start justify-between gap-3 mb-3",children:[(0,Et.jsxs)("div",{className:"flex-1",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[l&&(0,Et.jsx)("button",{onClick:()=>m(!h),className:"text-slate-400 hover:text-slate-600 transition-colors",children:h?"\u25b6":"\u25bc"}),(0,Et.jsx)("h3",{className:"font-semibold text-slate-800",children:r}),"neutral"!==s&&(0,Et.jsx)(md,{tone:s,icon:a,children:"ok"===s?"OK":"warn"===s?"!":"danger"===s?"!!":s})]}),n&&!h&&(0,Et.jsx)("p",{className:"mt-1 text-sm text-slate-500",children:n})]}),u&&(0,Et.jsx)("div",{className:"flex-shrink-0",children:u})]}),!h&&i&&(0,Et.jsx)("div",{className:"mb-3",children:i}),!h&&o.length>0&&(0,Et.jsx)("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-slate-100",children:o.map((e,t)=>(0,Et.jsx)("button",{onClick:e.onClick,disabled:e.disabled,className:"\n                rounded-lg border px-3 py-1.5 text-sm font-medium transition-colors\n                disabled:opacity-50 disabled:cursor-not-allowed\n                ".concat("primary"===e.variant?"bg-slate-900 text-white border-slate-900 hover:bg-slate-800":"success"===e.variant?"bg-emerald-600 text-white border-emerald-600 hover:bg-emerald-700":"danger"===e.variant?"bg-rose-600 text-white border-rose-600 hover:bg-rose-700":"bg-white text-slate-700 border-slate-200 hover:bg-slate-50","\n              "),children:e.label},t))})]})}function wd(e){let{name:t,phone:r,email:n,tier:s,orderCount:a,onCopyPhone:i,onSendEmail:o}=e;const l={new:{label:"\u041d\u043e\u0432\u0438\u0439",color:"bg-blue-100 text-blue-800"},regular:{label:"\u041f\u043e\u0441\u0442\u0456\u0439\u043d\u0438\u0439",color:"bg-emerald-100 text-emerald-800"},vip:{label:"VIP",color:"bg-amber-100 text-amber-800"}},c=l[s]||l.new;return(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Et.jsx)("h3",{className:"font-semibold text-slate-800",children:"\u041a\u043b\u0456\u0454\u043d\u0442"}),s&&(0,Et.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded-full font-medium ".concat(c.color),children:[c.label,a>0&&" (".concat(a,")")]})]}),(0,Et.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-xs text-slate-500 mb-0.5",children:"\u0406\u043c\u02bc\u044f"}),(0,Et.jsx)("div",{className:"font-medium text-slate-800",children:t||"\u2014"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-xs text-slate-500 mb-0.5",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,Et.jsxs)("a",{href:"tel:".concat(r),className:"font-medium text-blue-600 hover:text-blue-800 flex items-center gap-1",children:["\ud83d\udcde ",r||"\u2014"]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-xs text-slate-500 mb-0.5",children:"Email"}),(0,Et.jsx)("div",{className:"font-medium text-slate-800 break-words text-xs",children:n||"\u041d\u0435 \u0432\u043a\u0430\u0437\u0430\u043d\u043e"})]})]}),(0,Et.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,Et.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(r||""),null===i||void 0===i||i()},className:"rounded-lg border border-slate-200 px-3 py-1.5 text-sm hover:bg-slate-50 transition-colors",children:"\ud83d\udccb \u041a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438 \u0442\u0435\u043b\u0435\u0444\u043e\u043d"}),n&&(0,Et.jsx)("button",{onClick:o,className:"rounded-lg border border-slate-200 px-3 py-1.5 text-sm hover:bg-slate-50 transition-colors",children:"\u2709\ufe0f Email"})]})]})}function Nd(e){let{rentAmount:t=0,depositAmount:r=0,prepayment:n=0,discount:s=0,lateFee:a=0,damageFee:i=0,cleaningFee:o=0,isPaid:l=!1,showGate:c=!1,gateMessage:d,gateTone:u="warn"}=e;const h=e=>(Number(e)||0).toLocaleString("uk-UA",{maximumFractionDigits:0}),m=t*s/100,p=t-m-n+a+i+o,f=Math.max(0,p),x=l||f<=0;return(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Et.jsx)("h3",{className:"font-semibold text-slate-800",children:"\u0424\u0456\u043d\u0430\u043d\u0441\u043e\u0432\u0438\u0439 \u0441\u0442\u0430\u0442\u0443\u0441"}),(0,Et.jsx)(md,{tone:x?"ok":"warn",children:x?"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e":"\u0414\u043e \u0441\u043f\u043b\u0430\u0442\u0438 \u20b4".concat(h(f))})]}),(0,Et.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsx)("span",{className:"text-slate-600",children:"\u041e\u0440\u0435\u043d\u0434\u0430"}),(0,Et.jsxs)("span",{className:"font-medium text-slate-800",children:["\u20b4 ",h(t)]})]}),s>0&&(0,Et.jsxs)("div",{className:"flex items-center justify-between text-emerald-600",children:[(0,Et.jsxs)("span",{children:["\u0417\u043d\u0438\u0436\u043a\u0430 (",s,"%)"]}),(0,Et.jsxs)("span",{className:"font-medium",children:["\u2212\u20b4 ",h(m)]})]}),(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsx)("span",{className:"text-slate-600",children:"\u0417\u0430\u0441\u0442\u0430\u0432\u0430"}),(0,Et.jsxs)("span",{className:"font-medium text-slate-800",children:["\u20b4 ",h(r)]})]}),n>0&&(0,Et.jsxs)("div",{className:"flex items-center justify-between text-emerald-600",children:[(0,Et.jsx)("span",{children:"\u041f\u0435\u0440\u0435\u0434\u043f\u043b\u0430\u0442\u0430"}),(0,Et.jsxs)("span",{className:"font-medium",children:["\u2212\u20b4 ",h(n)]})]}),(a>0||i>0||o>0)&&(0,Et.jsxs)("div",{className:"pt-2 border-t border-slate-100 space-y-2",children:[a>0&&(0,Et.jsxs)("div",{className:"flex items-center justify-between text-rose-600",children:[(0,Et.jsx)("span",{children:"\u041f\u0435\u043d\u044f \u0437\u0430 \u043f\u0440\u043e\u0441\u0442\u0440\u043e\u0447\u0435\u043d\u043d\u044f"}),(0,Et.jsxs)("span",{className:"font-medium",children:["+\u20b4 ",h(a)]})]}),i>0&&(0,Et.jsxs)("div",{className:"flex items-center justify-between text-rose-600",children:[(0,Et.jsx)("span",{children:"\u0417\u0431\u0438\u0442\u043a\u0438"}),(0,Et.jsxs)("span",{className:"font-medium",children:["+\u20b4 ",h(i)]})]}),o>0&&(0,Et.jsxs)("div",{className:"flex items-center justify-between text-amber-600",children:[(0,Et.jsx)("span",{children:"\u0427\u0438\u0441\u0442\u043a\u0430"}),(0,Et.jsxs)("span",{className:"font-medium",children:["+\u20b4 ",h(o)]})]})]}),(0,Et.jsx)("div",{className:"pt-2 border-t border-slate-200",children:(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsx)("span",{className:"font-semibold text-slate-800",children:"\u0414\u043e \u0441\u043f\u043b\u0430\u0442\u0438"}),(0,Et.jsxs)("span",{className:"font-bold text-lg ".concat(x?"text-emerald-600":"text-slate-900"),children:["\u20b4 ",h(f)]})]})})]}),c&&d&&(0,Et.jsxs)("div",{className:"\n          mt-3 rounded-xl border p-3 text-sm\n          ".concat("danger"===u?"bg-rose-50 border-rose-200":"ok"===u?"bg-emerald-50 border-emerald-200":"bg-amber-50 border-amber-200","\n        "),children:[(0,Et.jsx)("div",{className:"font-medium",children:"UI Gate"}),(0,Et.jsx)("div",{className:"mt-1 text-slate-700",children:d})]})]})}function jd(e){let{events:r=[],maxVisible:n=5}=e;const[s,a]=t.useState(!1),i=s?r:r.slice(0,n),o=r.length>n,l={green:"bg-emerald-500",red:"bg-rose-500",blue:"bg-blue-500",amber:"bg-amber-500",slate:"bg-slate-400"};return(0,Et.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[(0,Et.jsx)("h3",{className:"font-semibold text-slate-800 mb-3",children:"\u0422\u0430\u0439\u043c\u043b\u0430\u0439\u043d"}),0===r.length?(0,Et.jsx)("div",{className:"text-sm text-slate-400 text-center py-4",children:"\u041d\u0435\u043c\u0430\u0454 \u043f\u043e\u0434\u0456\u0439"}):(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsx)("ol",{className:"space-y-3 text-sm max-h-60 overflow-auto",children:i.map((e,t)=>(0,Et.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Et.jsx)("div",{className:"mt-1.5 h-2 w-2 rounded-full flex-shrink-0 ".concat(l[e.tone]||l.slate)}),(0,Et.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Et.jsx)("div",{className:"font-medium text-slate-800",children:e.text}),(0,Et.jsxs)("div",{className:"text-xs text-slate-500 flex items-center gap-2",children:[(0,Et.jsx)("span",{children:e.at}),e.user&&(0,Et.jsxs)("span",{children:["\u2022 ",e.user]})]})]})]},t))}),o&&(0,Et.jsx)("button",{onClick:()=>a(!s),className:"mt-3 w-full text-sm text-blue-600 hover:text-blue-800 font-medium",children:s?"\u0417\u0433\u043e\u0440\u043d\u0443\u0442\u0438":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 \u0449\u0435 ".concat(r.length-n)})]})]})}function _d(e){let{clientName:r,clientPhone:n,clientEmail:s,clientType:a="retail",manager:i,discount:o=0,onUpdateDiscount:l,onImportFromCRM:c,readOnly:d=!1}=e;const[u,h]=(0,t.useState)(o);return(0,Et.jsx)(vd,{title:"\ud83d\udc64 \u041a\u043b\u0456\u0454\u043d\u0442 \u0442\u0430 \u0443\u043c\u043e\u0432\u0438",hint:"\u0406\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f \u043f\u0440\u043e \u043a\u043b\u0456\u0454\u043d\u0442\u0430 \u2022 \u0442\u0438\u043f \u2022 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u2022 \u0437\u043d\u0438\u0436\u043a\u0430",tone:"neutral",actions:d?[]:[{label:"\ud83d\udcbe \u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u043d\u0438\u0436\u043a\u0443",onClick:()=>{null===l||void 0===l||l(u)}},...c?[{label:"\ud83d\udce5 \u0406\u043c\u043f\u043e\u0440\u0442 \u0437 CRM",onClick:c}]:[]],children:(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"text-xs text-slate-500",children:"\u0406\u043c\u02bc\u044f \u043a\u043b\u0456\u0454\u043d\u0442\u0430"}),(0,Et.jsx)("div",{className:"font-medium text-slate-800",children:r||"\u2014"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"text-xs text-slate-500",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,Et.jsx)("a",{href:"tel:".concat(n),className:"block font-medium text-blue-600 hover:text-blue-800",children:n||"\u2014"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"text-xs text-slate-500",children:"Email"}),(0,Et.jsx)("div",{className:"font-medium text-slate-800 text-sm break-words",children:s||"\u041d\u0435 \u0432\u043a\u0430\u0437\u0430\u043d\u043e"})]})]}),(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"text-xs text-slate-500",children:"\u0422\u0438\u043f \u043a\u043b\u0456\u0454\u043d\u0442\u0430"}),(0,Et.jsx)("div",{className:"font-medium text-slate-800",children:"wholesale"===a?"\ud83c\udfe2 \u041e\u043f\u0442":"\ud83d\udc64 \u0420\u043e\u0437\u0434\u0440\u0456\u0431"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"text-xs text-slate-500",children:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"}),(0,Et.jsx)("div",{className:"font-medium text-slate-800",children:i||"\u041d\u0435 \u043f\u0440\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043e"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"text-xs text-slate-500",children:"\u0417\u043d\u0438\u0436\u043a\u0430 (%)"}),d?(0,Et.jsxs)("div",{className:"font-medium text-slate-800",children:[o,"%"]}):(0,Et.jsx)("input",{type:"number",min:"0",max:"100",value:u,onChange:e=>h(parseFloat(e.target.value)||0),className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 outline-none"})]})]})]})})}function Cd(e){let{issueDate:r,returnDate:n,issueTime:s="11:30\u201312:00",returnTime:a="\u0434\u043e 17:00",rentalDays:i=1,onUpdate:o,readOnly:l=!1}=e;const[c,d]=(0,t.useState)(r||""),[u,h]=(0,t.useState)(n||""),[m,p]=(0,t.useState)(s),[f,x]=(0,t.useState)(a),[g,b]=(0,t.useState)(i),y=(()=>{if(!c||!u)return null;const e=new Date(c),t=new Date(u),r=Math.ceil((t-e)/864e5);return r>0?r:1})();return(0,Et.jsx)(vd,{title:"\ud83d\udcc5 \u0414\u0430\u0442\u0438 \u043e\u0440\u0435\u043d\u0434\u0438",hint:"\u0412\u0438\u0434\u0430\u0447\u0430 / \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u2022 \u0447\u0430\u0441 \u2022 \u043a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0434\u0456\u0431",tone:"neutral",actions:l?[]:[{label:"\ud83d\udcbe \u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0434\u0430\u0442\u0438",onClick:()=>{null===o||void 0===o||o({issueDate:c,returnDate:u,issueTime:m,returnTime:f,rentalDays:g})},variant:"primary"}],children:(0,Et.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"\u0414\u0430\u0442\u0430 \u0432\u0438\u0434\u0430\u0447\u0456"}),l?(0,Et.jsx)("div",{className:"font-medium text-slate-800",children:c||"\u2014"}):(0,Et.jsx)("input",{type:"date",value:c,onChange:e=>d(e.target.value),className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 outline-none"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"\u0427\u0430\u0441 \u0432\u0438\u0434\u0430\u0447\u0456"}),l?(0,Et.jsx)("div",{className:"font-medium text-slate-800",children:m}):(0,Et.jsx)("select",{value:m,onChange:e=>p(e.target.value),className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 outline-none",children:["11:30\u201312:00","12:00\u201312:30","16:30\u201317:00"].map(e=>(0,Et.jsx)("option",{value:e,children:e},e))})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0434\u0456\u0431"}),l?(0,Et.jsxs)("div",{className:"font-medium text-slate-800",children:[g," \u0434\u043d."]}):(0,Et.jsx)("input",{type:"number",min:"1",value:g,onChange:e=>b(parseInt(e.target.value)||1),className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 outline-none"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f"}),l?(0,Et.jsx)("div",{className:"font-medium text-slate-800",children:u||"\u2014"}):(0,Et.jsx)("input",{type:"date",value:u,onChange:e=>h(e.target.value),className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 outline-none"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"\u0427\u0430\u0441 \u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f"}),l?(0,Et.jsx)("div",{className:"font-medium text-slate-800",children:f}):(0,Et.jsx)("select",{value:f,onChange:e=>x(e.target.value),className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 outline-none",children:["\u0434\u043e 17:00","\u0434\u043e 16:00","\u0434\u043e 18:00"].map(e=>(0,Et.jsx)("option",{value:e,children:e},e))})]}),y&&y!==g&&(0,Et.jsx)("div",{className:"col-span-full",children:(0,Et.jsxs)("div",{className:"text-xs text-amber-600 bg-amber-50 rounded-lg px-3 py-2",children:["\u26a0\ufe0f \u041c\u0456\u0436 \u0434\u0430\u0442\u0430\u043c\u0438: ",y," \u0434\u043d., \u0432\u043a\u0430\u0437\u0430\u043d\u043e: ",g," \u0434\u043d."]})})]})})}function Sd(e){let{conflicts:t=[],isChecking:r=!1,hasItems:n=!1,hasDates:s=!1,onCheckConflicts:a}=e;const i=t.length>0,o=t.some(e=>"error"===e.level),l=r?"info":o?"danger":i?"warn":"ok";return(0,Et.jsx)(vd,{title:"\ud83d\udcca \u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0456\u0441\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u0456\u0432",hint:"\u041f\u0435\u0440\u0435\u0432\u0456\u0440\u043a\u0430 \u043a\u043e\u043d\u0444\u043b\u0456\u043a\u0442\u0456\u0432 \u0442\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0456 \u043d\u0430 \u0432\u043a\u0430\u0437\u0430\u043d\u0456 \u0434\u0430\u0442\u0438",tone:l,actions:a?[{label:"\ud83d\udd04 \u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0438\u0442\u0438",onClick:a,disabled:r}]:[],children:r?(0,Et.jsx)("div",{className:"text-center py-4 text-blue-600",children:(0,Et.jsx)("span",{className:"animate-pulse",children:"\u041f\u0435\u0440\u0435\u0432\u0456\u0440\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0456..."})}):n?s?i?(0,Et.jsx)("div",{className:"space-y-2",children:t.map((e,t)=>{return(0,Et.jsx)("div",{className:"rounded-lg border p-3 text-sm ".concat("error"===e.level?"bg-rose-50 border-rose-200":"bg-amber-50 border-amber-200"),children:(0,Et.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsxs)("div",{className:"font-medium text-slate-800",children:[e.sku," \u2014 ",e.name]}),(0,Et.jsx)("div",{className:"text-xs mt-1",children:(0,Et.jsx)(md,{tone:"error"===e.level?"danger":"warn",children:(r=e.type,{out_of_stock:"\ud83d\udd34 \u041d\u0435\u043c\u0430\u0454 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0456",insufficient:"\u274c \u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043d\u044c\u043e",tight_schedule:"\u26a0\ufe0f \u0429\u0456\u043b\u044c\u043d\u0438\u0439 \u0433\u0440\u0430\u0444\u0456\u043a",low_stock:"\ud83d\udce6 \u041c\u0430\u043b\u0438\u0439 \u0437\u0430\u043f\u0430\u0441"}[r]||r)})})]}),(0,Et.jsxs)("div",{className:"text-right text-xs",children:[(0,Et.jsxs)("div",{children:["\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u043e: ",(0,Et.jsx)("b",{children:e.available||0})]}),(0,Et.jsxs)("div",{children:["\u0417\u0430\u043f\u0438\u0442\u0430\u043d\u043e: ",(0,Et.jsx)("b",{children:e.requested||0})]})]})]})},t);var r})}):(0,Et.jsx)("div",{className:"text-center py-4 text-emerald-600",children:"\u2705 \u0412\u0441\u0456 \u0442\u043e\u0432\u0430\u0440\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0456 \u043d\u0430 \u0432\u043a\u0430\u0437\u0430\u043d\u0456 \u0434\u0430\u0442\u0438"}):(0,Et.jsx)("div",{className:"text-center py-4 text-slate-400",children:"\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u0434\u0430\u0442\u0438 \u043e\u0440\u0435\u043d\u0434\u0438"}):(0,Et.jsx)("div",{className:"text-center py-4 text-slate-400",children:"\u0414\u043e\u0434\u0430\u0439\u0442\u0435 \u0442\u043e\u0432\u0430\u0440\u0438 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u043a\u0438"})})}function Ed(e){let{rentAmount:t=0,depositAmount:r=0,discountPercent:n=0,rentalDays:s=1,itemsCount:a=0,onRecalculate:i}=e;const o=e=>(Number(e)||0).toLocaleString("uk-UA",{maximumFractionDigits:0}),l=t*n/100,c=t-l,d=c+r;return(0,Et.jsxs)(vd,{title:"\ud83d\udcb0 \u041a\u043e\u043c\u0435\u0440\u0446\u0456\u0439\u043d\u0430 \u0437\u0432\u0435\u0434\u0435\u043d\u0430",hint:"\u041e\u0440\u0435\u043d\u0434\u0430 \u2022 \u0437\u043d\u0438\u0436\u043a\u0430 \u2022 \u0437\u0430\u0441\u0442\u0430\u0432\u0430 \u2022 \u0434\u043e \u043e\u043f\u043b\u0430\u0442\u0438",tone:"info",actions:i?[{label:"\ud83d\udd04 \u041f\u0435\u0440\u0435\u0440\u0430\u0445\u0443\u0432\u0430\u0442\u0438",onClick:i}]:[],children:[(0,Et.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Et.jsxs)("div",{className:"rounded-xl bg-slate-50 p-3 text-center",children:[(0,Et.jsxs)("div",{className:"text-xs text-slate-500",children:["\u041e\u0440\u0435\u043d\u0434\u0430 (",s," \u0434\u043d.)"]}),(0,Et.jsxs)("div",{className:"text-lg font-bold text-slate-800",children:["\u20b4 ",o(t)]})]}),n>0&&(0,Et.jsxs)("div",{className:"rounded-xl bg-emerald-50 p-3 text-center",children:[(0,Et.jsxs)("div",{className:"text-xs text-emerald-600",children:["\u0417\u043d\u0438\u0436\u043a\u0430 (",n,"%)"]}),(0,Et.jsxs)("div",{className:"text-lg font-bold text-emerald-700",children:["\u2212\u20b4 ",o(l)]})]}),(0,Et.jsxs)("div",{className:"rounded-xl bg-amber-50 p-3 text-center",children:[(0,Et.jsx)("div",{className:"text-xs text-amber-600",children:"\u0417\u0430\u0441\u0442\u0430\u0432\u0430 (\u0445\u043e\u043b\u0434)"}),(0,Et.jsxs)("div",{className:"text-lg font-bold text-amber-700",children:["\u20b4 ",o(r)]})]}),(0,Et.jsxs)("div",{className:"rounded-xl bg-blue-50 p-3 text-center border-2 border-blue-200",children:[(0,Et.jsx)("div",{className:"text-xs text-blue-600",children:"\u0414\u043e \u043e\u043f\u043b\u0430\u0442\u0438"}),(0,Et.jsxs)("div",{className:"text-lg font-bold text-blue-800",children:["\u20b4 ",o(d)]})]})]}),(0,Et.jsxs)("div",{className:"mt-4 pt-3 border-t border-slate-100 text-sm text-slate-600",children:["\ud83d\udce6 ",a," \u043f\u043e\u0437\u0438\u0446\u0456\u0439 \u2022",n>0?" \u041e\u0440\u0435\u043d\u0434\u0430 \u0437\u0456 \u0437\u043d\u0438\u0436\u043a\u043e\u044e: \u20b4".concat(o(c)):" \u041e\u0440\u0435\u043d\u0434\u0430: \u20b4".concat(o(t))," \u2022 \u0417\u0430\u0441\u0442\u0430\u0432\u0430: \u20b4",o(r)]})]})}function Ad(e){let{items:t=[],rentalDays:r=1,mode:n="view",onUpdateQuantity:s,onRemoveItem:a,onTogglePicked:i,onOpenDamage:o}=e;const l=e=>(Number(e)||0).toLocaleString("uk-UA",{maximumFractionDigits:0}),c="edit"===n,d="pick"===n,u="return"===n,h=t.reduce((e,t)=>{const n=parseInt(t.quantity||t.qty)||0,s=parseFloat(t.price_per_day||t.price)||0,a=parseFloat(t.deposit||t.damage_cost)||0;return e.rent+=s*n*r,e.deposit+=a*n,e.items+=n,e},{rent:0,deposit:0,items:0});return(0,Et.jsx)(vd,{title:"\ud83d\udce6 \u041f\u043e\u0437\u0438\u0446\u0456\u0457 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f (".concat(t.length,")"),hint:"\u0412\u0441\u044c\u043e\u0433\u043e ".concat(h.items," \u043e\u0434. \u2022 \u041e\u0440\u0435\u043d\u0434\u0430: \u20b4").concat(l(h.rent)," \u2022 \u0417\u0430\u0441\u0442\u0430\u0432\u0430: \u20b4").concat(l(h.deposit)),tone:"neutral",children:0===t.length?(0,Et.jsx)("div",{className:"text-center py-6 text-slate-400",children:"\u041d\u0435\u043c\u0430\u0454 \u043f\u043e\u0437\u0438\u0446\u0456\u0439"}):(0,Et.jsx)("div",{className:"space-y-3",children:t.map((e,t)=>(0,Et.jsx)(Id,{item:e,rentalDays:r,canEdit:c,canPick:d,canReturn:u,onUpdateQuantity:s,onRemoveItem:a,onTogglePicked:i,onOpenDamage:o},e.id||t))})})}function Id(e){let{item:t,rentalDays:r,canEdit:n,canPick:s,canReturn:a,onUpdateQuantity:i,onRemoveItem:o,onTogglePicked:l,onOpenDamage:c}=e;const d=e=>(Number(e)||0).toLocaleString("uk-UA",{maximumFractionDigits:0}),u=parseInt(t.quantity||t.qty)||0,h=parseFloat(t.price_per_day||t.price)||0,m=parseFloat(t.deposit||t.damage_cost)||0,p=t.article||t.sku||t.model||"",f=t.name||t.product_name||"",x=t.image||t.photo||"",g=h*u*r,b=m*u,y=parseInt(t.picked_qty)||0,v=y>=u,w=parseInt(t.returned_qty)||0,N=(t.findings||[]).length>0;return(0,Et.jsxs)("div",{className:"\n      rounded-xl border bg-white p-3 flex gap-3\n      ".concat(s&&v?"border-emerald-300 bg-emerald-50":"border-slate-200","\n      ").concat(a&&N?"border-amber-300 bg-amber-50":"","\n    "),children:[(0,Et.jsx)("div",{className:"w-16 h-16 flex-shrink-0 rounded-lg overflow-hidden bg-slate-100",children:x?(0,Et.jsx)("img",{src:xs?xs(x):x,alt:f,className:"w-full h-full object-cover"}):(0,Et.jsx)("div",{className:"w-full h-full flex items-center justify-center text-slate-400 text-xs",children:"\ud83d\uddbc\ufe0f"})}),(0,Et.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Et.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"font-medium text-slate-800 text-sm truncate",children:f}),(0,Et.jsx)("div",{className:"text-xs text-slate-500",children:p})]}),n?(0,Et.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Et.jsx)("button",{onClick:()=>null===i||void 0===i?void 0:i(t.id,Math.max(1,u-1)),className:"w-7 h-7 rounded bg-slate-100 hover:bg-slate-200 text-slate-600",children:"\u2212"}),(0,Et.jsx)("span",{className:"w-8 text-center font-medium",children:u}),(0,Et.jsx)("button",{onClick:()=>null===i||void 0===i?void 0:i(t.id,u+1),className:"w-7 h-7 rounded bg-slate-100 hover:bg-slate-200 text-slate-600",children:"+"})]}):(0,Et.jsxs)("div",{className:"text-sm font-medium text-slate-800",children:[u," \u0448\u0442."]})]}),(0,Et.jsxs)("div",{className:"mt-2 flex items-center gap-3 text-xs",children:[(0,Et.jsxs)("span",{className:"text-slate-600",children:["\u20b4",d(h),"/\u0434\u043d. \xd7 ",r," = ",(0,Et.jsxs)("b",{children:["\u20b4",d(g)]})]}),(0,Et.jsxs)("span",{className:"text-amber-600",children:["\u0417\u0430\u0441\u0442: ",(0,Et.jsxs)("b",{children:["\u20b4",d(b)]})]})]}),s&&(0,Et.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,Et.jsx)("button",{onClick:()=>null===l||void 0===l?void 0:l(t.id),className:"\n                px-3 py-1 rounded-lg text-xs font-medium transition-colors\n                ".concat(v?"bg-emerald-500 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200","\n              "),children:v?"\u2713 \u0417\u0456\u0431\u0440\u0430\u043d\u043e":"\u0417\u0456\u0431\u0440\u0430\u0442\u0438"}),(0,Et.jsxs)("span",{className:"text-xs text-slate-500",children:[y,"/",u]})]}),a&&(0,Et.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,Et.jsxs)("span",{className:"text-xs text-slate-500",children:["\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u043e: ",w,"/",u]}),c&&(0,Et.jsx)("button",{onClick:()=>null===c||void 0===c?void 0:c(t.id),className:"px-2 py-1 rounded text-xs bg-amber-100 text-amber-700 hover:bg-amber-200",children:"\ud83d\udcdd \u0417\u043d\u0430\u0445\u0456\u0434\u043a\u0430"}),N&&(0,Et.jsxs)("span",{className:"text-xs text-amber-600",children:["\u26a0\ufe0f ",t.findings.length," \u0437\u043d\u0430\u0445\u0456\u0434\u043e\u043a"]})]})]}),n&&o&&(0,Et.jsx)("button",{onClick:()=>null===o||void 0===o?void 0:o(t.id),className:"text-rose-500 hover:text-rose-700 text-lg",title:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438",children:"\xd7"})]})}function kd(e){let{onSearch:r,onAddItem:n,searchResults:s=[],isSearching:a=!1}=e;const[i,o]=(0,t.useState)(""),l=e=>(Number(e)||0).toLocaleString("uk-UA",{maximumFractionDigits:0});return(0,Et.jsxs)(vd,{title:"\ud83d\udd0d \u0414\u043e\u0434\u0430\u0442\u0438 \u0442\u043e\u0432\u0430\u0440\u0438",hint:"\u041f\u043e\u0448\u0443\u043a \u043f\u043e SKU \u0430\u0431\u043e \u043d\u0430\u0437\u0432\u0456",tone:"neutral",children:[(0,Et.jsxs)("div",{className:"relative mb-4",children:[(0,Et.jsx)("input",{type:"text",value:i,onChange:e=>{return t=e.target.value,o(t),void(t.length>=2&&(null===r||void 0===r||r(t)));var t},placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c SKU \u0430\u0431\u043e \u043d\u0430\u0437\u0432\u0443 \u0442\u043e\u0432\u0430\u0440\u0443...",className:"w-full rounded-lg border border-slate-200 px-4 py-3 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 outline-none"}),a&&(0,Et.jsx)("div",{className:"absolute right-3 top-3 text-slate-400 text-sm",children:"\u041f\u043e\u0448\u0443\u043a..."})]}),s.length>0?(0,Et.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-80 overflow-auto",children:s.map(e=>(0,Et.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-3 hover:border-blue-300 transition-colors",children:[(0,Et.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,Et.jsxs)("div",{className:"min-w-0",children:[(0,Et.jsx)("div",{className:"font-medium text-sm text-slate-800 truncate",children:e.name}),(0,Et.jsxs)("div",{className:"text-xs text-slate-500",children:["SKU: ",e.sku]})]}),(0,Et.jsxs)("div",{className:"text-right flex-shrink-0",children:[(0,Et.jsxs)("div",{className:"text-sm font-medium text-slate-800",children:["\u20b4 ",l(e.price_per_day),"/\u0434"]}),(0,Et.jsxs)("div",{className:"text-xs text-slate-500",children:["\u0417\u0430\u0441\u0442: \u20b4",l(e.deposit)]})]})]}),(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsxs)("div",{className:"text-xs text-slate-500",children:["\u041d\u0430 \u0441\u043a\u043b\u0430\u0434\u0456: ",e.total_quantity||e.available||0," \u0448\u0442"]}),(0,Et.jsx)("button",{onClick:()=>null===n||void 0===n?void 0:n(e),className:"px-3 py-1.5 rounded-lg bg-blue-600 text-white text-xs font-medium hover:bg-blue-700 transition-colors",children:"+ \u0414\u043e\u0434\u0430\u0442\u0438"})]})]},e.product_id||e.id))}):i.length>=2&&!a?(0,Et.jsx)("div",{className:"text-center py-4 text-slate-400",children:"\u0422\u043e\u0432\u0430\u0440\u0456\u0432 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e"}):(0,Et.jsx)("div",{className:"text-center py-4 text-slate-400",children:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043c\u0456\u043d\u0456\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0438 \u0434\u043b\u044f \u043f\u043e\u0448\u0443\u043a\u0443"})]})}function Td(e){let{notes:r="",clientComment:n="",onUpdateNotes:s,readOnly:a=!1,title:i="\ud83d\udcdd \u041d\u043e\u0442\u0430\u0442\u043a\u0438 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430",hint:o="\u0412\u043d\u0443\u0442\u0440\u0456\u0448\u043d\u0456 \u043d\u043e\u0442\u0430\u0442\u043a\u0438 \u0434\u043b\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u0438"}=e;const[l,c]=(0,t.useState)(r);return(0,Et.jsxs)(vd,{title:i,hint:o,tone:"neutral",actions:!a&&s?[{label:"\ud83d\udcbe \u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438",onClick:()=>{null===s||void 0===s||s(l)}}]:[],children:[n&&(0,Et.jsxs)("div",{className:"mb-3 rounded-lg bg-blue-50 border border-blue-200 p-3",children:[(0,Et.jsx)("div",{className:"text-xs text-blue-600 mb-1",children:"\ud83d\udcac \u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440 \u043a\u043b\u0456\u0454\u043d\u0442\u0430"}),(0,Et.jsx)("div",{className:"text-sm text-slate-800",children:n})]}),a?(0,Et.jsx)("div",{className:"text-sm text-slate-700",children:l||(0,Et.jsx)("span",{className:"text-slate-400",children:"\u041d\u0435\u043c\u0430\u0454 \u043d\u043e\u0442\u0430\u0442\u043e\u043a"})}):(0,Et.jsx)("textarea",{value:l,onChange:e=>c(e.target.value),placeholder:"\u0412\u043d\u0443\u0442\u0440\u0456\u0448\u043d\u0456 \u043d\u043e\u0442\u0430\u0442\u043a\u0438 \u0434\u043b\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u0438...",rows:3,className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 outline-none resize-none"})]})}function Dd(e){let{items:t=[],onToggle:r,title:n="\u2705 \u0427\u0435\u043a\u043b\u0438\u0441\u0442",hint:s="\u041f\u0435\u0440\u0435\u0432\u0456\u0440\u043a\u0430 \u043f\u0435\u0440\u0435\u0434 \u0434\u0456\u0454\u044e",readOnly:a=!1}=e;const i=t.filter(e=>e.checked).length,o=t.filter(e=>e.required).length,l=t.filter(e=>e.required&&e.checked).length,c=l===o,d=i===t.length?"ok":c?"info":"warn";return(0,Et.jsxs)(vd,{title:n,hint:s,tone:d,rightContent:(0,Et.jsxs)("span",{className:"text-sm text-slate-500",children:[i,"/",t.length]}),children:[0===t.length?(0,Et.jsx)("div",{className:"text-center py-4 text-slate-400",children:"\u041d\u0435\u043c\u0430\u0454 \u043f\u0443\u043d\u043a\u0442\u0456\u0432"}):(0,Et.jsx)("div",{className:"space-y-2",children:t.map(e=>(0,Et.jsxs)("label",{className:"\n                flex items-center gap-3 rounded-lg border p-3 cursor-pointer transition-colors\n                ".concat(e.checked?"bg-emerald-50 border-emerald-200":e.required?"bg-amber-50 border-amber-200":"bg-white border-slate-200 hover:bg-slate-50","\n                ").concat(a?"pointer-events-none":"","\n              "),children:[(0,Et.jsx)("input",{type:"checkbox",checked:e.checked,onChange:()=>!a&&(null===r||void 0===r?void 0:r(e.id)),disabled:a,className:"w-5 h-5 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500"}),(0,Et.jsx)("span",{className:"flex-1 text-sm ".concat(e.checked?"line-through text-slate-500":"text-slate-800"),children:e.label}),e.required&&!e.checked&&(0,Et.jsx)(md,{tone:"warn",children:"\u041e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u043e"})]},e.id))}),!c&&o>0&&(0,Et.jsxs)("div",{className:"mt-3 text-xs text-amber-600 bg-amber-50 rounded-lg px-3 py-2",children:["\u26a0\ufe0f \u0417\u0430\u043b\u0438\u0448\u0438\u043b\u043e\u0441\u044c \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0438\u0445: ",o-l]})]})}function Rd(e){let{rentPaid:t=!1,depositPaid:r=!1,rentAmount:n=0,depositAmount:s=0,onMarkRentPaid:a,onMarkDepositPaid:i}=e;const o=e=>(Number(e)||0).toLocaleString("uk-UA",{maximumFractionDigits:0}),l=t&&r,c=l?"ok":"warn";return(0,Et.jsx)(vd,{title:"\ud83d\udcb3 \u041e\u043f\u043b\u0430\u0442\u0430",hint:"\u041f\u0435\u0440\u0435\u0432\u0456\u0440\u043a\u0430 \u043e\u043f\u043b\u0430\u0442\u0438 \u043f\u0435\u0440\u0435\u0434 \u0432\u0438\u0434\u0430\u0447\u0435\u044e",tone:c,children:(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsxs)("div",{className:"\n          rounded-xl border p-4 flex items-center justify-between\n          ".concat(t?"bg-emerald-50 border-emerald-200":"bg-amber-50 border-amber-200","\n        "),children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-sm text-slate-600",children:"\u041e\u0440\u0435\u043d\u0434\u0430"}),(0,Et.jsxs)("div",{className:"text-lg font-bold text-slate-800",children:["\u20b4 ",o(n)]})]}),(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)(md,{tone:t?"ok":"warn",children:t?"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e":"\u041d\u0435 \u043e\u043f\u043b\u0430\u0447\u0435\u043d\u043e"}),!t&&a&&(0,Et.jsx)("button",{onClick:a,className:"px-3 py-1.5 rounded-lg bg-emerald-600 text-white text-sm hover:bg-emerald-700",children:"\u2713 \u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438"})]})]}),(0,Et.jsxs)("div",{className:"\n          rounded-xl border p-4 flex items-center justify-between\n          ".concat(r?"bg-emerald-50 border-emerald-200":"bg-amber-50 border-amber-200","\n        "),children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-sm text-slate-600",children:"\u0417\u0430\u0441\u0442\u0430\u0432\u0430"}),(0,Et.jsxs)("div",{className:"text-lg font-bold text-slate-800",children:["\u20b4 ",o(s)]})]}),(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)(md,{tone:r?"ok":"warn",children:r?"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e":"\u041d\u0435 \u043e\u043f\u043b\u0430\u0447\u0435\u043d\u043e"}),!r&&i&&(0,Et.jsx)("button",{onClick:i,className:"px-3 py-1.5 rounded-lg bg-emerald-600 text-white text-sm hover:bg-emerald-700",children:"\u2713 \u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438"})]})]}),!l&&(0,Et.jsxs)("div",{className:"text-sm text-amber-700 bg-amber-50 rounded-lg p-3 border border-amber-200",children:["\u26a0\ufe0f ",(0,Et.jsx)("b",{children:"UI Gate:"})," \u0412\u0438\u0434\u0430\u0447\u0430 \u0437\u0430\u0431\u043b\u043e\u043a\u043e\u0432\u0430\u043d\u0430 \u0434\u043e \u043f\u043e\u0432\u043d\u043e\u0457 \u043e\u043f\u043b\u0430\u0442\u0438"]})]})})}function Od(e){let{items:t=[],onSetStatus:r,onOpenFinding:n}=e;const s={ok:{label:"OK",color:"bg-emerald-500",tone:"ok"},dirty:{label:"\u0411\u0440\u0443\u0434",color:"bg-amber-500",tone:"warn"},damaged:{label:"\u041f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043e",color:"bg-rose-500",tone:"danger"},missing:{label:"\u041d\u0435\u0441\u0442\u0430\u0447\u0430",color:"bg-slate-500",tone:"neutral"}},a={ok:t.filter(e=>"ok"===e.status).length,dirty:t.filter(e=>"dirty"===e.status).length,damaged:t.filter(e=>"damaged"===e.status).length,missing:t.filter(e=>"missing"===e.status).length,pending:t.filter(e=>!e.status).length},i=0===a.pending?a.dirty>0||a.damaged>0||a.missing>0?"warn":"ok":"info";return(0,Et.jsxs)(vd,{title:"\ud83d\udd0d \u041e\u0446\u0456\u043d\u043a\u0430 \u0441\u0442\u0430\u043d\u0443",hint:"OK / \u0431\u0440\u0443\u0434 / \u043f\u043e\u0448\u043a\u043e\u0434\u0436\u0435\u043d\u043d\u044f / \u043d\u0435\u0441\u0442\u0430\u0447\u0430",tone:i,rightContent:(0,Et.jsxs)("div",{className:"flex gap-2 text-xs",children:[a.ok>0&&(0,Et.jsxs)(md,{tone:"ok",children:[a.ok," OK"]}),a.dirty>0&&(0,Et.jsxs)(md,{tone:"warn",children:[a.dirty," \u0411\u0440\u0443\u0434"]}),a.damaged>0&&(0,Et.jsxs)(md,{tone:"danger",children:[a.damaged," \u041f\u043e\u0448\u043a."]}),a.missing>0&&(0,Et.jsxs)(md,{tone:"neutral",children:[a.missing," \u041d\u0435\u0441\u0442."]})]}),children:[0===t.length?(0,Et.jsx)("div",{className:"text-center py-4 text-slate-400",children:"\u041d\u0435\u043c\u0430\u0454 \u043f\u043e\u0437\u0438\u0446\u0456\u0439 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u043a\u0438"}):(0,Et.jsx)("div",{className:"space-y-2",children:t.map(e=>(0,Et.jsxs)("div",{className:"\n                rounded-xl border p-3\n                ".concat("ok"===e.status?"bg-emerald-50 border-emerald-200":"dirty"===e.status?"bg-amber-50 border-amber-200":"damaged"===e.status?"bg-rose-50 border-rose-200":"missing"===e.status?"bg-slate-100 border-slate-300":"bg-white border-slate-200","\n              "),children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,Et.jsxs)("div",{className:"min-w-0",children:[(0,Et.jsx)("div",{className:"font-medium text-sm text-slate-800 truncate",children:e.name}),(0,Et.jsx)("div",{className:"text-xs text-slate-500",children:e.sku})]}),(0,Et.jsxs)("div",{className:"flex gap-1 flex-shrink-0",children:[Object.entries(s).map(t=>{let[n,s]=t;return(0,Et.jsx)("button",{onClick:()=>null===r||void 0===r?void 0:r(e.id,n),className:"\n                        w-8 h-8 rounded-lg text-xs font-medium transition-all\n                        ".concat(e.status===n?"".concat(s.color," text-white"):"bg-slate-100 text-slate-600 hover:bg-slate-200","\n                      "),title:s.label,children:"ok"===n?"\u2713":"dirty"===n?"\ud83d\udca7":"damaged"===n?"\ud83d\udd28":"\u2753"},n)}),("dirty"===e.status||"damaged"===e.status)&&(0,Et.jsx)("button",{onClick:()=>null===n||void 0===n?void 0:n(e.id),className:"px-2 h-8 rounded-lg bg-amber-100 text-amber-700 text-xs hover:bg-amber-200",children:"\ud83d\udcdd"})]})]}),e.findings&&e.findings.length>0&&(0,Et.jsxs)("div",{className:"mt-2 pt-2 border-t border-slate-200",children:[(0,Et.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"\u0417\u043d\u0430\u0445\u0456\u0434\u043a\u0438:"}),e.findings.map((e,t)=>(0,Et.jsxs)("div",{className:"text-xs text-slate-700",children:["\u2022 ",e.type,": ",e.description," (\u20b4",e.amount||0,")"]},t))]})]},e.id))}),a.pending>0&&(0,Et.jsxs)("div",{className:"mt-3 text-xs text-blue-600 bg-blue-50 rounded-lg px-3 py-2",children:["\u2139\ufe0f \u0417\u0430\u043b\u0438\u0448\u0438\u043b\u043e\u0441\u044c \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u0438\u0442\u0438: ",a.pending," \u043f\u043e\u0437\u0438\u0446\u0456\u0439"]})]})}function Md(e){let{issuedAt:t,issuedBy:r,itemsCount:n,rentAmount:s,depositAmount:a,onPrintInvoice:i}=e;const o=e=>(Number(e)||0).toLocaleString("uk-UA",{maximumFractionDigits:0});return(0,Et.jsxs)(vd,{title:"\ud83d\udce4 \u0424\u0430\u043a\u0442 \u0432\u0438\u0434\u0430\u0447\u0456",hint:"\u0429\u043e \u0432\u0438\u0434\u0430\u043d\u043e \u2022 \u043a\u043e\u043b\u0438 \u2022 \u043a\u0438\u043c (read-only)",tone:"info",actions:i?[{label:"\ud83d\udda8\ufe0f \u0414\u0440\u0443\u043a \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0457",onClick:i}]:[],children:[(0,Et.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Et.jsxs)("div",{className:"rounded-xl bg-slate-50 p-3",children:[(0,Et.jsx)("div",{className:"text-xs text-slate-500",children:"\u0414\u0430\u0442\u0430 \u0432\u0438\u0434\u0430\u0447\u0456"}),(0,Et.jsx)("div",{className:"font-medium text-slate-800",children:(e=>{if(!e)return"\u2014";return new Date(e).toLocaleString("uk-UA",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})(t)})]}),(0,Et.jsxs)("div",{className:"rounded-xl bg-slate-50 p-3",children:[(0,Et.jsx)("div",{className:"text-xs text-slate-500",children:"\u0412\u0438\u0434\u0430\u0432"}),(0,Et.jsx)("div",{className:"font-medium text-slate-800",children:r||"\u2014"})]}),(0,Et.jsxs)("div",{className:"rounded-xl bg-slate-50 p-3",children:[(0,Et.jsx)("div",{className:"text-xs text-slate-500",children:"\u041f\u043e\u0437\u0438\u0446\u0456\u0439"}),(0,Et.jsxs)("div",{className:"font-medium text-slate-800",children:[n||0," \u0448\u0442."]})]}),(0,Et.jsxs)("div",{className:"rounded-xl bg-blue-50 p-3",children:[(0,Et.jsx)("div",{className:"text-xs text-blue-600",children:"\u0421\u0443\u043c\u0430"}),(0,Et.jsxs)("div",{className:"font-bold text-blue-800",children:["\u20b4 ",o(s)]})]})]}),(0,Et.jsxs)("div",{className:"mt-3 pt-3 border-t border-slate-100 text-sm text-slate-600",children:["\ud83d\udcb0 \u0417\u0430\u0441\u0442\u0430\u0432\u0430 \u0443 \u0445\u043e\u043b\u0434\u0456: ",(0,Et.jsxs)("b",{children:["\u20b4",o(a)]})]})]})}const Pd=["WAITING_CONFIRMATION","PROCESSING","READY_FOR_ISSUE","ISSUED","INTAKE","CLOSED"],Ld={id:"demo-1",orderNumber:"OC-7890",status:"WAITING_CONFIRMATION",client:{name:"\u041c\u0430\u0440\u0456\u044f \u0406\u0432\u0430\u043d\u0456\u0432\u043d\u0430 \u041f\u0435\u0442\u0440\u0435\u043d\u043a\u043e",phone:"+380991234567",email:"maria@example.com",tier:"regular",orderCount:5},dates:{issue:"2024-12-15",return:"2024-12-20",issueTime:"11:30\u201312:00",returnTime:"\u0434\u043e 17:00",rentalDays:5},finance:{rent:5e3,deposit:2500,discount:10,prepayment:1e3,rentPaid:!1,depositPaid:!1},items:[{id:1,name:'\u041a\u0440\u0456\u0441\u043b\u043e \u0432\u0435\u043b\u044e\u0440\u043e\u0432\u0435 "\u0411\u0430\u0440\u043e\u043d"',sku:"DI-001",quantity:2,price_per_day:450,deposit:800,image:""},{id:2,name:"\u0421\u0442\u043e\u043b\u0438\u043a \u0436\u0443\u0440\u043d\u0430\u043b\u044c\u043d\u0438\u0439 \u0437\u043e\u043b\u043e\u0442\u0438\u0439",sku:"DI-002",quantity:1,price_per_day:350,deposit:600,image:""},{id:3,name:"\u0412\u0430\u0437\u0430 \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u0430 \u0441\u0440\u0456\u0431\u043d\u0430",sku:"DI-003",quantity:3,price_per_day:150,deposit:400,image:""}],conflicts:[],notes:"\u041a\u043b\u0456\u0454\u043d\u0442 \u043f\u0440\u043e\u0441\u0438\u0432 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0443 \u0434\u043e 10:00",timeline:[{text:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e",at:"14.12.2024 10:30",tone:"blue",user:"\u0421\u0438\u0441\u0442\u0435\u043c\u0430"},{text:"\u0412\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u043d\u0430 \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f",at:"14.12.2024 11:00",tone:"amber",user:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"}]};function Bd(){ge();const[e,r]=(0,t.useState)("WAITING_CONFIRMATION"),[n,s]=(0,t.useState)(!1),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)([{id:1,label:"\u041a\u043b\u0456\u0454\u043d\u0442 \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u0438\u0439",checked:!0,required:!0},{id:2,label:"\u0414\u0430\u0442\u0438 \u043f\u043e\u0433\u043e\u0434\u0436\u0435\u043d\u0456",checked:!0,required:!0},{id:3,label:"\u041e\u043f\u043b\u0430\u0442\u0430 \u043e\u0442\u0440\u0438\u043c\u0430\u043d\u0430",checked:!1,required:!0},{id:4,label:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438 \u043f\u0456\u0434\u043f\u0438\u0441\u0430\u043d\u0456",checked:!1,required:!1}]),[d,u]=(0,t.useState)(Ld.items.map(e=>c(c({},e),{},{status:null,findings:[]}))),h="READY_FOR_ISSUE"===e&&(!n||!a);return(0,Et.jsxs)("div",{className:"min-h-screen bg-slate-100",children:[(0,Et.jsx)("div",{className:"bg-white border-b border-slate-200 px-4 py-3",children:(0,Et.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,Et.jsx)("div",{className:"text-sm text-slate-500 mb-2",children:"Demo: \u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u0456\u0432"}),(0,Et.jsx)("div",{className:"flex flex-wrap gap-2",children:Pd.map(t=>{var n;return(0,Et.jsx)("button",{onClick:()=>r(t),className:"\n                  px-3 py-1.5 rounded-full text-sm font-medium border transition-colors\n                  ".concat(t===e?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-700 border-slate-200 hover:bg-slate-50","\n                "),children:(null===(n=pd[t])||void 0===n?void 0:n.title)||t},t)})})]})}),(0,Et.jsx)(yd,{orderId:Ld.id,orderNumber:Ld.orderNumber,status:e,issueDate:Ld.dates.issue,returnDate:Ld.dates.return,backUrl:"/manager",leftRail:(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsx)(wd,{name:Ld.client.name,phone:Ld.client.phone,email:Ld.client.email,tier:Ld.client.tier,orderCount:Ld.client.orderCount}),(0,Et.jsx)(Nd,{rentAmount:Ld.finance.rent,depositAmount:Ld.finance.deposit,discount:Ld.finance.discount,prepayment:Ld.finance.prepayment,isPaid:n&&a,showGate:"READY_FOR_ISSUE"===e,gateMessage:n&&a?"\u0412\u0441\u0435 \u0433\u043e\u0442\u043e\u0432\u043e":"\u041e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f \u043e\u043f\u043b\u0430\u0442\u0430",gateTone:n&&a?"ok":"warn"}),(0,Et.jsx)(jd,{events:Ld.timeline})]}),onPrimaryAction:()=>{const t=Pd.indexOf(e)+1;t<Pd.length&&r(Pd[t])},onSave:()=>console.log("Save"),primaryDisabled:h,primaryDisabledReason:h?"\u041e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f \u043e\u043f\u043b\u0430\u0442\u0430":"",footerActions:[{label:"\ud83d\udeab \u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438",onClick:()=>console.log("Cancel"),variant:"danger"}],children:(()=>{switch(e){case"WAITING_CONFIRMATION":return(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsx)(_d,{clientName:Ld.client.name,clientPhone:Ld.client.phone,clientEmail:Ld.client.email,discount:Ld.finance.discount,onUpdateDiscount:e=>console.log("Discount:",e)}),(0,Et.jsx)(Cd,{issueDate:Ld.dates.issue,returnDate:Ld.dates.return,issueTime:Ld.dates.issueTime,returnTime:Ld.dates.returnTime,rentalDays:Ld.dates.rentalDays,onUpdate:e=>console.log("Dates:",e)}),(0,Et.jsx)(Sd,{conflicts:Ld.conflicts,hasItems:Ld.items.length>0,hasDates:!0,onCheckConflicts:()=>console.log("Check conflicts")}),(0,Et.jsx)(kd,{onSearch:e=>console.log("Search:",e),onAddItem:e=>console.log("Add:",e),searchResults:[]}),(0,Et.jsx)(Ad,{items:Ld.items,rentalDays:Ld.dates.rentalDays,mode:"edit",onUpdateQuantity:(e,t)=>console.log("Update:",e,t),onRemoveItem:e=>console.log("Remove:",e)}),(0,Et.jsx)(Ed,{rentAmount:Ld.finance.rent,depositAmount:Ld.finance.deposit,discountPercent:Ld.finance.discount,rentalDays:Ld.dates.rentalDays,itemsCount:Ld.items.length}),(0,Et.jsx)(Td,{notes:Ld.notes,onUpdateNotes:e=>console.log("Notes:",e)})]});case"PROCESSING":return(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsx)(Dd,{items:o,onToggle:e=>l(t=>t.map(t=>t.id===e?c(c({},t),{},{checked:!t.checked}):t)),title:"\ud83d\udccb \u0427\u0435\u043a\u043b\u0438\u0441\u0442 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457",hint:"\u041f\u0435\u0440\u0435\u0432\u0456\u0440\u043a\u0430 \u043f\u0435\u0440\u0435\u0434 \u0432\u0438\u0434\u0430\u0447\u0435\u044e"}),(0,Et.jsx)(Ad,{items:Ld.items,rentalDays:Ld.dates.rentalDays,mode:"pick",onTogglePicked:e=>console.log("Toggle picked:",e)}),(0,Et.jsx)(Ed,{rentAmount:Ld.finance.rent,depositAmount:Ld.finance.deposit,discountPercent:Ld.finance.discount,rentalDays:Ld.dates.rentalDays,itemsCount:Ld.items.length}),(0,Et.jsx)(Td,{notes:Ld.notes,title:"\ud83d\udcdd \u041d\u043e\u0442\u0430\u0442\u043a\u0438 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0456\u0457"})]});case"READY_FOR_ISSUE":return(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsx)(Rd,{rentPaid:n,depositPaid:a,rentAmount:Ld.finance.rent,depositAmount:Ld.finance.deposit,onMarkRentPaid:()=>s(!0),onMarkDepositPaid:()=>i(!0)}),(0,Et.jsx)(Dd,{items:o,onToggle:e=>l(t=>t.map(t=>t.id===e?c(c({},t),{},{checked:!t.checked}):t)),title:"\u2705 \u0427\u0435\u043a\u043b\u0438\u0441\u0442 \u0432\u0438\u0434\u0430\u0447\u0456"}),(0,Et.jsx)(Ad,{items:Ld.items,rentalDays:Ld.dates.rentalDays,mode:"view"})]});case"ISSUED":return(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsx)(Md,{issuedAt:"2024-12-15T11:45:00",issuedBy:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u041e\u043b\u0435\u043d\u0430",itemsCount:Ld.items.length,rentAmount:Ld.finance.rent,depositAmount:Ld.finance.deposit,onPrintInvoice:()=>console.log("Print invoice")}),(0,Et.jsx)(Ad,{items:Ld.items,rentalDays:Ld.dates.rentalDays,mode:"view"}),(0,Et.jsx)(Td,{notes:Ld.notes,readOnly:!0,title:"\ud83d\udcdd \u041d\u043e\u0442\u0430\u0442\u043a\u0438 (read-only)"})]});case"INTAKE":return(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsx)(Od,{items:d,onSetStatus:(e,t)=>u(r=>r.map(r=>r.id===e?c(c({},r),{},{status:t}):r)),onOpenFinding:e=>console.log("Open finding:",e)}),(0,Et.jsx)(Ed,{rentAmount:Ld.finance.rent,depositAmount:Ld.finance.deposit,discountPercent:0,rentalDays:Ld.dates.rentalDays,itemsCount:Ld.items.length}),(0,Et.jsx)(Td,{notes:"",title:"\ud83d\udcdd \u041d\u043e\u0442\u0430\u0442\u043a\u0438 \u043f\u0440\u0438\u0439\u043c\u0430\u043d\u043d\u044f",hint:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0456 \u0449\u043e\u0434\u043e \u0441\u0442\u0430\u043d\u0443 \u0442\u043e\u0432\u0430\u0440\u0456\u0432"})]});case"CLOSED":return(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsx)(Md,{issuedAt:"2024-12-15T11:45:00",issuedBy:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u041e\u043b\u0435\u043d\u0430",itemsCount:Ld.items.length,rentAmount:Ld.finance.rent,depositAmount:Ld.finance.deposit}),(0,Et.jsx)(Ad,{items:Ld.items,rentalDays:Ld.dates.rentalDays,mode:"view"}),(0,Et.jsx)(Td,{notes:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e \u0443\u0441\u043f\u0456\u0448\u043d\u043e. \u0412\u0441\u0456 \u0442\u043e\u0432\u0430\u0440\u0438 \u043f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0456 \u0432 \u043d\u0430\u043b\u0435\u0436\u043d\u043e\u043c\u0443 \u0441\u0442\u0430\u043d\u0456.",readOnly:!0,title:"\ud83d\udcdd \u041f\u0456\u0434\u0441\u0443\u043c\u043e\u043a"})]});default:return(0,Et.jsx)("div",{className:"text-center py-8 text-slate-400",children:"\u041d\u0435\u0432\u0456\u0434\u043e\u043c\u0438\u0439 \u0441\u0442\u0430\u0442\u0443\u0441"})}})()})]})}function Fd(e){let{children:t}=e;return localStorage.getItem("token")?(0,Et.jsx)(Et.Fragment,{children:t}):(0,Et.jsx)(Me,{to:"/login",replace:!0})}const Ud=function(){const e=()=>{window.location.href="/dashboard"},t=(e,t)=>{window.location.href="/tasks".concat(e?"?itemId=".concat(e):"")};return(0,Et.jsx)(gt,{children:(0,Et.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,Et.jsxs)(Be,{children:[(0,Et.jsx)(Pe,{path:"/login",element:(0,Et.jsx)(At,{})}),(0,Et.jsx)(Pe,{path:"/dashboard",element:(0,Et.jsx)(Me,{to:"/manager",replace:!0})}),(0,Et.jsx)(Pe,{path:"/manager",element:(0,Et.jsx)(Fd,{children:(0,Et.jsx)(Tt,{})})}),(0,Et.jsx)(Pe,{path:"/orders-archive",element:(0,Et.jsx)(Fd,{children:(0,Et.jsx)(cd,{})})}),(0,Et.jsx)(Pe,{path:"/reaudit",element:(0,Et.jsx)(Fd,{children:(0,Et.jsx)(fs,{onBackToDashboard:e,onNavigateToTasks:t})})}),(0,Et.jsx)(Pe,{path:"/damages",element:(0,Et.jsx)(Fd,{children:(0,Et.jsx)(Us,{})})}),(0,Et.jsx)(Pe,{path:"/tasks",element:(0,Et.jsx)(Fd,{children:(0,Et.jsx)(ra,{onBackToDashboard:e})})}),(0,Et.jsx)(Pe,{path:"/packing",element:(0,Et.jsx)(Fd,{children:(0,Et.jsx)(ha,{onBackToDashboard:e,onNavigateToTasks:t})})}),(0,Et.jsx)(Pe,{path:"/extended-catalog",element:(0,Et.jsx)(Fd,{children:(0,Et.jsx)(Ea,{onBackToDashboard:e})})}),(0,Et.jsx)(Pe,{path:"/calendar",element:(0,Et.jsx)(Fd,{children:(0,Et.jsx)(za,{})})}),(0,Et.jsx)(Pe,{path:"/catalog",element:(0,Et.jsx)(Fd,{children:(0,Et.jsx)(bo,{})})}),(0,Et.jsx)(Pe,{path:"/finance",element:(0,Et.jsx)(Fd,{children:(0,Et.jsx)(Lo,{})})}),(0,Et.jsx)(Pe,{path:"/sync",element:(0,Et.jsx)(Fd,{children:(0,Et.jsx)(ud,{})})}),(0,Et.jsx)(Pe,{path:"/orders/new",element:(0,Et.jsx)(Fd,{children:(0,Et.jsx)($o,{})})}),(0,Et.jsx)(Pe,{path:"/order/:id/view",element:(0,Et.jsx)(Fd,{children:(0,Et.jsx)(tl,{})})}),(0,Et.jsx)(Pe,{path:"/inventory/:sku",element:(0,Et.jsx)(Fd,{children:(0,Et.jsx)(od,{})})}),(0,Et.jsx)(Pe,{path:"/order/:id",element:(0,Et.jsx)(Fd,{children:(0,Et.jsx)($o,{})})}),(0,Et.jsx)(Pe,{path:"/orders/issue",element:(0,Et.jsx)(Fd,{children:(0,Et.jsx)(Rl,{})})}),(0,Et.jsx)(Pe,{path:"/issue/:id",element:(0,Et.jsx)(Fd,{children:(0,Et.jsx)(qc,{})})}),(0,Et.jsx)(Pe,{path:"/orders/return",element:(0,Et.jsx)(Fd,{children:(0,Et.jsx)(ad,{})})}),(0,Et.jsx)(Pe,{path:"/return/:id",element:(0,Et.jsx)(Fd,{children:(0,Et.jsx)(ad,{})})}),(0,Et.jsx)(Pe,{path:"/admin",element:(0,Et.jsx)(Fd,{children:(0,Et.jsx)(xa,{})})}),(0,Et.jsx)(Pe,{path:"/workspace-demo",element:(0,Et.jsx)(Fd,{children:(0,Et.jsx)(Bd,{})})}),(0,Et.jsx)(Pe,{path:"/",element:(0,Et.jsx)(Me,{to:"/dashboard",replace:!0})}),(0,Et.jsx)(Pe,{path:"*",element:(0,Et.jsx)(Me,{to:"/dashboard",replace:!0})})]})})})};n.createRoot(document.getElementById("root")).render((0,Et.jsx)(t.StrictMode,{children:(0,Et.jsx)(Ud,{})}))})()})();
//# sourceMappingURL=main.93c8dde8.js.map