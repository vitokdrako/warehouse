# RentalHub - Product Requirements Document

## üö® –ö–†–ò–¢–ò–ß–ù–û –î–õ–Ø –ê–ì–ï–ù–¢–Ü–í

### –†–û–ë–û–ß–ê –ü–ê–ü–ö–ê: `/app/clean_project/`

**–ù–ï –í–ò–ö–û–†–ò–°–¢–û–í–£–í–ê–¢–ò:** `/app/backend/`, `/app/frontend/` - —Ü–µ –°–¢–ê–†–Ü –ø–∞–ø–∫–∏!

### –ö–æ–º–ø—ñ–ª—è—Ü—ñ—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É:
```bash
cd /app/clean_project/frontend_src
REACT_APP_BACKEND_URL=https://backrentalhub.farforrent.com.ua yarn build
cp -r build/* /app/clean_project/frontend_build/
```

### –ê–±–æ –ø—Ä–æ—Å—Ç–æ:
```bash
/app/clean_project/build.sh
```

---

## –û–ø–∏—Å —Å–∏—Å—Ç–µ–º–∏

**RentalHub** - —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –æ—Ä–µ–Ω–¥–æ—é –¥–µ–∫–æ—Ä—É –¥–ª—è –∫–æ–º–ø–∞–Ω—ñ—ó FarForRent.

### URL –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:
- Frontend: `https://rentalhub.farforrent.com.ua`
- Backend: `https://backrentalhub.farforrent.com.ua`

### –ë–∞–∑–∏ –¥–∞–Ω–∏—Ö:
- **OpenCart DB** (`farforre_opencart`) - —Ç–æ–≤–∞—Ä–∏, –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- **RentalHub DB** (`farforre_rentalhub`) - —Ñ—ñ–Ω–∞–Ω—Å–∏, –∫–∞—Ä—Ç–∫–∏ –≤–∏–¥–∞—á—ñ/–ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
/app/clean_project/
‚îú‚îÄ‚îÄ backend/                 # FastAPI —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ server.py           # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª
‚îÇ   ‚îú‚îÄ‚îÄ routes/             # API endpoints (52 —Ñ–∞–π–ª–∏)
‚îÇ   ‚îú‚îÄ‚îÄ services/           # –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ templates/          # Jinja2 —à–∞–±–ª–æ–Ω–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
‚îÇ   ‚îî‚îÄ‚îÄ .env                # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îÇ
‚îú‚îÄ‚îÄ frontend_src/           # React + TypeScript
‚îÇ   ‚îú‚îÄ‚îÄ src/pages/          # –°—Ç–æ—Ä—ñ–Ω–∫–∏ (22 —Ñ–∞–π–ª–∏)
‚îÇ   ‚îú‚îÄ‚îÄ src/components/     # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ .env                # REACT_APP_BACKEND_URL
‚îÇ
‚îú‚îÄ‚îÄ frontend_build/         # –°–∫–æ–º–ø—ñ–ª—å–æ–≤–∞–Ω–∏–π —Ñ—Ä–æ–Ω—Ç (–¥–ª—è –¥–µ–ø–ª–æ—é)
‚îÇ
‚îú‚îÄ‚îÄ docs/                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ AGENT_RULES.md          # –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∞–≥–µ–Ω—Ç—ñ–≤
‚îî‚îÄ‚îÄ build.sh                # –°–∫—Ä–∏–ø—Ç –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó
```

---

## –û—Å–Ω–æ–≤–Ω—ñ –º–æ–¥—É–ª—ñ

### 1. –§—ñ–Ω–∞–Ω—Å–æ–≤–∏–π –∫–∞–±—ñ–Ω–µ—Ç (`FinanceHub.jsx`)
- –û—Ä–µ–Ω–¥–∞, –∑–∞—Å—Ç–∞–≤–∞, —à–∫–æ–¥–∞, –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–Ω—è
- –ó–Ω–∏–∂–∫–∏ (–∑–∞–ø–∏—Å—É—é—Ç—å—Å—è –ø—Ä–∏ –≤–∏–¥–∞—á—ñ, —Ä–µ–¥–∞–≥—É—é—Ç—å—Å—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º)
- **–§—ñ–Ω –∫–∞–±—ñ–Ω–µ—Ç = –¥–∂–µ—Ä–µ–ª–æ –ø—Ä–∞–≤–¥–∏ –¥–ª—è —Å—É–º**

### 2. –ö–∞—Ä—Ç–∫–∏ –≤–∏–¥–∞—á—ñ (`IssueCardWorkspace.jsx`)
- –ö–æ–º–ø–ª–µ–∫—Ç–∞—Ü—ñ—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- –§–æ—Ç–æ –¥–æ/–ø—ñ—Å–ª—è
- –í–∏–¥–∞–ª–µ–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ–π

### 3. –ö–∞—Ä—Ç–∫–∏ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è (`ReturnOrderWorkspace.jsx`)
- –ü—Ä–∏–π–º–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤
- –ß–∞—Å—Ç–∫–æ–≤–µ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è
- –§—ñ–∫—Å–∞—Ü—ñ—è —à–∫–æ–¥–∏

### 4. –ö–∞–ª–µ–Ω–¥–∞—Ä (`UnifiedCalendarNew.jsx`)
- –í–∏–¥–∞—á—ñ/–ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è
- –ó–∞–≤–¥–∞–Ω–Ω—è
- –ü—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–Ω—è

---

## –û—Å—Ç–∞–Ω–Ω—ñ –∑–º—ñ–Ω–∏ (03.02.2026)

### –í–∏–∫–æ–Ω–∞–Ω–æ:
- ‚úÖ **–ù–û–í–ê –ê–†–•–Ü–¢–ï–ö–¢–£–†–ê –í–ï–†–°–Ü–ô –ß–ê–°–¢–ö–û–í–ò–• –ü–û–í–ï–†–ù–ï–ù–¨ (v2):**
  - **–í–ê–ñ–õ–ò–í–û:** –ù–µ —Å—Ç–≤–æ—Ä—é—î–º–æ –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü—ñ `orders` (—Ü–µ OpenCart!)
  - –ù–æ–≤—ñ —Ç–∞–±–ª–∏—Ü—ñ: `partial_return_versions`, `partial_return_version_items`
  - –í–µ—Ä—Å—ñ–æ–Ω—É–≤–∞–Ω–Ω—è: OC-7266 ‚Üí OC-7266(1) ‚Üí OC-7266(2) —ñ —Ç.–¥.
  - API endpoints: `/api/return-versions/*`
  - –ù–æ–≤–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞: `/partial-return/{versionId}`
  - –î–∞—à–±–æ—Ä–¥ –ø–æ–∫–∞–∑—É—î —Ç—ñ–ª—å–∫–∏ –æ—Å—Ç–∞–Ω–Ω—é –∞–∫—Ç–∏–≤–Ω—É –≤–µ—Ä—Å—ñ—é
  - –Ü—Å—Ç–æ—Ä—ñ—è –≤–µ—Ä—Å—ñ–π –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –∞—Ä—Ö—ñ–≤—ñ
- ‚úÖ **Dashboard:** –ö–æ–ª–æ–Ω–∫–∞ "–ß–∞—Å—Ç–∫–æ–≤–µ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è" —Ç–µ–ø–µ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –∑ `partial_return_versions`
- ‚úÖ **–ü–æ–∫—Ä–∞—â–µ–Ω–∏–π Conflict Checker** - –ø–æ–∫–∞–∑—É—î –¥–µ—Ç–∞–ª—ñ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤
- ‚úÖ **–ü–æ–∫—Ä–∞—â–µ–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥** - –¥–µ—Ç–∞–ª—ñ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ
- ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ accessibility warning (DialogDescription)
- ‚úÖ –ë–ª–æ–∫–∏ –®–∫–æ–¥–∞/–ü—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–Ω—è —É —Ñ—ñ–Ω –∫–∞–±—ñ–Ω–µ—Ç—ñ
- ‚úÖ –ó–Ω–∏–∂–∫–∞ –∑–∞–ø–∏—Å—É—î—Ç—å—Å—è –ø—Ä–∏ –≤–∏–¥–∞—á—ñ —É fin_payments
- ‚úÖ –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∑–Ω–∏–∂–∫–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
- ‚úÖ –í–∏–¥–∞–ª–µ–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ–π –∑ –∫–∞—Ä—Ç–∫–∏ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü—ñ—ó
- ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–º–∏–ª–∫–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ —á–∏—Å—Ç–∏–π –ø—Ä–æ–µ–∫—Ç –±–µ–∑ –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏—Ö —Ñ–∞–π–ª—ñ–≤

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —á–∞—Å—Ç–∫–æ–≤–∏—Ö –ø–æ–≤–µ—Ä–Ω–µ–Ω—å:
```
–û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è (OpenCart):
  orders.order_id = 7266
  orders.order_number = "OC-7266"
  
–ü—Ä–∏ —á–∞—Å—Ç–∫–æ–≤–æ–º—É –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—ñ:
  1. orders.status ‚Üí "returned" (–∞—Ä—Ö—ñ–≤)
  2. partial_return_versions:
     - version_id = 1
     - parent_order_id = 7266
     - display_number = "OC-7266(1)"
     - status = "active"
  
–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º—É —á–∞—Å—Ç–∫–æ–≤–æ–º—É –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—ñ:
  3. partial_return_versions[1].status ‚Üí "archived"
  4. partial_return_versions:
     - version_id = 2
     - display_number = "OC-7266(2)"
     - status = "active"
```

### –í —Ä–æ–±–æ—Ç—ñ:
- [ ] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —Ñ—ñ–Ω –∫–∞–±—ñ–Ω–µ—Ç–æ–º –¥–ª—è –Ω–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–Ω—è
- [ ] –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–µ—Ä—Å—ñ—ó –∑ ReturnOrderWorkspace (–º–æ–¥–∞–ª–∫–∞)

### Backlog:
- [ ] –ë–∞–≥ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å—É –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—ñ (–æ—á—ñ–∫—É—î –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏)
- [ ] RBAC (–ø–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø—É)
- [ ] –ú—ñ—Å—è—á–Ω–∏–π —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–∏–π –∑–≤—ñ—Ç
- [ ] Telegram –±–æ—Ç
- [ ] –¶–∏—Ñ—Ä–æ–≤–∏–π –ø—ñ–¥–ø–∏—Å

---

## Credentials –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

- Email: `vitokdrako@gmail.com`
- Password: `test123`
