═══════════════════════════════════════════════════════════════
  RENTAL HUB - ВЕРСІЯ 20 - ОНОВЛЕННЯ
  Дата збірки: 10 грудня 2024
═══════════════════════════════════════════════════════════════

🆕 ГОЛОВНІ ЗМІНИ:

1. ЄДИНА КОРПОРАТИВНА ШАПКА
   ✅ Створено компонент CorporateHeader для всіх кабінетів
   ✅ Єдиний дизайн: логотип RH + "Rental Hub" + назва кабінету
   ✅ Застосовано до: Dashboard, Кабінет шкоди, Кабінет переобліку

2. КАБІНЕТ ШКОДИ - ПОВНА ПЕРЕРОБКА
   ✅ Додано вкладки: Головна, Мийка, Реставрація, Хімчистка
   ✅ Виправлено API URL (REACT_APP_BACKEND_URL)
   ✅ Автоматичне завантаження items для кожного кейсу
   ✅ Зафіксований каркас (завжди видно шапку навіть без даних)
   ✅ Три стани: завантаження, порожньо, з даними
   
3. АВТОМАТИЧНЕ СТВОРЕННЯ DAMAGE CASES
   ✅ При поверненні брудних товарів → автоматично створюється кейс
   ✅ При поверненні пошкоджених товарів → автоматично створюється кейс
   ✅ Інформація про клієнта автоматично заповнюється з замовлення
   ✅ Оцінка вартості збитків (брудні: 10%, пошкоджені: 50%)

4. USER ACTION TRACKING
   ✅ Відстеження дій користувачів у всіх операціях
   ✅ Поля: created_by_id, received_by_id, checked_by_id
   ✅ Додано до: orders, issue_cards, return_cards, laundry

5. МОБІЛЬНА АДАПТИВНІСТЬ
   ✅ Виправлено календар на мобільних
   ✅ Виправлено картки видачі на мобільних

6. ВИПРАВЛЕННЯ PRODUCTION ENVIRONMENT
   ✅ Видалено hardcoded URLs (заміна на environment variables)
   ✅ Виправлено 403 помилки в Admin Panel

═══════════════════════════════════════════════════════════════

📁 СТРУКТУРА DEPLOYMENT:

/версія_20_deployment/
├── build/                    ← Frontend (React production build)
├── backend_files/            ← Backend (FastAPI, Python)
│   ├── routes/              ← API endpoints
│   ├── utils/               ← Helper functions
│   ├── server.py            ← Main FastAPI app
│   └── requirements.txt     ← Python dependencies
├── ШВИДКИЙ_СТАРТ.txt        ← Інструкція по встановленню
└── ЗМІНИ_ВЕРСІЯ_20.txt      ← Цей файл

═══════════════════════════════════════════════════════════════

🗄️ ЗМІНИ В БАЗІ ДАНИХ:

ТАБЛИЦЯ: damages
  - customer_name (varchar)   ← Ім'я клієнта з замовлення
  - customer_phone (varchar)  ← Телефон клієнта
  - event_name (varchar)      ← Назва події
  - order_number (varchar)    ← Номер замовлення

ТАБЛИЦЯ: damage_items
  - qty (int)                 ← Кількість пошкоджених одиниць
  - base_value (decimal)      ← Базова вартість товару
  - estimate_value (decimal)  ← Оцінка збитків

ТАБЛИЦЯ: return_cards
  - created_by_id (int)       ← ID користувача який створив
  - received_by_id (int)      ← ID користувача який прийняв
  - checked_by_id (int)       ← ID користувача який перевірив

ТАБЛИЦЯ: issue_cards
  - created_by_id (int)       ← ID користувача який створив

═══════════════════════════════════════════════════════════════

🔧 ТЕХНІЧНІ ДЕТАЛІ:

BACKEND:
  - FastAPI 0.109.0
  - Python 3.11+
  - MySQL/MariaDB
  - Автоматичне створення damage cases в routes/return_cards.py

FRONTEND:
  - React 18.3.1
  - TypeScript 4.9.5
  - Tailwind CSS
  - Shadcn UI компоненти

ENVIRONMENT VARIABLES:
  Frontend (.env):
    - REACT_APP_BACKEND_URL     ← URL backend API
  
  Backend (.env):
    - MONGO_URL                 ← MongoDB connection string
    - DB_NAME                   ← Database name

═══════════════════════════════════════════════════════════════

⚠️ ВАЖЛИВО ПРИ ОНОВЛЕННІ:

1. Зробіть backup бази даних перед оновленням
2. Перевірте що .env файли на сервері мають правильні значення
3. Backend має бути на порту 8001, frontend на 3000
4. Nginx має проксіювати /api/* на backend:8001

═══════════════════════════════════════════════════════════════

📝 ВІДОМІ ОБМЕЖЕННЯ:

1. Вкладки "Мийка", "Реставрація", "Хімчистка" - в розробці
2. FinanceCabinet, PackingCabinet, TasksCabinet - ще не мають єдиної шапки

═══════════════════════════════════════════════════════════════

🐛 ВИПРАВЛЕНІ БАГИ:

✅ Кабінет шкоди не завантажував items
✅ Damage cases не створювались автоматично при поверненні
✅ Hardcoded URLs викликали 403 помилки
✅ Мобільна версія календаря працювала некоректно
✅ API_URL використовувала неправильну змінну середовища

═══════════════════════════════════════════════════════════════

Для додаткової інформації або підтримки:
📧 Email: support@rentalhub.ua
